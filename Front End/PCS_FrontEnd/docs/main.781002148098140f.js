"use strict";(self.webpackChunkPCS_FrontEnd=self.webpackChunkPCS_FrontEnd||[]).push([[179],{792:(La,Zs,Hi)=>{function We(e){return"function"==typeof e}function Js(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const zn=Js(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Z(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class xe{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(We(r))try{r()}catch(s){t=s instanceof zn?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Ha(s)}catch(a){t=t??[],a instanceof zn?t=[...t,...a.errors]:t.push(a)}}if(t)throw new zn(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Ha(t);else{if(t instanceof xe){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Z(n,t)}remove(t){const{_finalizers:n}=this;n&&Z(n,t),t instanceof xe&&t._removeParent(this)}}xe.EMPTY=(()=>{const e=new xe;return e.closed=!0,e})();const Nt=xe.EMPTY;function Ba(e){return e instanceof xe||e&&"closed"in e&&We(e.remove)&&We(e.add)&&We(e.unsubscribe)}function Ha(e){We(e)?e():e.unsubscribe()}const or={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ji={setTimeout(e,t,...n){const{delegate:r}=ji;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=ji;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function ja(e){ji.setTimeout(()=>{const{onUnhandledError:t}=or;if(!t)throw e;t(e)})}function Va(){}const eo=to("C",void 0,void 0);function to(e,t,n){return{kind:e,value:t,error:n}}let Wn=null;function Vi(e){if(or.useDeprecatedSynchronousErrorHandling){const t=!Wn;if(t&&(Wn={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=Wn;if(Wn=null,n)throw r}}else e()}class ro extends xe{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Ba(t)&&t.add(this)):this.destination=so}static create(t,n,r){return new Ot(t,n,r)}next(t){this.isStopped?$(function nc(e){return to("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?$(function tc(e){return to("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?$(eo,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ui=Function.prototype.bind;function io(e,t){return Ui.call(e,t)}class R{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){oi(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){oi(r)}else oi(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){oi(n)}}}class Ot extends ro{constructor(t,n,r){let i;if(super(),We(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&or.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&io(t.next,s),error:t.error&&io(t.error,s),complete:t.complete&&io(t.complete,s)}):i=t}this.destination=new R(i)}}function oi(e){or.useDeprecatedSynchronousErrorHandling?function no(e){or.useDeprecatedSynchronousErrorHandling&&Wn&&(Wn.errorThrown=!0,Wn.error=e)}(e):ja(e)}function $(e,t){const{onStoppedNotification:n}=or;n&&ji.setTimeout(()=>n(e,t))}const so={closed:!0,next:Va,error:function _p(e){throw e},complete:Va},ai="function"==typeof Symbol&&Symbol.observable||"@@observable";function rn(e){return e}function rc(e){return 0===e.length?rn:1===e.length?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}let nt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function li(e){return e&&e instanceof ro||function ic(e){return e&&We(e.next)&&We(e.error)&&We(e.complete)}(e)&&Ba(e)}(n)?n:new Ot(n,r,i);return Vi(()=>{const{operator:a,source:u}=this;s.add(a?a.call(s,u):u?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=sn(r))((i,s)=>{const a=new Ot({next:u=>{try{n(u)}catch(d){s(d),a.unsubscribe()}},error:s,complete:i});this.subscribe(a)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[ai](){return this}pipe(...n){return rc(n)(this)}toPromise(n){return new(n=sn(n))((r,i)=>{let s;this.subscribe(a=>s=a,a=>i(a),()=>r(s))})}}return e.create=t=>new e(t),e})();function sn(e){var t;return null!==(t=e??or.Promise)&&void 0!==t?t:Promise}const ui=Js(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let I=(()=>{class e extends nt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new $a(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ui}next(n){Vi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Vi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Vi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?Nt:(this.currentObservers=null,s.push(n),new xe(()=>{this.currentObservers=null,Z(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new nt;return n.source=this,n}}return e.create=(t,n)=>new $a(t,n),e})();class $a extends I{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:Nt}}function oo(e){return We(e?.lift)}function lt(e){return t=>{if(oo(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ut(e,t,n,r,i){return new sc(e,t,n,r,i)}class sc extends ro{constructor(t,n,r,i,s,a){super(t),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=n?function(u){try{n(u)}catch(d){t.error(d)}}:super._next,this._error=i?function(u){try{i(u)}catch(d){t.error(d)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(u){t.error(u)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function be(e,t){return lt((n,r)=>{let i=0;n.subscribe(ut(r,s=>{r.next(e.call(t,s,i++))}))})}function _n(e){return this instanceof _n?(this.v=e,this):new _n(e)}function Tn(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(b){r[b]&&(i[b]=function(M){return new Promise(function(A,F){s.push([b,M,A,F])>1||u(b,M)})})}function u(b,M){try{!function d(b){b.value instanceof _n?Promise.resolve(b.value.v).then(g,_):w(s[0][2],b)}(r[b](M))}catch(A){w(s[0][3],A)}}function g(b){u("next",b)}function _(b){u("throw",b)}function w(b,M){b(M),s.shift(),s.length&&u(s[0][0],s[0][1])}}function ar(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function di(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(a){return new Promise(function(u,d){!function i(s,a,u,d){Promise.resolve(d).then(function(g){s({value:g,done:u})},a)}(u,d,(a=e[s](a)).done,a.value)})}}}const co=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function ho(e){return We(e?.then)}function hi(e){return We(e[ai])}function fo(e){return Symbol.asyncIterator&&We(e?.[Symbol.asyncIterator])}function xn(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const $i=function hc(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function qa(e){return We(e?.[$i])}function Ya(e){return Tn(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:i}=yield _n(n.read());if(i)return yield _n(void 0);yield yield _n(r)}}finally{n.releaseLock()}})}function G(e){return We(e?.getReader)}function Ee(e){if(e instanceof nt)return e;if(null!=e){if(hi(e))return function Ut(e){return new nt(t=>{const n=e[ai]();if(We(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(co(e))return function fi(e){return new nt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(ho(e))return function Ka(e){return new nt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,ja)})}(e);if(fo(e))return Gi(e);if(qa(e))return function po(e){return new nt(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(G(e))return function Xa(e){return Gi(Ya(e))}(e)}throw xn(e)}function Gi(e){return new nt(t=>{(function Qa(e,t){var n,r,i,s;return function ac(e,t,n,r){return new(n||(n=Promise))(function(s,a){function u(_){try{g(r.next(_))}catch(w){a(w)}}function d(_){try{g(r.throw(_))}catch(w){a(w)}}function g(_){_.done?s(_.value):function i(s){return s instanceof n?s:new n(function(a){a(s)})}(_.value).then(u,d)}g((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=ar(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(a){i={error:a}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function $t(e,t,n,r=0,i=!1){const s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function gt(e,t,n=1/0){return We(t)?gt((r,i)=>be((s,a)=>t(r,s,i,a))(Ee(e(r,i))),n):("number"==typeof t&&(n=t),lt((r,i)=>function fc(e,t,n,r,i,s,a,u){const d=[];let g=0,_=0,w=!1;const b=()=>{w&&!d.length&&!g&&t.complete()},M=F=>g<r?A(F):d.push(F),A=F=>{s&&t.next(F),g++;let B=!1;Ee(n(F,_++)).subscribe(ut(t,H=>{i?.(H),s?M(H):t.next(H)},()=>{B=!0},void 0,()=>{if(B)try{for(g--;d.length&&g<r;){const H=d.shift();a?$t(t,a,()=>A(H)):A(H)}b()}catch(H){t.error(H)}}))};return e.subscribe(ut(t,M,()=>{w=!0,b()})),()=>{u?.()}}(r,i,e,n)))}function lr(e=1/0){return gt(rn,e)}const An=new nt(e=>e.complete());function zi(e){return e[e.length-1]}function Fr(e){return function Ja(e){return e&&We(e.schedule)}(zi(e))?e.pop():void 0}function Lr(e,t=0){return lt((n,r)=>{n.subscribe(ut(r,i=>$t(r,e,()=>r.next(i),t),()=>$t(r,e,()=>r.complete(),t),i=>$t(r,e,()=>r.error(i),t)))})}function ur(e,t=0){return lt((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function mi(e,t){if(!e)throw new Error("Iterable cannot be null");return new nt(n=>{$t(n,t,()=>{const r=e[Symbol.asyncIterator]();$t(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function rt(e,t){return t?function go(e,t){if(null!=e){if(hi(e))return function gi(e,t){return Ee(e).pipe(ur(t),Lr(t))}(e,t);if(co(e))return function Wi(e,t){return new nt(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(ho(e))return function gc(e,t){return Ee(e).pipe(ur(t),Lr(t))}(e,t);if(fo(e))return mi(e,t);if(qa(e))return function qi(e,t){return new nt(n=>{let r;return $t(n,t,()=>{r=e[$i](),$t(n,t,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(a){return void n.error(a)}s?n.complete():n.next(i)},0,!0)}),()=>We(r?.return)&&r.return()})}(e,t);if(G(e))return function Yi(e,t){return mi(Ya(e),t)}(e,t)}throw xn(e)}(e,t):Ee(e)}function Ki(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new Ot({next:()=>{r.unsubscribe(),e()}});return t(...n).subscribe(r)}function Le(e){for(let t in e)if(e[t]===Le)return t;throw Error("Could not find renamed property on target object.")}function je(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(je).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function vi(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const yi=Le({__forward_ref__:Le});function qn(e){return e.__forward_ref__=qn,e.toString=function(){return je(this())},e}function le(e){return function vo(e){return"function"==typeof e&&e.hasOwnProperty(yi)&&e.__forward_ref__===qn}(e)?e():e}class X extends Error{constructor(t,n){super(function _i(e,t){return`NG0${Math.abs(e)}${t?": "+t.trim():""}`}(t,n)),this.code=t}}function Pe(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function pe(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function Br(e,t){throw new X(-201,!1)}function Gt(e,t){null==e&&function Oe(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function oe(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function zt(e){return{providers:e.providers||[],imports:e.imports||[]}}function Qi(e){return _o(e,Zi)||_o(e,jr)}function _o(e,t){return e.hasOwnProperty(t)?e[t]:null}function Co(e){return e&&(e.hasOwnProperty(Ji)||e.hasOwnProperty(al))?e[Ji]:null}const Zi=Le({\u0275prov:Le}),Ji=Le({\u0275inj:Le}),jr=Le({ngInjectableDef:Le}),al=Le({ngInjectorDef:Le});var ue=(()=>((ue=ue||{})[ue.Default=0]="Default",ue[ue.Host=1]="Host",ue[ue.Self=2]="Self",ue[ue.SkipSelf=4]="SkipSelf",ue[ue.Optional=8]="Optional",ue))();let cn;function Wt(e){const t=cn;return cn=e,t}function Cn(e,t,n){const r=Qi(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&ue.Optional?null:void 0!==t?t:void Br(je(e))}function Ft(e){return{toString:e}.toString()}var wt=(()=>((wt=wt||{})[wt.OnPush=0]="OnPush",wt[wt.Default=1]="Default",wt))(),hn=(()=>{return(e=hn||(hn={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",hn;var e})();const ze=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Yn={},Ae=[],Vr=Le({\u0275cmp:Le}),Do=Le({\u0275dir:Le}),Ci=Le({\u0275pipe:Le}),Kn=Le({\u0275mod:Le}),qt=Le({\u0275fac:Le}),fn=Le({__NG_ELEMENT_ID__:Le});let ul=0;function Yt(e){return Ft(()=>{const n=!0===e.standalone,r={},i={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===wt.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&e.dependencies||null,getStandaloneInjector:null,selectors:e.selectors||Ae,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||hn.Emulated,id:"c"+ul++,styles:e.styles||Ae,_:null,setInput:null,schemas:e.schemas||null,tView:null},s=e.dependencies,a=e.features;return i.inputs=Ur(e.inputs,r),i.outputs=Ur(e.outputs),a&&a.forEach(u=>u(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(Pn).filter(bo):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(xt).filter(bo):null,i})}function Pn(e){return Fe(e)||bt(e)}function bo(e){return null!==e}function Tt(e){return Ft(()=>({type:e.type,bootstrap:e.bootstrap||Ae,declarations:e.declarations||Ae,imports:e.imports||Ae,exports:e.exports||Ae,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function Ur(e,t){if(null==e)return Yn;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const Dt=Yt;function Fe(e){return e[Vr]||null}function bt(e){return e[Do]||null}function xt(e){return e[Ci]||null}function Kt(e,t){const n=e[Kn]||null;if(!n&&!0===t)throw new Error(`Type ${je(e)} does not have '\u0275mod' property.`);return n}function At(e){return Array.isArray(e)&&"object"==typeof e[1]}function gn(e){return Array.isArray(e)&&!0===e[1]}function ss(e){return 0!=(8&e.flags)}function os(e){return 2==(2&e.flags)}function as(e){return 1==(1&e.flags)}function _e(e){return null!==e.template}function bc(e){return 0!=(256&e[2])}function vr(e,t){return e.hasOwnProperty(qt)?e[qt]:null}class Ec{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function pl(e){return e.type.prototype.ngOnChanges&&(e.setInput=Ic),Mc}function Mc(){const e=ml(this),t=e?.current;if(t){const n=e.previous;if(n===Yn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Ic(e,t,n,r){const i=ml(e)||function Tc(e,t){return e[gl]=t}(e,{previous:Yn,current:null}),s=i.current||(i.current={}),a=i.previous,u=this.declaredInputs[n],d=a[u];s[u]=new Ec(d&&d.currentValue,t,a===Yn),e[r]=t}const gl="__ngSimpleChanges__";function ml(e){return e[gl]||null}function l(e){for(;Array.isArray(e);)e=e[0];return e}function m(e,t){return l(t[e.index])}function D(e,t){const n=t[e];return At(n)?n:n[0]}function E(e){return 64==(64&e[2])}function S(e,t){return null==t?null:e[t]}function O(e){e[18]=0}function k(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const N={lFrame:rg(null),bindingsEnabled:!0};function re(){return N.bindingsEnabled}function P(){return N.lFrame.lView}function z(){return N.lFrame.tView}function me(){let e=Rt();for(;null!==e&&64===e.type;)e=e.parent;return e}function Rt(){return N.lFrame.currentTNode}function He(e,t){const n=N.lFrame;n.currentTNode=e,n.isParent=t}function It(){return N.lFrame.isParent}function qw(e,t){const n=N.lFrame;n.bindingIndex=n.bindingRootIndex=e,Ac(t)}function Ac(e){N.lFrame.currentDirectiveIndex=e}function Pc(e){N.lFrame.currentQueryIndex=e}function Kw(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function tg(e,t,n){if(n&ue.SkipSelf){let i=t,s=e;for(;!(i=i.parent,null!==i||n&ue.Host||(i=Kw(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;t=i,e=s}const r=N.lFrame=ng();return r.currentTNode=t,r.lView=e,!0}function kc(e){const t=ng(),n=e[1];N.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function ng(){const e=N.lFrame,t=null===e?null:e.child;return null===t?rg(e):t}function rg(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function ig(){const e=N.lFrame;return N.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const sg=ig;function Nc(){const e=ig();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Wr(e){N.lFrame.selectedIndex=e}function vl(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const s=e.data[n].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:u,ngAfterViewInit:d,ngAfterViewChecked:g,ngOnDestroy:_}=s;a&&(e.contentHooks||(e.contentHooks=[])).push(-n,a),u&&((e.contentHooks||(e.contentHooks=[])).push(n,u),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,u)),d&&(e.viewHooks||(e.viewHooks=[])).push(-n,d),g&&((e.viewHooks||(e.viewHooks=[])).push(n,g),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,g)),null!=_&&(e.destroyHooks||(e.destroyHooks=[])).push(n,_)}}function yl(e,t,n){og(e,t,3,n)}function _l(e,t,n,r){(3&e[2])===n&&og(e,t,n,r)}function Oc(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function og(e,t,n,r){const s=r??-1,a=t.length-1;let u=0;for(let d=void 0!==r?65535&e[18]:0;d<a;d++)if("number"==typeof t[d+1]){if(u=t[d],null!=r&&u>=r)break}else t[d]<0&&(e[18]+=65536),(u<s||-1==s)&&(iD(e,n,t,d),e[18]=(4294901760&e[18])+d+2),d++}function iD(e,t,n,r){const i=n[r]<0,s=n[r+1],u=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(u)}finally{}}}else try{s.call(u)}finally{}}class To{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function Cl(e,t,n){let r=0;for(;r<n.length;){const i=n[r];if("number"==typeof i){if(0!==i)break;r++;const s=n[r++],a=n[r++],u=n[r++];e.setAttribute(t,a,u,s)}else{const s=i,a=n[++r];lg(s)?e.setProperty(t,s,a):e.setAttribute(t,s,a),r++}}return r}function ag(e){return 3===e||4===e||6===e}function lg(e){return 64===e.charCodeAt(0)}function wl(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||ug(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function ug(e,t,n,r,i){let s=0,a=e.length;if(-1===t)a=-1;else for(;s<e.length;){const u=e[s++];if("number"==typeof u){if(u===t){a=-1;break}if(u>t){a=s-1;break}}}for(;s<e.length;){const u=e[s];if("number"==typeof u)break;if(u===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==a&&(e.splice(a,0,t),s=a+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function cg(e){return-1!==e}function cs(e){return 32767&e}function ds(e,t){let n=function uD(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let Lc=!0;function Dl(e){const t=Lc;return Lc=e,t}let cD=0;const Qn={};function Ao(e,t){const n=Hc(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Bc(r.data,e),Bc(t,null),Bc(r.blueprint,null));const i=bl(e,t),s=e.injectorIndex;if(cg(i)){const a=cs(i),u=ds(i,t),d=u[1].data;for(let g=0;g<8;g++)t[s+g]=u[a+g]|d[a+g]}return t[s+8]=i,s}function Bc(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Hc(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function bl(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){if(r=_g(i),null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Sl(e,t,n){!function dD(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(fn)&&(r=n[fn]),null==r&&(r=n[fn]=cD++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function fg(e,t,n){if(n&ue.Optional||void 0!==e)return e;Br()}function pg(e,t,n,r){if(n&ue.Optional&&void 0===r&&(r=null),0==(n&(ue.Self|ue.Host))){const i=e[9],s=Wt(void 0);try{return i?i.get(t,r,n&ue.Optional):Cn(t,r,n&ue.Optional)}finally{Wt(s)}}return fg(r,0,n)}function gg(e,t,n,r=ue.Default,i){if(null!==e){if(1024&t[2]){const a=function vD(e,t,n,r,i){let s=e,a=t;for(;null!==s&&null!==a&&1024&a[2]&&!(256&a[2]);){const u=mg(s,a,n,r|ue.Self,Qn);if(u!==Qn)return u;let d=s.parent;if(!d){const g=a[21];if(g){const _=g.get(n,Qn,r);if(_!==Qn)return _}d=_g(a),a=a[15]}s=d}return i}(e,t,n,r,Qn);if(a!==Qn)return a}const s=mg(e,t,n,r,Qn);if(s!==Qn)return s}return pg(t,n,r,i)}function mg(e,t,n,r,i){const s=function pD(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(fn)?e[fn]:void 0;return"number"==typeof t?t>=0?255&t:gD:t}(n);if("function"==typeof s){if(!tg(t,e,r))return r&ue.Host?fg(i,0,r):pg(t,n,r,i);try{const a=s(r);if(null!=a||r&ue.Optional)return a;Br()}finally{sg()}}else if("number"==typeof s){let a=null,u=Hc(e,t),d=-1,g=r&ue.Host?t[16][6]:null;for((-1===u||r&ue.SkipSelf)&&(d=-1===u?bl(e,t):t[u+8],-1!==d&&yg(r,!1)?(a=t[1],u=cs(d),t=ds(d,t)):u=-1);-1!==u;){const _=t[1];if(vg(s,u,_.data)){const w=fD(u,t,n,a,r,g);if(w!==Qn)return w}d=t[u+8],-1!==d&&yg(r,t[1].data[u+8]===g)&&vg(s,u,t)?(a=_,u=cs(d),t=ds(d,t)):u=-1}}return i}function fD(e,t,n,r,i,s){const a=t[1],u=a.data[e+8],_=function El(e,t,n,r,i){const s=e.providerIndexes,a=t.data,u=1048575&s,d=e.directiveStart,_=s>>20,b=i?u+_:e.directiveEnd;for(let M=r?u:u+_;M<b;M++){const A=a[M];if(M<d&&n===A||M>=d&&A.type===n)return M}if(i){const M=a[d];if(M&&_e(M)&&M.type===n)return d}return null}(u,a,n,null==r?os(u)&&Lc:r!=a&&0!=(3&u.type),i&ue.Host&&s===u);return null!==_?Ro(t,a,_,u):Qn}function Ro(e,t,n,r){let i=e[n];const s=t.data;if(function sD(e){return e instanceof To}(i)){const a=i;a.resolving&&function rl(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new X(-200,`Circular dependency in DI detected for ${e}${n}`)}(Pe(s[n]));const u=Dl(a.canSeeViewProviders);a.resolving=!0;const d=a.injectImpl?Wt(a.injectImpl):null;tg(e,r,ue.Default);try{i=e[n]=a.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function rD(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const a=pl(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,a)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==d&&Wt(d),Dl(u),a.resolving=!1,sg()}}return i}function vg(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function yg(e,t){return!(e&ue.Self||e&ue.Host&&t)}class hs{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return gg(this._tNode,this._lView,t,r,n)}}function gD(){return new hs(me(),P())}function _g(e){const t=e[1],n=t.type;return 2===n?t.declTNode:1===n?e[6]:null}const ps="__parameters__";function ms(e,t,n){return Ft(()=>{const r=function Vc(e){return function(...n){if(e){const r=e(...n);for(const i in r)this[i]=r[i]}}}(t);function i(...s){if(this instanceof i)return r.apply(this,s),this;const a=new i(...s);return u.annotation=a,u;function u(d,g,_){const w=d.hasOwnProperty(ps)?d[ps]:Object.defineProperty(d,ps,{value:[]})[ps];for(;w.length<=_;)w.push(null);return(w[_]=w[_]||[]).push(a),d}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class fe{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=oe({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function wr(e,t){e.forEach(n=>Array.isArray(n)?wr(n,t):t(n))}function wg(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ml(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const Fo={},zc="__NG_DI_FLAG__",Tl="ngTempTokenPath",xD=/\n/gm,Eg="__source";let Lo;function ys(e){const t=Lo;return Lo=e,t}function RD(e,t=ue.Default){if(void 0===Lo)throw new X(-203,!1);return null===Lo?Cn(e,void 0,t):Lo.get(e,t&ue.Optional?null:void 0,t)}function te(e,t=ue.Default){return(function wo(){return cn}()||RD)(le(e),t)}function ot(e,t=ue.Default){return"number"!=typeof t&&(t=0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)),te(e,t)}function Wc(e){const t=[];for(let n=0;n<e.length;n++){const r=le(e[n]);if(Array.isArray(r)){if(0===r.length)throw new X(900,!1);let i,s=ue.Default;for(let a=0;a<r.length;a++){const u=r[a],d=PD(u);"number"==typeof d?-1===d?i=u.token:s|=d:i=u}t.push(te(i,s))}else t.push(te(r))}return t}function Bo(e,t){return e[zc]=t,e.prototype[zc]=t,e}function PD(e){return e[zc]}const Ho=Bo(ms("Optional"),8),jo=Bo(ms("SkipSelf"),4);var ln=(()=>((ln=ln||{})[ln.Important=1]="Important",ln[ln.DashCase=2]="DashCase",ln))();const Qc=new Map;let XD=0;const Jc="__ngContext__";function Bt(e,t){At(t)?(e[Jc]=t[20],function ZD(e){Qc.set(e[20],e)}(t)):e[Jc]=t}function td(e,t){return undefined(e,t)}function Go(e){const t=e[3];return gn(t)?t[3]:t}function nd(e){return Wg(e[13])}function rd(e){return Wg(e[4])}function Wg(e){for(;null!==e&&!gn(e);)e=e[4];return e}function Cs(e,t,n,r,i){if(null!=r){let s,a=!1;gn(r)?s=r:At(r)&&(a=!0,r=r[0]);const u=l(r);0===e&&null!==n?null==i?Zg(t,n,u):Si(t,n,u,i||null,!0):1===e&&null!==n?Si(t,n,u,i||null,!0):2===e?function cd(e,t,n){const r=Rl(e,t);r&&function Cb(e,t,n,r){e.removeChild(t,n,r)}(e,r,t,n)}(t,u,a):3===e&&t.destroyNode(u),null!=s&&function bb(e,t,n,r,i){const s=n[7];s!==l(n)&&Cs(t,e,r,s,i);for(let u=10;u<n.length;u++){const d=n[u];zo(d[1],d,e,t,r,s)}}(t,e,s,n,i)}}function sd(e,t,n){return e.createElement(t,n)}function Yg(e,t){const n=e[9],r=n.indexOf(t),i=t[3];512&t[2]&&(t[2]&=-513,k(i,-1)),n.splice(r,1)}function od(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&Yg(i,r),t>0&&(e[n-1][4]=r[4]);const s=Ml(e,10+t);!function hb(e,t){zo(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Kg(e,t){if(!(128&t[2])){const n=t[11];n.destroyNode&&zo(e,t,n,3,null,null),function gb(e){let t=e[13];if(!t)return ad(e[1],e);for(;t;){let n=null;if(At(t))n=t[13];else{const r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)At(t)&&ad(t[1],t),t=t[3];null===t&&(t=e),At(t)&&ad(t[1],t),n=t&&t[4]}t=n}}(t)}}function ad(e,t){if(!(128&t[2])){t[2]&=-65,t[2]|=128,function _b(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const i=t[n[r]];if(!(i instanceof To)){const s=n[r+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){const u=i[s[a]],d=s[a+1];try{d.call(u)}finally{}}else try{s.call(i)}finally{}}}}(e,t),function yb(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const a=n[s+1],u="function"==typeof a?a(t):l(t[a]),d=r[i=n[s+2]],g=n[s+3];"boolean"==typeof g?u.removeEventListener(n[s],d,g):g>=0?r[i=g]():r[i=-g].unsubscribe(),s+=2}else{const a=r[i=n[s+1]];n[s].call(a)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();t[7]=null}}(e,t),1===t[1].type&&t[11].destroy();const n=t[17];if(null!==n&&gn(t[3])){n!==t[3]&&Yg(n,t);const r=t[19];null!==r&&r.detachView(e)}!function JD(e){Qc.delete(e[20])}(t)}}function Xg(e,t,n){return function Qg(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const i=e.data[r.directiveStart].encapsulation;if(i===hn.None||i===hn.Emulated)return null}return m(r,n)}(e,t.parent,n)}function Si(e,t,n,r,i){e.insertBefore(t,n,r,i)}function Zg(e,t,n){e.appendChild(t,n)}function Jg(e,t,n,r,i){null!==r?Si(e,t,n,r,i):Zg(e,t,n)}function Rl(e,t){return e.parentNode(t)}let pd,nm=function tm(e,t,n){return 40&e.type?m(e,n):null};function Pl(e,t,n,r){const i=Xg(e,r,t),s=t[11],u=function em(e,t,n){return nm(e,t,n)}(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let d=0;d<n.length;d++)Jg(s,i,n[d],u,!1);else Jg(s,i,n,u,!1)}function kl(e,t){if(null!==t){const n=t.type;if(3&n)return m(t,e);if(4&n)return ud(-1,e[t.index]);if(8&n){const r=t.child;if(null!==r)return kl(e,r);{const i=e[t.index];return gn(i)?ud(-1,i):l(i)}}if(32&n)return td(t,e)()||l(e[t.index]);{const r=im(e,t);return null!==r?Array.isArray(r)?r[0]:kl(Go(e[16]),r):kl(e,t.next)}}return null}function im(e,t){return null!==t?e[16][6].projection[t.projection]:null}function ud(e,t){const n=10+e+1;if(n<t.length){const r=t[n],i=r[1].firstChild;if(null!==i)return kl(r,i)}return t[7]}function dd(e,t,n,r,i,s,a){for(;null!=n;){const u=r[n.index],d=n.type;if(a&&0===t&&(u&&Bt(l(u),r),n.flags|=4),64!=(64&n.flags))if(8&d)dd(e,t,n.child,r,i,s,!1),Cs(t,e,i,u,s);else if(32&d){const g=td(n,r);let _;for(;_=g();)Cs(t,e,i,_,s);Cs(t,e,i,u,s)}else 16&d?sm(e,t,r,n,i,s):Cs(t,e,i,u,s);n=a?n.projectionNext:n.next}}function zo(e,t,n,r,i,s){dd(n,r,e.firstChild,t,i,s,!1)}function sm(e,t,n,r,i,s){const a=n[16],d=a[6].projection[r.projection];if(Array.isArray(d))for(let g=0;g<d.length;g++)Cs(t,e,i,d[g],s);else dd(e,t,d,a[3],i,s,!0)}function om(e,t,n){e.setAttribute(t,"style",n)}function hd(e,t,n){""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}const wd=new fe("ENVIRONMENT_INITIALIZER"),_m=new fe("INJECTOR",-1),Cm=new fe("INJECTOR_DEF_TYPES");class wm{get(t,n=Fo){if(n===Fo){const r=new Error(`NullInjectorError: No provider for ${je(t)}!`);throw r.name="NullInjectorError",r}return n}}function Zb(...e){return{\u0275providers:Dm(0,e)}}function Dm(e,...t){const n=[],r=new Set;let i;return wr(t,s=>{const a=s;Dd(a,n,[],r)&&(i||(i=[]),i.push(a))}),void 0!==i&&bm(i,n),n}function bm(e,t){for(let n=0;n<e.length;n++){const{providers:i}=e[n];wr(i,s=>{t.push(s)})}}function Dd(e,t,n,r){if(!(e=le(e)))return!1;let i=null,s=Co(e);const a=!s&&Fe(e);if(s||a){if(a&&!a.standalone)return!1;i=e}else{const d=e.ngModule;if(s=Co(d),!s)return!1;i=d}const u=r.has(i);if(a){if(u)return!1;if(r.add(i),a.dependencies){const d="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const g of d)Dd(g,t,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!u){let g;r.add(i);try{wr(s.imports,_=>{Dd(_,t,n,r)&&(g||(g=[]),g.push(_))})}finally{}void 0!==g&&bm(g,t)}if(!u){const g=vr(i)||(()=>new i);t.push({provide:i,useFactory:g,deps:Ae},{provide:Cm,useValue:i,multi:!0},{provide:wd,useValue:()=>te(i),multi:!0})}const d=s.providers;null==d||u||wr(d,_=>{t.push(_)})}}return i!==e&&void 0!==e.providers}const Jb=Le({provide:String,useValue:Le});function bd(e){return null!==e&&"object"==typeof e&&Jb in e}function Mi(e){return"function"==typeof e}const Sd=new fe("Set Injector scope."),Ll={},tS={};let Ed;function Bl(){return void 0===Ed&&(Ed=new wm),Ed}class Kr{}class Mm extends Kr{constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Id(t,a=>this.processProvider(a)),this.records.set(_m,ws(void 0,this)),i.has("environment")&&this.records.set(Kr,ws(void 0,this));const s=this.records.get(Sd);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Cm.multi,Ae,ue.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const n=ys(this),r=Wt(void 0);try{return t()}finally{ys(n),Wt(r)}}get(t,n=Fo,r=ue.Default){this.assertNotDestroyed();const i=ys(this),s=Wt(void 0);try{if(!(r&ue.SkipSelf)){let u=this.records.get(t);if(void 0===u){const d=function oS(e){return"function"==typeof e||"object"==typeof e&&e instanceof fe}(t)&&Qi(t);u=d&&this.injectableDefInScope(d)?ws(Md(t),Ll):null,this.records.set(t,u)}if(null!=u)return this.hydrate(t,u)}return(r&ue.Self?Bl():this.parent).get(t,n=r&ue.Optional&&n===Fo?null:n)}catch(a){if("NullInjectorError"===a.name){if((a[Tl]=a[Tl]||[]).unshift(je(t)),i)throw a;return function kD(e,t,n,r){const i=e[Tl];throw t[Eg]&&i.unshift(t[Eg]),e.message=function ND(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.slice(2):e;let i=je(t);if(Array.isArray(t))i=t.map(je).join(" -> ");else if("object"==typeof t){let s=[];for(let a in t)if(t.hasOwnProperty(a)){let u=t[a];s.push(a+":"+("string"==typeof u?JSON.stringify(u):je(u)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(xD,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[Tl]=null,e}(a,t,"R3InjectorError",this.source)}throw a}finally{Wt(s),ys(i)}}resolveInjectorInitializers(){const t=ys(this),n=Wt(void 0);try{const r=this.get(wd.multi,Ae,ue.Self);for(const i of r)i()}finally{ys(t),Wt(n)}}toString(){const t=[],n=this.records;for(const r of n.keys())t.push(je(r));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(t){let n=Mi(t=le(t))?t:le(t&&t.provide);const r=function rS(e){return bd(e)?ws(void 0,e.useValue):ws(function Im(e,t,n){let r;if(Mi(e)){const i=le(e);return vr(i)||Md(i)}if(bd(e))r=()=>le(e.useValue);else if(function Em(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...Wc(e.deps||[]));else if(function Sm(e){return!(!e||!e.useExisting)}(e))r=()=>te(le(e.useExisting));else{const i=le(e&&(e.useClass||e.provide));if(!function iS(e){return!!e.deps}(e))return vr(i)||Md(i);r=()=>new i(...Wc(e.deps))}return r}(e),Ll)}(t);if(Mi(t)||!0!==t.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=ws(void 0,Ll,!0),i.factory=()=>Wc(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n){return n.value===Ll&&(n.value=tS,n.value=n.factory()),"object"==typeof n.value&&n.value&&function sS(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=le(t.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function Md(e){const t=Qi(e),n=null!==t?t.factory:vr(e);if(null!==n)return n;if(e instanceof fe)throw new X(204,!1);if(e instanceof Function)return function nS(e){const t=e.length;if(t>0)throw function Oo(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new X(204,!1);const n=function ol(e){const t=e&&(e[Zi]||e[jr]);if(t){const n=function wc(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new X(204,!1)}function ws(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function aS(e){return!!e.\u0275providers}function Id(e,t){for(const n of e)Array.isArray(n)?Id(n,t):aS(n)?Id(n.\u0275providers,t):t(n)}class Tm{}class cS{resolveComponentFactory(t){throw function uS(e){const t=Error(`No component factory found for ${je(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let Ko=(()=>{class e{}return e.NULL=new cS,e})();function dS(){return Ds(me(),P())}function Ds(e,t){return new Zn(m(e,t))}let Zn=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=dS,e})();class Am{}let pS=(()=>{class e{}return e.\u0275prov=oe({token:e,providedIn:"root",factory:()=>null}),e})();class jl{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const gS=new jl("14.2.12"),Td={};function Ad(e){return e.ngOriginalError}class bs{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t);this._console.error("ERROR",t),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&Ad(t);for(;n&&Ad(n);)n=Ad(n);return n||null}}function br(e){return e instanceof Function?e():e}function Pm(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const s=t.length;if(i+s===r||e.charCodeAt(i+s)<=32)return i}n=i+1}}const km="ng-template";function MS(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==Pm(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function Nm(e){return 4===e.type&&e.value!==km}function IS(e,t,n){return t===(4!==e.type||n?e.value:km)}function TS(e,t,n){let r=4;const i=e.attrs||[],s=function RS(e){for(let t=0;t<e.length;t++)if(ag(e[t]))return t;return e.length}(i);let a=!1;for(let u=0;u<t.length;u++){const d=t[u];if("number"!=typeof d){if(!a)if(4&r){if(r=2|1&r,""!==d&&!IS(e,d,n)||""===d&&1===t.length){if(On(r))return!1;a=!0}}else{const g=8&r?d:t[++u];if(8&r&&null!==e.attrs){if(!MS(e.attrs,g,n)){if(On(r))return!1;a=!0}continue}const w=xS(8&r?"class":d,i,Nm(e),n);if(-1===w){if(On(r))return!1;a=!0;continue}if(""!==g){let b;b=w>s?"":i[w+1].toLowerCase();const M=8&r?b:null;if(M&&-1!==Pm(M,g,0)||2&r&&g!==b){if(On(r))return!1;a=!0}}}}else{if(!a&&!On(r)&&!On(d))return!1;if(a&&On(d))continue;a=!1,r=d|1&r}}return On(r)||a}function On(e){return 0==(1&e)}function xS(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let s=!1;for(;i<t.length;){const a=t[i];if(a===e)return i;if(3===a||6===a)s=!0;else{if(1===a||2===a){let u=t[++i];for(;"string"==typeof u;)u=t[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=s?1:2}return-1}return function PS(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Om(e,t,n=!1){for(let r=0;r<t.length;r++)if(TS(e,t[r],n))return!0;return!1}function Fm(e,t){return e?":not("+t.trim()+")":t}function NS(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let a=e[n];if("string"==typeof a)if(2&r){const u=e[++n];i+="["+a+(u.length>0?'="'+u+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!On(a)&&(t+=Fm(s,i),i=""),r=a,s=s||!On(r);n++}return""!==i&&(t+=Fm(s,i)),t}const ve={};function Um(e,t=null,n=null,r){const i=$m(e,t,n,r);return i.resolveInjectorInitializers(),i}function $m(e,t=null,n=null,r,i=new Set){const s=[n||Ae,Zb(e)];return r=r||("object"==typeof e?void 0:je(e)),new Mm(s,t||Bl(),r||null,i)}let Dn=(()=>{class e{static create(n,r){if(Array.isArray(n))return Um({name:""},r,n,"");{const i=n.name??"";return Um({name:i},n.parent,n.providers,i)}}}return e.THROW_IF_NOT_FOUND=Fo,e.NULL=new wm,e.\u0275prov=oe({token:e,providedIn:"any",factory:()=>te(_m)}),e.__NG_ELEMENT_ID__=-1,e})();function ne(e,t=ue.Default){const n=P();return null===n?te(e,t):gg(me(),n,le(e),t)}function Od(){throw new Error("invalid")}function ov(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const a=e.data[s];Pc(i),a.contentQueries(2,t[s],s)}}}function zl(e,t,n,r,i,s,a,u,d,g,_){const w=t.blueprint.slice();return w[0]=i,w[2]=76|r,(null!==_||e&&1024&e[2])&&(w[2]|=1024),O(w),w[3]=w[15]=e,w[8]=n,w[10]=a||e&&e[10],w[11]=u||e&&e[11],w[12]=d||e&&e[12]||null,w[9]=g||e&&e[9]||null,w[6]=s,w[20]=function QD(){return XD++}(),w[21]=_,w[16]=2==t.type?e[16]:w,w}function Ms(e,t,n,r,i){let s=e.data[t];if(null===s)s=function Wd(e,t,n,r,i){const s=Rt(),a=It(),d=e.data[t]=function mE(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=d),null!==s&&(a?null==s.child&&null!==d.parent&&(s.child=d):null===s.next&&(s.next=d)),d}(e,t,n,r,i),function Ww(){return N.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const a=function Ie(){const e=N.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===a?-1:a.injectorIndex}return He(s,!0),s}function Is(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function qd(e,t,n){kc(t);try{const r=e.viewQuery;null!==r&&th(1,r,n);const i=e.template;null!==i&&av(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&ov(e,t),e.staticViewQueries&&th(2,e.viewQuery,n);const s=e.components;null!==s&&function fE(e,t){for(let n=0;n<t.length;n++)PE(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,Nc()}}function Wl(e,t,n,r){const i=t[2];if(128!=(128&i)){kc(t);try{O(t),function Zp(e){return N.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&av(e,t,n,2,r);const a=3==(3&i);if(a){const g=e.preOrderCheckHooks;null!==g&&yl(t,g,null)}else{const g=e.preOrderHooks;null!==g&&_l(t,g,0,null),Oc(t,0)}if(function AE(e){for(let t=nd(e);null!==t;t=rd(t)){if(!t[2])continue;const n=t[9];for(let r=0;r<n.length;r++){const i=n[r],s=i[3];0==(512&i[2])&&k(s,1),i[2]|=512}}}(t),function xE(e){for(let t=nd(e);null!==t;t=rd(t))for(let n=10;n<t.length;n++){const r=t[n],i=r[1];E(r)&&Wl(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&ov(e,t),a){const g=e.contentCheckHooks;null!==g&&yl(t,g)}else{const g=e.contentHooks;null!==g&&_l(t,g,1),Oc(t,1)}!function dE(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)Wr(~i);else{const s=i,a=n[++r],u=n[++r];qw(a,s),u(2,t[s])}}}finally{Wr(-1)}}(e,t);const u=e.components;null!==u&&function hE(e,t){for(let n=0;n<t.length;n++)RE(e,t[n])}(t,u);const d=e.viewQuery;if(null!==d&&th(2,d,r),a){const g=e.viewCheckHooks;null!==g&&yl(t,g)}else{const g=e.viewHooks;null!==g&&_l(t,g,2),Oc(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),t[2]&=-41,512&t[2]&&(t[2]&=-513,k(t[3],-1))}finally{Nc()}}}function av(e,t,n,r,i){const s=function Zt(){return N.lFrame.selectedIndex}(),a=2&r;try{Wr(-1),a&&t.length>22&&function Bm(e,t,n,r){if(!r)if(3==(3&t[2])){const s=e.preOrderCheckHooks;null!==s&&yl(t,s,n)}else{const s=e.preOrderHooks;null!==s&&_l(t,s,0,n)}Wr(n)}(e,t,22,!1),n(r,i)}finally{Wr(s)}}function uv(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Xd(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Xd(e,t,n,r,i,s,a,u,d,g){const _=22+r,w=_+i,b=function pE(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:ve);return n}(_,w),M="function"==typeof g?g():g;return b[1]={type:e,blueprint:b,template:n,queries:null,viewQuery:u,declTNode:t,data:b.slice().fill(null,_),bindingStartIndex:_,expandoStartIndex:w,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:d,consts:M,incompleteFirstPass:!1}}function dv(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function hv(e,t){const r=t.directiveEnd,i=e.data,s=t.attrs,a=[];let u=null,d=null;for(let g=t.directiveStart;g<r;g++){const _=i[g],w=_.inputs,b=null===s||Nm(t)?null:TE(w,s);a.push(b),u=dv(w,g,u),d=dv(_.outputs,g,d)}null!==u&&(u.hasOwnProperty("class")&&(t.flags|=16),u.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=a,t.inputs=u,t.outputs=d}function pv(e,t,n,r,i,s){const a=s.hostBindings;if(a){let u=e.hostBindingOpCodes;null===u&&(u=e.hostBindingOpCodes=[]);const d=~t.index;(function CE(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(u)!=d&&u.push(d),u.push(r,i,a)}}function gv(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function mv(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function EE(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;_e(t)&&(n[""]=e)}}function vv(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function yv(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=vr(i.type)),a=new To(s,_e(i),ne);e.blueprint[r]=a,n[r]=a,pv(e,t,0,r,Is(e,n,i.hostVars,ve),i)}function ME(e,t,n){const r=m(t,e),i=uv(n),s=e[10],a=ql(e,zl(e,i,null,n.onPush?32:16,r,t,s,s.createRenderer(r,n),null,null,null));e[t.index]=a}function IE(e,t,n,r,i,s){const a=s[t];if(null!==a){const u=r.setInput;for(let d=0;d<a.length;){const g=a[d++],_=a[d++],w=a[d++];null!==u?r.setInput(n,w,g,_):n[_]=w}}}function TE(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function RE(e,t){const n=D(t,e);if(E(n)){const r=n[1];48&n[2]?Wl(r,n,r.template,n[8]):n[5]>0&&Jd(n)}}function Jd(e){for(let r=nd(e);null!==r;r=rd(r))for(let i=10;i<r.length;i++){const s=r[i];if(E(s))if(512&s[2]){const a=s[1];Wl(a,s,a.template,s[8])}else s[5]>0&&Jd(s)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=D(n[r],e);E(i)&&i[5]>0&&Jd(i)}}function PE(e,t){const n=D(t,e),r=n[1];(function kE(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),qd(r,n,n[8])}function ql(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function eh(e){for(;e;){e[2]|=32;const t=Go(e);if(bc(e)&&!t)return e;e=t}return null}function Yl(e,t,n,r=!0){const i=t[10];i.begin&&i.begin();try{Wl(e,t,e.template,n)}catch(a){throw r&&bv(t,a),a}finally{i.end&&i.end()}}function th(e,t,n){Pc(0),t(e,n)}function Cv(e){return e[7]||(e[7]=[])}function wv(e){return e.cleanup||(e.cleanup=[])}function bv(e,t){const n=e[9],r=n?n.get(bs,null):null;r&&r.handleError(t)}function nh(e,t,n,r,i){for(let s=0;s<n.length;){const a=n[s++],u=n[s++],d=t[a],g=e.data[a];null!==g.setInput?g.setInput(d,i,r,u):d[u]=i}}function Kl(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let a=0;a<t.length;a++){const u=t[a];"number"==typeof u?s=u:1==s?i=vi(i,u):2==s&&(r=vi(r,u+": "+t[++a]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function Xl(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(l(s)),gn(s))for(let u=10;u<s.length;u++){const d=s[u],g=d[1].firstChild;null!==g&&Xl(d[1],d,g,r)}const a=n.type;if(8&a)Xl(e,t,n.child,r);else if(32&a){const u=td(n,t);let d;for(;d=u();)r.push(d)}else if(16&a){const u=im(t,n);if(Array.isArray(u))r.push(...u);else{const d=Go(t[16]);Xl(d[1],d,u,r,!0)}}n=i?n.projectionNext:n.next}return r}class Xo{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return Xl(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(gn(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(od(t,r),Ml(n,r))}this._attachedToViewContainer=!1}Kg(this._lView[1],this._lView)}onDestroy(t){!function cv(e,t,n,r){const i=Cv(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&wv(e).push(r,i.length-1))}(this._lView[1],this._lView,null,t)}markForCheck(){eh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Yl(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function pb(e,t){zo(e,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=t}}class NE extends Xo{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Yl(t[1],t,t[8],!1)}checkNoChanges(){}get context(){return null}}class rh extends Ko{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Fe(t);return new Qo(n,this.ngModule)}}function Sv(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class FE{constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){const i=this.injector.get(t,Td,r);return i!==Td||n===Td?i:this.parentInjector.get(t,n,r)}}class Qo extends Tm{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function OS(e){return e.map(NS).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return Sv(this.componentDef.inputs)}get outputs(){return Sv(this.componentDef.outputs)}create(t,n,r,i){let s=(i=i||this.ngModule)instanceof Kr?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new FE(t,s):t,u=a.get(Am,null);if(null===u)throw new X(407,!1);const d=a.get(pS,null),g=u.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",w=r?function gE(e,t,n){return e.selectRootElement(t,n===hn.ShadowDom)}(g,r,this.componentDef.encapsulation):sd(g,_,function OE(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(_)),b=this.componentDef.onPush?288:272,M=Xd(0,null,null,1,0,null,null,null,null,null),A=zl(null,M,null,b,null,null,u,g,d,a,null);let F,B;kc(A);try{const H=function HE(e,t,n,r,i,s){const a=n[1];n[22]=e;const d=Ms(a,22,2,"#host",null),g=d.mergedAttrs=t.hostAttrs;null!==g&&(Kl(d,g,!0),null!==e&&(Cl(i,e,g),null!==d.classes&&hd(i,e,d.classes),null!==d.styles&&om(i,e,d.styles)));const _=r.createRenderer(e,t),w=zl(n,uv(t),null,t.onPush?32:16,n[22],d,r,_,s||null,null,null);return a.firstCreatePass&&(Sl(Ao(d,n),a,t.type),mv(a,d),vv(d,n.length,1)),ql(n,w),n[22]=w}(w,this.componentDef,A,u,g);if(w)if(r)Cl(g,w,["ng-version",gS.full]);else{const{attrs:q,classes:L}=function FS(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!On(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);q&&Cl(g,w,q),L&&L.length>0&&hd(g,w,L.join(" "))}if(B=function y(e,t){return e.data[t]}(M,22),void 0!==n){const q=B.projection=[];for(let L=0;L<this.ngContentSelectors.length;L++){const ie=n[L];q.push(null!=ie?Array.from(ie):null)}}F=function jE(e,t,n,r){const i=n[1],s=function _E(e,t,n){const r=me();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),yv(e,r,t,Is(e,t,1,null),n),hv(e,r));const i=Ro(t,e,r.directiveStart,r);Bt(i,t);const s=m(r,t);return s&&Bt(s,t),i}(i,n,t);if(e[8]=n[8]=s,null!==r)for(const u of r)u(s,t);if(t.contentQueries){const u=me();t.contentQueries(1,s,u.directiveStart)}const a=me();return!i.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Wr(a.index),pv(n[1],a,0,a.directiveStart,a.directiveEnd,t),gv(t,s)),s}(H,this.componentDef,A,[VE]),qd(M,A,null)}finally{Nc()}return new BE(this.componentType,F,Ds(B,A),A,B)}}class BE extends class lS{}{constructor(t,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new NE(i),this.componentType=t}setInput(t,n){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[t])){const s=this._rootLView;nh(s[1],s,i,t,n),function fv(e,t){const n=D(t,e);16&n[2]||(n[2]|=32)}(s,this._tNode.index)}}get injector(){return new hs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function VE(){const e=me();vl(P()[1],e)}function ah(e,t,n,r,i){const a=i?"class":"style";nh(e,n,t.inputs[a],a,r)}function $e(e,t,n,r){const i=P(),s=z(),a=22+e,u=i[11],d=i[a]=sd(u,t,function nD(){return N.lFrame.currentNamespace}()),g=s.firstCreatePass?function rM(e,t,n,r,i,s,a){const u=t.consts,g=Ms(t,e,2,i,S(u,s));return function Qd(e,t,n,r){let i=!1;if(re()){const s=function bE(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const a=r[s];Om(n,a.selectors,!1)&&(i||(i=[]),Sl(Ao(n,t),e,a.type),_e(a)?(mv(e,n),i.unshift(a)):i.push(a))}return i}(e,t,n),a=null===r?null:{"":-1};if(null!==s){i=!0,vv(n,e.data.length,s.length);for(let _=0;_<s.length;_++){const w=s[_];w.providersResolver&&w.providersResolver(w)}let u=!1,d=!1,g=Is(e,t,s.length,null);for(let _=0;_<s.length;_++){const w=s[_];n.mergedAttrs=wl(n.mergedAttrs,w.hostAttrs),yv(e,n,t,g,w),EE(g,w,a),null!==w.contentQueries&&(n.flags|=8),(null!==w.hostBindings||null!==w.hostAttrs||0!==w.hostVars)&&(n.flags|=128);const b=w.type.prototype;!u&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),u=!0),!d&&(b.ngOnChanges||b.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),d=!0),g++}hv(e,n)}a&&function SE(e,t,n){if(t){const r=e.localNames=[];for(let i=0;i<t.length;i+=2){const s=n[t[i+1]];if(null==s)throw new X(-301,!1);r.push(t[i],s)}}}(n,r,a)}return n.mergedAttrs=wl(n.mergedAttrs,n.attrs),i}(t,n,g,S(u,a)),null!==g.attrs&&Kl(g,g.attrs,!1),null!==g.mergedAttrs&&Kl(g,g.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,g),g}(a,s,i,0,t,n,r):s.data[a];He(g,!0);const _=g.mergedAttrs;null!==_&&Cl(u,d,_);const w=g.classes;null!==w&&hd(u,d,w);const b=g.styles;return null!==b&&om(u,d,b),64!=(64&g.flags)&&Pl(s,i,d,g),0===function W(){return N.lFrame.elementDepthCount}()&&Bt(d,i),function ee(){N.lFrame.elementDepthCount++}(),as(g)&&(function Yd(e,t,n){!re()||(function wE(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Ao(n,t),Bt(r,t);const a=n.initialInputs;for(let u=i;u<s;u++){const d=e.data[u],g=_e(d);g&&ME(t,n,d);const _=Ro(t,e,u,n);Bt(_,t),null!==a&&IE(0,u-i,_,d,0,a),g&&(D(n.index,t)[8]=_)}}(e,t,n,m(n,t)),128==(128&n.flags)&&function DE(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,a=function Yw(){return N.lFrame.currentDirectiveIndex}();try{Wr(s);for(let u=r;u<i;u++){const d=e.data[u],g=t[u];Ac(u),(null!==d.hostBindings||0!==d.hostVars||null!==d.hostAttrs)&&gv(d,g)}}finally{Wr(-1),Ac(a)}}(e,t,n))}(s,i,g),function lv(e,t,n){if(ss(t)){const i=t.directiveEnd;for(let s=t.directiveStart;s<i;s++){const a=e.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}}(s,g,i)),null!==r&&function Kd(e,t,n=m){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const a=r[s+1],u=-1===a?n(t,e):e[a];e[i++]=u}}}(i,g),$e}function Ge(){let e=me();It()?function Xt(){N.lFrame.isParent=!1}():(e=e.parent,He(e,!1));const t=e;!function K(){N.lFrame.elementDepthCount--}();const n=z();return n.firstCreatePass&&(vl(n,e),ss(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function aD(e){return 0!=(16&e.flags)}(t)&&ah(n,t,P(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function lD(e){return 0!=(32&e.flags)}(t)&&ah(n,t,P(),t.stylesWithoutHost,!1),Ge}function Ls(e,t,n,r){return $e(e,t,n,r),Ge(),Ls}function Jl(e){return!!e&&"function"==typeof e.then}const Hv=function Bv(e){return!!e&&"function"==typeof e.subscribe};function Ln(e,t,n,r){const i=P(),s=z(),a=me();return function Vv(e,t,n,r,i,s,a,u){const d=as(r),_=e.firstCreatePass&&wv(e),w=t[8],b=Cv(t);let M=!0;if(3&r.type||u){const B=m(r,t),H=u?u(B):B,q=b.length,L=u?ke=>u(l(ke[r.index])):r.index;let ie=null;if(!u&&d&&(ie=function oM(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const a=i[s];if(a===n&&i[s+1]===r){const u=t[7],d=i[s+2];return u.length>d?u[d]:null}"string"==typeof a&&(s+=2)}return null}(e,t,i,r.index)),null!==ie)(ie.__ngLastListenerFn__||ie).__ngNextListenerFn__=s,ie.__ngLastListenerFn__=s,M=!1;else{s=$v(r,t,w,s,!1);const ke=n.listen(H,i,s);b.push(s,ke),_&&_.push(i,L,q,q+1)}}else s=$v(r,t,w,s,!1);const A=r.outputs;let F;if(M&&null!==A&&(F=A[i])){const B=F.length;if(B)for(let H=0;H<B;H+=2){const Je=t[F[H]][F[H+1]].subscribe(s),Bi=b.length;b.push(s,Je),_&&_.push(i,r.index,Bi,-(Bi+1))}}}(s,i,i[11],a,e,t,0,r),Ln}function Uv(e,t,n,r){try{return!1!==n(r)}catch(i){return bv(e,i),!1}}function $v(e,t,n,r,i){return function s(a){if(a===Function)return r;eh(2&e.flags?D(e.index,t):t);let d=Uv(t,0,r,a),g=s.__ngNextListenerFn__;for(;g;)d=Uv(t,0,g,a)&&d,g=g.__ngNextListenerFn__;return i&&!1===d&&(a.preventDefault(),a.returnValue=!1),d}}function Xe(e,t=""){const n=P(),r=z(),i=e+22,s=r.firstCreatePass?Ms(r,i,1,t,null):r.data[i],a=n[i]=function id(e,t){return e.createText(t)}(n[11],t);Pl(r,n,a,s),He(s,!1)}const js="en-US";let Oy=js;class Ai{}class a_{}class l_ extends Ai{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new rh(this);const r=Kt(t);this._bootstrapComponents=br(r.bootstrap),this._r3Injector=$m(t,n,[{provide:Ai,useValue:this},{provide:Ko,useValue:this.componentFactoryResolver}],je(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Dh extends a_{constructor(t){super(),this.moduleType=t}create(t){return new l_(this.moduleType,t)}}class qI extends Ai{constructor(t,n,r){super(),this.componentFactoryResolver=new rh(this),this.instance=null;const i=new Mm([...t,{provide:Ai,useValue:this},{provide:Ko,useValue:this.componentFactoryResolver}],n||Bl(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function su(e,t,n=null){return new qI(e,t,n).injector}let YI=(()=>{class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const r=Dm(0,n.type),i=r.length>0?su([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,i)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return e.\u0275prov=oe({token:e,providedIn:"environment",factory:()=>new e(te(Kr))}),e})();function u_(e){e.getStandaloneInjector=t=>t.get(YI).getOrCreateStandaloneInjector(e)}function Sh(e){return t=>{setTimeout(e,void 0,t)}}const Ce=class CT extends I{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){let i=t,s=n||(()=>null),a=r;if(t&&"object"==typeof t){const d=t;i=d.next?.bind(d),s=d.error?.bind(d),a=d.complete?.bind(d)}this.__isAsync&&(s=Sh(s),i&&(i=Sh(i)),a&&(a=Sh(a)));const u=super.subscribe({next:i,error:s,complete:a});return t instanceof xe&&t.add(u),u}};let jn=(()=>{class e{}return e.__NG_ELEMENT_ID__=ET,e})();function ET(){return function b_(e,t){let n;const r=t[e.index];if(gn(r))n=r;else{let i;if(8&e.type)i=l(r);else{const s=t[11];i=s.createComment("");const a=m(e,t);Si(s,Rl(s,a),i,function wb(e,t){return e.nextSibling(t)}(s,a),!1)}t[e.index]=n=function _v(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}(r,t,i,e),ql(t,n)}return new w_(n,e,t)}(me(),P())}const MT=jn,w_=class extends MT{constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Ds(this._hostTNode,this._hostLView)}get injector(){return new hs(this._hostTNode,this._hostLView)}get parentInjector(){const t=bl(this._hostTNode,this._hostLView);if(cg(t)){const n=ds(t,this._hostLView),r=cs(t);return new hs(n[1].data[r+8],n)}return new hs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=D_(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=t.createEmbeddedView(n||{},s);return this.insert(a,i),a}createComponent(t,n,r,i,s){const a=t&&!function No(e){return"function"==typeof e}(t);let u;if(a)u=n;else{const w=n||{};u=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}const d=a?t:new Qo(Fe(t)),g=r||this.parentInjector;if(!s&&null==d.ngModule){const b=(a?g:this.parentInjector).get(Kr,null);b&&(s=b)}const _=d.create(g,i,void 0,s);return this.insert(_.hostView,u),_}insert(t,n){const r=t._lView,i=r[1];if(function x(e){return gn(e[3])}(r)){const _=this.indexOf(t);if(-1!==_)this.detach(_);else{const w=r[3],b=new w_(w,w[6],w[3]);b.detach(b.indexOf(t))}}const s=this._adjustIndex(n),a=this._lContainer;!function mb(e,t,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-10?(t[4]=n[i],wg(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const a=t[17];null!==a&&n!==a&&function vb(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(a,t);const u=t[19];null!==u&&u.insertView(e),t[2]|=64}(i,r,a,s);const u=ud(s,a),d=r[11],g=Rl(d,a[7]);return null!==g&&function fb(e,t,n,r,i,s){r[0]=i,r[6]=t,zo(e,r,n,1,i,s)}(i,a[6],d,r,g,u),t.attachToViewContainerRef(),wg(Eh(a),s,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=D_(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),r=od(this._lContainer,n);r&&(Ml(Eh(this._lContainer),n),Kg(r[1],r))}detach(t){const n=this._adjustIndex(t,-1),r=od(this._lContainer,n);return r&&null!=Ml(Eh(this._lContainer),n)?new Xo(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function D_(e){return e[8]}function Eh(e){return e[8]||(e[8]=[])}function lu(...e){}const uu=new fe("Application Initializer");let cu=(()=>{class e{constructor(n){this.appInits=n,this.resolve=lu,this.reject=lu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Jl(s))n.push(s);else if(Hv(s)){const a=new Promise((u,d)=>{s.subscribe({complete:u,error:d})});n.push(a)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(te(uu,8))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const fa=new fe("AppId",{providedIn:"root",factory:function q_(){return`${Oh()}${Oh()}${Oh()}`}});function Oh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Y_=new fe("Platform Initializer"),Fh=new fe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),K_=new fe("appBootstrapListener");let n1=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();const Ir=new fe("LocaleId",{providedIn:"root",factory:()=>ot(Ir,ue.Optional|ue.SkipSelf)||function r1(){return typeof $localize<"u"&&$localize.locale||js}()});class s1{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}let Lh=(()=>{class e{compileModuleSync(n){return new Dh(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=br(Kt(n).declarations).reduce((a,u)=>{const d=Fe(u);return d&&a.push(new Qo(d)),a},[]);return new s1(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const l1=(()=>Promise.resolve(0))();function Bh(e){typeof Zone>"u"?l1.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class _t{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ce(!1),this.onMicrotaskEmpty=new Ce(!1),this.onStable=new Ce(!1),this.onError=new Ce(!1),typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();const i=this;if(i._nesting=0,i._outer=i._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;i._inner=i._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function u1(){let e=ze.requestAnimationFrame,t=ze.cancelAnimationFrame;if(typeof Zone<"u"&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function h1(e){const t=()=>{!function d1(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(ze,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,jh(e),e.isCheckStableRunning=!0,Hh(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),jh(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,a,u)=>{try{return Z_(e),n.invokeTask(i,s,a,u)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),J_(e)}},onInvoke:(n,r,i,s,a,u,d)=>{try{return Z_(e),n.invoke(i,s,a,u,d)}finally{e.shouldCoalesceRunChangeDetection&&t(),J_(e)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(e._hasPendingMicrotasks=s.microTask,jh(e),Hh(e)):"macroTask"==s.change&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!_t.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(_t.isInAngularZone())throw new X(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){const s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+i,t,c1,lu,lu);try{return s.runTask(a,n,r)}finally{s.cancelTask(a)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const c1={};function Hh(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function jh(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Z_(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function J_(e){e._nesting--,Hh(e)}class f1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ce,this.onMicrotaskEmpty=new Ce,this.onStable=new Ce,this.onError=new Ce}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}}const e0=new fe(""),du=new fe("");let $h,Vh=(()=>{class e{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$h||(function p1(e){$h=e}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_t.assertNotInAngularZone(),Bh(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Bh(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return e.\u0275fac=function(n){return new(n||e)(te(_t),te(Uh),te(du))},e.\u0275prov=oe({token:e,factory:e.\u0275fac}),e})(),Uh=(()=>{class e{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return $h?.findTestabilityInTree(this,n,r)??null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})(),Zr=null;const t0=new fe("AllowMultipleToken"),Gh=new fe("PlatformDestroyListeners");class n0{constructor(t,n){this.name=t,this.token=n}}function s0(e,t,n=[]){const r=`Platform: ${t}`,i=new fe(r);return(s=[])=>{let a=zh();if(!a||a.injector.get(t0,!1)){const u=[...n,...s,{provide:i,useValue:!0}];e?e(u):function v1(e){if(Zr&&!Zr.get(t0,!1))throw new X(400,!1);Zr=e;const t=e.get(a0);(function r0(e){const t=e.get(Y_,null);t&&t.forEach(n=>n())})(e)}(function o0(e=[],t){return Dn.create({name:t,providers:[{provide:Sd,useValue:"platform"},{provide:Gh,useValue:new Set([()=>Zr=null])},...e]})}(u,r))}return function _1(e){const t=zh();if(!t)throw new X(401,!1);return t}()}}function zh(){return Zr?.get(a0)??null}let a0=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function u0(e,t){let n;return n="noop"===e?new f1:("zone.js"===e?void 0:e)||new _t(t),n}(r?.ngZone,function l0(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!e||!e.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!e||!e.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:_t,useValue:i}];return i.run(()=>{const a=Dn.create({providers:s,parent:this.injector,name:n.moduleType.name}),u=n.create(a),d=u.injector.get(bs,null);if(!d)throw new X(402,!1);return i.runOutsideAngular(()=>{const g=i.onError.subscribe({next:_=>{d.handleError(_)}});u.onDestroy(()=>{fu(this._modules,u),g.unsubscribe()})}),function c0(e,t,n){try{const r=n();return Jl(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e.handleError(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(d,i,()=>{const g=u.injector.get(cu);return g.runInitializers(),g.donePromise.then(()=>(function Fy(e){Gt(e,"Expected localeId to be defined"),"string"==typeof e&&(Oy=e.toLowerCase().replace(/_/g,"-"))}(u.injector.get(Ir,js)||js),this._moduleDoBootstrap(u),u))})})}bootstrapModule(n,r=[]){const i=d0({},r);return function g1(e,t,n){const r=new Dh(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(hu);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new X(403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new X(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const n=this._injector.get(Gh,null);n&&(n.forEach(r=>r()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(te(Dn))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"platform"}),e})();function d0(e,t){return Array.isArray(t)?t.reduce(d0,e):{...e,...t}}let hu=(()=>{class e{constructor(n,r,i){this._zone=n,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new nt(u=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{u.next(this._stable),u.complete()})}),a=new nt(u=>{let d;this._zone.runOutsideAngular(()=>{d=this._zone.onStable.subscribe(()=>{_t.assertNotInAngularZone(),Bh(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,u.next(!0))})})});const g=this._zone.onUnstable.subscribe(()=>{_t.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{u.next(!1)}))});return()=>{d.unsubscribe(),g.unsubscribe()}});this.isStable=function tl(...e){const t=Fr(e),n=function pi(e,t){return"number"==typeof zi(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?Ee(r[0]):lr(n)(rt(r,t)):An}(s,a.pipe(function nl(e={}){const{connector:t=(()=>new I),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=e;return s=>{let a,u,d,g=0,_=!1,w=!1;const b=()=>{u?.unsubscribe(),u=void 0},M=()=>{b(),a=d=void 0,_=w=!1},A=()=>{const F=a;M(),F?.unsubscribe()};return lt((F,B)=>{g++,!w&&!_&&b();const H=d=d??t();B.add(()=>{g--,0===g&&!w&&!_&&(u=Ki(A,i))}),H.subscribe(B),!a&&g>0&&(a=new Ot({next:q=>H.next(q),error:q=>{w=!0,b(),u=Ki(M,n,q),H.error(q)},complete:()=>{_=!0,b(),u=Ki(M,r),H.complete()}}),Ee(F).subscribe(a))})(s)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof Tm;if(!this._injector.get(cu).done)throw!i&&function $r(e){const t=Fe(e)||bt(e)||xt(e);return null!==t&&t.standalone}(n),new X(405,false);let a;a=i?n:this._injector.get(Ko).resolveComponentFactory(n),this.componentTypes.push(a.componentType);const u=function m1(e){return e.isBoundToModule}(a)?void 0:this._injector.get(Ai),g=a.create(Dn.NULL,[],r||a.selector,u),_=g.location.nativeElement,w=g.injector.get(e0,null);return w?.registerApplication(_),g.onDestroy(()=>{this.detachView(g.hostView),fu(this.components,g),w?.unregisterApplication(_)}),this._loadComponent(g),g}tick(){if(this._runningTick)throw new X(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;fu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(K_,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>fu(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new X(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return e.\u0275fac=function(n){return new(n||e)(te(_t),te(Kr),te(bs))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function fu(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let f0=!0,Wh=(()=>{class e{}return e.__NG_ELEMENT_ID__=D1,e})();function D1(e){return function b1(e,t,n){if(os(e)&&!n){const r=D(e.index,t);return new Xo(r,r)}return 47&e.type?new Xo(t[16],t):null}(me(),P(),16==(16&e))}const F1=s0(null,"core",[]);let L1=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(te(hu))},e.\u0275mod=Tt({type:e}),e.\u0275inj=zt({}),e})(),vu=null;function Jr(){return vu}const nn=new fe("DocumentToken");let Qh=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=oe({token:e,factory:function(){return function V1(){return te(S0)}()},providedIn:"platform"}),e})();const U1=new fe("Location Initialized");let S0=(()=>{class e extends Qh{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Jr().getBaseHref(this._doc)}onPopState(n){const r=Jr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Jr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,i){E0()?this._history.pushState(n,r,i):this.location.hash=i}replaceState(n,r,i){E0()?this._history.replaceState(n,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return e.\u0275fac=function(n){return new(n||e)(te(nn))},e.\u0275prov=oe({token:e,factory:function(){return function $1(){return new S0(te(nn))}()},providedIn:"platform"}),e})();function E0(){return!!window.history.pushState}function Zh(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function M0(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function xr(e){return e&&"?"!==e[0]?"?"+e:e}let Pi=(()=>{class e{historyGo(n){throw new Error("Not implemented")}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=oe({token:e,factory:function(){return ot(T0)},providedIn:"root"}),e})();const I0=new fe("appBaseHref");let T0=(()=>{class e extends Pi{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ot(nn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Zh(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+xr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const a=this.prepareExternalUrl(i+xr(s));this._platformLocation.pushState(n,r,a)}replaceState(n,r,i,s){const a=this.prepareExternalUrl(i+xr(s));this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(te(Qh),te(I0,8))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),G1=(()=>{class e extends Pi{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=Zh(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let a=this.prepareExternalUrl(i+xr(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(n,r,a)}replaceState(n,r,i,s){let a=this.prepareExternalUrl(i+xr(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return e.\u0275fac=function(n){return new(n||e)(te(Qh),te(I0,8))},e.\u0275prov=oe({token:e,factory:e.\u0275fac}),e})(),Jh=(()=>{class e{constructor(n){this._subject=new Ce,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._baseHref=M0(x0(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+xr(r))}normalize(n){return e.stripTrailingSlash(function W1(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,x0(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+xr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+xr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return e.normalizeQueryParams=xr,e.joinWithSlash=Zh,e.stripTrailingSlash=M0,e.\u0275fac=function(n){return new(n||e)(te(Pi))},e.\u0275prov=oe({token:e,factory:function(){return function z1(){return new Jh(te(Pi))}()},providedIn:"root"}),e})();function x0(e){return e.replace(/\/index.html$/,"")}function B0(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(s)}return null}let z0=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Tt({type:e}),e.\u0275inj=zt({}),e})();let dA=(()=>{class e{}return e.\u0275prov=oe({token:e,providedIn:"root",factory:()=>new hA(te(nn),window)}),e})();class hA{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function fA(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const a=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(a)return a}i=r.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=q0(this.window.history)||q0(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function q0(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class Y0{}class vf extends class RA extends class j1{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function H1(e){vu||(vu=e)}(new vf)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function PA(){return ya=ya||document.querySelector("base"),ya?ya.getAttribute("href"):null}();return null==n?null:function kA(e){Tu=Tu||document.createElement("a"),Tu.setAttribute("href",e);const t=Tu.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){ya=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return B0(document.cookie,t)}}let Tu,ya=null;const Z0=new fe("TRANSITION_ID"),OA=[{provide:uu,useFactory:function NA(e,t,n){return()=>{n.get(cu).donePromise.then(()=>{const r=Jr(),i=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Z0,nn,Dn],multi:!0}];let LA=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac}),e})();const xu=new fe("EventManagerPlugins");let Au=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const a=i[s];if(a.supports(n))return this._eventNameToPlugin.set(n,a),a}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(te(xu),te(_t))},e.\u0275prov=oe({token:e,factory:e.\u0275fac}),e})();class J0{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const i=Jr().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let eC=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac}),e})(),_a=(()=>{class e extends eC{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(s=>{const a=this._doc.createElement("style");a.textContent=s,i.push(r.appendChild(a))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(tC),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(tC))}}return e.\u0275fac=function(n){return new(n||e)(te(nn))},e.\u0275prov=oe({token:e,factory:e.\u0275fac}),e})();function tC(e){Jr().remove(e)}const yf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_f=/%COMP%/g;function Ru(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?Ru(e,i,n):(i=i.replace(_f,e),n.push(i))}return n}function iC(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let Cf=(()=>{class e{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new wf(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case hn.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new $A(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case hn.ShadowDom:return new GA(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ru(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(te(Au),te(_a),te(fa))},e.\u0275prov=oe({token:e,factory:e.\u0275fac}),e})();class wf{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(yf[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){(oC(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(oC(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;const s=yf[i];s?t.setAttributeNS(s,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const i=yf[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(ln.DashCase|ln.Important)?t.style.setProperty(n,r,i&ln.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&ln.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,iC(r)):this.eventManager.addEventListener(t,n,iC(r))}}function oC(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class $A extends wf{constructor(t,n,r,i){super(t),this.component=r;const s=Ru(i+"-"+r.id,r.styles,[]);n.addStyles(s),this.contentAttr=function jA(e){return"_ngcontent-%COMP%".replace(_f,e)}(i+"-"+r.id),this.hostAttr=function VA(e){return"_nghost-%COMP%".replace(_f,e)}(i+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}class GA extends wf{constructor(t,n,r,i){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Ru(i.id,i.styles,[]);for(let a=0;a<s.length;a++){const u=document.createElement("style");u.textContent=s[a],this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let zA=(()=>{class e extends J0{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return e.\u0275fac=function(n){return new(n||e)(te(nn))},e.\u0275prov=oe({token:e,factory:e.\u0275fac}),e})();const aC=["alt","control","meta","shift"],WA={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qA={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let YA=(()=>{class e extends J0{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,i){const s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Jr().onAndCancel(n,s.domEventName,a))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=e._normalizeKey(r.pop());let a="",u=r.indexOf("code");if(u>-1&&(r.splice(u,1),a="code."),aC.forEach(g=>{const _=r.indexOf(g);_>-1&&(r.splice(_,1),a+=g+".")}),a+=s,0!=r.length||0===s.length)return null;const d={};return d.domEventName=i,d.fullKey=a,d}static matchEventFullKeyCode(n,r){let i=WA[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),aC.forEach(a=>{a!==i&&(0,qA[a])(n)&&(s+=a+".")}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{e.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(te(nn))},e.\u0275prov=oe({token:e,factory:e.\u0275fac}),e})();const ZA=s0(F1,"browser",[{provide:Fh,useValue:"browser"},{provide:Y_,useValue:function KA(){vf.makeCurrent()},multi:!0},{provide:nn,useFactory:function QA(){return function Tb(e){pd=e}(document),document},deps:[]}]),cC=new fe(""),dC=[{provide:du,useClass:class FA{addToWindow(t){ze.getAngularTestability=(r,i=!0)=>{const s=t.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},ze.getAllAngularTestabilities=()=>t.getAllTestabilities(),ze.getAllAngularRootElements=()=>t.getAllRootElements(),ze.frameworkStabilizers||(ze.frameworkStabilizers=[]),ze.frameworkStabilizers.push(r=>{const i=ze.getAllAngularTestabilities();let s=i.length,a=!1;const u=function(d){a=a||d,s--,0==s&&r(a)};i.forEach(function(d){d.whenStable(u)})})}findTestabilityInTree(t,n,r){return null==n?null:t.getTestability(n)??(r?Jr().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null)}},deps:[]},{provide:e0,useClass:Vh,deps:[_t,Uh,du]},{provide:Vh,useClass:Vh,deps:[_t,Uh,du]}],hC=[{provide:Sd,useValue:"root"},{provide:bs,useFactory:function XA(){return new bs},deps:[]},{provide:xu,useClass:zA,multi:!0,deps:[nn,_t,Fh]},{provide:xu,useClass:YA,multi:!0,deps:[nn]},{provide:Cf,useClass:Cf,deps:[Au,_a,fa]},{provide:Am,useExisting:Cf},{provide:eC,useExisting:_a},{provide:_a,useClass:_a,deps:[nn]},{provide:Au,useClass:Au,deps:[xu,_t]},{provide:Y0,useClass:LA,deps:[]},[]];let JA=(()=>{class e{constructor(n){}static withServerTransition(n){return{ngModule:e,providers:[{provide:fa,useValue:n.appId},{provide:Z0,useExisting:fa},OA]}}}return e.\u0275fac=function(n){return new(n||e)(te(cC,12))},e.\u0275mod=Tt({type:e}),e.\u0275inj=zt({providers:[...hC,...dC],imports:[z0,L1]}),e})(),fC=(()=>{class e{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return e.\u0275fac=function(n){return new(n||e)(te(nn))},e.\u0275prov=oe({token:e,factory:function(n){let r=null;return r=n?new n:function tR(){return new fC(te(nn))}(),r},providedIn:"root"}),e})();function ae(...e){return rt(e,Fr(e))}typeof window<"u"&&window;class Gn extends I{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){const{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}}const Ca=Js(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:uR}=Array,{getPrototypeOf:cR,prototype:dR,keys:hR}=Object;const{isArray:gR}=Array;function mC(...e){const t=Fr(e),n=function el(e){return We(zi(e))?e.pop():void 0}(e),{args:r,keys:i}=function fR(e){if(1===e.length){const t=e[0];if(uR(t))return{args:t,keys:null};if(function pR(e){return e&&"object"==typeof e&&cR(e)===dR}(t)){const n=hR(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}(e);if(0===r.length)return rt([],t);const s=new nt(function _R(e,t,n=rn){return r=>{vC(t,()=>{const{length:i}=e,s=new Array(i);let a=i,u=i;for(let d=0;d<i;d++)vC(t,()=>{const g=rt(e[d],t);let _=!1;g.subscribe(ut(r,w=>{s[d]=w,_||(_=!0,u--),u||r.next(n(s.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,t,i?a=>function yR(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}(i,a):rn));return n?s.pipe(function vR(e){return be(t=>function mR(e,t){return gR(t)?e(...t):e(t)}(e,t))}(n)):s}function vC(e,t,n){e?$t(n,e,t):t()}function Sf(...e){return function CR(){return lr(1)}()(rt(e,Fr(e)))}function yC(e){return new nt(t=>{Ee(e()).subscribe(t)})}function wa(e,t){const n=We(e)?e:()=>e,r=i=>i.error(n());return new nt(t?i=>t.schedule(r,0,i):r)}function Ef(){return lt((e,t)=>{let n=null;e._refCount++;const r=ut(t,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(n=null);const i=e._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),t.unsubscribe()});e.subscribe(r),r.closed||(n=e.connect())})}class _C extends nt{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,oo(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new xe;const n=this.getSubject();t.add(this.source.subscribe(ut(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),t.closed&&(this._connection=null,t=xe.EMPTY)}return t}refCount(){return Ef()(this)}}function rr(e,t){return lt((n,r)=>{let i=null,s=0,a=!1;const u=()=>a&&!i&&r.complete();n.subscribe(ut(r,d=>{i?.unsubscribe();let g=0;const _=s++;Ee(e(d,_)).subscribe(i=ut(r,w=>r.next(t?t(d,w,_,g++):w),()=>{i=null,u()}))},()=>{a=!0,u()}))})}function Da(e){return e<=0?()=>An:lt((t,n)=>{let r=0;t.subscribe(ut(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Rr(e,t){return lt((n,r)=>{let i=0;n.subscribe(ut(r,s=>e.call(t,s,i++)&&r.next(s)))})}function Pu(e){return lt((t,n)=>{let r=!1;t.subscribe(ut(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function CC(e=DR){return lt((t,n)=>{let r=!1;t.subscribe(ut(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function DR(){return new Ca}function ti(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Rr((i,s)=>e(i,s,r)):rn,Da(1),n?Pu(t):CC(()=>new Ca))}function ni(e,t){return We(t)?gt(e,t,1):gt(e,1)}function Vt(e,t,n){const r=We(e)||t||n?{next:e,error:t,complete:n}:e;return r?lt((i,s)=>{var a;null===(a=r.subscribe)||void 0===a||a.call(r);let u=!0;i.subscribe(ut(s,d=>{var g;null===(g=r.next)||void 0===g||g.call(r,d),s.next(d)},()=>{var d;u=!1,null===(d=r.complete)||void 0===d||d.call(r),s.complete()},d=>{var g;u=!1,null===(g=r.error)||void 0===g||g.call(r,d),s.error(d)},()=>{var d,g;u&&(null===(d=r.unsubscribe)||void 0===d||d.call(r)),null===(g=r.finalize)||void 0===g||g.call(r)}))}):rn}function ri(e){return lt((t,n)=>{let s,r=null,i=!1;r=t.subscribe(ut(n,void 0,void 0,a=>{s=Ee(e(a,ri(e)(t))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function bR(e,t,n,r,i){return(s,a)=>{let u=n,d=t,g=0;s.subscribe(ut(a,_=>{const w=g++;d=u?e(d,_,w):(u=!0,_),r&&a.next(d)},i&&(()=>{u&&a.next(d),a.complete()})))}}function wC(e,t){return lt(bR(e,t,arguments.length>=2,!0))}function Mf(e){return e<=0?()=>An:lt((t,n)=>{let r=[];t.subscribe(ut(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function DC(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Rr((i,s)=>e(i,s,r)):rn,Mf(1),n?Pu(t):CC(()=>new Ca))}function If(e){return lt((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}const Se="primary",ba=Symbol("RouteTitle");class MR{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Gs(e){return new MR(e)}function IR(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const a=r[s],u=e[s];if(a.startsWith(":"))i[a.substring(1)]=u;else if(a!==u.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function ir(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!bC(e[i],t[i]))return!1;return!0}function bC(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((i,s)=>r[s]===i)}return e===t}function SC(e){return Array.prototype.concat.apply([],e)}function EC(e){return e.length>0?e[e.length-1]:null}function Pt(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function ii(e){return Hv(e)?e:Jl(e)?rt(Promise.resolve(e)):ae(e)}const AR={exact:function TC(e,t,n){if(!Ni(e.segments,t.segments)||!ku(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!e.children[r]||!TC(e.children[r],t.children[r],n))return!1;return!0},subset:xC},MC={exact:function RR(e,t){return ir(e,t)},subset:function PR(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>bC(e[n],t[n]))},ignored:()=>!0};function IC(e,t,n){return AR[n.paths](e.root,t.root,n.matrixParams)&&MC[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function xC(e,t,n){return AC(e,t,t.segments,n)}function AC(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!Ni(i,n)||t.hasChildren()||!ku(i,n,r))}if(e.segments.length===n.length){if(!Ni(e.segments,n)||!ku(e.segments,n,r))return!1;for(const i in t.children)if(!e.children[i]||!xC(e.children[i],t.children[i],r))return!1;return!0}{const i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!(Ni(e.segments,i)&&ku(e.segments,i,r)&&e.children[Se])&&AC(e.children[Se],t,s,r)}}function ku(e,t,n){return t.every((r,i)=>MC[n](e[i].parameters,r.parameters))}class ki{constructor(t,n,r){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gs(this.queryParams)),this._queryParamMap}toString(){return OR.serialize(this)}}class Me{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Pt(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Nu(this)}}class Sa{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Gs(this.parameters)),this._parameterMap}toString(){return NC(this)}}function Ni(e,t){return e.length===t.length&&e.every((n,r)=>n.path===t[r].path)}let RC=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=oe({token:e,factory:function(){return new xf},providedIn:"root"}),e})();class xf{parse(t){const n=new GR(t);return new ki(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){const n=`/${Ea(t.root,!0)}`,r=function BR(e){const t=Object.keys(e).map(n=>{const r=e[n];return Array.isArray(r)?r.map(i=>`${Ou(n)}=${Ou(i)}`).join("&"):`${Ou(n)}=${Ou(r)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${n}${r}${"string"==typeof t.fragment?`#${function FR(e){return encodeURI(e)}(t.fragment)}`:""}`}}const OR=new xf;function Nu(e){return e.segments.map(t=>NC(t)).join("/")}function Ea(e,t){if(!e.hasChildren())return Nu(e);if(t){const n=e.children[Se]?Ea(e.children[Se],!1):"",r=[];return Pt(e.children,(i,s)=>{s!==Se&&r.push(`${s}:${Ea(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function NR(e,t){let n=[];return Pt(e.children,(r,i)=>{i===Se&&(n=n.concat(t(r,i)))}),Pt(e.children,(r,i)=>{i!==Se&&(n=n.concat(t(r,i)))}),n}(e,(r,i)=>i===Se?[Ea(e.children[Se],!1)]:[`${i}:${Ea(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[Se]?`${Nu(e)}/${n[0]}`:`${Nu(e)}/(${n.join("//")})`}}function PC(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ou(e){return PC(e).replace(/%3B/gi,";")}function Af(e){return PC(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fu(e){return decodeURIComponent(e)}function kC(e){return Fu(e.replace(/\+/g,"%20"))}function NC(e){return`${Af(e.path)}${function LR(e){return Object.keys(e).map(t=>`;${Af(t)}=${Af(e[t])}`).join("")}(e.parameters)}`}const HR=/^[^\/()?;=#]+/;function Lu(e){const t=e.match(HR);return t?t[0]:""}const jR=/^[^=?&#]+/,UR=/^[^&#]+/;class GR{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[Se]=new Me(t,n)),r}parseSegment(){const t=Lu(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(t),new Sa(Fu(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=Lu(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Lu(this.remaining);i&&(r=i,this.capture(r))}t[Fu(n)]=Fu(r)}parseQueryParam(t){const n=function VR(e){const t=e.match(jR);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const a=function $R(e){const t=e.match(UR);return t?t[0]:""}(this.remaining);a&&(r=a,this.capture(r))}const i=kC(n),s=kC(r);if(t.hasOwnProperty(i)){let a=t[i];Array.isArray(a)||(a=[a],t[i]=a),a.push(s)}else t[i]=s}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Lu(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new X(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=Se);const a=this.parseChildren();n[s]=1===Object.keys(a).length?a[Se]:new Me([],a),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new X(4011,!1)}}function Rf(e){return e.segments.length>0?new Me([],{[Se]:e}):e}function Bu(e){const t={};for(const r of Object.keys(e.children)){const s=Bu(e.children[r]);(s.segments.length>0||s.hasChildren())&&(t[r]=s)}return function zR(e){if(1===e.numberOfChildren&&e.children[Se]){const t=e.children[Se];return new Me(e.segments.concat(t.segments),t.children)}return e}(new Me(e.segments,t))}function Oi(e){return e instanceof ki}function YR(e,t,n,r,i){if(0===n.length)return zs(t.root,t.root,t.root,r,i);const s=function LC(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new FC(!0,0,e);let t=0,n=!1;const r=e.reduce((i,s,a)=>{if("object"==typeof s&&null!=s){if(s.outlets){const u={};return Pt(s.outlets,(d,g)=>{u[g]="string"==typeof d?d.split("/"):d}),[...i,{outlets:u}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===a?(s.split("/").forEach((u,d)=>{0==d&&"."===u||(0==d&&""===u?n=!0:".."===u?t++:""!=u&&i.push(u))}),i):[...i,s]},[]);return new FC(n,t,r)}(n);return s.toRoot()?zs(t.root,t.root,new Me([],{}),r,i):function a(d){const g=function XR(e,t,n,r){if(e.isAbsolute)return new Ws(t.root,!0,0);if(-1===r)return new Ws(n,n===t.root,0);return function BC(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new Ws(r,!1,i-s)}(n,r+(Ma(e.commands[0])?0:1),e.numberOfDoubleDots)}(s,t,e.snapshot?._urlSegment,d),_=g.processChildren?Ta(g.segmentGroup,g.index,s.commands):kf(g.segmentGroup,g.index,s.commands);return zs(t.root,g.segmentGroup,_,r,i)}(e.snapshot?._lastPathIndex)}function Ma(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function Ia(e){return"object"==typeof e&&null!=e&&e.outlets}function zs(e,t,n,r,i){let a,s={};r&&Pt(r,(d,g)=>{s[g]=Array.isArray(d)?d.map(_=>`${_}`):`${d}`}),a=e===t?n:OC(e,t,n);const u=Rf(Bu(a));return new ki(u,s,i)}function OC(e,t,n){const r={};return Pt(e.children,(i,s)=>{r[s]=i===t?n:OC(i,t,n)}),new Me(e.segments,r)}class FC{constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Ma(r[0]))throw new X(4003,!1);const i=r.find(Ia);if(i&&i!==EC(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Ws{constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}}function kf(e,t,n){if(e||(e=new Me([],{})),0===e.segments.length&&e.hasChildren())return Ta(e,t,n);const r=function ZR(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const a=e.segments[i],u=n[r];if(Ia(u))break;const d=`${u}`,g=r<n.length-1?n[r+1]:null;if(i>0&&void 0===d)break;if(d&&g&&"object"==typeof g&&void 0===g.outlets){if(!jC(d,g,a))return s;r+=2}else{if(!jC(d,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const s=new Me(e.segments.slice(0,r.pathIndex),{});return s.children[Se]=new Me(e.segments.slice(r.pathIndex),e.children),Ta(s,0,i)}return r.match&&0===i.length?new Me(e.segments,{}):r.match&&!e.hasChildren()?Nf(e,t,n):r.match?Ta(e,0,i):Nf(e,t,n)}function Ta(e,t,n){if(0===n.length)return new Me(e.segments,{});{const r=function QR(e){return Ia(e[0])?e[0].outlets:{[Se]:e}}(n),i={};return Pt(r,(s,a)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[a]=kf(e.children[a],t,s))}),Pt(e.children,(s,a)=>{void 0===r[a]&&(i[a]=s)}),new Me(e.segments,i)}}function Nf(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const s=n[i];if(Ia(s)){const d=JR(s.outlets);return new Me(r,d)}if(0===i&&Ma(n[0])){r.push(new Sa(e.segments[t].path,HC(n[0]))),i++;continue}const a=Ia(s)?s.outlets[Se]:`${s}`,u=i<n.length-1?n[i+1]:null;a&&u&&Ma(u)?(r.push(new Sa(a,HC(u))),i+=2):(r.push(new Sa(a,{})),i++)}return new Me(r,{})}function JR(e){const t={};return Pt(e,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[r]=Nf(new Me([],{}),0,n))}),t}function HC(e){const t={};return Pt(e,(n,r)=>t[r]=`${n}`),t}function jC(e,t,n){return e==n.path&&ir(t,n.parameters)}class Pr{constructor(t,n){this.id=t,this.url=n}}class Of extends Pr{constructor(t,n,r="imperative",i=null){super(t,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fi extends Pr{constructor(t,n,r){super(t,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Hu extends Pr{constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class VC extends Pr{constructor(t,n,r,i){super(t,n),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class eP extends Pr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tP extends Pr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nP extends Pr{constructor(t,n,r,i,s){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rP extends Pr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iP extends Pr{constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sP{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class oP{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class aP{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lP{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uP{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cP{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UC{constructor(t,n,r){this.routerEvent=t,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class $C{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=Ff(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){const n=Ff(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=Lf(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Lf(t,this._root).map(n=>n.value)}}function Ff(e,t){if(e===t.value)return t;for(const n of t.children){const r=Ff(e,n);if(r)return r}return null}function Lf(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Lf(e,n);if(r.length)return r.unshift(t),r}return[]}class kr{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function qs(e){const t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}class GC extends $C{constructor(t,n){super(t),this.snapshot=n,Bf(this,t)}toString(){return this.snapshot.toString()}}function zC(e,t){const n=function hP(e,t){const a=new ju([],{},{},"",{},Se,t,null,e.root,-1,{});return new qC("",new kr(a,[]))}(e,t),r=new Gn([new Sa("",{})]),i=new Gn({}),s=new Gn({}),a=new Gn({}),u=new Gn(""),d=new Li(r,i,a,u,s,Se,t,n.root);return d.snapshot=n.root,new GC(new kr(d,[]),n)}class Li{constructor(t,n,r,i,s,a,u,d){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=u,this.title=this.data?.pipe(be(g=>g[ba]))??ae(void 0),this._futureSnapshot=d}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(be(t=>Gs(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(be(t=>Gs(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function WC(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function fP(e){return e.reduce((t,n)=>({params:{...t.params,...n.params},data:{...t.data,...n.data},resolve:{...n.data,...t.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class ju{constructor(t,n,r,i,s,a,u,d,g,_,w,b){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=u,this.title=this.data?.[ba],this.routeConfig=d,this._urlSegment=g,this._lastPathIndex=_,this._correctedLastPathIndex=b??_,this._resolve=w}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qC extends $C{constructor(t,n){super(n),this.url=t,Bf(this,n)}toString(){return YC(this._root)}}function Bf(e,t){t.value._routerState=e,t.children.forEach(n=>Bf(e,n))}function YC(e){const t=e.children.length>0?` { ${e.children.map(YC).join(", ")} } `:"";return`${e.value}${t}`}function Hf(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,ir(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),ir(t.params,n.params)||e.params.next(n.params),function TR(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!ir(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),ir(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function jf(e,t){const n=ir(e.params,t.params)&&function kR(e,t){return Ni(e,t)&&e.every((n,r)=>ir(n.parameters,t[r].parameters))}(e.url,t.url);return n&&!(!e.parent!=!t.parent)&&(!e.parent||jf(e.parent,t.parent))}function xa(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function gP(e,t,n){return t.children.map(r=>{for(const i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return xa(e,r,i);return xa(e,r)})}(e,t,n);return new kr(r,i)}{if(e.shouldAttach(t.value)){const s=e.retrieve(t.value);if(null!==s){const a=s.route;return a.value._futureSnapshot=t.value,a.children=t.children.map(u=>xa(e,u)),a}}const r=function mP(e){return new Li(new Gn(e.url),new Gn(e.params),new Gn(e.queryParams),new Gn(e.fragment),new Gn(e.data),e.outlet,e.component,e)}(t.value),i=t.children.map(s=>xa(e,s));return new kr(r,i)}}const Vf="ngNavigationCancelingError";function KC(e,t){const{redirectTo:n,navigationBehaviorOptions:r}=Oi(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=XC(!1,0,t);return i.url=n,i.navigationBehaviorOptions=r,i}function XC(e,t,n){const r=new Error("NavigationCancelingError: "+(e||""));return r[Vf]=!0,r.cancellationCode=t,n&&(r.url=n),r}function QC(e){return ZC(e)&&Oi(e.url)}function ZC(e){return e&&e[Vf]}class vP{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Aa,this.attachRef=null}}let Aa=(()=>{class e{constructor(){this.contexts=new Map}onChildOutletCreated(n,r){const i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new vP,this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Vu=!1;let JC=(()=>{class e{constructor(n,r,i,s,a){this.parentContexts=n,this.location=r,this.changeDetector=s,this.environmentInjector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new Ce,this.deactivateEvents=new Ce,this.attachEvents=new Ce,this.detachEvents=new Ce,this.name=i||Se,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,Vu);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,Vu);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,Vu);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new X(4013,Vu);this._activatedRoute=n;const i=this.location,a=n._futureSnapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,d=new yP(n,u,i.injector);if(r&&function _P(e){return!!e.resolveComponentFactory}(r)){const g=r.resolveComponentFactory(a);this.activated=i.createComponent(g,i.length,d)}else this.activated=i.createComponent(a,{index:i.length,injector:d,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(n){return new(n||e)(ne(Aa),ne(jn),function Po(e){return function hD(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(ag(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===t)return n[i+1];i+=2}}}return null}(me(),e)}("name"),ne(Wh),ne(Kr))},e.\u0275dir=Dt({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),e})();class yP{constructor(t,n,r){this.route=t,this.childContexts=n,this.parent=r}get(t,n){return t===Li?this.route:t===Aa?this.childContexts:this.parent.get(t,n)}}let Uf=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Yt({type:e,selectors:[["ng-component"]],standalone:!0,features:[u_],decls:1,vars:0,template:function(n,r){1&n&&Ls(0,"router-outlet")},dependencies:[JC],encapsulation:2}),e})();function ew(e,t){return e.providers&&!e._injector&&(e._injector=su(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Gf(e){const t=e.children&&e.children.map(Gf),n=t?{...e,children:t}:{...e};return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==Se&&(n.component=Uf),n}function Mn(e){return e.outlet||Se}function tw(e,t){const n=e.filter(r=>Mn(r)===t);return n.push(...e.filter(r=>Mn(r)!==t)),n}function Ra(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){const n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class SP{constructor(t,n,r,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(t){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Hf(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){const i=qs(n);t.children.forEach(s=>{const a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),Pt(i,(s,a)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(t,n,r){const i=t.value,s=n?n.value:null;if(i===s)if(i.component){const a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(t,n,a.children)}else this.deactivateChildRoutes(t,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=qs(t);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],i);if(r&&r.outlet){const a=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:u})}}deactivateRouteAndOutlet(t,n){const r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,s=qs(t);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,n,r){const i=qs(n);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new cP(s.value.snapshot))}),t.children.length&&this.forwardEvent(new lP(t.value.snapshot))}activateRoutes(t,n,r){const i=t.value,s=n?n.value:null;if(Hf(i),i===s)if(i.component){const a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,a.children)}else this.activateChildRoutes(t,n,r);else if(i.component){const a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const u=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(u.contexts),a.attachRef=u.componentRef,a.route=u.route.value,a.outlet&&a.outlet.attach(u.componentRef,u.route.value),Hf(u.route.value),this.activateChildRoutes(t,null,a.children)}else{const u=Ra(i.snapshot),d=u?.get(Ko)??null;a.attachRef=null,a.route=i,a.resolver=d,a.injector=u,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(t,null,a.children)}}else this.activateChildRoutes(t,null,r)}}class nw{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Uu{constructor(t,n){this.component=t,this.route=n}}function EP(e,t,n){const r=e._root;return Pa(r,t?t._root:null,n,[r.value])}function Ys(e,t){const n=Symbol(),r=t.get(e,n);return r===n?"function"!=typeof e||function Cc(e){return null!==Qi(e)}(e)?t.get(e):e:r}function Pa(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=qs(t);return e.children.forEach(a=>{(function IP(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=t?t.value:null,u=n?n.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const d=function TP(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Ni(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Ni(e.url,t.url)||!ir(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!jf(e,t)||!ir(e.queryParams,t.queryParams);default:return!jf(e,t)}}(a,s,s.routeConfig.runGuardsAndResolvers);d?i.canActivateChecks.push(new nw(r)):(s.data=a.data,s._resolvedData=a._resolvedData),Pa(e,t,s.component?u?u.children:null:n,r,i),d&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new Uu(u.outlet.component,a))}else a&&ka(t,u,i),i.canActivateChecks.push(new nw(r)),Pa(e,null,s.component?u?u.children:null:n,r,i)})(a,s[a.value.outlet],n,r.concat([a.value]),i),delete s[a.value.outlet]}),Pt(s,(a,u)=>ka(a,n.getContext(u),i)),i}function ka(e,t,n){const r=qs(e),i=e.value;Pt(r,(s,a)=>{ka(s,i.component?t?t.children.getContext(a):null:t,n)}),n.canDeactivateChecks.push(new Uu(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}function Na(e){return"function"==typeof e}function zf(e){return e instanceof Ca||"EmptyError"===e?.name}const $u=Symbol("INITIAL_VALUE");function Ks(){return rr(e=>mC(e.map(t=>t.pipe(Da(1),function wR(...e){const t=Fr(e);return lt((n,r)=>{(t?Sf(e,n,t):Sf(e,n)).subscribe(r)})}($u)))).pipe(be(t=>{for(const n of t)if(!0!==n){if(n===$u)return $u;if(!1===n||n instanceof ki)return n}return!0}),Rr(t=>t!==$u),Da(1)))}function rw(e){return function Ua(...e){return rc(e)}(Vt(t=>{if(Oi(t))throw KC(0,t)}),be(t=>!0===t))}const Wf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function iw(e,t,n,r,i){const s=qf(e,t,n);return s.matched?function zP(e,t,n,r){const i=t.canMatch;return i&&0!==i.length?ae(i.map(a=>{const u=Ys(a,e);return ii(function NP(e){return e&&Na(e.canMatch)}(u)?u.canMatch(t,n):e.runInContext(()=>u(t,n)))})).pipe(Ks(),rw()):ae(!0)}(r=ew(t,r),t,n).pipe(be(a=>!0===a?s:{...Wf})):ae(s)}function qf(e,t,n){if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?{...Wf}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(t.matcher||IR)(n,e,t);if(!i)return{...Wf};const s={};Pt(i.posParams,(u,d)=>{s[d]=u.path});const a=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function Gu(e,t,n,r,i="corrected"){if(n.length>0&&function YP(e,t,n){return n.some(r=>zu(e,t,r)&&Mn(r)!==Se)}(e,n,r)){const a=new Me(t,function qP(e,t,n,r){const i={};i[Se]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&Mn(s)!==Se){const a=new Me([],{});a._sourceSegment=e,a._segmentIndexShift=t.length,i[Mn(s)]=a}return i}(e,t,r,new Me(n,e.children)));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:[]}}if(0===n.length&&function KP(e,t,n){return n.some(r=>zu(e,t,r))}(e,n,r)){const a=new Me(e.segments,function WP(e,t,n,r,i,s){const a={};for(const u of r)if(zu(e,n,u)&&!i[Mn(u)]){const d=new Me([],{});d._sourceSegment=e,d._segmentIndexShift="legacy"===s?e.segments.length:t.length,a[Mn(u)]=d}return{...i,...a}}(e,t,n,r,e.children,i));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:n}}const s=new Me(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function zu(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function sw(e,t,n,r){return!!(Mn(e)===r||r!==Se&&zu(t,n,e))&&("**"===e.path||qf(t,e,n).matched)}function ow(e,t,n){return 0===t.length&&!e.children[n]}const Wu=!1;class qu{constructor(t){this.segmentGroup=t||null}}class aw{constructor(t){this.urlTree=t}}function Oa(e){return wa(new qu(e))}function lw(e){return wa(new aw(e))}class JP{constructor(t,n,r,i,s){this.injector=t,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const t=Gu(this.urlTree.root,[],[],this.config).segmentGroup,n=new Me(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,n,Se).pipe(be(s=>this.createUrlTree(Bu(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ri(s=>{if(s instanceof aw)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof qu?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,Se).pipe(be(i=>this.createUrlTree(Bu(i),t.queryParams,t.fragment))).pipe(ri(i=>{throw i instanceof qu?this.noMatchError(i):i}))}noMatchError(t){return new X(4002,Wu)}createUrlTree(t,n,r){const i=Rf(t);return new ki(i,n,r)}expandSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,n,r).pipe(be(s=>new Me([],s))):this.expandSegment(t,r,n,r.segments,i,!0)}expandChildren(t,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return rt(i).pipe(ni(s=>{const a=r.children[s],u=tw(n,s);return this.expandSegmentGroup(t,u,a,s).pipe(be(d=>({segment:d,outlet:s})))}),wC((s,a)=>(s[a.outlet]=a.segment,s),{}),DC())}expandSegment(t,n,r,i,s,a){return rt(r).pipe(ni(u=>this.expandSegmentAgainstRoute(t,n,r,u,i,s,a).pipe(ri(g=>{if(g instanceof qu)return ae(null);throw g}))),ti(u=>!!u),ri((u,d)=>{if(zf(u))return ow(n,i,s)?ae(new Me([],{})):Oa(n);throw u}))}expandSegmentAgainstRoute(t,n,r,i,s,a,u){return sw(i,n,s,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,n,i,s,a):u&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,r,i,s,a):Oa(n):Oa(n)}expandSegmentAgainstRouteUsingRedirect(t,n,r,i,s,a){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,i,a):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,s,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?lw(s):this.lineralizeSegments(r,s).pipe(gt(a=>{const u=new Me(a,{});return this.expandSegment(t,u,n,a,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,r,i,s,a){const{matched:u,consumedSegments:d,remainingSegments:g,positionalParamSegments:_}=qf(n,i,s);if(!u)return Oa(n);const w=this.applyRedirectCommands(d,i.redirectTo,_);return i.redirectTo.startsWith("/")?lw(w):this.lineralizeSegments(i,w).pipe(gt(b=>this.expandSegment(t,n,r,b.concat(g),a,!1)))}matchSegmentAgainstRoute(t,n,r,i,s){return"**"===r.path?(t=ew(r,t),r.loadChildren?(r._loadedRoutes?ae({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(t,r)).pipe(be(u=>(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,new Me(i,{})))):ae(new Me(i,{}))):iw(n,r,i,t).pipe(rr(({matched:a,consumedSegments:u,remainingSegments:d})=>a?this.getChildConfig(t=r._injector??t,r,i).pipe(gt(_=>{const w=_.injector??t,b=_.routes,{segmentGroup:M,slicedSegments:A}=Gu(n,u,d,b),F=new Me(M.segments,M.children);if(0===A.length&&F.hasChildren())return this.expandChildren(w,b,F).pipe(be(L=>new Me(u,L)));if(0===b.length&&0===A.length)return ae(new Me(u,{}));const B=Mn(r)===s;return this.expandSegment(w,F,b,A,B?Se:s,!0).pipe(be(q=>new Me(u.concat(q.segments),q.children)))})):Oa(n)))}getChildConfig(t,n,r){return n.children?ae({routes:n.children,injector:t}):n.loadChildren?void 0!==n._loadedRoutes?ae({routes:n._loadedRoutes,injector:n._loadedInjector}):function GP(e,t,n,r){const i=t.canLoad;return void 0===i||0===i.length?ae(!0):ae(i.map(a=>{const u=Ys(a,e);return ii(function AP(e){return e&&Na(e.canLoad)}(u)?u.canLoad(t,n):e.runInContext(()=>u(t,n)))})).pipe(Ks(),rw())}(t,n,r).pipe(gt(i=>i?this.configLoader.loadChildren(t,n).pipe(Vt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function QP(e){return wa(XC(Wu,3))}())):ae({routes:[],injector:t})}lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ae(r);if(i.numberOfChildren>1||!i.children[Se])return wa(new X(4e3,Wu));i=i.children[Se]}}applyRedirectCommands(t,n,r){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,r)}applyRedirectCreateUrlTree(t,n,r,i){const s=this.createSegmentGroup(t,n.root,r,i);return new ki(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const r={};return Pt(t,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const u=i.substring(1);r[s]=n[u]}else r[s]=i}),r}createSegmentGroup(t,n,r,i){const s=this.createSegments(t,n.segments,r,i);let a={};return Pt(n.children,(u,d)=>{a[d]=this.createSegmentGroup(t,u,r,i)}),new Me(s,a)}createSegments(t,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,i):this.findOrReturn(s,r))}findPosParam(t,n,r){const i=r[n.path.substring(1)];if(!i)throw new X(4001,Wu);return i}findOrReturn(t,n){let r=0;for(const i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}}class t2{}class i2{constructor(t,n,r,i,s,a,u,d){this.injector=t,this.rootComponentType=n,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=u,this.urlSerializer=d}recognize(){const t=Gu(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,Se).pipe(be(n=>{if(null===n)return null;const r=new ju([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Se,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new kr(r,n),s=new qC(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const n=t.value,r=WC(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(t,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(t,n,r):this.processSegment(t,n,r,r.segments,i)}processChildren(t,n,r){return rt(Object.keys(r.children)).pipe(ni(i=>{const s=r.children[i],a=tw(n,i);return this.processSegmentGroup(t,a,s,i)}),wC((i,s)=>i&&s?(i.push(...s),i):null),function SR(e,t=!1){return lt((n,r)=>{let i=0;n.subscribe(ut(r,s=>{const a=e(s,i++);(a||t)&&r.next(s),!a&&r.complete()}))})}(i=>null!==i),Pu(null),DC(),be(i=>{if(null===i)return null;const s=uw(i);return function s2(e){e.sort((t,n)=>t.value.outlet===Se?-1:n.value.outlet===Se?1:t.value.outlet.localeCompare(n.value.outlet))}(s),s}))}processSegment(t,n,r,i,s){return rt(n).pipe(ni(a=>this.processSegmentAgainstRoute(a._injector??t,a,r,i,s)),ti(a=>!!a),ri(a=>{if(zf(a))return ow(r,i,s)?ae([]):ae(null);throw a}))}processSegmentAgainstRoute(t,n,r,i,s){if(n.redirectTo||!sw(n,r,i,s))return ae(null);let a;if("**"===n.path){const u=i.length>0?EC(i).parameters:{},d=dw(r)+i.length;a=ae({snapshot:new ju(i,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fw(n),Mn(n),n.component??n._loadedComponent??null,n,cw(r),d,pw(n),d),consumedSegments:[],remainingSegments:[]})}else a=iw(r,n,i,t).pipe(be(({matched:u,consumedSegments:d,remainingSegments:g,parameters:_})=>{if(!u)return null;const w=dw(r)+d.length;return{snapshot:new ju(d,_,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,fw(n),Mn(n),n.component??n._loadedComponent??null,n,cw(r),w,pw(n),w),consumedSegments:d,remainingSegments:g}}));return a.pipe(rr(u=>{if(null===u)return ae(null);const{snapshot:d,consumedSegments:g,remainingSegments:_}=u;t=n._injector??t;const w=n._loadedInjector??t,b=function o2(e){return e.children?e.children:e.loadChildren?e._loadedRoutes:[]}(n),{segmentGroup:M,slicedSegments:A}=Gu(r,g,_,b.filter(B=>void 0===B.redirectTo),this.relativeLinkResolution);if(0===A.length&&M.hasChildren())return this.processChildren(w,b,M).pipe(be(B=>null===B?null:[new kr(d,B)]));if(0===b.length&&0===A.length)return ae([new kr(d,[])]);const F=Mn(n)===s;return this.processSegment(w,b,M,A,F?Se:s).pipe(be(B=>null===B?null:[new kr(d,B)]))}))}}function a2(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function uw(e){const t=[],n=new Set;for(const r of e){if(!a2(r)){t.push(r);continue}const i=t.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):t.push(r)}for(const r of n){const i=uw(r.children);t.push(new kr(r.value,i))}return t.filter(r=>!n.has(r))}function cw(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function dw(e){let t=e,n=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift??0;return n-1}function fw(e){return e.data||{}}function pw(e){return e.resolve||{}}function gw(e){return"string"==typeof e.title||null===e.title}function Yf(e){return rr(t=>{const n=e(t);return n?rt(n).pipe(be(()=>t)):ae(t)})}let mw=(()=>{class e{buildTitle(n){let r,i=n.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Se);return r}getResolvedTitleForRoute(n){return n.data[ba]}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=oe({token:e,factory:function(){return ot(vw)},providedIn:"root"}),e})(),vw=(()=>{class e extends mw{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return e.\u0275fac=function(n){return new(n||e)(te(fC))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class g2{}class v2 extends class m2{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const Ku=new fe("",{providedIn:"root",factory:()=>({})}),Kf=new fe("ROUTES");let Xf=(()=>{class e{constructor(n,r){this.injector=n,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return ae(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=ii(n.loadComponent()).pipe(Vt(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),If(()=>{this.componentLoaders.delete(n)})),i=new _C(r,()=>new I).pipe(Ef());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ae({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(be(u=>{this.onLoadEndListener&&this.onLoadEndListener(r);let d,g,_=!1;Array.isArray(u)?g=u:(d=u.create(n).injector,g=SC(d.get(Kf,[],ue.Self|ue.Optional)));return{routes:g.map(Gf),injector:d}}),If(()=>{this.childrenLoaders.delete(r)})),a=new _C(s,()=>new I).pipe(Ef());return this.childrenLoaders.set(r,a),a}loadModuleFactoryOrRoutes(n){return ii(n()).pipe(gt(r=>r instanceof a_||Array.isArray(r)?ae(r):rt(this.compiler.compileModuleAsync(r))))}}return e.\u0275fac=function(n){return new(n||e)(te(Dn),te(Lh))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class _2{}class C2{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function w2(e){throw e}function D2(e,t,n){return t.parse("/")}const b2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},S2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function _w(){const e=ot(RC),t=ot(Aa),n=ot(Jh),r=ot(Dn),i=ot(Lh),s=ot(Kf,{optional:!0})??[],a=ot(Ku,{optional:!0})??{},u=ot(vw),d=ot(mw,{optional:!0}),g=ot(_2,{optional:!0}),_=ot(g2,{optional:!0}),w=new kt(null,e,t,n,r,i,SC(s));return g&&(w.urlHandlingStrategy=g),_&&(w.routeReuseStrategy=_),w.titleStrategy=d??u,function E2(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy),e.canceledNavigationResolution&&(t.canceledNavigationResolution=e.canceledNavigationResolution)}(a,w),w}let kt=(()=>{class e{constructor(n,r,i,s,a,u,d){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=d,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new I,this.errorHandler=w2,this.malformedUriErrorHandler=D2,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ae(void 0),this.urlHandlingStrategy=new C2,this.routeReuseStrategy=new v2,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=a.get(Xf),this.configLoader.onLoadEndListener=b=>this.triggerEvent(new oP(b)),this.configLoader.onLoadStartListener=b=>this.triggerEvent(new sP(b)),this.ngModule=a.get(Ai),this.console=a.get(n1);const w=a.get(_t);this.isNgZoneEnabled=w instanceof _t&&_t.isInAngularZone(),this.resetConfig(d),this.currentUrlTree=function xR(){return new ki(new Me([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=zC(this.currentUrlTree,this.rootComponentType),this.transitions=new Gn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(Rr(i=>0!==i.id),be(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),rr(i=>{let s=!1,a=!1;return ae(i).pipe(Vt(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),rr(u=>{const d=this.browserUrlTree.toString(),g=!this.navigated||u.extractedUrl.toString()!==d||d!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||g)&&this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return Cw(u.source)&&(this.browserUrlTree=u.extractedUrl),ae(u).pipe(rr(w=>{const b=this.transitions.getValue();return r.next(new Of(w.id,this.serializeUrl(w.extractedUrl),w.source,w.restoredState)),b!==this.transitions.getValue()?An:Promise.resolve(w)}),function e2(e,t,n,r){return rr(i=>function ZP(e,t,n,r,i){return new JP(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe(be(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Vt(w=>{this.currentNavigation={...this.currentNavigation,finalUrl:w.urlAfterRedirects},i.urlAfterRedirects=w.urlAfterRedirects}),function u2(e,t,n,r,i,s){return gt(a=>function r2(e,t,n,r,i,s,a="emptyOnly",u="legacy"){return new i2(e,t,n,r,i,a,u,s).recognize().pipe(rr(d=>null===d?function n2(e){return new nt(t=>t.error(e))}(new t2):ae(d)))}(e,t,n,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i,s).pipe(be(u=>({...a,targetSnapshot:u}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Vt(w=>{if(i.targetSnapshot=w.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!w.extras.skipLocationChange){const M=this.urlHandlingStrategy.merge(w.urlAfterRedirects,w.rawUrl);this.setBrowserUrl(M,w)}this.browserUrlTree=w.urlAfterRedirects}const b=new eP(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);r.next(b)}));if(g&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:b,extractedUrl:M,source:A,restoredState:F,extras:B}=u,H=new Of(b,this.serializeUrl(M),A,F);r.next(H);const q=zC(M,this.rootComponentType).snapshot;return ae(i={...u,targetSnapshot:q,urlAfterRedirects:M,extras:{...B,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=u.rawUrl,u.resolve(null),An}),Vt(u=>{const d=new tP(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot);this.triggerEvent(d)}),be(u=>i={...u,guards:EP(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),function FP(e,t){return gt(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=n;return 0===a.length&&0===s.length?ae({...n,guardsResult:!0}):function LP(e,t,n,r){return rt(e).pipe(gt(i=>function $P(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?ae(s.map(u=>{const d=Ra(t)??i,g=Ys(u,d);return ii(function kP(e){return e&&Na(e.canDeactivate)}(g)?g.canDeactivate(e,t,n,r):d.runInContext(()=>g(e,t,n,r))).pipe(ti())})).pipe(Ks()):ae(!0)}(i.component,i.route,n,t,r)),ti(i=>!0!==i,!0))}(a,r,i,e).pipe(gt(u=>u&&function xP(e){return"boolean"==typeof e}(u)?function BP(e,t,n,r){return rt(t).pipe(ni(i=>Sf(function jP(e,t){return null!==e&&t&&t(new aP(e)),ae(!0)}(i.route.parent,r),function HP(e,t){return null!==e&&t&&t(new uP(e)),ae(!0)}(i.route,r),function UP(e,t,n){const r=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(a=>function MP(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(a)).filter(a=>null!==a).map(a=>yC(()=>ae(a.guards.map(d=>{const g=Ra(a.node)??n,_=Ys(d,g);return ii(function PP(e){return e&&Na(e.canActivateChild)}(_)?_.canActivateChild(r,e):g.runInContext(()=>_(r,e))).pipe(ti())})).pipe(Ks())));return ae(s).pipe(Ks())}(e,i.path,n),function VP(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return ae(!0);const i=r.map(s=>yC(()=>{const a=Ra(t)??n,u=Ys(s,a);return ii(function RP(e){return e&&Na(e.canActivate)}(u)?u.canActivate(t,e):a.runInContext(()=>u(t,e))).pipe(ti())}));return ae(i).pipe(Ks())}(e,i.route,n))),ti(i=>!0!==i,!0))}(r,s,e,t):ae(u)),be(u=>({...n,guardsResult:u})))})}(this.ngModule.injector,u=>this.triggerEvent(u)),Vt(u=>{if(i.guardsResult=u.guardsResult,Oi(u.guardsResult))throw KC(0,u.guardsResult);const d=new nP(u.id,this.serializeUrl(u.extractedUrl),this.serializeUrl(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.triggerEvent(d)}),Rr(u=>!!u.guardsResult||(this.restoreHistory(u),this.cancelNavigationTransition(u,"",3),!1)),Yf(u=>{if(u.guards.canActivateChecks.length)return ae(u).pipe(Vt(d=>{const g=new rP(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(g)}),rr(d=>{let g=!1;return ae(d).pipe(function c2(e,t){return gt(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ae(n);let s=0;return rt(i).pipe(ni(a=>function d2(e,t,n,r){const i=e.routeConfig,s=e._resolve;return void 0!==i?.title&&!gw(i)&&(s[ba]=i.title),function h2(e,t,n,r){const i=function f2(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}(e);if(0===i.length)return ae({});const s={};return rt(i).pipe(gt(a=>function p2(e,t,n,r){const i=Ra(t)??r,s=Ys(e,i);return ii(s.resolve?s.resolve(t,n):i.runInContext(()=>s(t,n)))}(e[a],t,n,r).pipe(ti(),Vt(u=>{s[a]=u}))),Mf(1),function ER(e){return be(()=>e)}(s),ri(a=>zf(a)?An:wa(a)))}(s,e,t,r).pipe(be(a=>(e._resolvedData=a,e.data=WC(e,n).resolve,i&&gw(i)&&(e.data[ba]=i.title),null)))}(a.route,r,e,t)),Vt(()=>s++),Mf(1),gt(a=>s===i.length?ae(n):An))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Vt({next:()=>g=!0,complete:()=>{g||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",2))}}))}),Vt(d=>{const g=new iP(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(g)}))}),Yf(u=>{const d=g=>{const _=[];g.routeConfig?.loadComponent&&!g.routeConfig._loadedComponent&&_.push(this.configLoader.loadComponent(g.routeConfig).pipe(Vt(w=>{g.component=w}),be(()=>{})));for(const w of g.children)_.push(...d(w));return _};return mC(d(u.targetSnapshot.root)).pipe(Pu(),Da(1))}),Yf(()=>this.afterPreactivation()),be(u=>{const d=function pP(e,t,n){const r=xa(e,t._root,n?n._root:void 0);return new GC(r,t)}(this.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return i={...u,targetRouterState:d}}),Vt(u=>{this.currentUrlTree=u.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl),this.routerState=u.targetRouterState,"deferred"===this.urlUpdateStrategy&&(u.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,u),this.browserUrlTree=u.urlAfterRedirects)}),((e,t,n)=>be(r=>(new SP(t,r.targetRouterState,r.currentRouterState,n).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,u=>this.triggerEvent(u)),Vt({next(){s=!0},complete(){s=!0}}),If(()=>{s||a||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),ri(u=>{if(a=!0,ZC(u)){QC(u)||(this.navigated=!0,this.restoreHistory(i,!0));const d=new Hu(i.id,this.serializeUrl(i.extractedUrl),u.message,u.cancellationCode);if(r.next(d),QC(u)){const g=this.urlHandlingStrategy.merge(u.url,this.rawUrlTree),_={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Cw(i.source)};this.scheduleNavigation(g,"imperative",null,_,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const d=new VC(i.id,this.serializeUrl(i.extractedUrl),u,i.targetSnapshot??void 0);r.next(d);try{i.resolve(this.errorHandler(u))}catch(g){i.reject(g)}}return An}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next({...this.transitions.value,...n})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=n.state?.navigationId?n.state:null;if(s){const u={...s};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(i.state=u)}const a=this.parseUrl(n.url);this.scheduleNavigation(a,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){this.config=n.map(Gf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:u,preserveFragment:d}=r,g=i||this.routerState.root,_=d?this.currentUrlTree.fragment:a;let w=null;switch(u){case"merge":w={...this.currentUrlTree.queryParams,...s};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=s||null}return null!==w&&(w=this.removeEmptyProps(w)),YR(g,this.currentUrlTree,n,w,_??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Oi(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function M2(e){for(let t=0;t<e.length;t++){if(null==e[t])throw new X(4008,false)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...b2}:!1===r?{...S2}:r,Oi(n))return IC(this.currentUrlTree,n,i);const s=this.parseUrl(n);return IC(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new Fi(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,i,s,a){if(this.disposed)return Promise.resolve(!1);let u,d,g;a?(u=a.resolve,d=a.reject,g=a.promise):g=new Promise((b,M)=>{u=b,d=M});const _=++this.navigationId;let w;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),w=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):w=0,this.setTransition({id:_,targetPageId:w,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:s,resolve:u,reject:d,promise:g,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),g.catch(b=>Promise.reject(b))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r,i){const s=new Hu(n.id,this.serializeUrl(n.extractedUrl),r,i);this.triggerEvent(s),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return e.\u0275fac=function(n){Od()},e.\u0275prov=oe({token:e,factory:function(){return _w()},providedIn:"root"}),e})();function Cw(e){return"imperative"!==e}class ww{}let x2=(()=>{class e{constructor(n,r,i,s,a){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Rr(n=>n instanceof Fi),ni(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=su(s.providers,n,`Route: ${s.path}`));const a=s._injector??n,u=s._loadedInjector??a;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(a,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(u,s.children??s._loadedRoutes))}return rt(i).pipe(lr())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):ae(null);const s=i.pipe(gt(a=>null===a?ae(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??n,a.routes))));return r.loadComponent&&!r._loadedComponent?rt([s,this.loader.loadComponent(r)]).pipe(lr()):s})}}return e.\u0275fac=function(n){return new(n||e)(te(kt),te(Lh),te(Kr),te(ww),te(Xf))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Jf=new fe("");let Dw=(()=>{class e{constructor(n,r,i={}){this.router=n,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof Of?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Fi&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof UC&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new UC(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(n){Od()},e.\u0275prov=oe({token:e,factory:e.\u0275fac}),e})();function Xs(e,t){return{\u0275kind:e,\u0275providers:t}}function ep(e){return[{provide:Kf,multi:!0,useValue:e}]}function Sw(){const e=ot(Dn);return t=>{const n=e.get(hu);if(t!==n.components[0])return;const r=e.get(kt),i=e.get(Ew);1===e.get(tp)&&r.initialNavigation(),e.get(Mw,null,ue.Optional)?.setUpPreloading(),e.get(Jf,null,ue.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const Ew=new fe("",{factory:()=>new I}),tp=new fe("",{providedIn:"root",factory:()=>1});const Mw=new fe("");function k2(e){return Xs(0,[{provide:Mw,useExisting:x2},{provide:ww,useExisting:e}])}const Iw=new fe("ROUTER_FORROOT_GUARD"),N2=[Jh,{provide:RC,useClass:xf},{provide:kt,useFactory:_w},Aa,{provide:Li,useFactory:function bw(e){return e.routerState.root},deps:[kt]},Xf];function O2(){return new n0("Router",kt)}let Tw=(()=>{class e{constructor(n){}static forRoot(n,r){return{ngModule:e,providers:[N2,[],ep(n),{provide:Iw,useFactory:H2,deps:[[kt,new Ho,new jo]]},{provide:Ku,useValue:r||{}},r?.useHash?{provide:Pi,useClass:G1}:{provide:Pi,useClass:T0},{provide:Jf,useFactory:()=>{const e=ot(kt),t=ot(dA),n=ot(Ku);return n.scrollOffset&&t.setOffset(n.scrollOffset),new Dw(e,t,n)}},r?.preloadingStrategy?k2(r.preloadingStrategy).\u0275providers:[],{provide:n0,multi:!0,useFactory:O2},r?.initialNavigation?j2(r):[],[{provide:xw,useFactory:Sw},{provide:K_,multi:!0,useExisting:xw}]]}}static forChild(n){return{ngModule:e,providers:[ep(n)]}}}return e.\u0275fac=function(n){return new(n||e)(te(Iw,8))},e.\u0275mod=Tt({type:e}),e.\u0275inj=zt({imports:[Uf]}),e})();function H2(e){return"guarded"}function j2(e){return["disabled"===e.initialNavigation?Xs(3,[{provide:uu,multi:!0,useFactory:()=>{const t=ot(kt);return()=>{t.setUpLocationChangeListener()}}},{provide:tp,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Xs(2,[{provide:tp,useValue:0},{provide:uu,multi:!0,deps:[Dn],useFactory:t=>{const n=t.get(U1,Promise.resolve());let r=!1;return()=>n.then(()=>new Promise(s=>{const a=t.get(kt),u=t.get(Ew);(function i(s){t.get(kt).events.pipe(Rr(u=>u instanceof Fi||u instanceof Hu||u instanceof VC),be(u=>u instanceof Fi||u instanceof Hu&&(0===u.code||1===u.code)&&null),Rr(u=>null!==u),Da(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),a.afterPreactivation=()=>(s(!0),r||u.closed?ae(void 0):u),a.initialNavigation()}))}}]).\u0275providers:[]]}const xw=new fe(""),U2=[];let $2=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Tt({type:e}),e.\u0275inj=zt({imports:[Tw.forRoot(U2),Tw]}),e})();function Aw(e,t,n,r,i,s,a){try{var u=e[s](a),d=u.value}catch(g){return void n(g)}u.done?t(d):Promise.resolve(d).then(r,i)}function sr(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var s=e.apply(t,n);function a(d){Aw(s,r,i,a,u,"next",d)}function u(d){Aw(s,r,i,a,u,"throw",d)}a(void 0)})}}var In=Hi(207);function Qs(e,t){const n="object"==typeof t;return new Promise((r,i)=>{const s=new Ot({next:a=>{r(a),s.unsubscribe()},error:i,complete:()=>{n?r(t.defaultValue):i(new Ca)}});e.subscribe(s)})}class Rw{}class Pw{}class Nr{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const i=n.slice(0,r),s=i.toLowerCase(),a=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(n=>{let r=t[n];const i=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(n,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof Nr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new Nr;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Nr?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,n);const i=("a"===t.op?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":const s=t.value;if(s){let a=this.headers.get(n);if(!a)return;a=a.filter(u=>-1===s.indexOf(u)),0===a.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,a)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class G2{encodeKey(t){return kw(t)}encodeValue(t){return kw(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const W2=/%(\d[a-f0-9])/gi,q2={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function kw(e){return encodeURIComponent(e).replace(W2,(t,n)=>q2[n]??t)}function Ju(e){return`${e}`}class si{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new G2,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function z2(e,t){const n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[a,u]=-1==s?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,s)),t.decodeValue(i.slice(s+1))],d=n.get(a)||[];d.push(u),n.set(a,d)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const r=t.fromObject[n],i=Array.isArray(r)?r.map(Ju):[Ju(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(r=>{const i=t[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new si({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(Ju(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const i=r.indexOf(Ju(t.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Y2{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function Nw(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function Ow(e){return typeof Blob<"u"&&e instanceof Blob}function Fw(e){return typeof FormData<"u"&&e instanceof FormData}class Fa{constructor(t,n,r,i){let s;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function K2(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Nr),this.context||(this.context=new Y2),this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=n;else{const u=n.indexOf("?");this.urlWithParams=n+(-1===u?"?":u<n.length-1?"&":"")+a}}else this.params=new si,this.urlWithParams=n}serializeBody(){return null===this.body?null:Nw(this.body)||Ow(this.body)||Fw(this.body)||function X2(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof si?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Fw(this.body)?null:Ow(this.body)?this.body.type||null:Nw(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof si?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,a=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,u=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let d=t.headers||this.headers,g=t.params||this.params;const _=t.context??this.context;return void 0!==t.setHeaders&&(d=Object.keys(t.setHeaders).reduce((w,b)=>w.set(b,t.setHeaders[b]),d)),t.setParams&&(g=Object.keys(t.setParams).reduce((w,b)=>w.set(b,t.setParams[b]),g)),new Fa(n,r,s,{params:g,headers:d,context:_,reportProgress:u,responseType:i,withCredentials:a})}}var pt=(()=>((pt=pt||{})[pt.Sent=0]="Sent",pt[pt.UploadProgress=1]="UploadProgress",pt[pt.ResponseHeader=2]="ResponseHeader",pt[pt.DownloadProgress=3]="DownloadProgress",pt[pt.Response=4]="Response",pt[pt.User=5]="User",pt))();class np{constructor(t,n=200,r="OK"){this.headers=t.headers||new Nr,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class rp extends np{constructor(t={}){super(t),this.type=pt.ResponseHeader}clone(t={}){return new rp({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class ec extends np{constructor(t={}){super(t),this.type=pt.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new ec({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Lw extends np{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function ip(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials}}let sp=(()=>{class e{constructor(n){this.handler=n}request(n,r,i={}){let s;if(n instanceof Fa)s=n;else{let d,g;d=i.headers instanceof Nr?i.headers:new Nr(i.headers),i.params&&(g=i.params instanceof si?i.params:new si({fromObject:i.params})),s=new Fa(n,r,void 0!==i.body?i.body:null,{headers:d,context:i.context,params:g,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const a=ae(s).pipe(ni(d=>this.handler.handle(d)));if(n instanceof Fa||"events"===i.observe)return a;const u=a.pipe(Rr(d=>d instanceof ec));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return u.pipe(be(d=>{if(null!==d.body&&!(d.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return d.body}));case"blob":return u.pipe(be(d=>{if(null!==d.body&&!(d.body instanceof Blob))throw new Error("Response is not a Blob.");return d.body}));case"text":return u.pipe(be(d=>{if(null!==d.body&&"string"!=typeof d.body)throw new Error("Response is not a string.");return d.body}));default:return u.pipe(be(d=>d.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new si).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,ip(i,r))}post(n,r,i={}){return this.request("POST",n,ip(i,r))}put(n,r,i={}){return this.request("PUT",n,ip(i,r))}}return e.\u0275fac=function(n){return new(n||e)(te(Rw))},e.\u0275prov=oe({token:e,factory:e.\u0275fac}),e})();class Bw{constructor(t,n){this.next=t,this.interceptor=n}handle(t){return this.interceptor.intercept(t,this.next)}}const Hw=new fe("HTTP_INTERCEPTORS");let Q2=(()=>{class e{intercept(n,r){return r.handle(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=oe({token:e,factory:e.\u0275fac}),e})();const Z2=/^\)\]\}',?\n/;let jw=(()=>{class e{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new nt(r=>{const i=this.xhrFactory.build();if(i.open(n.method,n.urlWithParams),n.withCredentials&&(i.withCredentials=!0),n.headers.forEach((M,A)=>i.setRequestHeader(M,A.join(","))),n.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const M=n.detectContentTypeHeader();null!==M&&i.setRequestHeader("Content-Type",M)}if(n.responseType){const M=n.responseType.toLowerCase();i.responseType="json"!==M?M:"text"}const s=n.serializeBody();let a=null;const u=()=>{if(null!==a)return a;const M=i.statusText||"OK",A=new Nr(i.getAllResponseHeaders()),F=function J2(e){return"responseURL"in e&&e.responseURL?e.responseURL:/^X-Request-URL:/m.test(e.getAllResponseHeaders())?e.getResponseHeader("X-Request-URL"):null}(i)||n.url;return a=new rp({headers:A,status:i.status,statusText:M,url:F}),a},d=()=>{let{headers:M,status:A,statusText:F,url:B}=u(),H=null;204!==A&&(H=typeof i.response>"u"?i.responseText:i.response),0===A&&(A=H?200:0);let q=A>=200&&A<300;if("json"===n.responseType&&"string"==typeof H){const L=H;H=H.replace(Z2,"");try{H=""!==H?JSON.parse(H):null}catch(ie){H=L,q&&(q=!1,H={error:ie,text:H})}}q?(r.next(new ec({body:H,headers:M,status:A,statusText:F,url:B||void 0})),r.complete()):r.error(new Lw({error:H,headers:M,status:A,statusText:F,url:B||void 0}))},g=M=>{const{url:A}=u(),F=new Lw({error:M,status:i.status||0,statusText:i.statusText||"Unknown Error",url:A||void 0});r.error(F)};let _=!1;const w=M=>{_||(r.next(u()),_=!0);let A={type:pt.DownloadProgress,loaded:M.loaded};M.lengthComputable&&(A.total=M.total),"text"===n.responseType&&!!i.responseText&&(A.partialText=i.responseText),r.next(A)},b=M=>{let A={type:pt.UploadProgress,loaded:M.loaded};M.lengthComputable&&(A.total=M.total),r.next(A)};return i.addEventListener("load",d),i.addEventListener("error",g),i.addEventListener("timeout",g),i.addEventListener("abort",g),n.reportProgress&&(i.addEventListener("progress",w),null!==s&&i.upload&&i.upload.addEventListener("progress",b)),i.send(s),r.next({type:pt.Sent}),()=>{i.removeEventListener("error",g),i.removeEventListener("abort",g),i.removeEventListener("load",d),i.removeEventListener("timeout",g),n.reportProgress&&(i.removeEventListener("progress",w),null!==s&&i.upload&&i.upload.removeEventListener("progress",b)),i.readyState!==i.DONE&&i.abort()}})}}return e.\u0275fac=function(n){return new(n||e)(te(Y0))},e.\u0275prov=oe({token:e,factory:e.\u0275fac}),e})();const op=new fe("XSRF_COOKIE_NAME"),ap=new fe("XSRF_HEADER_NAME");class Vw{}let ek=(()=>{class e{constructor(n,r,i){this.doc=n,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=B0(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return e.\u0275fac=function(n){return new(n||e)(te(nn),te(Fh),te(op))},e.\u0275prov=oe({token:e,factory:e.\u0275fac}),e})(),lp=(()=>{class e{constructor(n,r){this.tokenService=n,this.headerName=r}intercept(n,r){const i=n.url.toLowerCase();if("GET"===n.method||"HEAD"===n.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(n);const s=this.tokenService.getToken();return null!==s&&!n.headers.has(this.headerName)&&(n=n.clone({headers:n.headers.set(this.headerName,s)})),r.handle(n)}}return e.\u0275fac=function(n){return new(n||e)(te(Vw),te(ap))},e.\u0275prov=oe({token:e,factory:e.\u0275fac}),e})(),tk=(()=>{class e{constructor(n,r){this.backend=n,this.injector=r,this.chain=null}handle(n){if(null===this.chain){const r=this.injector.get(Hw,[]);this.chain=r.reduceRight((i,s)=>new Bw(i,s),this.backend)}return this.chain.handle(n)}}return e.\u0275fac=function(n){return new(n||e)(te(Pw),te(Dn))},e.\u0275prov=oe({token:e,factory:e.\u0275fac}),e})(),nk=(()=>{class e{static disable(){return{ngModule:e,providers:[{provide:lp,useClass:Q2}]}}static withOptions(n={}){return{ngModule:e,providers:[n.cookieName?{provide:op,useValue:n.cookieName}:[],n.headerName?{provide:ap,useValue:n.headerName}:[]]}}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Tt({type:e}),e.\u0275inj=zt({providers:[lp,{provide:Hw,useExisting:lp,multi:!0},{provide:Vw,useClass:ek},{provide:op,useValue:"XSRF-TOKEN"},{provide:ap,useValue:"X-XSRF-TOKEN"}]}),e})(),rk=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Tt({type:e}),e.\u0275inj=zt({providers:[sp,{provide:Rw,useClass:tk},jw,{provide:Pw,useExisting:jw}],imports:[nk.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),e})(),ik=(()=>{class e{constructor(n){this.http=n,this.port=8081,this.url=`http://localhost:${this.port}/server/`}intialize(n,r){var i=this;return sr(function*(){return yield Qs(i.http.post(i.url+"initialize/"+n,r))})()}update(){var n=this;return sr(function*(){return yield Qs(n.http.post(n.url+"update",null))})()}finished(){var n=this;return sr(function*(){return yield Qs(n.http.post(n.url+"finished",null))})()}stop(){var n=this;return sr(function*(){return yield Qs(n.http.post(n.url+"stop",null))})()}saveStage(n){var r=this;return sr(function*(){return yield Qs(r.http.post(r.url+"saveStage",n))})()}replay(){var n=this;return sr(function*(){return yield Qs(n.http.post(n.url+"replay",null))})()}}return e.\u0275fac=function(n){return new(n||e)(te(sp))},e.\u0275prov=oe({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),sk=(()=>{class e{constructor(n){this.http=n,this.machineCount=0,this.queueCount=0,this.systemMachines={frontMachines:[]},this.konvaMachines=[],this.stop=!1,this.stages=[],this.serverCaller=new ik(this.http)}ngOnInit(){var n=document.querySelector("#holder");null!=n&&(this.myStage=new In.default.Stage({width:n?.clientWidth-10,height:n?.clientHeight-20,container:"konva-holder"})),this.board=new In.default.Layer,this.myStage.add(this.board)}rectangle(n){var r=new In.default.Group({x:25,y:25,width:40,height:70,draggable:!0});r.add(new In.default.Rect({fill:"yellow",height:40,width:70,stroke:"black",strokeWidth:2})),r.add(new In.default.Text({text:n,fontSize:18,fontFamily:"Calibri",fill:"#000",width:70,padding:10,align:"center"})),this.board.add(r)}circle(n){var r=new In.default.Group({x:30,y:30,width:60,height:60,draggable:!0}),i=new In.default.Circle({fill:"gray",radius:30,stroke:"black",strokeWidth:2});r.add(i),r.add(new In.default.Text({text:n,fontSize:18,x:-12,y:-15,fontFamily:"Calibri",fill:"#000",align:"center"})),this.board.add(r),this.konvaMachines.push(i),console.log(this.konvaMachines)}arrow(n,r,i,s){const a=new In.default.Arrow({points:[n,r,i,s],fill:"black",stroke:"black",strokeWidth:2});return this.board.add(a),a}createMachine(){this.machineCount++,this.circle("M"+this.machineCount)}createQueue(){this.rectangle("Q"+this.queueCount),this.queueCount++}createArrow(){let u,n=0,r=0,i=0,s=0,a=0,d=this;this.myStage.on("click",function(){var g=sr(function*(_){if(0==a){let w=_.target;u=w.getParent().getAttr("Children")[1].getAttr("text"),console.log(u),w.getParent().setAttr("draggable",!1),n=d.myStage.getPointerPosition().x,r=d.myStage.getPointerPosition().y,a++}else if(1==a){let w=_.target,b=w.getParent().getAttr("Children")[1].getAttr("text");console.log(b),w.getParent().setAttr("draggable",!1),i=d.myStage.getPointerPosition().x,s=d.myStage.getPointerPosition().y,a++,d.arrow(n,r,i,s),d.generateSystem(u,b),console.log(u[1],b[1])}});return function(_){return g.apply(this,arguments)}}())}generateSystem(n,r){let i=n[1],s=r[1];if(n.includes("Q")){let a={previousQueueID:Number(i),machineID:Number(s),nextQueueID:0};this.systemMachines.frontMachines.push(a),console.log(this.systemMachines.frontMachines)}else{for(let a of this.systemMachines.frontMachines)a.machineID==Number(i)&&(a.nextQueueID=Number(s),console.log(a));console.log(this.systemMachines.frontMachines)}}clear(){this.queueCount=0,this.machineCount=0;var n=document.querySelector("#holder");null!=n&&(this.myStage=new In.default.Stage({width:n?.clientWidth-10,height:n?.clientHeight-20,container:"konva-holder"})),this.board=new In.default.Layer,this.myStage.add(this.board),this.konvaMachines=[],this.systemMachines.frontMachines=[],this.stop=!1}smiulate(){var n=this;return sr(function*(){console.log(n.myStage),n.stages=[];let r=Number(document.getElementById("numberOfProducts").value);console.log(n.systemMachines),yield n.serverCaller.intialize(r,n.systemMachines),yield n.serverCaller.saveStage(n.myStage);const i=n.myStage.toJSON();n.stages.push({stage:i,time:Date.now()});let s=!1;for(;!n.stop&&!s;){let a=yield n.serverCaller.update();s=yield n.serverCaller.finished(),console.log(a),n.color(a),yield n.serverCaller.saveStage(n.myStage);const u=n.myStage.toJSON();n.stages.push({stage:u,time:Date.now()})}})()}Stop(){var n=this;return sr(function*(){n.stop=!0,yield n.serverCaller.stop()})()}color(n){let r=0;for(let i of this.konvaMachines)i.setAttr("fill",n[r]),r++}replay(){var n=this;return sr(function*(){for(let r=0;r<n.stages.length;r++){let i=n.stages[r];console.log(i),n.myStage=In.default.Node.create(i.stage,"konva-holder");let s=i.time;if(r<n.stages.length-1){let d=n.stages[r+1].time-s;yield new Promise(g=>setTimeout(g,d))}}})()}}return e.\u0275fac=function(n){return new(n||e)(ne(sp))},e.\u0275cmp=Yt({type:e,selectors:[["app-main-page"]],decls:62,vars:0,consts:[[1,"container"],[1,"header"],[1,"options"],[3,"click"],["id","numberOfProducts","type","number"],[1,"status"],["id","holder",1,"board"],["id","konva-holder"],[1,"footer"]],template:function(n,r){1&n&&($e(0,"div",0)(1,"div",1)(2,"h1"),Xe(3,"Producer Consumer Simulator - Web Application"),Ge()(),$e(4,"div",2)(5,"div")(6,"div")(7,"p"),Xe(8,"Machine"),Ge(),$e(9,"button",3),Ln("click",function(){return r.createMachine()}),Xe(10,"click"),Ge()(),$e(11,"div")(12,"p"),Xe(13,"Queue"),Ge(),$e(14,"button",3),Ln("click",function(){return r.createQueue()}),Xe(15,"click"),Ge()(),$e(16,"div")(17,"p"),Xe(18,"Simulate"),Ge(),$e(19,"button",3),Ln("click",function(){return r.smiulate()}),Xe(20,"click"),Ge()(),$e(21,"div")(22,"p"),Xe(23,"Clear"),Ge(),$e(24,"button",3),Ln("click",function(){return r.clear()}),Xe(25,"click"),Ge()(),$e(26,"div")(27,"p"),Xe(28,"Replay"),Ge(),$e(29,"button",3),Ln("click",function(){return r.replay()}),Xe(30,"click"),Ge()(),$e(31,"div")(32,"p"),Xe(33,"Join"),Ge(),$e(34,"button",3),Ln("click",function(){return r.createArrow()}),Xe(35,"click"),Ge()(),$e(36,"div")(37,"p"),Xe(38,"Stop"),Ge(),$e(39,"button",3),Ln("click",function(){return r.Stop()}),Xe(40,"click"),Ge()(),$e(41,"div")(42,"p"),Xe(43,"Number of products"),Ge(),Ls(44,"input",4),Ge()(),$e(45,"div",5)(46,"p"),Xe(47,"Connection Status:"),Ge(),$e(48,"div"),Xe(49,"icon here"),Ge()()(),$e(50,"div",6),Ls(51,"div",7),Ge(),$e(52,"div",8),Xe(53," Designed & Implemented By: "),$e(54,"p"),Xe(55,"Maria Bassem,"),Ge(),$e(56,"p"),Xe(57,"Mariam Aziz,"),Ge(),$e(58,"p"),Xe(59,"Eman Samir,"),Ge(),$e(60,"p"),Xe(61,"George Beshay."),Ge()()())},styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(12,1fr);grid-template-rows:repeat(11,1fr) .5fr;width:100%;height:100vh}.header[_ngcontent-%COMP%]{grid-area:1 / 1 / 2 / 13;text-align:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:10px}.options[_ngcontent-%COMP%]{grid-area:2 / 1 / 3 / 13;background-color:#adb5bd;display:flex;justify-content:space-between;align-items:center;color:#000;font-weight:700;padding-inline:5px}.options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.status){text-align:center;display:flex;justify-content:center;align-items:center;gap:10px}.options[_ngcontent-%COMP%] > .status[_ngcontent-%COMP%]{margin-left:250px;text-align:center}.board[_ngcontent-%COMP%]{grid-area:3 / 1 / 12 / 13;background-color:#343a40;padding:2px;margin:5px;border-radius:7px}.footer[_ngcontent-%COMP%]{grid-area:12 / 1 / 13 / 13;background-color:#495057;display:flex;align-items:center;font-size:14px;padding-inline:5px}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-inline:3px;font-size:17px;font-weight:900}#konva-holder[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;overflow:hidden}"]}),e})(),ok=(()=>{class e{constructor(){this.title="PCS_FrontEnd"}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Yt({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){1&n&&Ls(0,"app-main-page")},dependencies:[sk]}),e})();typeof window<"u"&&!window.Konva&&Hi(207);let dk=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Tt({type:e}),e.\u0275inj=zt({imports:[z0]}),e})(),hk=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Tt({type:e,bootstrap:[ok]}),e.\u0275inj=zt({imports:[JA,$2,dk,rk]}),e})();(function w1(){f0=!1})(),ZA().bootstrapModule(hk).catch(e=>console.error(e))},207:(La,Zs,Hi)=>{Hi.r(Zs),Hi.d(Zs,{default:()=>Io});var We=Math.PI/180;const zn=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Z={_global:zn,version:"8.4.2",isBrowser:function Js(){return typeof window<"u"&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window))}(),isUnminified:/param/.test(function(f){}.toString()),dblClickWindow:400,getAngle:f=>Z.angleDeg?f*We:f,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>Z.DD.isDragging,isDragReady:()=>!!Z.DD.node,releaseCanvasOnDestroy:!0,document:zn.document,_injectGlobal(f){zn.Konva=f}},xe=f=>{Z[f.prototype.getClassName()]=f};Z._injectGlobal(Z);class Nt{constructor(o=[1,0,0,1,0,0]){this.dirty=!1,this.m=o&&o.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Nt(this.m)}copyInto(o){o.m[0]=this.m[0],o.m[1]=this.m[1],o.m[2]=this.m[2],o.m[3]=this.m[3],o.m[4]=this.m[4],o.m[5]=this.m[5]}point(o){var l=this.m;return{x:l[0]*o.x+l[2]*o.y+l[4],y:l[1]*o.x+l[3]*o.y+l[5]}}translate(o,l){return this.m[4]+=this.m[0]*o+this.m[2]*l,this.m[5]+=this.m[1]*o+this.m[3]*l,this}scale(o,l){return this.m[0]*=o,this.m[1]*=o,this.m[2]*=l,this.m[3]*=l,this}rotate(o){var l=Math.cos(o),c=Math.sin(o),p=this.m[1]*l+this.m[3]*c,m=this.m[0]*-c+this.m[2]*l,v=this.m[1]*-c+this.m[3]*l;return this.m[0]=this.m[0]*l+this.m[2]*c,this.m[1]=p,this.m[2]=m,this.m[3]=v,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(o,l){var h=this.m[1]+this.m[3]*l,p=this.m[2]+this.m[0]*o,m=this.m[3]+this.m[1]*o;return this.m[0]=this.m[0]+this.m[2]*l,this.m[1]=h,this.m[2]=p,this.m[3]=m,this}multiply(o){var c=this.m[1]*o.m[0]+this.m[3]*o.m[1],h=this.m[0]*o.m[2]+this.m[2]*o.m[3],p=this.m[1]*o.m[2]+this.m[3]*o.m[3],m=this.m[0]*o.m[4]+this.m[2]*o.m[5]+this.m[4],v=this.m[1]*o.m[4]+this.m[3]*o.m[5]+this.m[5];return this.m[0]=this.m[0]*o.m[0]+this.m[2]*o.m[1],this.m[1]=c,this.m[2]=h,this.m[3]=p,this.m[4]=m,this.m[5]=v,this}invert(){var o=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),c=-this.m[1]*o,h=-this.m[2]*o,p=this.m[0]*o,m=o*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),v=o*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=this.m[3]*o,this.m[1]=c,this.m[2]=h,this.m[3]=p,this.m[4]=m,this.m[5]=v,this}getMatrix(){return this.m}decompose(){var o=this.m[0],l=this.m[1],c=this.m[2],h=this.m[3],v=o*h-l*c;let y={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=o||0!=l){var C=Math.sqrt(o*o+l*l);y.rotation=l>0?Math.acos(o/C):-Math.acos(o/C),y.scaleX=C,y.scaleY=v/C,y.skewX=(o*c+l*h)/v,y.skewY=0}else if(0!=c||0!=h){var D=Math.sqrt(c*c+h*h);y.rotation=Math.PI/2-(h>0?Math.acos(-c/D):-Math.acos(c/D)),y.scaleX=v/D,y.scaleY=D,y.skewX=0,y.skewY=(o*c+l*h)/v}return y.rotation=R._getRotation(y.rotation),y}}var ja=Math.PI/180,Va=180/Math.PI,Wn="Konva error: ",no={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},ro=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Ui=[];const io=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(f){setTimeout(f,60)},R={_isElement:f=>!(!f||1!=f.nodeType),_isFunction:f=>!!(f&&f.constructor&&f.call&&f.apply),_isPlainObject:f=>!!f&&f.constructor===Object,_isArray:f=>"[object Array]"===Object.prototype.toString.call(f),_isNumber:f=>"[object Number]"===Object.prototype.toString.call(f)&&!isNaN(f)&&isFinite(f),_isString:f=>"[object String]"===Object.prototype.toString.call(f),_isBoolean:f=>"[object Boolean]"===Object.prototype.toString.call(f),isObject:f=>f instanceof Object,isValidSelector(f){if("string"!=typeof f)return!1;var o=f[0];return"#"===o||"."===o||o===o.toUpperCase()},_sign:f=>0===f||f>0?1:-1,requestAnimFrame(f){Ui.push(f),1===Ui.length&&io(function(){const o=Ui;Ui=[],o.forEach(function(l){l()})})},createCanvasElement(){var f=document.createElement("canvas");try{f.style=f.style||{}}catch{}return f},createImageElement:()=>document.createElement("img"),_isInDocument(f){for(;f=f.parentNode;)if(f==document)return!0;return!1},_urlToImage(f,o){var l=R.createImageElement();l.onload=function(){o(l)},l.src=f},_rgbToHex:(f,o,l)=>((1<<24)+(f<<16)+(o<<8)+l).toString(16).slice(1),_hexToRgb(f){f=f.replace("#","");var o=parseInt(f,16);return{r:o>>16&255,g:o>>8&255,b:255&o}},getRandomColor(){for(var f=(16777215*Math.random()<<0).toString(16);f.length<6;)f="0"+f;return"#"+f},getRGB(f){var o;return f in no?{r:(o=no[f])[0],g:o[1],b:o[2]}:"#"===f[0]?this._hexToRgb(f.substring(1)):"rgb("===f.substr(0,4)?(o=ro.exec(f.replace(/ /g,"")),{r:parseInt(o[1],10),g:parseInt(o[2],10),b:parseInt(o[3],10)}):{r:0,g:0,b:0}},colorToRGBA:f=>R._namedColorToRBA(f=f||"black")||R._hex3ColorToRGBA(f)||R._hex4ColorToRGBA(f)||R._hex6ColorToRGBA(f)||R._hex8ColorToRGBA(f)||R._rgbColorToRGBA(f)||R._rgbaColorToRGBA(f)||R._hslColorToRGBA(f),_namedColorToRBA(f){var o=no[f.toLowerCase()];return o?{r:o[0],g:o[1],b:o[2],a:1}:null},_rgbColorToRGBA(f){if(0===f.indexOf("rgb(")){var o=(f=f.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:o[0],g:o[1],b:o[2],a:1}}},_rgbaColorToRGBA(f){if(0===f.indexOf("rgba(")){var o=(f=f.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((l,c)=>"%"===l.slice(-1)?3===c?parseInt(l)/100:parseInt(l)/100*255:Number(l));return{r:o[0],g:o[1],b:o[2],a:o[3]}}},_hex8ColorToRGBA(f){if("#"===f[0]&&9===f.length)return{r:parseInt(f.slice(1,3),16),g:parseInt(f.slice(3,5),16),b:parseInt(f.slice(5,7),16),a:parseInt(f.slice(7,9),16)/255}},_hex6ColorToRGBA(f){if("#"===f[0]&&7===f.length)return{r:parseInt(f.slice(1,3),16),g:parseInt(f.slice(3,5),16),b:parseInt(f.slice(5,7),16),a:1}},_hex4ColorToRGBA(f){if("#"===f[0]&&5===f.length)return{r:parseInt(f[1]+f[1],16),g:parseInt(f[2]+f[2],16),b:parseInt(f[3]+f[3],16),a:parseInt(f[4]+f[4],16)/255}},_hex3ColorToRGBA(f){if("#"===f[0]&&4===f.length)return{r:parseInt(f[1]+f[1],16),g:parseInt(f[2]+f[2],16),b:parseInt(f[3]+f[3],16),a:1}},_hslColorToRGBA(f){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(f)){const[o,...l]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(f),c=Number(l[0])/360,h=Number(l[1])/100,p=Number(l[2])/100;let m,v,y;if(0===h)return y=255*p,{r:Math.round(y),g:Math.round(y),b:Math.round(y),a:1};m=p<.5?p*(1+h):p+h-p*h;const C=2*p-m,D=[0,0,0];for(let T=0;T<3;T++)v=c+1/3*-(T-1),v<0&&v++,v>1&&v--,y=6*v<1?C+6*(m-C)*v:2*v<1?m:3*v<2?C+(m-C)*(2/3-v)*6:C,D[T]=255*y;return{r:Math.round(D[0]),g:Math.round(D[1]),b:Math.round(D[2]),a:1}}},haveIntersection:(f,o)=>!(o.x>f.x+f.width||o.x+o.width<f.x||o.y>f.y+f.height||o.y+o.height<f.y),cloneObject(f){var o={};for(var l in f)o[l]=this._isPlainObject(f[l])?this.cloneObject(f[l]):this._isArray(f[l])?this.cloneArray(f[l]):f[l];return o},cloneArray:f=>f.slice(0),degToRad:f=>f*ja,radToDeg:f=>f*Va,_degToRad:f=>(R.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),R.degToRad(f)),_radToDeg:f=>(R.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),R.radToDeg(f)),_getRotation:f=>Z.angleDeg?R.radToDeg(f):f,_capitalize:f=>f.charAt(0).toUpperCase()+f.slice(1),throw(f){throw new Error(Wn+f)},error(f){console.error(Wn+f)},warn(f){!Z.showWarnings||console.warn("Konva warning: "+f)},each(f,o){for(var l in f)o(l,f[l])},_inRange:(f,o,l)=>o<=f&&f<l,_getProjectionToSegment(f,o,l,c,h,p){var m,v,y,C=(f-l)*(f-l)+(o-c)*(o-c);if(0==C)m=f,v=o,y=(h-l)*(h-l)+(p-c)*(p-c);else{var D=((h-f)*(l-f)+(p-o)*(c-o))/C;D<0?(m=f,v=o,y=(f-h)*(f-h)+(o-p)*(o-p)):D>1?(m=l,v=c,y=(l-h)*(l-h)+(c-p)*(c-p)):y=((m=f+D*(l-f))-h)*(m-h)+((v=o+D*(c-o))-p)*(v-p)}return[m,v,y]},_getProjectionToLine(f,o,l){var c=R.cloneObject(f),h=Number.MAX_VALUE;return o.forEach(function(p,m){if(l||m!==o.length-1){var v=o[(m+1)%o.length],y=R._getProjectionToSegment(p.x,p.y,v.x,v.y,f.x,f.y),D=y[1],T=y[2];T<h&&(c.x=y[0],c.y=D,h=T)}}),c},_prepareArrayForTween(f,o,l){var c,h=[],p=[];if(f.length>o.length){var m=o;o=f,f=m}for(c=0;c<f.length;c+=2)h.push({x:f[c],y:f[c+1]});for(c=0;c<o.length;c+=2)p.push({x:o[c],y:o[c+1]});var v=[];return p.forEach(function(y){var C=R._getProjectionToLine(y,h,l);v.push(C.x),v.push(C.y)}),v},_prepareToStringify(f){var o;for(var l in f.visitedByCircularReferenceRemoval=!0,f)if(f.hasOwnProperty(l)&&f[l]&&"object"==typeof f[l])if(o=Object.getOwnPropertyDescriptor(f,l),f[l].visitedByCircularReferenceRemoval||R._isElement(f[l])){if(!o.configurable)return null;delete f[l]}else if(null===R._prepareToStringify(f[l])){if(!o.configurable)return null;delete f[l]}return delete f.visitedByCircularReferenceRemoval,f},_assign(f,o){for(var l in o)f[l]=o[l];return f},_getFirstPointerId:f=>f.touches?f.changedTouches[0].identifier:f.pointerId||999,releaseCanvas(...f){!Z.releaseCanvasOnDestroy||f.forEach(o=>{o.width=0,o.height=0})},drawRoundedRectPath(f,o,l,c){let h=0,p=0,m=0,v=0;"number"==typeof c?h=p=m=v=Math.min(c,o/2,l/2):(h=Math.min(c[0]||0,o/2,l/2),p=Math.min(c[1]||0,o/2,l/2),v=Math.min(c[2]||0,o/2,l/2),m=Math.min(c[3]||0,o/2,l/2)),f.moveTo(h,0),f.lineTo(o-p,0),f.arc(o-p,p,p,3*Math.PI/2,0,!1),f.lineTo(o,l-v),f.arc(o-v,l-v,v,0,Math.PI/2,!1),f.lineTo(m,l),f.arc(m,l-m,m,Math.PI/2,Math.PI,!1),f.lineTo(0,h),f.arc(h,h,h,Math.PI,3*Math.PI/2,!1)}};function Ot(f){return R._isString(f)?'"'+f+'"':"[object Number]"===Object.prototype.toString.call(f)||R._isBoolean(f)?f:Object.prototype.toString.call(f)}function oi(f){return f>255?255:f<0?0:Math.round(f)}function $(){if(Z.isUnminified)return function(f,o){return R._isNumber(f)||R.warn(Ot(f)+' is a not valid value for "'+o+'" attribute. The value should be a number.'),f}}function so(f){if(Z.isUnminified)return function(o,l){let c=R._isNumber(o),h=R._isArray(o)&&o.length==f;return!c&&!h&&R.warn(Ot(o)+' is a not valid value for "'+l+'" attribute. The value should be a number or Array<number>('+f+")"),o}}function ai(){if(Z.isUnminified)return function(f,o){return R._isNumber(f)||"auto"===f||R.warn(Ot(f)+' is a not valid value for "'+o+'" attribute. The value should be a number or "auto".'),f}}function rn(){if(Z.isUnminified)return function(f,o){return R._isString(f)||R.warn(Ot(f)+' is a not valid value for "'+o+'" attribute. The value should be a string.'),f}}function Ua(){if(Z.isUnminified)return function(f,o){const l=R._isString(f),c="[object CanvasGradient]"===Object.prototype.toString.call(f)||f&&f.addColorStop;return l||c||R.warn(Ot(f)+' is a not valid value for "'+o+'" attribute. The value should be a string or a native gradient.'),f}}function sn(){if(Z.isUnminified)return function(f,o){return!0===f||!1===f||R.warn(Ot(f)+' is a not valid value for "'+o+'" attribute. The value should be a boolean.'),f}}var li="get",ui="set";const I={addGetterSetter(f,o,l,c,h){I.addGetter(f,o,l),I.addSetter(f,o,c,h),I.addOverloadedGetterSetter(f,o)},addGetter(f,o,l){var c=li+R._capitalize(o);f.prototype[c]=f.prototype[c]||function(){var h=this.attrs[o];return void 0===h?l:h}},addSetter(f,o,l,c){var h=ui+R._capitalize(o);f.prototype[h]||I.overWriteSetter(f,o,l,c)},overWriteSetter(f,o,l,c){var h=ui+R._capitalize(o);f.prototype[h]=function(p){return l&&null!=p&&(p=l.call(this,p,o)),this._setAttr(o,p),c&&c.call(this),this}},addComponentsGetterSetter(f,o,l,c,h){var C,D,p=l.length,m=R._capitalize,v=li+m(o),y=ui+m(o);f.prototype[v]=function(){var E={};for(C=0;C<p;C++)E[D=l[C]]=this.getAttr(o+m(D));return E};var T=function ic(f){if(Z.isUnminified)return function(o,l){return null==o||R.isObject(o)||R.warn(Ot(o)+' is a not valid value for "'+l+'" attribute. The value should be an object with properties '+f),o}}(l);f.prototype[y]=function(E){var S,x=this.attrs[o];for(S in c&&(E=c.call(this,E)),T&&T.call(this,E,o),E)!E.hasOwnProperty(S)||this._setAttr(o+m(S),E[S]);return E||l.forEach(O=>{this._setAttr(o+m(O),void 0)}),this._fireChangeEvent(o,x,E),h&&h.call(this),this},I.addOverloadedGetterSetter(f,o)},addOverloadedGetterSetter(f,o){var l=R._capitalize(o),c=ui+l,h=li+l;f.prototype[o]=function(){return arguments.length?(this[c](arguments[0]),this):this[h]()}},addDeprecatedGetterSetter(f,o,l,c){R.error("Adding deprecated "+o);var h=li+R._capitalize(o),p=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";f.prototype[h]=function(){R.error(p);var m=this.attrs[o];return void 0===m?l:m},I.addSetter(f,o,c,function(){R.error(p)}),I.addOverloadedGetterSetter(f,o)},backCompat(f,o){R.each(o,function(l,c){var h=f.prototype[c],p=li+R._capitalize(l),m=ui+R._capitalize(l);function v(){h.apply(this,arguments),R.error('"'+l+'" method is deprecated and will be removed soon. Use ""'+c+'" instead.')}f.prototype[l]=v,f.prototype[p]=v,f.prototype[m]=v})},afterSetFilter(){this._filterUpToDate=!1}};function $a(f){var h,p,o=[],l=f.length,c=R;for(h=0;h<l;h++)c._isNumber(p=f[h])?p=Math.round(1e3*p)/1e3:c._isString(p)||(p+=""),o.push(p);return o}var ci,oc=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];class lo{constructor(o){this.canvas=o,Z.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(o){o.fillEnabled()&&this._fill(o)}_fill(o){}strokeShape(o){o.hasStroke()&&this._stroke(o)}_stroke(o){}fillStrokeShape(o){o.attrs.fillAfterStrokeEnabled?(this.strokeShape(o),this.fillShape(o)):(this.fillShape(o),this.strokeShape(o))}getTrace(o,l){var m,v,y,C,c=this.traceArr,h=c.length,p="";for(m=0;m<h;m++)(y=(v=c[m]).method)?(C=v.args,p+=y,o?p+="()":R._isArray(C[0])?p+="(["+C.join(",")+"])":(l&&(C=C.map(D=>"number"==typeof D?Math.floor(D):D)),p+="("+C.join(",")+")")):(p+=v.property,o||(p+="="+v.val)),p+=";";return p}clearTrace(){this.traceArr=[]}_trace(o){var l=this.traceArr;l.push(o),l.length>=100&&l.shift()}reset(){var o=this.getCanvas().getPixelRatio();this.setTransform(1*o,0,0,1*o,0,0)}getCanvas(){return this.canvas}clear(o){var l=this.getCanvas();o?this.clearRect(o.x||0,o.y||0,o.width||0,o.height||0):this.clearRect(0,0,l.getWidth()/l.pixelRatio,l.getHeight()/l.pixelRatio)}_applyLineCap(o){var l=o.getLineCap();l&&this.setAttr("lineCap",l)}_applyOpacity(o){var l=o.getAbsoluteOpacity();1!==l&&this.setAttr("globalAlpha",l)}_applyLineJoin(o){var l=o.attrs.lineJoin;l&&this.setAttr("lineJoin",l)}setAttr(o,l){this._context[o]=l}arc(o,l,c,h,p,m){this._context.arc(o,l,c,h,p,m)}arcTo(o,l,c,h,p){this._context.arcTo(o,l,c,h,p)}beginPath(){this._context.beginPath()}bezierCurveTo(o,l,c,h,p,m){this._context.bezierCurveTo(o,l,c,h,p,m)}clearRect(o,l,c,h){this._context.clearRect(o,l,c,h)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(o,l){var c=arguments;return 2===c.length?this._context.createImageData(o,l):1===c.length?this._context.createImageData(o):void 0}createLinearGradient(o,l,c,h){return this._context.createLinearGradient(o,l,c,h)}createPattern(o,l){return this._context.createPattern(o,l)}createRadialGradient(o,l,c,h,p,m){return this._context.createRadialGradient(o,l,c,h,p,m)}drawImage(o,l,c,h,p,m,v,y,C){var D=arguments,T=this._context;3===D.length?T.drawImage(o,l,c):5===D.length?T.drawImage(o,l,c,h,p):9===D.length&&T.drawImage(o,l,c,h,p,m,v,y,C)}ellipse(o,l,c,h,p,m,v,y){this._context.ellipse(o,l,c,h,p,m,v,y)}isPointInPath(o,l,c,h){return c?this._context.isPointInPath(c,o,l,h):this._context.isPointInPath(o,l,h)}fill(o){o?this._context.fill(o):this._context.fill()}fillRect(o,l,c,h){this._context.fillRect(o,l,c,h)}strokeRect(o,l,c,h){this._context.strokeRect(o,l,c,h)}fillText(o,l,c,h){h?this._context.fillText(o,l,c,h):this._context.fillText(o,l,c)}measureText(o){return this._context.measureText(o)}getImageData(o,l,c,h){return this._context.getImageData(o,l,c,h)}lineTo(o,l){this._context.lineTo(o,l)}moveTo(o,l){this._context.moveTo(o,l)}rect(o,l,c,h){this._context.rect(o,l,c,h)}putImageData(o,l,c){this._context.putImageData(o,l,c)}quadraticCurveTo(o,l,c,h){this._context.quadraticCurveTo(o,l,c,h)}restore(){this._context.restore()}rotate(o){this._context.rotate(o)}save(){this._context.save()}scale(o,l){this._context.scale(o,l)}setLineDash(o){this._context.setLineDash?this._context.setLineDash(o):"mozDash"in this._context?this._context.mozDash=o:"webkitLineDash"in this._context&&(this._context.webkitLineDash=o)}getLineDash(){return this._context.getLineDash()}setTransform(o,l,c,h,p,m){this._context.setTransform(o,l,c,h,p,m)}stroke(o){o?this._context.stroke(o):this._context.stroke()}strokeText(o,l,c,h){this._context.strokeText(o,l,c,h)}transform(o,l,c,h,p,m){this._context.transform(o,l,c,h,p,m)}translate(o,l){this._context.translate(o,l)}_enableTrace(){var h,p,o=this,l=oc.length,c=this.setAttr,m=function(v){var C,y=o[v];o[v]=function(){return p=$a(Array.prototype.slice.call(arguments,0)),C=y.apply(o,arguments),o._trace({method:v,args:p}),C}};for(h=0;h<l;h++)m(oc[h]);o.setAttr=function(){c.apply(o,arguments);var v=arguments[0],y=arguments[1];("shadowOffsetX"===v||"shadowOffsetY"===v||"shadowBlur"===v)&&(y/=this.canvas.getPixelRatio()),o._trace({property:v,val:y})}}_applyGlobalCompositeOperation(o){const l=o.attrs.globalCompositeOperation;!l||"source-over"===l||this.setAttr("globalCompositeOperation",l)}}["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(f){Object.defineProperty(lo.prototype,f,{get(){return this._context[f]},set(o){this._context[f]=o}})});class ac extends lo{constructor(o){super(o),this._context=o._canvas.getContext("2d")}_fillColor(o){var l=o.fill();this.setAttr("fillStyle",l),o._fillFunc(this)}_fillPattern(o){this.setAttr("fillStyle",o._getFillPattern()),o._fillFunc(this)}_fillLinearGradient(o){var l=o._getLinearGradient();l&&(this.setAttr("fillStyle",l),o._fillFunc(this))}_fillRadialGradient(o){var l=o._getRadialGradient();l&&(this.setAttr("fillStyle",l),o._fillFunc(this))}_fill(o){var l=o.fill(),c=o.getFillPriority();if(l&&"color"===c)this._fillColor(o);else{var h=o.getFillPatternImage();if(h&&"pattern"===c)this._fillPattern(o);else{var p=o.getFillLinearGradientColorStops();if(p&&"linear-gradient"===c)this._fillLinearGradient(o);else{var m=o.getFillRadialGradientColorStops();m&&"radial-gradient"===c?this._fillRadialGradient(o):l?this._fillColor(o):h?this._fillPattern(o):p?this._fillLinearGradient(o):m&&this._fillRadialGradient(o)}}}}_strokeLinearGradient(o){var l=o.getStrokeLinearGradientStartPoint(),c=o.getStrokeLinearGradientEndPoint(),h=o.getStrokeLinearGradientColorStops(),p=this.createLinearGradient(l.x,l.y,c.x,c.y);if(h){for(var m=0;m<h.length;m+=2)p.addColorStop(h[m],h[m+1]);this.setAttr("strokeStyle",p)}}_stroke(o){var l=o.dash(),c=o.getStrokeScaleEnabled();if(o.hasStroke()){if(!c){this.save();var h=this.getCanvas().getPixelRatio();this.setTransform(h,0,0,h,0,0)}this._applyLineCap(o),l&&o.dashEnabled()&&(this.setLineDash(l),this.setAttr("lineDashOffset",o.dashOffset())),this.setAttr("lineWidth",o.strokeWidth()),o.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),o.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(o):this.setAttr("strokeStyle",o.stroke()),o._strokeFunc(this),c||this.restore()}}_applyShadow(o){var l,c,h,p=null!==(l=o.getShadowRGBA())&&void 0!==l?l:"black",m=null!==(c=o.getShadowBlur())&&void 0!==c?c:5,v=null!==(h=o.getShadowOffset())&&void 0!==h?h:{x:0,y:0},y=o.getAbsoluteScale(),C=this.canvas.getPixelRatio(),D=y.x*C,T=y.y*C;this.setAttr("shadowColor",p),this.setAttr("shadowBlur",m*Math.min(Math.abs(D),Math.abs(T))),this.setAttr("shadowOffsetX",v.x*D),this.setAttr("shadowOffsetY",v.y*T)}}class bp extends lo{constructor(o){super(o),this._context=o._canvas.getContext("2d",{willReadFrequently:!0})}_fill(o){this.save(),this.setAttr("fillStyle",o.colorKey),o._fillFuncHit(this),this.restore()}strokeShape(o){o.hasHitStroke()&&this._stroke(o)}_stroke(o){if(o.hasHitStroke()){var l=o.getStrokeScaleEnabled();if(!l){this.save();var c=this.getCanvas().getPixelRatio();this.setTransform(c,0,0,c,0,0)}this._applyLineCap(o);var h=o.hitStrokeWidth(),p="auto"===h?o.strokeWidth():h;this.setAttr("lineWidth",p),this.setAttr("strokeStyle",o.colorKey),o._strokeFuncHit(this),l||this.restore()}}}class di{constructor(o){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var c=(o||{}).pixelRatio||Z.pixelRatio||function Sp(){if(ci)return ci;var f=R.createCanvasElement(),o=f.getContext("2d");return ci=(Z._global.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),R.releaseCanvas(f),ci}();this.pixelRatio=c,this._canvas=R.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(o){var l=this.pixelRatio;this.pixelRatio=o,this.setSize(this.getWidth()/l,this.getHeight()/l)}setWidth(o){this.width=this._canvas.width=o*this.pixelRatio,this._canvas.style.width=o+"px";var l=this.pixelRatio;this.getContext()._context.scale(l,l)}setHeight(o){this.height=this._canvas.height=o*this.pixelRatio,this._canvas.style.height=o+"px";var l=this.pixelRatio;this.getContext()._context.scale(l,l)}getWidth(){return this.width}getHeight(){return this.height}setSize(o,l){this.setWidth(o||0),this.setHeight(l||0)}toDataURL(o,l){try{return this._canvas.toDataURL(o,l)}catch{try{return this._canvas.toDataURL()}catch(h){return R.error("Unable to get data URL. "+h.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}I.addGetterSetter(di,"pixelRatio",void 0,$());class Or extends di{constructor(o={width:0,height:0}){super(o),this.context=new ac(this),this.setSize(o.width,o.height)}}class za extends di{constructor(o={width:0,height:0}){super(o),this.hitCanvas=!0,this.context=new bp(this),this.setSize(o.width,o.height)}}const Ne={get isDragging(){var f=!1;return Ne._dragElements.forEach(o=>{"dragging"===o.dragStatus&&(f=!0)}),f},justDragged:!1,get node(){var f;return Ne._dragElements.forEach(o=>{f=o.node}),f},_dragElements:new Map,_drag(f){const o=[];Ne._dragElements.forEach((l,c)=>{const{node:h}=l,p=h.getStage();p.setPointersPositions(f),void 0===l.pointerId&&(l.pointerId=R._getFirstPointerId(f));const m=p._changedPointerPositions.find(C=>C.id===l.pointerId);if(m){if("dragging"!==l.dragStatus){var v=h.dragDistance();if(Math.max(Math.abs(m.x-l.startPointerPos.x),Math.abs(m.y-l.startPointerPos.y))<v||(h.startDrag({evt:f}),!h.isDragging()))return}h._setDragPosition(f,l),o.push(h)}}),o.forEach(l=>{l.fire("dragmove",{type:"dragmove",target:l,evt:f},!0)})},_endDragBefore(f){const o=[];Ne._dragElements.forEach(l=>{const{node:c}=l,h=c.getStage();if(f&&h.setPointersPositions(f),!h._changedPointerPositions.find(v=>v.id===l.pointerId))return;("dragging"===l.dragStatus||"stopped"===l.dragStatus)&&(Ne.justDragged=!0,Z._mouseListenClick=!1,Z._touchListenClick=!1,Z._pointerListenClick=!1,l.dragStatus="stopped");const m=l.node.getLayer()||l.node instanceof Z.Stage&&l.node;m&&-1===o.indexOf(m)&&o.push(m)}),o.forEach(l=>{l.draw()})},_endDragAfter(f){Ne._dragElements.forEach((o,l)=>{"stopped"===o.dragStatus&&o.node.fire("dragend",{type:"dragend",target:o.node,evt:f},!0),"dragging"!==o.dragStatus&&Ne._dragElements.delete(l)})}};Z.isBrowser&&(window.addEventListener("mouseup",Ne._endDragBefore,!0),window.addEventListener("touchend",Ne._endDragBefore,!0),window.addEventListener("mousemove",Ne._drag),window.addEventListener("touchmove",Ne._drag),window.addEventListener("mouseup",Ne._endDragAfter,!1),window.addEventListener("touchend",Ne._endDragAfter,!1));var uo="absoluteOpacity",_n="allEventListeners",Tn="absoluteTransform",lc="absoluteScale",ar="canvas",Wa="listening",cc="mouseenter",dc="mouseleave",xn="transform",$i="visible",qa=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(" ");let Ya=1;class G{constructor(o){this._id=Ya++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(o),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(o){o!==xn&&o!==Tn||!this._cache.get(o)?o?this._cache.delete(o):this._cache.clear():this._cache.get(o).dirty=!0}_getCache(o,l){var c=this._cache.get(o);return(void 0===c||(o===xn||o===Tn)&&!0===c.dirty)&&(c=l.call(this),this._cache.set(o,c)),c}_calculate(o,l,c){if(!this._attachedDepsListeners.get(o)){const h=l.map(p=>p+"Change.konva").join(" ");this.on(h,()=>{this._clearCache(o)}),this._attachedDepsListeners.set(o,!0)}return this._getCache(o,c)}_getCanvasCache(){return this._cache.get(ar)}_clearSelfAndDescendantCache(o){this._clearCache(o),o===Tn&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(ar)){const{scene:o,filter:l,hit:c}=this._cache.get(ar);R.releaseCanvas(o,l,c),this._cache.delete(ar)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(o){var l=o||{},c={};(void 0===l.x||void 0===l.y||void 0===l.width||void 0===l.height)&&(c=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var h=Math.ceil(l.width||c.width),p=Math.ceil(l.height||c.height),m=l.pixelRatio,v=void 0===l.x?Math.floor(c.x):l.x,y=void 0===l.y?Math.floor(c.y):l.y,C=l.offset||0,D=l.drawBorder||!1,T=l.hitCanvasPixelRatio||1;if(h&&p){v-=C,y-=C;var E=new Or({pixelRatio:m,width:h+=2*C+1,height:p+=2*C+1}),x=new Or({pixelRatio:m,width:0,height:0}),S=new za({pixelRatio:T,width:h,height:p}),O=E.getContext(),k=S.getContext();return S.isCache=!0,E.isCache=!0,this._cache.delete(ar),this._filterUpToDate=!1,!1===l.imageSmoothingEnabled&&(E.getContext()._context.imageSmoothingEnabled=!1,x.getContext()._context.imageSmoothingEnabled=!1),O.save(),k.save(),O.translate(-v,-y),k.translate(-v,-y),this._isUnderCache=!0,this._clearSelfAndDescendantCache(uo),this._clearSelfAndDescendantCache(lc),this.drawScene(E,this),this.drawHit(S,this),this._isUnderCache=!1,O.restore(),k.restore(),D&&(O.save(),O.beginPath(),O.rect(0,0,h,p),O.closePath(),O.setAttr("strokeStyle","red"),O.setAttr("lineWidth",5),O.stroke(),O.restore()),this._cache.set(ar,{scene:E,filter:x,hit:S,x:v,y}),this._requestDraw(),this}R.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")}isCached(){return this._cache.has(ar)}getClientRect(o){throw new Error('abstract "getClientRect" method call')}_transformedRect(o,l){var h,p,m,v,c=[{x:o.x,y:o.y},{x:o.x+o.width,y:o.y},{x:o.x+o.width,y:o.y+o.height},{x:o.x,y:o.y+o.height}],y=this.getAbsoluteTransform(l);return c.forEach(function(C){var D=y.point(C);void 0===h&&(h=m=D.x,p=v=D.y),h=Math.min(h,D.x),p=Math.min(p,D.y),m=Math.max(m,D.x),v=Math.max(v,D.y)}),{x:h,y:p,width:m-h,height:v-p}}_drawCachedSceneCanvas(o){o.save(),o._applyOpacity(this),o._applyGlobalCompositeOperation(this);const l=this._getCanvasCache();o.translate(l.x,l.y);var c=this._getCachedSceneCanvas(),h=c.pixelRatio;o.drawImage(c._canvas,0,0,c.width/h,c.height/h),o.restore()}_drawCachedHitCanvas(o){var l=this._getCanvasCache(),c=l.hit;o.save(),o.translate(l.x,l.y),o.drawImage(c._canvas,0,0,c.width/c.pixelRatio,c.height/c.pixelRatio),o.restore()}_getCachedSceneCanvas(){var m,v,y,C,o=this.filters(),l=this._getCanvasCache(),c=l.scene,h=l.filter,p=h.getContext();if(o){if(!this._filterUpToDate){var D=c.pixelRatio;h.setSize(c.width/c.pixelRatio,c.height/c.pixelRatio);try{for(m=o.length,p.clear(),p.drawImage(c._canvas,0,0,c.getWidth()/D,c.getHeight()/D),v=p.getImageData(0,0,h.getWidth(),h.getHeight()),y=0;y<m;y++)"function"==typeof(C=o[y])?(C.call(this,v),p.putImageData(v,0,0)):R.error("Filter should be type of function, but got "+typeof C+" instead. Please check correct filters")}catch(T){R.error("Unable to apply filter. "+T.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return h}return c}on(o,l){if(this._cache&&this._cache.delete(_n),3===arguments.length)return this._delegate.apply(this,arguments);var p,v,y,C,c=o.split(" "),h=c.length;for(p=0;p<h;p++)C=(v=c[p].split("."))[1]||"",this.eventListeners[y=v[0]]||(this.eventListeners[y]=[]),this.eventListeners[y].push({name:C,handler:l});return this}off(o,l){var p,m,y,C,D,c=(o||"").split(" "),h=c.length;if(this._cache&&this._cache.delete(_n),!o)for(m in this.eventListeners)this._off(m);for(p=0;p<h;p++)if(D=(y=c[p].split("."))[1],C=y[0])this.eventListeners[C]&&this._off(C,D,l);else for(m in this.eventListeners)this._off(m,D,l);return this}dispatchEvent(o){return this.fire(o.type,{target:this,type:o.type,evt:o}),this}addEventListener(o,l){return this.on(o,function(c){l.call(this,c.evt)}),this}removeEventListener(o){return this.off(o),this}_delegate(o,l,c){var h=this;this.on(o,function(p){for(var m=p.target.findAncestors(l,!0,h),v=0;v<m.length;v++)(p=R.cloneObject(p)).currentTarget=m[v],c.call(m[v],p)})}remove(){return this.isDragging()&&this.stopDrag(),Ne._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Tn),this._clearSelfAndDescendantCache(uo),this._clearSelfAndDescendantCache(lc),this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache($i),this._clearSelfAndDescendantCache(Wa)}_remove(){this._clearCaches();var o=this.getParent();o&&o.children&&(o.children.splice(this.index,1),o._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(o){var l="get"+R._capitalize(o);return R._isFunction(this[l])?this[l]():this.attrs[o]}getAncestors(){for(var o=this.getParent(),l=[];o;)l.push(o),o=o.getParent();return l}getAttrs(){return this.attrs||{}}setAttrs(o){return this._batchTransformChanges(()=>{var l,c;if(!o)return this;for(l in o)"children"!==l&&(c="set"+R._capitalize(l),R._isFunction(this[c])?this[c](o[l]):this._setAttr(l,o[l]))}),this}isListening(){return this._getCache(Wa,this._isListening)}_isListening(o){if(!this.listening())return!1;const c=this.getParent();return!c||c===o||this===o||c._isListening(o)}isVisible(){return this._getCache($i,this._isVisible)}_isVisible(o){if(!this.visible())return!1;const c=this.getParent();return!c||c===o||this===o||c._isVisible(o)}shouldDrawHit(o,l=!1){if(o)return this._isVisible(o)&&this._isListening(o);var c=this.getLayer(),h=!1;Ne._dragElements.forEach(m=>{"dragging"===m.dragStatus&&("Stage"===m.node.nodeType||m.node.getLayer()===c)&&(h=!0)});var p=!l&&!Z.hitOnDragEnabled&&h;return this.isListening()&&this.isVisible()&&!p}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var h,p,m,v,o=this.getDepth(),l=this,c=0;return"Stage"!==l.nodeType&&function y(C){for(h=[],p=C.length,m=0;m<p;m++)c++,"Shape"!==(v=C[m]).nodeType&&(h=h.concat(v.getChildren().slice())),v._id===l._id&&(m=p);h.length>0&&h[0].getDepth()<=o&&y(h)}(l.getStage().getChildren()),c}getDepth(){for(var o=0,l=this.parent;l;)o++,l=l.parent;return o}_batchTransformChanges(o){this._batchingTransformChange=!0,o(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(xn),this._clearSelfAndDescendantCache(Tn)),this._needClearTransformCache=!1}setPosition(o){return this._batchTransformChanges(()=>{this.x(o.x),this.y(o.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var o=this.getStage().getPointerPosition();if(!o)return null;var l=this.getAbsoluteTransform().copy();return l.invert(),l.point(o)}getAbsolutePosition(o){let l=!1,c=this.parent;for(;c;){if(c.isCached()){l=!0;break}c=c.parent}l&&!o&&(o=!0);var h=this.getAbsoluteTransform(o).getMatrix(),p=new Nt,m=this.offset();return p.m=h.slice(),p.translate(m.x,m.y),p.getTranslation()}setAbsolutePosition(o){var l=this._clearTransform();this.attrs.x=l.x,this.attrs.y=l.y,delete l.x,delete l.y,this._clearCache(xn);var c=this._getAbsoluteTransform().copy();return c.invert(),c.translate(o.x,o.y),o={x:this.attrs.x+c.getTranslation().x,y:this.attrs.y+c.getTranslation().y},this._setTransform(l),this.setPosition({x:o.x,y:o.y}),this._clearCache(xn),this._clearSelfAndDescendantCache(Tn),this}_setTransform(o){var l;for(l in o)this.attrs[l]=o[l]}_clearTransform(){var o={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,o}move(o){var l=o.x,c=o.y,h=this.x(),p=this.y();return void 0!==l&&(h+=l),void 0!==c&&(p+=c),this.setPosition({x:h,y:p}),this}_eachAncestorReverse(o,l){var p,m,c=[],h=this.getParent();if(!l||l._id!==this._id){for(c.unshift(this);h&&(!l||h._id!==l._id);)c.unshift(h),h=h.parent;for(p=c.length,m=0;m<p;m++)o(c[m])}}rotate(o){return this.rotation(this.rotation()+o),this}moveToTop(){if(!this.parent)return R.warn("Node has no parent. moveToTop function is ignored."),!1;var o=this.index;return o<this.parent.getChildren().length-1&&(this.parent.children.splice(o,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return R.warn("Node has no parent. moveUp function is ignored."),!1;var o=this.index;return o<this.parent.getChildren().length-1&&(this.parent.children.splice(o,1),this.parent.children.splice(o+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return R.warn("Node has no parent. moveDown function is ignored."),!1;var o=this.index;return o>0&&(this.parent.children.splice(o,1),this.parent.children.splice(o-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return R.warn("Node has no parent. moveToBottom function is ignored."),!1;var o=this.index;return o>0&&(this.parent.children.splice(o,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(o){return this.parent?((o<0||o>=this.parent.children.length)&&R.warn("Unexpected value "+o+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+"."),this.parent.children.splice(this.index,1),this.parent.children.splice(o,0,this),this.parent._setChildrenIndices(),this):(R.warn("Node has no parent. zIndex parameter is ignored."),this)}getAbsoluteOpacity(){return this._getCache(uo,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var o=this.opacity(),l=this.getParent();return l&&!l._isUnderCache&&(o*=l.getAbsoluteOpacity()),o}moveTo(o){return this.getParent()!==o&&(this._remove(),o.add(this)),this}toObject(){var c,h,p,m,o={},l=this.getAttrs();for(c in o.attrs={},l)(!R.isObject(h=l[c])||R._isPlainObject(h)||R._isArray(h))&&(p="function"==typeof this[c]&&this[c],delete l[c],m=p?p.call(this):null,l[c]=h,m!==h&&(o.attrs[c]=h));return o.className=this.getClassName(),R._prepareToStringify(o)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(o,l,c){var h=[];l&&this._isMatch(o)&&h.push(this);for(var p=this.parent;p;){if(p===c)return h;p._isMatch(o)&&h.push(p),p=p.parent}return h}isAncestorOf(o){return!1}findAncestor(o,l,c){return this.findAncestors(o,l,c)[0]}_isMatch(o){if(!o)return!1;if("function"==typeof o)return o(this);var h,p,l=o.replace(/ /g,"").split(","),c=l.length;for(h=0;h<c;h++)if(R.isValidSelector(p=l[h])||(R.warn('Selector "'+p+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),R.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),R.warn("Konva is awesome, right?")),"#"===p.charAt(0)){if(this.id()===p.slice(1))return!0}else if("."===p.charAt(0)){if(this.hasName(p.slice(1)))return!0}else if(this.className===p||this.nodeType===p)return!0;return!1}getLayer(){var o=this.getParent();return o?o.getLayer():null}getStage(){return this._getCache("stage",this._getStage)}_getStage(){var o=this.getParent();if(o)return o.getStage()}fire(o,l={},c){return l.target=l.target||this,c?this._fireAndBubble(o,l):this._fire(o,l),this}getAbsoluteTransform(o){return o?this._getAbsoluteTransform(o):this._getCache(Tn,this._getAbsoluteTransform)}_getAbsoluteTransform(o){var l;if(o)return l=new Nt,this._eachAncestorReverse(function(h){var p=h.transformsEnabled();"all"===p?l.multiply(h.getTransform()):"position"===p&&l.translate(h.x()-h.offsetX(),h.y()-h.offsetY())},o),l;l=this._cache.get(Tn)||new Nt,this.parent?this.parent.getAbsoluteTransform().copyInto(l):l.reset();var c=this.transformsEnabled();return"all"===c?l.multiply(this.getTransform()):"position"===c&&l.translate((this.attrs.x||0)-(this.attrs.offsetX||0),(this.attrs.y||0)-(this.attrs.offsetY||0)),l.dirty=!1,l}getAbsoluteScale(o){for(var l=this;l;)l._isUnderCache&&(o=l),l=l.getParent();const h=this.getAbsoluteTransform(o).decompose();return{x:h.scaleX,y:h.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(xn,this._getTransform)}_getTransform(){var o,l,c=this._cache.get(xn)||new Nt;c.reset();var h=this.x(),p=this.y(),m=Z.getAngle(this.rotation()),v=null!==(o=this.attrs.scaleX)&&void 0!==o?o:1,y=null!==(l=this.attrs.scaleY)&&void 0!==l?l:1,C=this.attrs.skewX||0,D=this.attrs.skewY||0,T=this.attrs.offsetX||0,E=this.attrs.offsetY||0;return(0!==h||0!==p)&&c.translate(h,p),0!==m&&c.rotate(m),(0!==C||0!==D)&&c.skew(C,D),(1!==v||1!==y)&&c.scale(v,y),(0!==T||0!==E)&&c.translate(-1*T,-1*E),c.dirty=!1,c}clone(o){var c,h,p,m,v,l=R.cloneObject(this.attrs);for(c in o)l[c]=o[c];var y=new this.constructor(l);for(c in this.eventListeners)for(p=(h=this.eventListeners[c]).length,m=0;m<p;m++)(v=h[m]).name.indexOf("konva")<0&&(y.eventListeners[c]||(y.eventListeners[c]=[]),y.eventListeners[c].push(v));return y}_toKonvaCanvas(o){o=o||{};var l=this.getClientRect(),c=this.getStage(),h=void 0!==o.x?o.x:Math.floor(l.x),p=void 0!==o.y?o.y:Math.floor(l.y),m=o.pixelRatio||1,v=new Or({width:o.width||Math.ceil(l.width)||(c?c.width():0),height:o.height||Math.ceil(l.height)||(c?c.height():0),pixelRatio:m}),y=v.getContext();return!1===o.imageSmoothingEnabled&&(y._context.imageSmoothingEnabled=!1),y.save(),(h||p)&&y.translate(-1*h,-1*p),this.drawScene(v),y.restore(),v}toCanvas(o){return this._toKonvaCanvas(o)._canvas}toDataURL(o){var l=(o=o||{}).mimeType||null,c=o.quality||null,h=this._toKonvaCanvas(o).toDataURL(l,c);return o.callback&&o.callback(h),h}toImage(o){return new Promise((l,c)=>{try{const h=o?.callback;h&&delete o.callback,R._urlToImage(this.toDataURL(o),function(p){l(p),h?.(p)})}catch(h){c(h)}})}toBlob(o){return new Promise((l,c)=>{try{const h=o?.callback;h&&delete o.callback,this.toCanvas(o).toBlob(p=>{l(p),h?.(p)})}catch(h){c(h)}})}setSize(o){return this.width(o.width),this.height(o.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Z.dragDistance}_off(o,l,c){var p,m,h=this.eventListeners[o];for(p=0;p<h.length;p++)if(!("konva"===(m=h[p].name)&&"konva"!==l||l&&m!==l||c&&c!==h[p].handler)){if(h.splice(p,1),0===h.length){delete this.eventListeners[o];break}p--}}_fireChangeEvent(o,l,c){this._fire(o+"Change",{oldVal:l,newVal:c})}addName(o){if(!this.hasName(o)){var l=this.name();this.name(l?l+" "+o:o)}return this}hasName(o){if(!o)return!1;const l=this.name();return!!l&&-1!==(l||"").split(/\s/g).indexOf(o)}removeName(o){var l=(this.name()||"").split(/\s/g),c=l.indexOf(o);return-1!==c&&(l.splice(c,1),this.name(l.join(" "))),this}setAttr(o,l){var c=this["set"+R._capitalize(o)];return R._isFunction(c)?c.call(this,l):this._setAttr(o,l),this}_requestDraw(){Z.autoDrawEnabled&&(this.getLayer()||this.getStage())?.batchDraw()}_setAttr(o,l){var c=this.attrs[o];c===l&&!R.isObject(l)||(null==l?delete this.attrs[o]:this.attrs[o]=l,this._shouldFireChangeEvents&&this._fireChangeEvent(o,c,l),this._requestDraw())}_setComponentAttr(o,l,c){var h;void 0!==c&&((h=this.attrs[o])||(this.attrs[o]=this.getAttr(o)),this.attrs[o][l]=c,this._fireChangeEvent(o,h,c))}_fireAndBubble(o,l,c){if(l&&"Shape"===this.nodeType&&(l.target=this),o!==cc&&o!==dc||!(c&&(this===c||this.isAncestorOf&&this.isAncestorOf(c))||"Stage"===this.nodeType&&!c)){this._fire(o,l);var p=(o===cc||o===dc)&&c&&c.isAncestorOf&&c.isAncestorOf(this)&&!c.isAncestorOf(this.parent);(l&&!l.cancelBubble||!l)&&this.parent&&this.parent.isListening()&&!p&&(c&&c.parent?this._fireAndBubble.call(this.parent,o,l,c):this._fireAndBubble.call(this.parent,o,l))}}_getProtoListeners(o){let l=this._cache.get(_n);if(!l){l={};let h=Object.getPrototypeOf(this);for(;h;)if(h.eventListeners){for(var c in h.eventListeners)l[c]=h.eventListeners[c].concat(l[c]||[]);h=Object.getPrototypeOf(h)}else h=Object.getPrototypeOf(h);this._cache.set(_n,l)}return l[o]}_fire(o,l){(l=l||{}).currentTarget=this,l.type=o;const c=this._getProtoListeners(o);if(c)for(var h=0;h<c.length;h++)c[h].handler.call(this,l);const p=this.eventListeners[o];if(p)for(h=0;h<p.length;h++)p[h].handler.call(this,l)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(o){var l=o?o.pointerId:void 0,c=this.getStage(),h=this.getAbsolutePosition(),p=c._getPointerById(l)||c._changedPointerPositions[0]||h;Ne._dragElements.set(this._id,{node:this,startPointerPos:p,offset:{x:p.x-h.x,y:p.y-h.y},dragStatus:"ready",pointerId:l})}startDrag(o,l=!0){Ne._dragElements.has(this._id)||this._createDragElement(o),Ne._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:o&&o.evt},l)}_setDragPosition(o,l){const c=this.getStage()._getPointerById(l.pointerId);if(c){var h={x:c.x-l.offset.x,y:c.y-l.offset.y},p=this.dragBoundFunc();if(void 0!==p){const m=p.call(this,h,o);m?h=m:R.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==h.x||this._lastPos.y!==h.y)&&(this.setAbsolutePosition(h),this._requestDraw()),this._lastPos=h}}stopDrag(o){const l=Ne._dragElements.get(this._id);l&&(l.dragStatus="stopped"),Ne._endDragBefore(o),Ne._endDragAfter(o)}setDraggable(o){this._setAttr("draggable",o),this._dragChange()}isDragging(){const o=Ne._dragElements.get(this._id);return!!o&&"dragging"===o.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(o){if((void 0===o.evt.button||Z.dragButtons.indexOf(o.evt.button)>=0)&&!this.isDragging()){var h=!1;Ne._dragElements.forEach(p=>{this.isAncestorOf(p.node)&&(h=!0)}),h||this._createDragElement(o)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const l=Ne._dragElements.get(this._id),h=l&&"ready"===l.dragStatus;l&&"dragging"===l.dragStatus?this.stopDrag():h&&Ne._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(o={x:0,y:0}){const l=this.getStage();if(!l)return!1;const c={x:-o.x,y:-o.y,width:l.width()+2*o.x,height:l.height()+2*o.y};return R.haveIntersection(c,this.getClientRect())}static create(o,l){return R._isString(o)&&(o=JSON.parse(o)),this._createNode(o,l)}static _createNode(o,l){var p,m,v,c=G.prototype.getClassName.call(o),h=o.children;if(l&&(o.attrs.container=l),Z[c]||(R.warn('Can not find a node with class name "'+c+'". Fallback to "Shape".'),c="Shape"),p=new(0,Z[c])(o.attrs),h)for(m=h.length,v=0;v<m;v++)p.add(G._createNode(h[v]));return p}}G.prototype.nodeType="Node",G.prototype._attrsAffectingSize=[],G.prototype.eventListeners={},G.prototype.on.call(G.prototype,qa,function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(xn),this._clearSelfAndDescendantCache(Tn))}),G.prototype.on.call(G.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache($i)}),G.prototype.on.call(G.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Wa)}),G.prototype.on.call(G.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(uo)});const Ee=I.addGetterSetter;Ee(G,"zIndex"),Ee(G,"absolutePosition"),Ee(G,"position"),Ee(G,"x",0,$()),Ee(G,"y",0,$()),Ee(G,"globalCompositeOperation","source-over",rn()),Ee(G,"opacity",1,$()),Ee(G,"name","",rn()),Ee(G,"id","",rn()),Ee(G,"rotation",0,$()),I.addComponentsGetterSetter(G,"scale",["x","y"]),Ee(G,"scaleX",1,$()),Ee(G,"scaleY",1,$()),I.addComponentsGetterSetter(G,"skew",["x","y"]),Ee(G,"skewX",0,$()),Ee(G,"skewY",0,$()),I.addComponentsGetterSetter(G,"offset",["x","y"]),Ee(G,"offsetX",0,$()),Ee(G,"offsetY",0,$()),Ee(G,"dragDistance",null,$()),Ee(G,"width",0,$()),Ee(G,"height",0,$()),Ee(G,"listening",!0,sn()),Ee(G,"preventDefault",!0,sn()),Ee(G,"filters",null,function(f){return this._filterUpToDate=!1,f}),Ee(G,"visible",!0,sn()),Ee(G,"transformsEnabled","all",rn()),Ee(G,"size"),Ee(G,"dragBoundFunc"),Ee(G,"draggable",!1,sn()),I.backCompat(G,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Ut extends G{constructor(){super(...arguments),this.children=[]}getChildren(o){if(!o)return this.children||[];var c=[];return(this.children||[]).forEach(function(h){o(h)&&c.push(h)}),c}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(o=>{o.parent=null,o.index=0,o.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(o=>{o.parent=null,o.index=0,o.destroy()}),this.children=[],this._requestDraw(),this}add(...o){if(0===o.length)return this;if(o.length>1){for(var l=0;l<o.length;l++)this.add(o[l]);return this}const c=o[0];return c.getParent()?(c.moveTo(this),this):(this._validateAdd(c),c.index=this.getChildren().length,c.parent=this,c._clearCaches(),this.getChildren().push(c),this._fire("add",{child:c}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(o){return this._generalFind(o,!1)}findOne(o){var l=this._generalFind(o,!0);return l.length>0?l[0]:void 0}_generalFind(o,l){var c=[];return this._descendants(h=>{const p=h._isMatch(o);return p&&c.push(h),!(!p||!l)}),c}_descendants(o){let l=!1;const c=this.getChildren();for(const h of c){if(l=o(h),l)return!0;if(h.hasChildren()&&(l=h._descendants(o),l))return!0}return!1}toObject(){var o=G.prototype.toObject.call(this);return o.children=[],this.getChildren().forEach(l=>{o.children.push(l.toObject())}),o}isAncestorOf(o){for(var l=o.getParent();l;){if(l._id===this._id)return!0;l=l.getParent()}return!1}clone(o){var l=G.prototype.clone.call(this,o);return this.getChildren().forEach(function(c){l.add(c.clone())}),l}getAllIntersections(o){var l=[];return this.find("Shape").forEach(function(c){c.isVisible()&&c.intersects(o)&&l.push(c)}),l}_clearSelfAndDescendantCache(o){var l;super._clearSelfAndDescendantCache(o),!this.isCached()&&(null===(l=this.children)||void 0===l||l.forEach(function(c){c._clearSelfAndDescendantCache(o)}))}_setChildrenIndices(){var o;null===(o=this.children)||void 0===o||o.forEach(function(l,c){l.index=c}),this._requestDraw()}drawScene(o,l){var c=this.getLayer(),h=o||c&&c.getCanvas(),p=h&&h.getContext(),m=this._getCanvasCache(),v=m&&m.scene,y=h&&h.isCache;if(!this.isVisible()&&!y)return this;if(v){p.save();var C=this.getAbsoluteTransform(l).getMatrix();p.transform(C[0],C[1],C[2],C[3],C[4],C[5]),this._drawCachedSceneCanvas(p),p.restore()}else this._drawChildren("drawScene",h,l);return this}drawHit(o,l){if(!this.shouldDrawHit(l))return this;var c=this.getLayer(),h=o||c&&c.hitCanvas,p=h&&h.getContext(),m=this._getCanvasCache();if(m&&m.hit){p.save();var y=this.getAbsoluteTransform(l).getMatrix();p.transform(y[0],y[1],y[2],y[3],y[4],y[5]),this._drawCachedHitCanvas(p),p.restore()}else this._drawChildren("drawHit",h,l);return this}_drawChildren(o,l,c){var h,p=l&&l.getContext(),m=this.clipWidth(),v=this.clipHeight(),y=this.clipFunc(),C=m&&v||y;const D=c===this;if(C){p.save();var T=this.getAbsoluteTransform(c),E=T.getMatrix();if(p.transform(E[0],E[1],E[2],E[3],E[4],E[5]),p.beginPath(),y)y.call(this,p,this);else{var x=this.clipX(),S=this.clipY();p.rect(x,S,m,v)}p.clip(),E=T.copy().invert().getMatrix(),p.transform(E[0],E[1],E[2],E[3],E[4],E[5])}var O=!D&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===o;O&&(p.save(),p._applyGlobalCompositeOperation(this)),null===(h=this.children)||void 0===h||h.forEach(function(k){k[o](l,c)}),O&&p.restore(),C&&p.restore()}getClientRect(o){var l,p,m,v,y,C,c=(o=o||{}).skipTransform,h=o.relativeTo,D=this;null===(l=this.children)||void 0===l||l.forEach(function(O){if(O.visible()){var k=O.getClientRect({relativeTo:D,skipShadow:o.skipShadow,skipStroke:o.skipStroke});0===k.width&&0===k.height||(void 0===p?(p=k.x,m=k.y,v=k.x+k.width,y=k.y+k.height):(p=Math.min(p,k.x),m=Math.min(m,k.y),v=Math.max(v,k.x+k.width),y=Math.max(y,k.y+k.height)))}});for(var T=this.find("Shape"),E=!1,x=0;x<T.length;x++)if(T[x]._isVisible(this)){E=!0;break}return C=E&&void 0!==p?{x:p,y:m,width:v-p,height:y-m}:{x:0,y:0,width:0,height:0},c?C:this._transformedRect(C,h)}}I.addComponentsGetterSetter(Ut,"clip",["x","y","width","height"]),I.addGetterSetter(Ut,"clipX",void 0,$()),I.addGetterSetter(Ut,"clipY",void 0,$()),I.addGetterSetter(Ut,"clipWidth",void 0,$()),I.addGetterSetter(Ut,"clipHeight",void 0,$()),I.addGetterSetter(Ut,"clipFunc");const fi=new Map,Ka=void 0!==Z._global.PointerEvent;function po(f){return fi.get(f)}function Gi(f){return{evt:f,pointerId:f.pointerId}}function Xa(f,o){return fi.get(f)===o}function Qa(f,o){$t(f),o.getStage()&&(fi.set(f,o),Ka&&o._fire("gotpointercapture",Gi(new PointerEvent("gotpointercapture"))))}function $t(f,o){const l=fi.get(f);l&&(l.getStage(),fi.delete(f),Ka&&l._fire("lostpointercapture",Gi(new PointerEvent("lostpointercapture"))))}var pc="mouseleave",Za="mouseover",Ja="mouseenter",zi="mousemove",el="mousedown",Fr="mouseup",pi="pointermove",Lr="pointerdown",ur="pointerup",gi="pointercancel",Wi="pointerout",qi="pointerleave",mi="pointerover",Yi="pointerenter",go="contextmenu",rt="touchstart",tl="touchend",nl="touchmove",Ki="touchcancel",Le="wheel",je=[[Ja,"_pointerenter"],[el,"_pointerdown"],[zi,"_pointermove"],[Fr,"_pointerup"],[pc,"_pointerleave"],[rt,"_pointerdown"],[nl,"_pointermove"],[tl,"_pointerup"],[Ki,"_pointercancel"],[Za,"_pointerover"],[Le,"_wheel"],[go,"_contextmenu"],[Lr,"_pointerdown"],[pi,"_pointermove"],[ur,"_pointerup"],[gi,"_pointercancel"],["lostpointercapture","_lostpointercapture"]];const vi={mouse:{[Wi]:"mouseout",[qi]:pc,[mi]:Za,[Yi]:Ja,[pi]:zi,[Lr]:el,[ur]:Fr,[gi]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Wi]:"touchout",[qi]:"touchleave",[mi]:"touchover",[Yi]:"touchenter",[pi]:nl,[Lr]:rt,[ur]:tl,[gi]:Ki,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Wi]:Wi,[qi]:qi,[mi]:mi,[Yi]:Yi,[pi]:pi,[Lr]:Lr,[ur]:ur,[gi]:gi,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},yi=f=>f.indexOf("pointer")>=0?"pointer":f.indexOf("touch")>=0?"touch":"mouse",qn=f=>{const o=yi(f);return"pointer"===o?Z.pointerEventsEnabled&&vi.pointer:"touch"===o?vi.touch:"mouse"===o?vi.mouse:void 0};function le(f={}){return(f.clipFunc||f.clipWidth||f.clipHeight)&&R.warn("Stage does not support clipping. Please use clip for Layers or Groups."),f}const yo=[];class X extends Ut{constructor(o){super(le(o)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),yo.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{le(this.attrs)}),this._checkVisibility()}_validateAdd(o){const l="Layer"===o.getType(),c="FastLayer"===o.getType();l||c||R.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const o=this.visible()?"":"none";this.content.style.display=o}setContainer(o){if("string"==typeof o){if("."===o.charAt(0)){var l=o.slice(1);o=document.getElementsByClassName(l)[0]}else{var c;c="#"!==o.charAt(0)?o:o.slice(1),o=document.getElementById(c)}if(!o)throw"Can not find container in document with id "+c}return this._setAttr("container",o),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),o.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var c,o=this.children,l=o.length;for(c=0;c<l;c++)o[c].clear();return this}clone(o){return o||(o={}),o.container=typeof document<"u"&&document.createElement("div"),Ut.prototype.clone.call(this,o)}destroy(){super.destroy();var o=this.content;o&&R._isInDocument(o)&&this.container().removeChild(o);var l=yo.indexOf(this);return l>-1&&yo.splice(l,1),R.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const o=this._pointerPositions[0]||this._changedPointerPositions[0];return o?{x:o.x,y:o.y}:(R.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(o){return this._pointerPositions.find(l=>l.id===o)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(o){(o=o||{}).x=o.x||0,o.y=o.y||0,o.width=o.width||this.width(),o.height=o.height||this.height();var l=new Or({width:o.width,height:o.height,pixelRatio:o.pixelRatio||1}),c=l.getContext()._context,h=this.children;return(o.x||o.y)&&c.translate(-1*o.x,-1*o.y),h.forEach(function(p){if(p.isVisible()){var m=p._toKonvaCanvas(o);c.drawImage(m._canvas,o.x,o.y,m.getWidth()/m.getPixelRatio(),m.getHeight()/m.getPixelRatio())}}),l}getIntersection(o){if(!o)return null;var p,l=this.children;for(p=l.length-1;p>=0;p--){const m=l[p].getIntersection(o);if(m)return m}return null}_resizeDOM(){var o=this.width(),l=this.height();this.content&&(this.content.style.width=o+"px",this.content.style.height=l+"px"),this.bufferCanvas.setSize(o,l),this.bufferHitCanvas.setSize(o,l),this.children.forEach(c=>{c.setSize({width:o,height:l}),c.draw()})}add(o,...l){if(arguments.length>1){for(var c=0;c<arguments.length;c++)this.add(arguments[c]);return this}super.add(o);var h=this.children.length;return h>5&&R.warn("The stage has "+h+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),o.setSize({width:this.width(),height:this.height()}),o.draw(),Z.isBrowser&&this.content.appendChild(o.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(o){return Xa(o,this)}setPointerCapture(o){Qa(o,this)}releaseCapture(o){$t(o)}getLayers(){return this.children}_bindContentEvents(){!Z.isBrowser||je.forEach(([o,l])=>{this.content.addEventListener(o,c=>{this[l](c)},{passive:!1})})}_pointerenter(o){this.setPointersPositions(o);const l=qn(o.type);this._fire(l.pointerenter,{evt:o,target:this,currentTarget:this})}_pointerover(o){this.setPointersPositions(o);const l=qn(o.type);this._fire(l.pointerover,{evt:o,target:this,currentTarget:this})}_getTargetShape(o){let l=this[o+"targetShape"];return l&&!l.getStage()&&(l=null),l}_pointerleave(o){const l=qn(o.type),c=yi(o.type);if(l){this.setPointersPositions(o);var h=this._getTargetShape(c),p=!Ne.isDragging||Z.hitOnDragEnabled;h&&p?(h._fireAndBubble(l.pointerout,{evt:o}),h._fireAndBubble(l.pointerleave,{evt:o}),this._fire(l.pointerleave,{evt:o,target:this,currentTarget:this}),this[c+"targetShape"]=null):p&&(this._fire(l.pointerleave,{evt:o,target:this,currentTarget:this}),this._fire(l.pointerout,{evt:o,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(o){const l=qn(o.type),c=yi(o.type);if(l){this.setPointersPositions(o);var h=!1;this._changedPointerPositions.forEach(p=>{var m=this.getIntersection(p);if(Ne.justDragged=!1,Z["_"+c+"ListenClick"]=!0,!m||!m.isListening())return;Z.capturePointerEventsEnabled&&m.setPointerCapture(p.id),this[c+"ClickStartShape"]=m,m._fireAndBubble(l.pointerdown,{evt:o,pointerId:p.id}),h=!0;const y=o.type.indexOf("touch")>=0;m.preventDefault()&&o.cancelable&&y&&o.preventDefault()}),h||this._fire(l.pointerdown,{evt:o,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(o){const l=qn(o.type),c=yi(o.type);if(!l)return;if(Ne.isDragging&&Ne.node.preventDefault()&&o.cancelable&&o.preventDefault(),this.setPointersPositions(o),Ne.isDragging&&!Z.hitOnDragEnabled)return;var p={};let m=!1;var v=this._getTargetShape(c);this._changedPointerPositions.forEach(y=>{const C=po(y.id)||this.getIntersection(y),D=y.id,T={evt:o,pointerId:D};var E=v!==C;if(E&&v&&(v._fireAndBubble(l.pointerout,Object.assign({},T),C),v._fireAndBubble(l.pointerleave,Object.assign({},T),C)),C){if(p[C._id])return;p[C._id]=!0}C&&C.isListening()?(m=!0,E&&(C._fireAndBubble(l.pointerover,Object.assign({},T),v),C._fireAndBubble(l.pointerenter,Object.assign({},T),v),this[c+"targetShape"]=C),C._fireAndBubble(l.pointermove,Object.assign({},T))):v&&(this._fire(l.pointerover,{evt:o,target:this,currentTarget:this,pointerId:D}),this[c+"targetShape"]=null)}),m||this._fire(l.pointermove,{evt:o,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(o){const l=qn(o.type),c=yi(o.type);if(!l)return;this.setPointersPositions(o);const h=this[c+"ClickStartShape"],p=this[c+"ClickEndShape"];var m={};let v=!1;this._changedPointerPositions.forEach(y=>{const C=po(y.id)||this.getIntersection(y);if(C){if(C.releaseCapture(y.id),m[C._id])return;m[C._id]=!0}const D=y.id,T={evt:o,pointerId:D};let E=!1;Z["_"+c+"InDblClickWindow"]?(E=!0,clearTimeout(this[c+"DblTimeout"])):Ne.justDragged||(Z["_"+c+"InDblClickWindow"]=!0,clearTimeout(this[c+"DblTimeout"])),this[c+"DblTimeout"]=setTimeout(function(){Z["_"+c+"InDblClickWindow"]=!1},Z.dblClickWindow),C&&C.isListening()?(v=!0,this[c+"ClickEndShape"]=C,C._fireAndBubble(l.pointerup,Object.assign({},T)),Z["_"+c+"ListenClick"]&&h&&h===C&&(C._fireAndBubble(l.pointerclick,Object.assign({},T)),E&&p&&p===C&&C._fireAndBubble(l.pointerdblclick,Object.assign({},T)))):(this[c+"ClickEndShape"]=null,Z["_"+c+"ListenClick"]&&this._fire(l.pointerclick,{evt:o,target:this,currentTarget:this,pointerId:D}),E&&this._fire(l.pointerdblclick,{evt:o,target:this,currentTarget:this,pointerId:D}))}),v||this._fire(l.pointerup,{evt:o,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Z["_"+c+"ListenClick"]=!1,o.cancelable&&"touch"!==c&&o.preventDefault()}_contextmenu(o){this.setPointersPositions(o);var l=this.getIntersection(this.getPointerPosition());l&&l.isListening()?l._fireAndBubble(go,{evt:o}):this._fire(go,{evt:o,target:this,currentTarget:this})}_wheel(o){this.setPointersPositions(o);var l=this.getIntersection(this.getPointerPosition());l&&l.isListening()?l._fireAndBubble(Le,{evt:o}):this._fire(Le,{evt:o,target:this,currentTarget:this})}_pointercancel(o){this.setPointersPositions(o);const l=po(o.pointerId)||this.getIntersection(this.getPointerPosition());l&&l._fireAndBubble(ur,Gi(o)),$t(o.pointerId)}_lostpointercapture(o){$t(o.pointerId)}setPointersPositions(o){var l=this._getContentPosition(),c=null,h=null;void 0!==(o=o||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(o.touches,p=>{this._pointerPositions.push({id:p.identifier,x:(p.clientX-l.left)/l.scaleX,y:(p.clientY-l.top)/l.scaleY})}),Array.prototype.forEach.call(o.changedTouches||o.touches,p=>{this._changedPointerPositions.push({id:p.identifier,x:(p.clientX-l.left)/l.scaleX,y:(p.clientY-l.top)/l.scaleY})})):(this.pointerPos={x:c=(o.clientX-l.left)/l.scaleX,y:h=(o.clientY-l.top)/l.scaleY},this._pointerPositions=[{x:c,y:h,id:R._getFirstPointerId(o)}],this._changedPointerPositions=[{x:c,y:h,id:R._getFirstPointerId(o)}])}_setPointerPosition(o){R.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(o)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var o=this.content.getBoundingClientRect();return{top:o.top,left:o.left,scaleX:o.width/this.content.clientWidth||1,scaleY:o.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Or({width:this.width(),height:this.height()}),this.bufferHitCanvas=new za({pixelRatio:1,width:this.width(),height:this.height()}),Z.isBrowser){var o=this.container();if(!o)throw"Stage has no container. A container is required.";o.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),o.appendChild(this.content),this._resizeDOM()}}cache(){return R.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(o){o.batchDraw()}),this}}X.prototype.nodeType="Stage",xe(X),I.addGetterSetter(X,"container");var _i="hasShadow",pe="shadowRGBA",Pe="patternImage",rl="linearGradient",mc="radialGradient";let Xi;function Br(){return Xi||(Xi=R.createCanvasElement().getContext("2d"),Xi)}const mt={};class j extends G{constructor(o){let l;for(super(o);l=R.getRandomColor(),!l||l in mt;);this.colorKey=l,mt[l]=this}getContext(){return R.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return R.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(_i,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(Pe,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const l=Br().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(l&&l.setTransform){const c=new Nt;c.translate(this.fillPatternX(),this.fillPatternY()),c.rotate(Z.getAngle(this.fillPatternRotation())),c.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),c.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const h=c.getMatrix(),p=typeof DOMMatrix>"u"?{a:h[0],b:h[1],c:h[2],d:h[3],e:h[4],f:h[5]}:new DOMMatrix(h);l.setTransform(p)}return l}}_getLinearGradient(){return this._getCache(rl,this.__getLinearGradient)}__getLinearGradient(){var o=this.fillLinearGradientColorStops();if(o){for(var l=Br(),c=this.fillLinearGradientStartPoint(),h=this.fillLinearGradientEndPoint(),p=l.createLinearGradient(c.x,c.y,h.x,h.y),m=0;m<o.length;m+=2)p.addColorStop(o[m],o[m+1]);return p}}_getRadialGradient(){return this._getCache(mc,this.__getRadialGradient)}__getRadialGradient(){var o=this.fillRadialGradientColorStops();if(o){for(var l=Br(),c=this.fillRadialGradientStartPoint(),h=this.fillRadialGradientEndPoint(),p=l.createRadialGradient(c.x,c.y,this.fillRadialGradientStartRadius(),h.x,h.y,this.fillRadialGradientEndRadius()),m=0;m<o.length;m+=2)p.addColorStop(o[m],o[m+1]);return p}}getShadowRGBA(){return this._getCache(pe,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var o=R.colorToRGBA(this.shadowColor());if(o)return"rgba("+o.r+","+o.g+","+o.b+","+o.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops()))}hasHitStroke(){const o=this.hitStrokeWidth();return"auto"===o?this.hasStroke():this.strokeEnabled()&&!!o}intersects(o){var c=this.getStage().bufferHitCanvas;return c.getContext().clear(),this.drawHit(c,null,!0),c.context.getImageData(Math.round(o.x),Math.round(o.y),1,1).data[3]>0}destroy(){return G.prototype.destroy.call(this),delete mt[this.colorKey],delete this.colorKey,this}_useBufferCanvas(o){var l;if(!this.getStage()||null!==(l=this.attrs.perfectDrawEnabled)&&void 0!==l&&!l)return!1;const h=o||this.hasFill(),p=this.hasStroke(),m=1!==this.getAbsoluteOpacity();if(h&&p&&m)return!0;const v=this.hasShadow(),y=this.shadowForStrokeEnabled();return!!(h&&p&&v&&y)}setStrokeHitEnabled(o){R.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),this.hitStrokeWidth(o?"auto":0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){var o=this.size();return{x:this._centroid?-o.width/2:0,y:this._centroid?-o.height/2:0,width:o.width,height:o.height}}getClientRect(o={}){const l=o.skipTransform,c=o.relativeTo,h=this.getSelfRect(),m=!o.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,v=h.width+m,y=h.height+m,C=!o.skipShadow&&this.hasShadow(),D=C?this.shadowOffsetX():0,T=C?this.shadowOffsetY():0,E=v+Math.abs(D),x=y+Math.abs(T),S=C&&this.shadowBlur()||0,N={width:E+2*S,height:x+2*S,x:-(m/2+S)+Math.min(D,0)+h.x,y:-(m/2+S)+Math.min(T,0)+h.y};return l?N:this._transformedRect(N,c)}drawScene(o,l){var D,T,c=this.getLayer(),h=o||c.getCanvas(),p=h.getContext(),m=this._getCanvasCache(),v=this.getSceneFunc(),y=this.hasShadow(),E=h.isCache,x=l===this;if(!this.isVisible()&&!x)return this;if(m){p.save();var S=this.getAbsoluteTransform(l).getMatrix();return p.transform(S[0],S[1],S[2],S[3],S[4],S[5]),this._drawCachedSceneCanvas(p),p.restore(),this}if(!v)return this;if(p.save(),this._useBufferCanvas()&&!E){(T=(D=this.getStage().bufferCanvas).getContext()).clear(),T.save(),T._applyLineJoin(this);var O=this.getAbsoluteTransform(l).getMatrix();T.transform(O[0],O[1],O[2],O[3],O[4],O[5]),v.call(this,T,this),T.restore();var k=D.pixelRatio;y&&p._applyShadow(this),p._applyOpacity(this),p._applyGlobalCompositeOperation(this),p.drawImage(D._canvas,0,0,D.width/k,D.height/k)}else p._applyLineJoin(this),x||(O=this.getAbsoluteTransform(l).getMatrix(),p.transform(O[0],O[1],O[2],O[3],O[4],O[5]),p._applyOpacity(this),p._applyGlobalCompositeOperation(this)),y&&p._applyShadow(this),v.call(this,p,this);return p.restore(),this}drawHit(o,l,c=!1){if(!this.shouldDrawHit(l,c))return this;var h=this.getLayer(),p=o||h.hitCanvas,m=p&&p.getContext(),v=this.hitFunc()||this.sceneFunc(),y=this._getCanvasCache(),C=y&&y.hit;if(this.colorKey||R.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),C){m.save();var D=this.getAbsoluteTransform(l).getMatrix();return m.transform(D[0],D[1],D[2],D[3],D[4],D[5]),this._drawCachedHitCanvas(m),m.restore(),this}if(!v)return this;if(m.save(),m._applyLineJoin(this),this!==l){var E=this.getAbsoluteTransform(l).getMatrix();m.transform(E[0],E[1],E[2],E[3],E[4],E[5])}return v.call(this,m,this),m.restore(),this}drawHitFromCache(o=0){var y,C,D,T,E,l=this._getCanvasCache(),c=this._getCachedSceneCanvas(),h=l.hit,p=h.getContext(),m=h.getWidth(),v=h.getHeight();p.clear(),p.drawImage(c._canvas,0,0,m,v);try{for(D=(C=(y=p.getImageData(0,0,m,v)).data).length,T=R._hexToRgb(this.colorKey),E=0;E<D;E+=4)C[E+3]>o?(C[E]=T.r,C[E+1]=T.g,C[E+2]=T.b,C[E+3]=255):C[E+3]=0;p.putImageData(y,0,0)}catch(S){R.error("Unable to draw hit graph from cached scene canvas. "+S.message)}return this}hasPointerCapture(o){return Xa(o,this)}setPointerCapture(o){Qa(o,this)}releaseCapture(o){$t(o)}}j.prototype._fillFunc=function Ip(f){f.fill()},j.prototype._strokeFunc=function vc(f){f.stroke()},j.prototype._fillFuncHit=function Tp(f){f.fill()},j.prototype._strokeFuncHit=function Rn(f){f.stroke()},j.prototype._centroid=!1,j.prototype.nodeType="Shape",xe(j),j.prototype.eventListeners={},j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function xp(){this._clearCache(_i)}),j.prototype.on.call(j.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function Ap(){this._clearCache(pe)}),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function Rp(){this._clearCache(Pe)}),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function Pp(){this._clearCache(rl)}),j.prototype.on.call(j.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function yc(){this._clearCache(mc)}),I.addGetterSetter(j,"stroke",void 0,Ua()),I.addGetterSetter(j,"strokeWidth",2,$()),I.addGetterSetter(j,"fillAfterStrokeEnabled",!1),I.addGetterSetter(j,"hitStrokeWidth","auto",ai()),I.addGetterSetter(j,"strokeHitEnabled",!0,sn()),I.addGetterSetter(j,"perfectDrawEnabled",!0,sn()),I.addGetterSetter(j,"shadowForStrokeEnabled",!0,sn()),I.addGetterSetter(j,"lineJoin"),I.addGetterSetter(j,"lineCap"),I.addGetterSetter(j,"sceneFunc"),I.addGetterSetter(j,"hitFunc"),I.addGetterSetter(j,"dash"),I.addGetterSetter(j,"dashOffset",0,$()),I.addGetterSetter(j,"shadowColor",void 0,rn()),I.addGetterSetter(j,"shadowBlur",0,$()),I.addGetterSetter(j,"shadowOpacity",1,$()),I.addComponentsGetterSetter(j,"shadowOffset",["x","y"]),I.addGetterSetter(j,"shadowOffsetX",0,$()),I.addGetterSetter(j,"shadowOffsetY",0,$()),I.addGetterSetter(j,"fillPatternImage"),I.addGetterSetter(j,"fill",void 0,Ua()),I.addGetterSetter(j,"fillPatternX",0,$()),I.addGetterSetter(j,"fillPatternY",0,$()),I.addGetterSetter(j,"fillLinearGradientColorStops"),I.addGetterSetter(j,"strokeLinearGradientColorStops"),I.addGetterSetter(j,"fillRadialGradientStartRadius",0),I.addGetterSetter(j,"fillRadialGradientEndRadius",0),I.addGetterSetter(j,"fillRadialGradientColorStops"),I.addGetterSetter(j,"fillPatternRepeat","repeat"),I.addGetterSetter(j,"fillEnabled",!0),I.addGetterSetter(j,"strokeEnabled",!0),I.addGetterSetter(j,"shadowEnabled",!0),I.addGetterSetter(j,"dashEnabled",!0),I.addGetterSetter(j,"strokeScaleEnabled",!0),I.addGetterSetter(j,"fillPriority","color"),I.addComponentsGetterSetter(j,"fillPatternOffset",["x","y"]),I.addGetterSetter(j,"fillPatternOffsetX",0,$()),I.addGetterSetter(j,"fillPatternOffsetY",0,$()),I.addComponentsGetterSetter(j,"fillPatternScale",["x","y"]),I.addGetterSetter(j,"fillPatternScaleX",1,$()),I.addGetterSetter(j,"fillPatternScaleY",1,$()),I.addComponentsGetterSetter(j,"fillLinearGradientStartPoint",["x","y"]),I.addComponentsGetterSetter(j,"strokeLinearGradientStartPoint",["x","y"]),I.addGetterSetter(j,"fillLinearGradientStartPointX",0),I.addGetterSetter(j,"strokeLinearGradientStartPointX",0),I.addGetterSetter(j,"fillLinearGradientStartPointY",0),I.addGetterSetter(j,"strokeLinearGradientStartPointY",0),I.addComponentsGetterSetter(j,"fillLinearGradientEndPoint",["x","y"]),I.addComponentsGetterSetter(j,"strokeLinearGradientEndPoint",["x","y"]),I.addGetterSetter(j,"fillLinearGradientEndPointX",0),I.addGetterSetter(j,"strokeLinearGradientEndPointX",0),I.addGetterSetter(j,"fillLinearGradientEndPointY",0),I.addGetterSetter(j,"strokeLinearGradientEndPointY",0),I.addComponentsGetterSetter(j,"fillRadialGradientStartPoint",["x","y"]),I.addGetterSetter(j,"fillRadialGradientStartPointX",0),I.addGetterSetter(j,"fillRadialGradientStartPointY",0),I.addComponentsGetterSetter(j,"fillRadialGradientEndPoint",["x","y"]),I.addGetterSetter(j,"fillRadialGradientEndPointX",0),I.addGetterSetter(j,"fillRadialGradientEndPointY",0),I.addGetterSetter(j,"fillPatternRotation",0),I.backCompat(j,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var Oe=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],Np=Oe.length;class Hr extends Ut{constructor(o){super(o),this.canvas=new Or,this.hitCanvas=new za({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(o){return this.getContext().clear(o),this.getHitCanvas().getContext().clear(o),this}setZIndex(o){super.setZIndex(o);var l=this.getStage();return l&&l.content&&(l.content.removeChild(this.getNativeCanvasElement()),o<l.children.length-1?l.content.insertBefore(this.getNativeCanvasElement(),l.children[o+1].getCanvas()._canvas):l.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){G.prototype.moveToTop.call(this);var o=this.getStage();return o&&o.content&&(o.content.removeChild(this.getNativeCanvasElement()),o.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!G.prototype.moveUp.call(this))return!1;var l=this.getStage();return!(!l||!l.content||(l.content.removeChild(this.getNativeCanvasElement()),this.index<l.children.length-1?l.content.insertBefore(this.getNativeCanvasElement(),l.children[this.index+1].getCanvas()._canvas):l.content.appendChild(this.getNativeCanvasElement()),0))}moveDown(){if(G.prototype.moveDown.call(this)){var o=this.getStage();if(o){var l=o.children;o.content&&(o.content.removeChild(this.getNativeCanvasElement()),o.content.insertBefore(this.getNativeCanvasElement(),l[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(G.prototype.moveToBottom.call(this)){var o=this.getStage();if(o){var l=o.children;o.content&&(o.content.removeChild(this.getNativeCanvasElement()),o.content.insertBefore(this.getNativeCanvasElement(),l[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var o=this.getNativeCanvasElement();return G.prototype.remove.call(this),o&&o.parentNode&&R._isInDocument(o)&&o.parentNode.removeChild(o),this}getStage(){return this.parent}setSize({width:o,height:l}){return this.canvas.setSize(o,l),this.hitCanvas.setSize(o,l),this._setSmoothEnabled(),this}_validateAdd(o){var l=o.getType();"Group"!==l&&"Shape"!==l&&R.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(o){return(o=o||{}).width=o.width||this.getWidth(),o.height=o.height||this.getHeight(),o.x=void 0!==o.x?o.x:this.x(),o.y=void 0!==o.y?o.y:this.y(),G.prototype._toKonvaCanvas.call(this,o)}_checkVisibility(){this.canvas._canvas.style.display=this.visible()?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){R.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){R.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,R.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(o){if(!this.isListening()||!this.isVisible())return null;for(var l=1,c=!1;;){for(let h=0;h<Np;h++){const p=Oe[h],m=this._getIntersection({x:o.x+p.x*l,y:o.y+p.y*l}),v=m.shape;if(v)return v;if(c=!!m.antialiased,!m.antialiased)break}if(!c)return null;l+=1}}_getIntersection(o){const l=this.hitCanvas.pixelRatio,c=this.hitCanvas.context.getImageData(Math.round(o.x*l),Math.round(o.y*l),1,1).data,h=c[3];if(255===h){const p=R._rgbToHex(c[0],c[1],c[2]),m=mt["#"+p];return m?{shape:m}:{antialiased:!0}}return h>0?{antialiased:!0}:{}}drawScene(o,l){var c=this.getLayer(),h=o||c&&c.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&h.getContext().clear(),Ut.prototype.drawScene.call(this,h,l),this._fire("draw",{node:this}),this}drawHit(o,l){var c=this.getLayer(),h=o||c&&c.hitCanvas;return c&&c.clearBeforeDraw()&&c.getHitCanvas().getContext().clear(),Ut.prototype.drawHit.call(this,h,l),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(o){R.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(o)}getHitGraphEnabled(o){return R.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(this.parent&&this.parent.content){var o=this.parent;this.hitCanvas._canvas.parentNode?o.content.removeChild(this.hitCanvas._canvas):o.content.appendChild(this.hitCanvas._canvas)}}destroy(){return R.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}Hr.prototype.nodeType="Layer",xe(Hr),I.addGetterSetter(Hr,"imageSmoothingEnabled",!0),I.addGetterSetter(Hr,"clearBeforeDraw",!0),I.addGetterSetter(Hr,"hitGraphEnabled",!0,sn());class il extends Hr{constructor(o){super(o),this.listening(!1),R.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}il.prototype.nodeType="FastLayer",xe(il);class oe extends Ut{_validateAdd(o){var l=o.getType();"Group"!==l&&"Shape"!==l&&R.throw("You may only add groups and shapes to groups.")}}oe.prototype.nodeType="Group",xe(oe);var sl=zn.performance&&zn.performance.now?function(){return zn.performance.now()}:function(){return(new Date).getTime()};let zt=(()=>{class f{constructor(l,c){this.id=f.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:sl(),frameRate:0},this.func=l,this.setLayers(c)}setLayers(l){return this.layers=l?l.length>0?l:[l]:[],this}getLayers(){return this.layers}addLayer(l){var p,c=this.layers,h=c.length;for(p=0;p<h;p++)if(c[p]._id===l._id)return!1;return this.layers.push(l),!0}isRunning(){var p,c=f.animations,h=c.length;for(p=0;p<h;p++)if(c[p].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=sl(),f._addAnimation(this),this}stop(){return f._removeAnimation(this),this}_updateFrameObject(l){this.frame.timeDiff=l-this.frame.lastTime,this.frame.lastTime=l,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(l){this.animations.push(l),this._handleAnimation()}static _removeAnimation(l){var m,c=l.id,h=this.animations,p=h.length;for(m=0;m<p;m++)if(h[m].id===c){this.animations.splice(m,1);break}}static _runFrames(){var h,p,m,v,y,C,D,T,l={},c=this.animations;for(v=0;v<c.length;v++)if(p=(h=c[v]).layers,m=h.func,h._updateFrameObject(sl()),C=p.length,!m||!1!==m.call(h,h.frame))for(y=0;y<C;y++)void 0!==(D=p[y])._id&&(l[D._id]=D);for(T in l)!l.hasOwnProperty(T)||l[T].batchDraw()}static _animationLoop(){var l=f;l.animations.length?(l._runFrames(),R.requestAnimFrame(l._animationLoop)):l.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,R.requestAnimFrame(this._animationLoop))}}return f.animations=[],f.animIdCounter=0,f.animRunning=!1,f})();var Qi={node:1,duration:1,easing:1,onFinish:1,yoyo:1},wc=0,Co=["fill","stroke","shadowColor"];class Zi{constructor(o,l,c,h,p,m,v){this.prop=o,this.propFunc=l,this.begin=h,this._pos=h,this.duration=m,this._change=0,this.prevPos=0,this.yoyo=v,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=c,this._change=p-this.begin,this.pause()}fire(o){var l=this[o];l&&l()}setTime(o){o>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():o<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=o,this.update())}getTime(){return this._time}setPosition(o){this.prevPos=this._pos,this.propFunc(o),this._pos=o}getPosition(o){return void 0===o&&(o=this._time),this.func(o,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(o){this.pause(),this._time=o,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var o=this.getTimer()-this._startTime;2===this.state?this.setTime(o):3===this.state&&this.setTime(this.duration-o)}pause(){this.state=1,this.fire("onPause")}getTimer(){return(new Date).getTime()}}let Ji=(()=>{class f{constructor(l){var m,C,c=this,h=l.node,p=h._id,v=l.easing||jr.Linear,y=!!l.yoyo;m=typeof l.duration>"u"?.3:0===l.duration?.001:l.duration,this.node=h,this._id=wc++;var D=h.getLayer()||(h instanceof Z.Stage?h.getLayers():null);for(C in D||R.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new zt(function(){c.tween.onEnterFrame()},D),this.tween=new Zi(C,function(T){c._tweenFunc(T)},v,0,1,1e3*m,y),this._addListeners(),f.attrs[p]||(f.attrs[p]={}),f.attrs[p][this._id]||(f.attrs[p][this._id]={}),f.tweens[p]||(f.tweens[p]={}),l)void 0===Qi[C]&&this._addAttr(C,l[C]);this.reset(),this.onFinish=l.onFinish,this.onReset=l.onReset,this.onUpdate=l.onUpdate}_addAttr(l,c){var m,v,y,C,D,T,E,x,h=this.node,p=h._id;if((y=f.tweens[p][l])&&delete f.attrs[p][y][l],m=h.getAttr(l),R._isArray(c))if(v=[],D=Math.max(c.length,m.length),"points"===l&&c.length!==m.length&&(c.length>m.length?(E=m,m=R._prepareArrayForTween(m,c,h.closed())):(T=c,c=R._prepareArrayForTween(c,m,h.closed()))),0===l.indexOf("fill"))for(C=0;C<D;C++)if(C%2==0)v.push(c[C]-m[C]);else{var S=R.colorToRGBA(m[C]);x=R.colorToRGBA(c[C]),m[C]=S,v.push({r:x.r-S.r,g:x.g-S.g,b:x.b-S.b,a:x.a-S.a})}else for(C=0;C<D;C++)v.push(c[C]-m[C]);else-1!==Co.indexOf(l)?(m=R.colorToRGBA(m),v={r:(x=R.colorToRGBA(c)).r-m.r,g:x.g-m.g,b:x.b-m.b,a:x.a-m.a}):v=c-m;f.attrs[p][this._id][l]={start:m,diff:v,end:c,trueEnd:T,trueStart:E},f.tweens[p][l]=this._id}_tweenFunc(l){var p,m,v,y,C,D,T,E,c=this.node,h=f.attrs[c._id][this._id];for(p in h){if(y=(m=h[p]).diff,E=m.end,R._isArray(v=m.start))if(C=[],T=Math.max(v.length,E.length),0===p.indexOf("fill"))for(D=0;D<T;D++)C.push(D%2==0?(v[D]||0)+y[D]*l:"rgba("+Math.round(v[D].r+y[D].r*l)+","+Math.round(v[D].g+y[D].g*l)+","+Math.round(v[D].b+y[D].b*l)+","+(v[D].a+y[D].a*l)+")");else for(D=0;D<T;D++)C.push((v[D]||0)+y[D]*l);else C=-1!==Co.indexOf(p)?"rgba("+Math.round(v.r+y.r*l)+","+Math.round(v.g+y.g*l)+","+Math.round(v.b+y.b*l)+","+(v.a+y.a*l)+")":v+y*l;c.setAttr(p,C)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var l=this.node,c=f.attrs[l._id][this._id];c.points&&c.points.trueEnd&&l.setAttr("points",c.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var l=this.node,c=f.attrs[l._id][this._id];c.points&&c.points.trueStart&&l.points(c.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(l){return this.tween.seek(1e3*l),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var p,l=this.node._id,c=this._id,h=f.tweens[l];for(p in this.pause(),h)delete f.tweens[l][p];delete f.attrs[l][c]}}return f.attrs={},f.tweens={},f})();G.prototype.to=function(f){var o=f.onFinish;f.node=this,f.onFinish=function(){this.destroy(),o&&o()},new Ji(f).play()};const jr={BackEaseIn(f,o,l,c){var h=1.70158;return l*(f/=c)*f*((h+1)*f-h)+o},BackEaseOut(f,o,l,c){var h=1.70158;return l*((f=f/c-1)*f*((h+1)*f+h)+1)+o},BackEaseInOut(f,o,l,c){var h=1.70158;return(f/=c/2)<1?l/2*(f*f*((1+(h*=1.525))*f-h))+o:l/2*((f-=2)*f*((1+(h*=1.525))*f+h)+2)+o},ElasticEaseIn(f,o,l,c,h,p){var m=0;return 0===f?o:1==(f/=c)?o+l:(p||(p=.3*c),!h||h<Math.abs(l)?(h=l,m=p/4):m=p/(2*Math.PI)*Math.asin(l/h),-h*Math.pow(2,10*(f-=1))*Math.sin((f*c-m)*(2*Math.PI)/p)+o)},ElasticEaseOut(f,o,l,c,h,p){var m=0;return 0===f?o:1==(f/=c)?o+l:(p||(p=.3*c),!h||h<Math.abs(l)?(h=l,m=p/4):m=p/(2*Math.PI)*Math.asin(l/h),h*Math.pow(2,-10*f)*Math.sin((f*c-m)*(2*Math.PI)/p)+l+o)},ElasticEaseInOut(f,o,l,c,h,p){var m=0;return 0===f?o:2==(f/=c/2)?o+l:(p||(p=c*(.3*1.5)),!h||h<Math.abs(l)?(h=l,m=p/4):m=p/(2*Math.PI)*Math.asin(l/h),f<1?h*Math.pow(2,10*(f-=1))*Math.sin((f*c-m)*(2*Math.PI)/p)*-.5+o:h*Math.pow(2,-10*(f-=1))*Math.sin((f*c-m)*(2*Math.PI)/p)*.5+l+o)},BounceEaseOut:(f,o,l,c)=>(f/=c)<1/2.75?l*(7.5625*f*f)+o:f<2/2.75?l*(7.5625*(f-=1.5/2.75)*f+.75)+o:f<2.5/2.75?l*(7.5625*(f-=2.25/2.75)*f+.9375)+o:l*(7.5625*(f-=2.625/2.75)*f+.984375)+o,BounceEaseIn:(f,o,l,c)=>l-jr.BounceEaseOut(c-f,0,l,c)+o,BounceEaseInOut:(f,o,l,c)=>f<c/2?.5*jr.BounceEaseIn(2*f,0,l,c)+o:.5*jr.BounceEaseOut(2*f-c,0,l,c)+.5*l+o,EaseIn:(f,o,l,c)=>l*(f/=c)*f+o,EaseOut:(f,o,l,c)=>-l*(f/=c)*(f-2)+o,EaseInOut:(f,o,l,c)=>(f/=c/2)<1?l/2*f*f+o:-l/2*(--f*(f-2)-1)+o,StrongEaseIn:(f,o,l,c)=>l*(f/=c)*f*f*f*f+o,StrongEaseOut:(f,o,l,c)=>l*((f=f/c-1)*f*f*f*f+1)+o,StrongEaseInOut:(f,o,l,c)=>(f/=c/2)<1?l/2*f*f*f*f*f+o:l/2*((f-=2)*f*f*f*f+2)+o,Linear:(f,o,l,c)=>l*f/c+o},al=R._assign(Z,{Util:R,Transform:Nt,Node:G,Container:Ut,Stage:X,stages:yo,Layer:Hr,FastLayer:il,Group:oe,DD:Ne,Shape:j,shapes:mt,Animation:zt,Tween:Ji,Easings:jr,Context:lo,Canvas:di});class cn extends j{_sceneFunc(o){var l=Z.getAngle(this.angle()),c=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,l,c),o.arc(0,0,this.innerRadius(),l,0,!c),o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),l=this.outerRadius(),c=this.clockwise(),h=Z.getAngle(c?360-this.angle():this.angle()),p=Math.cos(Math.min(h,Math.PI)),v=Math.sin(Math.min(Math.max(Math.PI,h),3*Math.PI/2)),y=Math.sin(Math.min(h,Math.PI/2)),C=p*(p>0?o:l),T=v*(v>0?o:l),E=y*(y>0?l:o);return{x:C,y:c?-1*E:T,width:1*l-C,height:E-T}}}function wo(f,o,l,c,h,p,m){var v=Math.sqrt(Math.pow(l-f,2)+Math.pow(c-o,2)),y=Math.sqrt(Math.pow(h-l,2)+Math.pow(p-c,2)),C=m*v/(v+y),D=m*y/(v+y);return[l-C*(h-f),c-C*(p-o),l+D*(h-f),c+D*(p-o)]}function Wt(f,o){var h,p,l=f.length,c=[];for(h=2;h<l-2;h+=2)p=wo(f[h-2],f[h-1],f[h],f[h+1],f[h+2],f[h+3],o),!isNaN(p[0])&&(c.push(p[0]),c.push(p[1]),c.push(f[h]),c.push(f[h+1]),c.push(p[2]),c.push(p[3]));return c}cn.prototype._centroid=!0,cn.prototype.className="Arc",cn.prototype._attrsAffectingSize=["innerRadius","outerRadius"],xe(cn),I.addGetterSetter(cn,"innerRadius",0,$()),I.addGetterSetter(cn,"outerRadius",0,$()),I.addGetterSetter(cn,"angle",0,$()),I.addGetterSetter(cn,"clockwise",!1,sn());class Cn extends j{constructor(o){super(o),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(o){var v,y,C,l=this.points(),c=l.length,h=this.tension(),p=this.closed(),m=this.bezier();if(c){if(o.beginPath(),o.moveTo(l[0],l[1]),0!==h&&c>4){for(y=(v=this.getTensionPoints()).length,C=p?0:4,p||o.quadraticCurveTo(v[0],v[1],v[2],v[3]);C<y-2;)o.bezierCurveTo(v[C++],v[C++],v[C++],v[C++],v[C++],v[C++]);p||o.quadraticCurveTo(v[y-2],v[y-1],l[c-2],l[c-1])}else if(m)for(C=2;C<c;)o.bezierCurveTo(l[C++],l[C++],l[C++],l[C++],l[C++],l[C++]);else for(C=2;C<c;C+=2)o.lineTo(l[C],l[C+1]);p?(o.closePath(),o.fillStrokeShape(this)):o.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Wt(this.points(),this.tension())}_getTensionPointsClosed(){var o=this.points(),l=o.length,c=this.tension(),h=wo(o[l-2],o[l-1],o[0],o[1],o[2],o[3],c),p=wo(o[l-4],o[l-3],o[l-2],o[l-1],o[0],o[1],c),m=Wt(o,c);return[h[2],h[3]].concat(m).concat([p[0],p[1],o[l-2],o[l-1],p[2],p[3],h[0],h[1],o[0],o[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var o=this.points();if(o.length<4)return{x:o[0]||0,y:o[1]||0,width:0,height:0};for(var m,v,l=(o=0!==this.tension()?[o[0],o[1],...this._getTensionPoints(),o[o.length-2],o[o.length-1]]:this.points())[0],c=o[0],h=o[1],p=o[1],y=0;y<o.length/2;y++)m=o[2*y],v=o[2*y+1],l=Math.min(l,m),c=Math.max(c,m),h=Math.min(h,v),p=Math.max(p,v);return{x:l,y:h,width:c-l,height:p-h}}}Cn.prototype.className="Line",Cn.prototype._attrsAffectingSize=["points","bezier","tension"],xe(Cn),I.addGetterSetter(Cn,"closed",!1),I.addGetterSetter(Cn,"bezier",!1),I.addGetterSetter(Cn,"tension",0,$()),I.addGetterSetter(Cn,"points",[],function nt(){if(Z.isUnminified)return function(f,o){const l=Int8Array?Object.getPrototypeOf(Int8Array):null;return l&&f instanceof l||(R._isArray(f)?f.forEach(function(c){R._isNumber(c)||R.warn('"'+o+'" attribute has non numeric element '+c+". Make sure that all elements are numbers.")}):R.warn(Ot(f)+' is a not valid value for "'+o+'" attribute. The value should be a array of numbers.')),f}}());class Ve extends j{constructor(o){super(o),this.dataArray=[],this.pathLength=0,this.dataArray=Ve.parsePathData(this.data()),this.pathLength=0;for(var l=0;l<this.dataArray.length;++l)this.pathLength+=this.dataArray[l].pathLength;this.on("dataChange.konva",function(){this.dataArray=Ve.parsePathData(this.data()),this.pathLength=0;for(var c=0;c<this.dataArray.length;++c)this.pathLength+=this.dataArray[c].pathLength})}_sceneFunc(o){var l=this.dataArray;o.beginPath();for(var c=!1,h=0;h<l.length;h++){var m=l[h].points;switch(l[h].command){case"L":o.lineTo(m[0],m[1]);break;case"M":o.moveTo(m[0],m[1]);break;case"C":o.bezierCurveTo(m[0],m[1],m[2],m[3],m[4],m[5]);break;case"Q":o.quadraticCurveTo(m[0],m[1],m[2],m[3]);break;case"A":var v=m[0],y=m[1],C=m[2],D=m[3],T=m[4],E=m[5],x=m[6],S=m[7],O=C>D?C:D,k=C>D?1:C/D,N=C>D?D/C:1;o.translate(v,y),o.rotate(x),o.scale(k,N),o.arc(0,0,O,T,T+E,1-S),o.scale(1/k,1/N),o.rotate(-x),o.translate(-v,-y);break;case"z":c=!0,o.closePath()}}c||this.hasFill()?o.fillStrokeShape(this):o.strokeShape(this)}getSelfRect(){var o=[];this.dataArray.forEach(function(C){if("A"===C.command){var D=C.points[4],T=C.points[5],E=C.points[4]+T,x=Math.PI/180;if(Math.abs(D-E)<x&&(x=Math.abs(D-E)),T<0)for(let S=D-x;S>E;S-=x){const O=Ve.getPointOnEllipticalArc(C.points[0],C.points[1],C.points[2],C.points[3],S,0);o.push(O.x,O.y)}else for(let S=D+x;S<E;S+=x){const O=Ve.getPointOnEllipticalArc(C.points[0],C.points[1],C.points[2],C.points[3],S,0);o.push(O.x,O.y)}}else if("C"===C.command)for(let S=0;S<=1;S+=.01){const O=Ve.getPointOnCubicBezier(S,C.start.x,C.start.y,C.points[0],C.points[1],C.points[2],C.points[3],C.points[4],C.points[5]);o.push(O.x,O.y)}else o=o.concat(C.points)});for(var m,v,l=o[0],c=o[0],h=o[1],p=o[1],y=0;y<o.length/2;y++)m=o[2*y],v=o[2*y+1],isNaN(m)||(l=Math.min(l,m),c=Math.max(c,m)),isNaN(v)||(h=Math.min(h,v),p=Math.max(p,v));return{x:l,y:h,width:c-l,height:p-h}}getLength(){return this.pathLength}getPointAtLength(o){var l,c=0,h=this.dataArray.length;if(!h)return null;for(;c<h&&o>this.dataArray[c].pathLength;)o-=this.dataArray[c].pathLength,++c;if(c===h)return{x:(l=this.dataArray[c-1].points.slice(-2))[0],y:l[1]};if(o<.01)return{x:(l=this.dataArray[c].points.slice(0,2))[0],y:l[1]};var p=this.dataArray[c],m=p.points;switch(p.command){case"L":return Ve.getPointOnLine(o,p.start.x,p.start.y,m[0],m[1]);case"C":return Ve.getPointOnCubicBezier(o/p.pathLength,p.start.x,p.start.y,m[0],m[1],m[2],m[3],m[4],m[5]);case"Q":return Ve.getPointOnQuadraticBezier(o/p.pathLength,p.start.x,p.start.y,m[0],m[1],m[2],m[3]);case"A":var T=m[4];return Ve.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],T+=m[5]*o/p.pathLength,m[6])}return null}static getLineLength(o,l,c,h){return Math.sqrt((c-o)*(c-o)+(h-l)*(h-l))}static getPointOnLine(o,l,c,h,p,m,v){void 0===m&&(m=l),void 0===v&&(v=c);var y=(p-c)/(h-l+1e-8),C=Math.sqrt(o*o/(1+y*y));h<l&&(C*=-1);var T,D=y*C;if(h===l)T={x:m,y:v+D};else if((v-c)/(m-l+1e-8)===y)T={x:m+C,y:v+D};else{var E,x,S=this.getLineLength(l,c,h,p),O=(m-l)*(h-l)+(v-c)*(p-c),k=this.getLineLength(m,v,E=l+(O/=S*S)*(h-l),x=c+O*(p-c)),N=Math.sqrt(o*o-k*k);C=Math.sqrt(N*N/(1+y*y)),h<l&&(C*=-1),T={x:E+C,y:x+(D=y*C)}}return T}static getPointOnCubicBezier(o,l,c,h,p,m,v,y,C){function D(k){return k*k*k}function T(k){return 3*k*k*(1-k)}function E(k){return 3*k*(1-k)*(1-k)}function x(k){return(1-k)*(1-k)*(1-k)}return{x:y*D(o)+m*T(o)+h*E(o)+l*x(o),y:C*D(o)+v*T(o)+p*E(o)+c*x(o)}}static getPointOnQuadraticBezier(o,l,c,h,p,m,v){function y(x){return x*x}function C(x){return 2*x*(1-x)}function D(x){return(1-x)*(1-x)}return{x:m*y(o)+h*C(o)+l*D(o),y:v*y(o)+p*C(o)+c*D(o)}}static getPointOnEllipticalArc(o,l,c,h,p,m){var v=Math.cos(m),y=Math.sin(m),C_x=c*Math.cos(p),C_y=h*Math.sin(p);return{x:o+(C_x*v-C_y*y),y:l+(C_x*y+C_y*v)}}static parsePathData(o){if(!o)return[];var l=o,c=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];l=l.replace(new RegExp(" ","g"),",");for(var h=0;h<c.length;h++)l=l.replace(new RegExp(c[h],"g"),"|"+c[h]);var T,p=l.split("|"),m=[],v=[],y=0,C=0,D=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(h=1;h<p.length;h++){var E=p[h],x=E.charAt(0);for(E=E.slice(1),v.length=0;T=D.exec(E);)v.push(T[0]);for(var S=[],O=0,k=v.length;O<k;O++)if("00"!==v[O]){var N=parseFloat(v[O]);isNaN(N)?S.push(0):S.push(N)}else S.push(0,0);for(;S.length>0&&!isNaN(S[0]);){var K,re,J,se,P,z,De,ce,me,Rt,V=null,U=[],W=y,ee=C;switch(x){case"l":y+=S.shift(),C+=S.shift(),V="L",U.push(y,C);break;case"L":y=S.shift(),C=S.shift(),U.push(y,C);break;case"m":var Ie=S.shift(),He=S.shift();if(y+=Ie,C+=He,V="M",m.length>2&&"z"===m[m.length-1].command)for(var It=m.length-2;It>=0;It--)if("M"===m[It].command){y=m[It].points[0]+Ie,C=m[It].points[1]+He;break}U.push(y,C),x="l";break;case"M":y=S.shift(),C=S.shift(),V="M",U.push(y,C),x="L";break;case"h":y+=S.shift(),V="L",U.push(y,C);break;case"H":y=S.shift(),V="L",U.push(y,C);break;case"v":C+=S.shift(),V="L",U.push(y,C);break;case"V":C=S.shift(),V="L",U.push(y,C);break;case"C":U.push(S.shift(),S.shift(),S.shift(),S.shift()),y=S.shift(),C=S.shift(),U.push(y,C);break;case"c":U.push(y+S.shift(),C+S.shift(),y+S.shift(),C+S.shift()),y+=S.shift(),C+=S.shift(),V="C",U.push(y,C);break;case"S":re=y,J=C,"C"===(K=m[m.length-1]).command&&(re=y+(y-K.points[2]),J=C+(C-K.points[3])),U.push(re,J,S.shift(),S.shift()),y=S.shift(),C=S.shift(),V="C",U.push(y,C);break;case"s":re=y,J=C,"C"===(K=m[m.length-1]).command&&(re=y+(y-K.points[2]),J=C+(C-K.points[3])),U.push(re,J,y+S.shift(),C+S.shift()),y+=S.shift(),C+=S.shift(),V="C",U.push(y,C);break;case"Q":U.push(S.shift(),S.shift()),y=S.shift(),C=S.shift(),U.push(y,C);break;case"q":U.push(y+S.shift(),C+S.shift()),y+=S.shift(),C+=S.shift(),V="Q",U.push(y,C);break;case"T":re=y,J=C,"Q"===(K=m[m.length-1]).command&&(re=y+(y-K.points[0]),J=C+(C-K.points[1])),y=S.shift(),C=S.shift(),V="Q",U.push(re,J,y,C);break;case"t":re=y,J=C,"Q"===(K=m[m.length-1]).command&&(re=y+(y-K.points[0]),J=C+(C-K.points[1])),y+=S.shift(),C+=S.shift(),V="Q",U.push(re,J,y,C);break;case"A":se=S.shift(),P=S.shift(),z=S.shift(),De=S.shift(),ce=S.shift(),me=y,Rt=C,y=S.shift(),C=S.shift(),V="A",U=this.convertEndpointToCenterParameterization(me,Rt,y,C,De,ce,se,P,z);break;case"a":se=S.shift(),P=S.shift(),z=S.shift(),De=S.shift(),ce=S.shift(),me=y,Rt=C,y+=S.shift(),C+=S.shift(),V="A",U=this.convertEndpointToCenterParameterization(me,Rt,y,C,De,ce,se,P,z)}m.push({command:V||x,points:U,start:{x:W,y:ee},pathLength:this.calcLength(W,ee,V||x,U)})}("z"===x||"Z"===x)&&m.push({command:"z",points:[],start:void 0,pathLength:0})}return m}static calcLength(o,l,c,h){var p,m,v,y,C=Ve;switch(c){case"L":return C.getLineLength(o,l,h[0],h[1]);case"C":for(p=0,m=C.getPointOnCubicBezier(0,o,l,h[0],h[1],h[2],h[3],h[4],h[5]),y=.01;y<=1;y+=.01)v=C.getPointOnCubicBezier(y,o,l,h[0],h[1],h[2],h[3],h[4],h[5]),p+=C.getLineLength(m.x,m.y,v.x,v.y),m=v;return p;case"Q":for(p=0,m=C.getPointOnQuadraticBezier(0,o,l,h[0],h[1],h[2],h[3]),y=.01;y<=1;y+=.01)v=C.getPointOnQuadraticBezier(y,o,l,h[0],h[1],h[2],h[3]),p+=C.getLineLength(m.x,m.y,v.x,v.y),m=v;return p;case"A":p=0;var D=h[4],T=h[5],E=h[4]+T,x=Math.PI/180;if(Math.abs(D-E)<x&&(x=Math.abs(D-E)),m=C.getPointOnEllipticalArc(h[0],h[1],h[2],h[3],D,0),T<0)for(y=D-x;y>E;y-=x)v=C.getPointOnEllipticalArc(h[0],h[1],h[2],h[3],y,0),p+=C.getLineLength(m.x,m.y,v.x,v.y),m=v;else for(y=D+x;y<E;y+=x)v=C.getPointOnEllipticalArc(h[0],h[1],h[2],h[3],y,0),p+=C.getLineLength(m.x,m.y,v.x,v.y),m=v;return v=C.getPointOnEllipticalArc(h[0],h[1],h[2],h[3],E,0),p+C.getLineLength(m.x,m.y,v.x,v.y)}return 0}static convertEndpointToCenterParameterization(o,l,c,h,p,m,v,y,C){var D=C*(Math.PI/180),T=Math.cos(D)*(o-c)/2+Math.sin(D)*(l-h)/2,E=-1*Math.sin(D)*(o-c)/2+Math.cos(D)*(l-h)/2,x=T*T/(v*v)+E*E/(y*y);x>1&&(v*=Math.sqrt(x),y*=Math.sqrt(x));var S=Math.sqrt((v*v*(y*y)-v*v*(E*E)-y*y*(T*T))/(v*v*(E*E)+y*y*(T*T)));p===m&&(S*=-1),isNaN(S)&&(S=0);var O=S*v*E/y,k=S*-y*T/v,N=(o+c)/2+Math.cos(D)*O-Math.sin(D)*k,V=(l+h)/2+Math.sin(D)*O+Math.cos(D)*k,U=function(P){return Math.sqrt(P[0]*P[0]+P[1]*P[1])},W=function(P,z){return(P[0]*z[0]+P[1]*z[1])/(U(P)*U(z))},ee=function(P,z){return(P[0]*z[1]<P[1]*z[0]?-1:1)*Math.acos(W(P,z))},K=ee([1,0],[(T-O)/v,(E-k)/y]),re=[(T-O)/v,(E-k)/y],J=[(-1*T-O)/v,(-1*E-k)/y],se=ee(re,J);return W(re,J)<=-1&&(se=Math.PI),W(re,J)>=1&&(se=0),0===m&&se>0&&(se-=2*Math.PI),1===m&&se<0&&(se+=2*Math.PI),[N,V,v,y,K,se,D,m]}}Ve.prototype.className="Path",Ve.prototype._attrsAffectingSize=["data"],xe(Ve),I.addGetterSetter(Ve,"data");class Ft extends Cn{_sceneFunc(o){super._sceneFunc(o);var l=2*Math.PI,c=this.points(),h=c,p=0!==this.tension()&&c.length>4;p&&(h=this.getTensionPoints());var y,C,m=this.pointerLength(),v=c.length;if(p){const E=[h[h.length-4],h[h.length-3],h[h.length-2],h[h.length-1],c[v-2],c[v-1]],x=Ve.calcLength(h[h.length-4],h[h.length-3],"C",E),S=Ve.getPointOnQuadraticBezier(Math.min(1,1-m/x),E[0],E[1],E[2],E[3],E[4],E[5]);y=c[v-2]-S.x,C=c[v-1]-S.y}else y=c[v-2]-c[v-4],C=c[v-1]-c[v-3];var D=(Math.atan2(C,y)+l)%l,T=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(c[v-2],c[v-1]),o.rotate(D),o.moveTo(0,0),o.lineTo(-m,T/2),o.lineTo(-m,-T/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(c[0],c[1]),p?(y=(h[0]+h[2])/2-c[0],C=(h[1]+h[3])/2-c[1]):(y=c[2]-c[0],C=c[3]-c[1]),o.rotate((Math.atan2(-C,-y)+l)%l),o.moveTo(0,0),o.lineTo(-m,T/2),o.lineTo(-m,-T/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){var l=this.dashEnabled();l&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),l&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),l=this.pointerWidth()/2;return{x:o.x-l,y:o.y-l,width:o.width+2*l,height:o.height+2*l}}}Ft.prototype.className="Arrow",xe(Ft),I.addGetterSetter(Ft,"pointerLength",10,$()),I.addGetterSetter(Ft,"pointerWidth",10,$()),I.addGetterSetter(Ft,"pointerAtBeginning",!1),I.addGetterSetter(Ft,"pointerAtEnding",!0);class wt extends j{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(o){this.radius()!==o/2&&this.radius(o/2)}setHeight(o){this.radius()!==o/2&&this.radius(o/2)}}wt.prototype._centroid=!0,wt.prototype.className="Circle",wt.prototype._attrsAffectingSize=["radius"],xe(wt),I.addGetterSetter(wt,"radius",0,$());class cr extends j{_sceneFunc(o){var l=this.radiusX(),c=this.radiusY();o.beginPath(),o.save(),l!==c&&o.scale(1,c/l),o.arc(0,0,l,0,2*Math.PI,!1),o.restore(),o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(o){this.radiusX(o/2)}setHeight(o){this.radiusY(o/2)}}cr.prototype.className="Ellipse",cr.prototype._centroid=!0,cr.prototype._attrsAffectingSize=["radiusX","radiusY"],xe(cr),I.addComponentsGetterSetter(cr,"radius",["x","y"]),I.addGetterSetter(cr,"radiusX",0,$()),I.addGetterSetter(cr,"radiusY",0,$());class dn extends j{constructor(o){super(o),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&4===o.readyState||o&&o.addEventListener&&o.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(o){const l=this.getWidth(),c=this.getHeight(),h=this.cornerRadius(),p=this.attrs.image;let m;if(p){const v=this.attrs.cropWidth,y=this.attrs.cropHeight;m=v&&y?[p,this.cropX(),this.cropY(),v,y,0,0,l,c]:[p,0,0,l,c]}(this.hasFill()||this.hasStroke()||h)&&(o.beginPath(),h?R.drawRoundedRectPath(o,l,c,h):o.rect(0,0,l,c),o.closePath(),o.fillStrokeShape(this)),p&&(h&&o.clip(),o.drawImage.apply(o,m))}_hitFunc(o){var l=this.width(),c=this.height(),h=this.cornerRadius();o.beginPath(),h?R.drawRoundedRectPath(o,l,c,h):o.rect(0,0,l,c),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,l;return null!==(o=this.attrs.width)&&void 0!==o?o:null===(l=this.image())||void 0===l?void 0:l.width}getHeight(){var o,l;return null!==(o=this.attrs.height)&&void 0!==o?o:null===(l=this.image())||void 0===l?void 0:l.height}static fromURL(o,l,c=null){var h=R.createImageElement();h.onload=function(){var p=new dn({image:h});l(p)},h.onerror=c,h.crossOrigin="Anonymous",h.src=o}}dn.prototype.className="Image",xe(dn),I.addGetterSetter(dn,"cornerRadius",0,so(4)),I.addGetterSetter(dn,"image"),I.addComponentsGetterSetter(dn,"crop",["x","y","width","height"]),I.addGetterSetter(dn,"cropX",0,$()),I.addGetterSetter(dn,"cropY",0,$()),I.addGetterSetter(dn,"cropWidth",0,$()),I.addGetterSetter(dn,"cropHeight",0,$());var hn=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],Yn="right",Ae="down",Vr="left",Do=hn.length;class Ci extends oe{constructor(o){super(o),this.on("add.konva",function(l){this._addListeners(l.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(o){var c,l=this,h=function(){l._sync()};for(c=0;c<Do;c++)o.on(hn[c]+"Change.konva",h)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var c,h,p,m,v,y,C,o=this.getText(),l=this.getTag();if(o&&l){switch(c=o.width(),h=o.height(),p=l.pointerDirection(),m=l.pointerWidth(),C=l.pointerHeight(),v=0,y=0,p){case"up":v=c/2,y=-1*C;break;case Yn:v=c+m,y=h/2;break;case Ae:v=c/2,y=h+C;break;case Vr:v=-1*m,y=h/2}l.setAttrs({x:-1*v,y:-1*y,width:c,height:h}),o.setAttrs({x:-1*v,y:-1*y})}}}Ci.prototype.className="Label",xe(Ci);class Kn extends j{_sceneFunc(o){var l=this.width(),c=this.height(),h=this.pointerDirection(),p=this.pointerWidth(),m=this.pointerHeight(),v=this.cornerRadius();let y=0,C=0,D=0,T=0;"number"==typeof v?y=C=D=T=Math.min(v,l/2,c/2):(y=Math.min(v[0]||0,l/2,c/2),C=Math.min(v[1]||0,l/2,c/2),T=Math.min(v[2]||0,l/2,c/2),D=Math.min(v[3]||0,l/2,c/2)),o.beginPath(),o.moveTo(y,0),"up"===h&&(o.lineTo((l-p)/2,0),o.lineTo(l/2,-1*m),o.lineTo((l+p)/2,0)),o.lineTo(l-C,0),o.arc(l-C,C,C,3*Math.PI/2,0,!1),h===Yn&&(o.lineTo(l,(c-m)/2),o.lineTo(l+p,c/2),o.lineTo(l,(c+m)/2)),o.lineTo(l,c-T),o.arc(l-T,c-T,T,0,Math.PI/2,!1),h===Ae&&(o.lineTo((l+p)/2,c),o.lineTo(l/2,c+m),o.lineTo((l-p)/2,c)),o.lineTo(D,c),o.arc(D,c-D,D,Math.PI/2,Math.PI,!1),h===Vr&&(o.lineTo(0,(c+m)/2),o.lineTo(-1*p,c/2),o.lineTo(0,(c-m)/2)),o.lineTo(0,y),o.arc(y,y,y,Math.PI,3*Math.PI/2,!1),o.closePath(),o.fillStrokeShape(this)}getSelfRect(){var o=0,l=0,c=this.pointerWidth(),h=this.pointerHeight(),p=this.pointerDirection(),m=this.width(),v=this.height();return"up"===p?(l-=h,v+=h):p===Ae?v+=h:p===Vr?(o-=1.5*c,m+=c):p===Yn&&(m+=1.5*c),{x:o,y:l,width:m,height:v}}}Kn.prototype.className="Tag",xe(Kn),I.addGetterSetter(Kn,"pointerDirection","none"),I.addGetterSetter(Kn,"pointerWidth",0,$()),I.addGetterSetter(Kn,"pointerHeight",0,$()),I.addGetterSetter(Kn,"cornerRadius",0,so(4));class qt extends j{_sceneFunc(o){var l=this.cornerRadius(),c=this.width(),h=this.height();o.beginPath(),l?R.drawRoundedRectPath(o,c,h,l):o.rect(0,0,c,h),o.closePath(),o.fillStrokeShape(this)}}qt.prototype.className="Rect",xe(qt),I.addGetterSetter(qt,"cornerRadius",0,so(4));class fn extends j{_sceneFunc(o){const l=this._getPoints();o.beginPath(),o.moveTo(l[0].x,l[0].y);for(var c=1;c<l.length;c++)o.lineTo(l[c].x,l[c].y);o.closePath(),o.fillStrokeShape(this)}_getPoints(){const o=this.attrs.sides,l=this.attrs.radius||0,c=[];for(var h=0;h<o;h++)c.push({x:l*Math.sin(2*h*Math.PI/o),y:-1*l*Math.cos(2*h*Math.PI/o)});return c}getSelfRect(){const o=this._getPoints();var l=o[0].x,c=o[0].y,h=o[0].x,p=o[0].y;return o.forEach(m=>{l=Math.min(l,m.x),c=Math.max(c,m.x),h=Math.min(h,m.y),p=Math.max(p,m.y)}),{x:l,y:h,width:c-l,height:p-h}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}}fn.prototype.className="RegularPolygon",fn.prototype._centroid=!0,fn.prototype._attrsAffectingSize=["radius"],xe(fn),I.addGetterSetter(fn,"radius",0,$()),I.addGetterSetter(fn,"sides",0,$());var ul=2*Math.PI;class Yt extends j{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,ul,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),ul,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}}Yt.prototype.className="Ring",Yt.prototype._centroid=!0,Yt.prototype._attrsAffectingSize=["innerRadius","outerRadius"],xe(Yt),I.addGetterSetter(Yt,"innerRadius",0,$()),I.addGetterSetter(Yt,"outerRadius",0,$());class wn extends j{constructor(o){super(o),this._updated=!0,this.anim=new zt(()=>{var l=this._updated;return this._updated=!1,l}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){!this.anim.isRunning()||(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){var l=this.animation(),c=this.frameIndex(),h=4*c,p=this.animations()[l],m=this.frameOffsets(),v=p[h+0],y=p[h+1],C=p[h+2],D=p[h+3],T=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,C,D),o.closePath(),o.fillStrokeShape(this)),T)if(m){var E=m[l],x=2*c;o.drawImage(T,v,y,C,D,E[x+0],E[x+1],C,D)}else o.drawImage(T,v,y,C,D,0,0,C,D)}_hitFunc(o){var l=this.animation(),c=this.frameIndex(),h=4*c,p=this.animations()[l],m=this.frameOffsets(),v=p[h+2],y=p[h+3];if(o.beginPath(),m){var C=m[l],D=2*c;o.rect(C[D+0],C[D+1],v,y)}else o.rect(0,0,v,y);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var o=this.frameIndex(),l=this.animation(),c=this.animations();this.frameIndex(o<c[l].length/4-1?o+1:0)}}wn.prototype.className="Sprite",xe(wn),I.addGetterSetter(wn,"animation"),I.addGetterSetter(wn,"animations"),I.addGetterSetter(wn,"frameOffsets"),I.addGetterSetter(wn,"image"),I.addGetterSetter(wn,"frameIndex",0,$()),I.addGetterSetter(wn,"frameRate",17,$()),I.backCompat(wn,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Pn extends j{_sceneFunc(o){var l=this.innerRadius(),c=this.outerRadius(),h=this.numPoints();o.beginPath(),o.moveTo(0,0-c);for(var p=1;p<2*h;p++){var m=p%2==0?c:l,v=m*Math.sin(p*Math.PI/h),y=-1*m*Math.cos(p*Math.PI/h);o.lineTo(v,y)}o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}}function bo(f){return Array.from(f)}Pn.prototype.className="Star",Pn.prototype._centroid=!0,Pn.prototype._attrsAffectingSize=["innerRadius","outerRadius"],xe(Pn),I.addGetterSetter(Pn,"numPoints",5,$()),I.addGetterSetter(Pn,"innerRadius",0,$()),I.addGetterSetter(Pn,"outerRadius",0,$());var kn,Tt="auto",Ur="justify",Y="middle",Gr=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],ye=Gr.length;function wi(){return kn||(kn=R.createCanvasElement().getContext("2d"))}class Be extends j{constructor(o){super(function Di(f){return!(f=f||{}).fillLinearGradientColorStops&&!f.fillRadialGradientColorStops&&!f.fillPatternImage&&(f.fill=f.fill||"black"),f}(o)),this._partialTextX=0,this._partialTextY=0;for(var l=0;l<ye;l++)this.on(Gr[l]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(o){var l=this.textArr,c=l.length;if(this.text()){var k,h=this.padding(),p=this.fontSize(),m=this.lineHeight()*p,v=this.verticalAlign(),y=0,C=this.align(),D=this.getWidth(),T=this.letterSpacing(),E=this.fill(),x=this.textDecoration(),S=-1!==x.indexOf("underline"),O=-1!==x.indexOf("line-through"),N=0,V=(N=m/2,0),U=0;for(o.setAttr("font",this._getContextFont()),o.setAttr("textBaseline",Y),o.setAttr("textAlign","left"),v===Y?y=(this.getHeight()-c*m-2*h)/2:"bottom"===v&&(y=this.getHeight()-c*m-2*h),o.translate(h,y+h),k=0;k<c;k++){V=0,U=0;var J,se,P,W=l[k],ee=W.text,K=W.width,re=W.lastInParagraph;if(o.save(),"right"===C?V+=D-K-2*h:"center"===C&&(V+=(D-K-2*h)/2),S){o.save(),o.beginPath(),o.moveTo(V,N+U+Math.round(p/2)),se=0==(J=ee.split(" ").length-1),P=C!==Ur||re?K:D-2*h,o.lineTo(V+Math.round(P),N+U+Math.round(p/2)),o.lineWidth=p/15;const Ie=this._getLinearGradient();o.strokeStyle=Ie||E,o.stroke(),o.restore()}if(O){o.save(),o.beginPath(),o.moveTo(V,N+U),se=0==(J=ee.split(" ").length-1),P=C===Ur&&re&&!se?D-2*h:K,o.lineTo(V+Math.round(P),N+U),o.lineWidth=p/15;const Ie=this._getLinearGradient();o.strokeStyle=Ie||E,o.stroke(),o.restore()}if(0!==T||C===Ur){J=ee.split(" ").length-1;for(var z=bo(ee),De=0;De<z.length;De++){var ce=z[De];" "===ce&&!re&&C===Ur&&(V+=(D-2*h-K)/J),this._partialTextX=V,this._partialTextY=N+U,this._partialText=ce,o.fillStrokeShape(this),V+=this.measureSize(ce).width+T}}else this._partialTextX=V,this._partialTextY=N+U,this._partialText=ee,o.fillStrokeShape(this);o.restore(),c>1&&(N+=m)}}}_hitFunc(o){var l=this.getWidth(),c=this.getHeight();o.beginPath(),o.rect(0,0,l,c),o.closePath(),o.fillStrokeShape(this)}setText(o){var l=R._isString(o)?o:null==o?"":o+"";return this._setAttr("text",l),this}getWidth(){return this.attrs.width===Tt||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===Tt||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return R.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(o){var h,l=wi(),c=this.fontSize();return l.save(),l.font=this._getContextFont(),h=l.measureText(o),l.restore(),{width:h.width,height:c}}_getContextFont(){return this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+function es(f){return f.split(",").map(o=>{const l=(o=o.trim()).indexOf(" ")>=0,c=o.indexOf('"')>=0||o.indexOf("'")>=0;return l&&!c&&(o=`"${o}"`),o}).join(", ")}(this.fontFamily())}_addTextLine(o){this.align()===Ur&&(o=o.trim());var c=this._getTextWidth(o);return this.textArr.push({text:o,width:c,lastInParagraph:!1})}_getTextWidth(o){var l=this.letterSpacing(),c=o.length;return wi().measureText(o).width+(c?l*(c-1):0)}_setTextData(){var o=this.text().split("\n"),l=+this.fontSize(),c=0,h=this.lineHeight()*l,p=this.attrs.width,m=this.attrs.height,v=p!==Tt&&void 0!==p,y=m!==Tt&&void 0!==m,C=this.padding(),D=p-2*C,T=m-2*C,E=0,x=this.wrap(),O="char"!==x&&"none"!==x,k=this.ellipsis();this.textArr=[],wi().font=this._getContextFont();for(var N=k?this._getTextWidth("\u2026"):0,V=0,U=o.length;V<U;++V){var W=o[V],ee=this._getTextWidth(W);if(v&&ee>D)for(;W.length>0;){for(var K=0,re=W.length,J="",se=0;K<re;){var P=K+re>>>1,z=W.slice(0,P+1),De=this._getTextWidth(z)+N;De<=D?(K=P+1,J=z,se=De):re=P}if(!J)break;if(O){var ce,me=W[J.length];(ce=(" "===me||"-"===me)&&se<=D?J.length:Math.max(J.lastIndexOf(" "),J.lastIndexOf("-"))+1)>0&&(J=J.slice(0,K=ce),se=this._getTextWidth(J))}if(J=J.trimRight(),this._addTextLine(J),c=Math.max(c,se),this._shouldHandleEllipsis(E+=h)){this._tryToAddEllipsisToLastLine();break}if((W=(W=W.slice(K)).trimLeft()).length>0&&(ee=this._getTextWidth(W))<=D){this._addTextLine(W),E+=h,c=Math.max(c,ee);break}}else this._addTextLine(W),E+=h,c=Math.max(c,ee),this._shouldHandleEllipsis(E)&&V<U-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),y&&E+h>T)break}this.textHeight=l,this.textWidth=c}_shouldHandleEllipsis(o){var l=+this.fontSize(),c=this.lineHeight()*l,h=this.attrs.height,p=h!==Tt&&void 0!==h,v=h-2*this.padding();return!("none"!==this.wrap())||p&&o+c>v}_tryToAddEllipsisToLastLine(){var o=this.attrs.width,l=o!==Tt&&void 0!==o,h=o-2*this.padding(),p=this.ellipsis(),m=this.textArr[this.textArr.length-1];m&&p&&(l&&(this._getTextWidth(m.text+"\u2026")<h||(m.text=m.text.slice(0,m.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(m.text+"\u2026"))}getStrokeScaleEnabled(){return!0}}function So(f){f.fillText(this.partialText,0,0)}function Ue(f){f.strokeText(this.partialText,0,0)}Be.prototype._fillFunc=function pr(f){f.fillText(this._partialText,this._partialTextX,this._partialTextY)},Be.prototype._strokeFunc=function Et(f){f.strokeText(this._partialText,this._partialTextX,this._partialTextY)},Be.prototype.className="Text",Be.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],xe(Be),I.overWriteSetter(Be,"width",ai()),I.overWriteSetter(Be,"height",ai()),I.addGetterSetter(Be,"fontFamily","Arial"),I.addGetterSetter(Be,"fontSize",12,$()),I.addGetterSetter(Be,"fontStyle","normal"),I.addGetterSetter(Be,"fontVariant","normal"),I.addGetterSetter(Be,"padding",0,$()),I.addGetterSetter(Be,"align","left"),I.addGetterSetter(Be,"verticalAlign","top"),I.addGetterSetter(Be,"lineHeight",1,$()),I.addGetterSetter(Be,"wrap","word"),I.addGetterSetter(Be,"ellipsis",!1,sn()),I.addGetterSetter(Be,"letterSpacing",0,$()),I.addGetterSetter(Be,"text","",rn()),I.addGetterSetter(Be,"textDecoration","");class st extends j{constructor(o){super(o),this.dummyCanvas=R.createCanvasElement(),this.dataArray=[],this.dataArray=Ve.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=Ve.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(o){o.setAttr("font",this._getContextFont()),o.setAttr("textBaseline",this.textBaseline()),o.setAttr("textAlign","left"),o.save();var l=this.textDecoration(),c=this.fill(),h=this.fontSize(),p=this.glyphInfo;"underline"===l&&o.beginPath();for(var m=0;m<p.length;m++){o.save();var v=p[m].p0;o.translate(v.x,v.y),o.rotate(p[m].rotation),this.partialText=p[m].text,o.fillStrokeShape(this),"underline"===l&&(0===m&&o.moveTo(0,h/2+1),o.lineTo(h,h/2+1)),o.restore()}"underline"===l&&(o.strokeStyle=c,o.lineWidth=h/20,o.stroke()),o.restore()}_hitFunc(o){o.beginPath();var l=this.glyphInfo;if(l.length>=1){var c=l[0].p0;o.moveTo(c.x,c.y)}for(var h=0;h<l.length;h++){var p=l[h].p1;o.lineTo(p.x,p.y)}o.setAttr("lineWidth",this.fontSize()),o.setAttr("strokeStyle",this.colorKey),o.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return R.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(o){return Be.prototype.setText.call(this,o)}_getContextFont(){return Be.prototype._getContextFont.call(this)}_getTextSize(o){var c=this.dummyCanvas.getContext("2d");c.save(),c.font=this._getContextFont();var h=c.measureText(o);return c.restore(),{width:h.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var o=this,l=this._getTextSize(this.attrs.text),c=this.letterSpacing(),h=this.align(),p=this.kerningFunc();this.textWidth=l.width,this.textHeight=l.height;var m=Math.max(this.textWidth+((this.attrs.text||"").length-1)*c,0);this.glyphInfo=[];for(var v=0,y=0;y<o.dataArray.length;y++)o.dataArray[y].pathLength>0&&(v+=o.dataArray[y].pathLength);var C=0;"center"===h&&(C=Math.max(0,v/2-m/2)),"right"===h&&(C=Math.max(0,v-m));for(var E,x,S,D=bo(this.text()),T=this.text().split(" ").length-1,O=-1,k=0,N=function(){k=0;for(var De=o.dataArray,ce=O+1;ce<De.length;ce++){if(De[ce].pathLength>0)return O=ce,De[ce];"M"===De[ce].command&&(E={x:De[ce].points[0],y:De[ce].points[1]})}return{}},V=function(De){var ce=o._getTextSize(De).width+c;" "===De&&"justify"===h&&(ce+=(v-m)/T);var me=0,Rt=0;for(x=void 0;Math.abs(ce-me)/ce>.01&&Rt<20;){Rt++;for(var Ie=me;void 0===S;)(S=N())&&Ie+S.pathLength<ce&&(Ie+=S.pathLength,S=void 0);if(0===Object.keys(S).length||void 0===E)return;var He=!1;switch(S.command){case"L":Ve.getLineLength(E.x,E.y,S.points[0],S.points[1])>ce?x=Ve.getPointOnLine(ce,E.x,E.y,S.points[0],S.points[1],E.x,E.y):S=void 0;break;case"A":var Xt=S.points[5],Re=S.points[4]+Xt;0===k?k=S.points[4]+1e-8:ce>me?k+=Math.PI/180*Xt/Math.abs(Xt):k-=Math.PI/360*Xt/Math.abs(Xt),(Xt<0&&k<Re||Xt>=0&&k>Re)&&(k=Re,He=!0),x=Ve.getPointOnEllipticalArc(S.points[0],S.points[1],S.points[2],S.points[3],k,S.points[6]);break;case"C":0===k?k=ce>S.pathLength?1e-8:ce/S.pathLength:ce>me?k+=(ce-me)/S.pathLength/2:k=Math.max(k-(me-ce)/S.pathLength/2,0),k>1&&(k=1,He=!0),x=Ve.getPointOnCubicBezier(k,S.start.x,S.start.y,S.points[0],S.points[1],S.points[2],S.points[3],S.points[4],S.points[5]);break;case"Q":0===k?k=ce/S.pathLength:ce>me?k+=(ce-me)/S.pathLength:k-=(me-ce)/S.pathLength,k>1&&(k=1,He=!0),x=Ve.getPointOnQuadraticBezier(k,S.start.x,S.start.y,S.points[0],S.points[1],S.points[2],S.points[3])}void 0!==x&&(me=Ve.getLineLength(E.x,E.y,x.x,x.y)),He&&(He=!1,S=void 0)}},ee=C/(o._getTextSize("C").width+c)-1,K=0;K<ee&&(V("C"),void 0!==E&&void 0!==x);K++)E=x;for(var re=0;re<D.length&&(V(D[re]),void 0!==E&&void 0!==x);re++){var J=Ve.getLineLength(E.x,E.y,x.x,x.y),se=0;if(p)try{se=p(D[re-1],D[re])*this.fontSize()}catch{se=0}E.x+=se,x.x+=se,this.textWidth+=se;var P=Ve.getPointOnLine(se+J/2,E.x,E.y,x.x,x.y),z=Math.atan2(x.y-E.y,x.x-E.x);this.glyphInfo.push({transposeX:P.x,transposeY:P.y,text:D[re],rotation:z,p0:E,p1:x}),E=x}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var o=[];this.glyphInfo.forEach(function(D){o.push(D.p0.x),o.push(D.p0.y),o.push(D.p1.x),o.push(D.p1.y)});for(var m,v,l=o[0]||0,c=o[0]||0,h=o[1]||0,p=o[1]||0,y=0;y<o.length/2;y++)m=o[2*y],v=o[2*y+1],l=Math.min(l,m),c=Math.max(c,m),h=Math.min(h,v),p=Math.max(p,v);var C=this.fontSize();return{x:l-C/2,y:h-C/2,width:c-l+C,height:p-h+C}}destroy(){return R.releaseCanvas(this.dummyCanvas),super.destroy()}}st.prototype._fillFunc=So,st.prototype._strokeFunc=Ue,st.prototype._fillFuncHit=So,st.prototype._strokeFuncHit=Ue,st.prototype.className="TextPath",st.prototype._attrsAffectingSize=["text","fontSize","data"],xe(st),I.addGetterSetter(st,"data"),I.addGetterSetter(st,"fontFamily","Arial"),I.addGetterSetter(st,"fontSize",12,$()),I.addGetterSetter(st,"fontStyle","normal"),I.addGetterSetter(st,"align","left"),I.addGetterSetter(st,"letterSpacing",0,$()),I.addGetterSetter(st,"textBaseline","middle"),I.addGetterSetter(st,"fontVariant","normal"),I.addGetterSetter(st,"text",""),I.addGetterSetter(st,"textDecoration",null),I.addGetterSetter(st,"kerningFunc",null);var cl="tr-konva",ts=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(f=>f+`.${cl}`).join(" "),ns="nodesRect",bi=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],rs={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const mr="ontouchstart"in Z._global;var is=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],At=1e8;function ss(f,o,l){const c=l.x+(f.x-l.x)*Math.cos(o)-(f.y-l.y)*Math.sin(o),h=l.y+(f.x-l.x)*Math.sin(o)+(f.y-l.y)*Math.cos(o);return Object.assign(Object.assign({},f),{rotation:f.rotation+o,x:c,y:h})}class _e extends oe{constructor(o){super(o),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(ts,this.update),this.getNode()&&this.update()}attachTo(o){return this.setNode(o),this}setNode(o){return R.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([o])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return cl+this._id}setNodes(o=[]){return this._nodes&&this._nodes.length&&this.detach(),this._nodes=o,1===o.length&&this.useSingleNodeRotation()?this.rotation(o[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(c=>{const h=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},p=c._attrsAffectingSize.map(m=>m+"Change."+this._getEventNamespace()).join(" ");c.on(p,h),c.on(bi.map(m=>m+`.${this._getEventNamespace()}`).join(" "),h),c.on(`absoluteTransformChange.${this._getEventNamespace()}`,h),this._proxyDrag(c)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(o){let l;o.on(`dragstart.${this._getEventNamespace()}`,c=>{l=o.getAbsolutePosition(),!this.isDragging()&&o!==this.findOne(".back")&&this.startDrag(c,!1)}),o.on(`dragmove.${this._getEventNamespace()}`,c=>{if(!l)return;const h=o.getAbsolutePosition(),p=h.x-l.x,m=h.y-l.y;this.nodes().forEach(v=>{if(v===o||v.isDragging())return;const y=v.getAbsolutePosition();v.setAbsolutePosition({x:y.x+p,y:y.y+m}),v.startDrag(c)}),l=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(o=>{o.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(ns),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(ns,this.__getNodeRect)}__getNodeShape(o,l=this.rotation(),c){var h=o.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),p=o.getAbsoluteScale(c),m=o.getAbsolutePosition(c),v=h.x*p.x-o.offsetX()*p.x,y=h.y*p.y-o.offsetY()*p.y;const C=(Z.getAngle(o.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return ss({x:m.x+v*Math.cos(C)+y*Math.sin(-C),y:m.y+y*Math.cos(C)+v*Math.sin(C),width:h.width*p.x,height:h.height*p.y,rotation:C},-Z.getAngle(l),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-At,y:-At,width:0,height:0,rotation:0};const l=[];this.nodes().map(C=>{const D=C.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var T=[{x:D.x,y:D.y},{x:D.x+D.width,y:D.y},{x:D.x+D.width,y:D.y+D.height},{x:D.x,y:D.y+D.height}],E=C.getAbsoluteTransform();T.forEach(function(x){var S=E.point(x);l.push(S)})});const c=new Nt;var h,p,m,v;c.rotate(-Z.getAngle(this.rotation())),l.forEach(function(C){var D=c.point(C);void 0===h&&(h=m=D.x,p=v=D.y),h=Math.min(h,D.x),p=Math.min(p,D.y),m=Math.max(m,D.x),v=Math.max(v,D.y)}),c.invert();const y=c.point({x:h,y:p});return{x:y.x,y:y.y,width:m-h,height:v-p,rotation:Z.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),is.forEach(function(o){this._createAnchor(o)}.bind(this)),this._createAnchor("rotater")}_createAnchor(o){var l=new qt({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:o+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:mr?10:"auto"}),c=this;l.on("mousedown touchstart",function(h){c._handleMouseDown(h)}),l.on("dragstart",h=>{l.stopDrag(),h.cancelBubble=!0}),l.on("dragend",h=>{h.cancelBubble=!0}),l.on("mouseenter",()=>{var h=Z.getAngle(this.rotation()),p=function Mt(f,o){if("rotater"===f)return"crosshair";o+=R.degToRad(rs[f]||0);var l=(R.radToDeg(o)%360+360)%360;return R._inRange(l,337.5,360)||R._inRange(l,0,22.5)?"ns-resize":R._inRange(l,22.5,67.5)?"nesw-resize":R._inRange(l,67.5,112.5)?"ew-resize":R._inRange(l,112.5,157.5)?"nwse-resize":R._inRange(l,157.5,202.5)?"ns-resize":R._inRange(l,202.5,247.5)?"nesw-resize":R._inRange(l,247.5,292.5)?"ew-resize":R._inRange(l,292.5,337.5)?"nwse-resize":(R.error("Transformer has unknown angle for cursor detection: "+l),"pointer")}(o,h);l.getStage().content&&(l.getStage().content.style.cursor=p),this._cursorChange=!0}),l.on("mouseout",()=>{l.getStage().content&&(l.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(l)}_createBack(){var o=new j({name:"back",width:0,height:0,draggable:!0,sceneFunc(l){var c=this.getParent(),h=c.padding();l.beginPath(),l.rect(-h,-h,this.width()+2*h,this.height()+2*h),l.moveTo(this.width()/2,-h),c.rotateEnabled()&&l.lineTo(this.width()/2,-c.rotateAnchorOffset()*R._sign(this.height())-h),l.fillStrokeShape(this)},hitFunc:(l,c)=>{if(this.shouldOverdrawWholeArea()){var h=this.padding();l.beginPath(),l.rect(-h,-h,c.width()+2*h,c.height()+2*h),l.fillStrokeShape(c)}}});this.add(o),this._proxyDrag(o),o.on("dragstart",l=>{l.cancelBubble=!0}),o.on("dragmove",l=>{l.cancelBubble=!0}),o.on("dragend",l=>{l.cancelBubble=!0}),this.on("dragmove",l=>{this.update()})}_handleMouseDown(o){this._movingAnchorName=o.target.name().split(" ")[0];var l=this._getNodeRect(),c=l.width,h=l.height,p=Math.sqrt(Math.pow(c,2)+Math.pow(h,2));this.sin=Math.abs(h/p),this.cos=Math.abs(c/p),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var m=o.target.getAbsolutePosition(),v=o.target.getStage().getPointerPosition();this._anchorDragOffset={x:v.x-m.x,y:v.y-m.y},this._fire("transformstart",{evt:o.evt,target:this.getNode()}),this._nodes.forEach(y=>{y._fire("transformstart",{evt:o.evt,target:y})})}_handleMouseMove(o){var l,c,h,p=this.findOne("."+this._movingAnchorName),m=p.getStage();m.setPointersPositions(o);const v=m.getPointerPosition();let y={x:v.x-this._anchorDragOffset.x,y:v.y-this._anchorDragOffset.y};const C=p.getAbsolutePosition();this.anchorDragBoundFunc()&&(y=this.anchorDragBoundFunc()(C,y,o)),p.setAbsolutePosition(y);const D=p.getAbsolutePosition();if(C.x!==D.x||C.y!==D.y){if("rotater"===this._movingAnchorName){var T=this._getNodeRect();l=p.x()-T.width/2,c=-p.y()+T.height/2;let De=Math.atan2(-c,l)+Math.PI/2;T.height<0&&(De-=Math.PI);const ce=Z.getAngle(this.rotation())+De,me=Z.getAngle(this.rotationSnapTolerance()),Ie=function as(f,o,l){let c=o;for(let h=0;h<f.length;h++){const p=Z.getAngle(f[h]),m=Math.abs(p-o)%(2*Math.PI);Math.min(m,2*Math.PI-m)<l&&(c=p)}return c}(this.rotationSnaps(),ce,me)-T.rotation,He=function os(f,o){const l=function gn(f){return{x:f.x+f.width/2*Math.cos(f.rotation)+f.height/2*Math.sin(-f.rotation),y:f.y+f.height/2*Math.cos(f.rotation)+f.width/2*Math.sin(f.rotation)}}(f);return ss(f,o,l)}(T,Ie);return void this._fitNodesInto(He,o)}var x=this.keepRatio()||o.shiftKey,V=this.centeredScaling()||o.altKey;if("top-left"===this._movingAnchorName){if(x){var S=V?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};h=Math.sqrt(Math.pow(S.x-p.x(),2)+Math.pow(S.y-p.y(),2));var O=this.findOne(".top-left").x()>S.x?-1:1,k=this.findOne(".top-left").y()>S.y?-1:1;l=h*this.cos*O,c=h*this.sin*k,this.findOne(".top-left").x(S.x-l),this.findOne(".top-left").y(S.y-c)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(p.y());else if("top-right"===this._movingAnchorName){x&&(S=V?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()},h=Math.sqrt(Math.pow(p.x()-S.x,2)+Math.pow(S.y-p.y(),2)),O=this.findOne(".top-right").x()<S.x?-1:1,k=this.findOne(".top-right").y()>S.y?-1:1,l=h*this.cos*O,c=h*this.sin*k,this.findOne(".top-right").x(S.x+l),this.findOne(".top-right").y(S.y-c));var N=p.position();this.findOne(".top-left").y(N.y),this.findOne(".bottom-right").x(N.x)}else"middle-left"===this._movingAnchorName?this.findOne(".top-left").x(p.x()):"middle-right"===this._movingAnchorName?this.findOne(".bottom-right").x(p.x()):"bottom-left"===this._movingAnchorName?(x&&(S=V?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()},h=Math.sqrt(Math.pow(S.x-p.x(),2)+Math.pow(p.y()-S.y,2)),O=S.x<p.x()?-1:1,k=p.y()<S.y?-1:1,c=h*this.sin*k,p.x(S.x-(l=h*this.cos*O)),p.y(S.y+c)),N=p.position(),this.findOne(".top-left").x(N.x),this.findOne(".bottom-right").y(N.y)):"bottom-center"===this._movingAnchorName?this.findOne(".bottom-right").y(p.y()):"bottom-right"===this._movingAnchorName?x&&(S=V?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()},h=Math.sqrt(Math.pow(p.x()-S.x,2)+Math.pow(p.y()-S.y,2)),O=this.findOne(".bottom-right").x()<S.x?-1:1,k=this.findOne(".bottom-right").y()<S.y?-1:1,l=h*this.cos*O,c=h*this.sin*k,this.findOne(".bottom-right").x(S.x+l),this.findOne(".bottom-right").y(S.y+c)):console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(V=this.centeredScaling()||o.altKey){var U=this.findOne(".top-left"),W=this.findOne(".bottom-right"),ee=U.x(),K=U.y(),re=this.getWidth()-W.x(),J=this.getHeight()-W.y();W.move({x:-ee,y:-K}),U.move({x:re,y:J})}var se=this.findOne(".top-left").getAbsolutePosition();l=se.x,c=se.y;var P=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),z=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:l,y:c,width:P,height:z,rotation:Z.getAngle(this.rotation())},o)}}_handleMouseUp(o){this._removeEvents(o)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(o){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var l=this.getNode();this._fire("transformend",{evt:o,target:l}),l&&this._nodes.forEach(c=>{c._fire("transformend",{evt:o,target:c})}),this._movingAnchorName=null}}_fitNodesInto(o,l){var c=this._getNodeRect();if(R._inRange(o.width,2*-this.padding()-1,1))return void this.update();if(R._inRange(o.height,2*-this.padding()-1,1))return void this.update();const p=this.flipEnabled();var m=new Nt;if(m.rotate(Z.getAngle(this.rotation())),this._movingAnchorName&&o.width<0&&this._movingAnchorName.indexOf("left")>=0){const T=m.point({x:2*-this.padding(),y:0});if(o.x+=T.x,o.y+=T.y,o.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=T.x,this._anchorDragOffset.y-=T.y,!p)return void this.update()}else if(this._movingAnchorName&&o.width<0&&this._movingAnchorName.indexOf("right")>=0){const T=m.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=T.x,this._anchorDragOffset.y-=T.y,o.width+=2*this.padding(),!p)return void this.update()}if(this._movingAnchorName&&o.height<0&&this._movingAnchorName.indexOf("top")>=0){const T=m.point({x:0,y:2*-this.padding()});if(o.x+=T.x,o.y+=T.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=T.x,this._anchorDragOffset.y-=T.y,o.height+=2*this.padding(),!p)return void this.update()}else if(this._movingAnchorName&&o.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const T=m.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=T.x,this._anchorDragOffset.y-=T.y,o.height+=2*this.padding(),!p)return void this.update()}if(this.boundBoxFunc()){const T=this.boundBoxFunc()(c,o);T?o=T:R.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const v=1e7,y=new Nt;y.translate(c.x,c.y),y.rotate(c.rotation),y.scale(c.width/v,c.height/v);const C=new Nt;C.translate(o.x,o.y),C.rotate(o.rotation),C.scale(o.width/v,o.height/v);const D=C.multiply(y.invert());this._nodes.forEach(T=>{var E;const x=T.getParent().getAbsoluteTransform(),S=T.getTransform().copy();S.translate(T.offsetX(),T.offsetY());const O=new Nt;O.multiply(x.copy().invert()).multiply(D).multiply(x).multiply(S);const k=O.decompose();T.setAttrs(k),this._fire("transform",{evt:l,target:T}),T._fire("transform",{evt:l,target:T}),null===(E=T.getLayer())||void 0===E||E.batchDraw()}),this.rotation(R._getRotation(o.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(o,l){this.findOne(o).setAttrs(l)}update(){var o,l=this._getNodeRect();this.rotation(R._getRotation(l.rotation));var c=l.width,h=l.height,p=this.enabledAnchors(),m=this.resizeEnabled(),v=this.padding(),y=this.anchorSize();this.find("._anchor").forEach(C=>{C.setAttrs({width:y,height:y,offsetX:y/2,offsetY:y/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:y/2+v,offsetY:y/2+v,visible:m&&p.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:c/2,y:0,offsetY:y/2+v,visible:m&&p.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:c,y:0,offsetX:y/2-v,offsetY:y/2+v,visible:m&&p.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:h/2,offsetX:y/2+v,visible:m&&p.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:c,y:h/2,offsetX:y/2-v,visible:m&&p.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:h,offsetX:y/2+v,offsetY:y/2-v,visible:m&&p.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:c/2,y:h,offsetY:y/2-v,visible:m&&p.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:c,y:h,offsetX:y/2-v,offsetY:y/2-v,visible:m&&p.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:c/2,y:-this.rotateAnchorOffset()*R._sign(h)-v,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:c,height:h,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),null===(o=this.getLayer())||void 0===o||o.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var o=this.findOne("."+this._movingAnchorName);o&&o.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),oe.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return G.prototype.toObject.call(this)}clone(o){return G.prototype.clone.call(this,o)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}_e.prototype.className="Transformer",xe(_e),I.addGetterSetter(_e,"enabledAnchors",is,function bc(f){return f instanceof Array||R.warn("enabledAnchors value should be an array"),f instanceof Array&&f.forEach(function(o){-1===is.indexOf(o)&&R.warn("Unknown anchor name: "+o+". Available names are: "+is.join(", "))}),f||[]}),I.addGetterSetter(_e,"flipEnabled",!0,sn()),I.addGetterSetter(_e,"resizeEnabled",!0),I.addGetterSetter(_e,"anchorSize",10,$()),I.addGetterSetter(_e,"rotateEnabled",!0),I.addGetterSetter(_e,"rotationSnaps",[]),I.addGetterSetter(_e,"rotateAnchorOffset",50,$()),I.addGetterSetter(_e,"rotationSnapTolerance",5,$()),I.addGetterSetter(_e,"borderEnabled",!0),I.addGetterSetter(_e,"anchorStroke","rgb(0, 161, 255)"),I.addGetterSetter(_e,"anchorStrokeWidth",1,$()),I.addGetterSetter(_e,"anchorFill","white"),I.addGetterSetter(_e,"anchorCornerRadius",0,$()),I.addGetterSetter(_e,"borderStroke","rgb(0, 161, 255)"),I.addGetterSetter(_e,"borderStrokeWidth",1,$()),I.addGetterSetter(_e,"borderDash"),I.addGetterSetter(_e,"keepRatio",!0),I.addGetterSetter(_e,"centeredScaling",!1),I.addGetterSetter(_e,"ignoreStroke",!1),I.addGetterSetter(_e,"padding",0,$()),I.addGetterSetter(_e,"node"),I.addGetterSetter(_e,"nodes"),I.addGetterSetter(_e,"boundBoxFunc"),I.addGetterSetter(_e,"anchorDragBoundFunc"),I.addGetterSetter(_e,"shouldOverdrawWholeArea",!1),I.addGetterSetter(_e,"useSingleNodeRotation",!0),I.backCompat(_e,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Xn extends j{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,Z.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}}function dl(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}Xn.prototype.className="Wedge",Xn.prototype._centroid=!0,Xn.prototype._attrsAffectingSize=["radius"],xe(Xn),I.addGetterSetter(Xn,"radius",0,$()),I.addGetterSetter(Xn,"angle",0,$()),I.addGetterSetter(Xn,"clockwise",!1),I.backCompat(Xn,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var Sc=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Fp=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function hl(f,o,l,c,h){var p=l-o,m=h-c;return 0===p?c+m/2:0===m?c:m*((f-o)/p)+c}function zr(f,o,l){var c=4*(l*f.width+o),h=[];return h.push(f.data[c++],f.data[c++],f.data[c++],f.data[c++]),h}function ls(f,o){return Math.sqrt(Math.pow(f[0]-o[0],2)+Math.pow(f[1]-o[1],2)+Math.pow(f[2]-o[2],2))}I.addGetterSetter(G,"blurRadius",0,$(),I.afterSetFilter),I.addGetterSetter(G,"brightness",0,$(),I.afterSetFilter),I.addGetterSetter(G,"contrast",0,$(),I.afterSetFilter),I.addGetterSetter(G,"embossStrength",.5,$(),I.afterSetFilter),I.addGetterSetter(G,"embossWhiteLevel",.5,$(),I.afterSetFilter),I.addGetterSetter(G,"embossDirection","top-left",null,I.afterSetFilter),I.addGetterSetter(G,"embossBlend",!1,null,I.afterSetFilter),I.addGetterSetter(G,"enhance",0,$(),I.afterSetFilter),I.addGetterSetter(G,"hue",0,$(),I.afterSetFilter),I.addGetterSetter(G,"saturation",0,$(),I.afterSetFilter),I.addGetterSetter(G,"luminance",0,$(),I.afterSetFilter),I.addGetterSetter(G,"hue",0,$(),I.afterSetFilter),I.addGetterSetter(G,"saturation",0,$(),I.afterSetFilter),I.addGetterSetter(G,"value",0,$(),I.afterSetFilter),I.addGetterSetter(G,"kaleidoscopePower",2,$(),I.afterSetFilter),I.addGetterSetter(G,"kaleidoscopeAngle",0,$(),I.afterSetFilter),I.addGetterSetter(G,"threshold",0,$(),I.afterSetFilter),I.addGetterSetter(G,"noise",.2,$(),I.afterSetFilter),I.addGetterSetter(G,"pixelSize",8,$(),I.afterSetFilter),I.addGetterSetter(G,"levels",.5,$(),I.afterSetFilter),I.addGetterSetter(G,"red",0,function(f){return this._filterUpToDate=!1,f>255?255:f<0?0:Math.round(f)}),I.addGetterSetter(G,"green",0,function(f){return this._filterUpToDate=!1,f>255?255:f<0?0:Math.round(f)}),I.addGetterSetter(G,"blue",0,oi,I.afterSetFilter),I.addGetterSetter(G,"red",0,function(f){return this._filterUpToDate=!1,f>255?255:f<0?0:Math.round(f)}),I.addGetterSetter(G,"green",0,function(f){return this._filterUpToDate=!1,f>255?255:f<0?0:Math.round(f)}),I.addGetterSetter(G,"blue",0,oi,I.afterSetFilter),I.addGetterSetter(G,"alpha",1,function(f){return this._filterUpToDate=!1,f>1?1:f<0?0:f}),I.addGetterSetter(G,"threshold",.5,$(),I.afterSetFilter);const Io=al.Util._assign(al,{Arc:cn,Arrow:Ft,Circle:wt,Ellipse:cr,Image:dn,Label:Ci,Tag:Kn,Line:Cn,Path:Ve,Rect:qt,RegularPolygon:fn,Ring:Yt,Sprite:wn,Star:Pn,Text:Be,TextPath:st,Transformer:_e,Wedge:Xn,Filters:{Blur:function(o){var l=Math.round(this.blurRadius());l>0&&function Lp(f,o){var p,m,v,y,C,D,T,E,x,S,O,k,N,V,U,W,ee,K,re,J,se,P,z,De,l=f.data,c=f.width,h=f.height,ce=o+o+1,me=c-1,Rt=h-1,Ie=o+1,He=Ie*(Ie+1)/2,It=new dl,Xt=null,Re=It,Qe=null,Qt=null,Nn=Sc[o],Ze=Fp[o];for(v=1;v<ce;v++)Re=Re.next=new dl,v===Ie&&(Xt=Re);for(Re.next=It,T=D=0,m=0;m<h;m++){for(W=ee=K=re=E=x=S=O=0,k=Ie*(J=l[D]),N=Ie*(se=l[D+1]),V=Ie*(P=l[D+2]),U=Ie*(z=l[D+3]),E+=He*J,x+=He*se,S+=He*P,O+=He*z,Re=It,v=0;v<Ie;v++)Re.r=J,Re.g=se,Re.b=P,Re.a=z,Re=Re.next;for(v=1;v<Ie;v++)E+=(Re.r=J=l[y=D+((me<v?me:v)<<2)])*(De=Ie-v),x+=(Re.g=se=l[y+1])*De,S+=(Re.b=P=l[y+2])*De,O+=(Re.a=z=l[y+3])*De,W+=J,ee+=se,K+=P,re+=z,Re=Re.next;for(Qe=It,Qt=Xt,p=0;p<c;p++)l[D+3]=z=O*Nn>>Ze,0!==z?(l[D]=(E*Nn>>Ze)*(z=255/z),l[D+1]=(x*Nn>>Ze)*z,l[D+2]=(S*Nn>>Ze)*z):l[D]=l[D+1]=l[D+2]=0,E-=k,x-=N,S-=V,O-=U,k-=Qe.r,N-=Qe.g,V-=Qe.b,U-=Qe.a,y=T+((y=p+o+1)<me?y:me)<<2,E+=W+=Qe.r=l[y],x+=ee+=Qe.g=l[y+1],S+=K+=Qe.b=l[y+2],O+=re+=Qe.a=l[y+3],Qe=Qe.next,k+=J=Qt.r,N+=se=Qt.g,V+=P=Qt.b,U+=z=Qt.a,W-=J,ee-=se,K-=P,re-=z,Qt=Qt.next,D+=4;T+=c}for(p=0;p<c;p++){for(ee=K=re=W=x=S=O=E=0,k=Ie*(J=l[D=p<<2]),N=Ie*(se=l[D+1]),V=Ie*(P=l[D+2]),U=Ie*(z=l[D+3]),E+=He*J,x+=He*se,S+=He*P,O+=He*z,Re=It,v=0;v<Ie;v++)Re.r=J,Re.g=se,Re.b=P,Re.a=z,Re=Re.next;for(C=c,v=1;v<=o;v++)E+=(Re.r=J=l[D=C+p<<2])*(De=Ie-v),x+=(Re.g=se=l[D+1])*De,S+=(Re.b=P=l[D+2])*De,O+=(Re.a=z=l[D+3])*De,W+=J,ee+=se,K+=P,re+=z,Re=Re.next,v<Rt&&(C+=c);for(D=p,Qe=It,Qt=Xt,m=0;m<h;m++)l[3+(y=D<<2)]=z=O*Nn>>Ze,z>0?(l[y]=(E*Nn>>Ze)*(z=255/z),l[y+1]=(x*Nn>>Ze)*z,l[y+2]=(S*Nn>>Ze)*z):l[y]=l[y+1]=l[y+2]=0,E-=k,x-=N,S-=V,O-=U,k-=Qe.r,N-=Qe.g,V-=Qe.b,U-=Qe.a,y=p+((y=m+Ie)<Rt?y:Rt)*c<<2,E+=W+=Qe.r=l[y],x+=ee+=Qe.g=l[y+1],S+=K+=Qe.b=l[y+2],O+=re+=Qe.a=l[y+3],Qe=Qe.next,k+=J=Qt.r,N+=se=Qt.g,V+=P=Qt.b,U+=z=Qt.a,W-=J,ee-=se,K-=P,re-=z,Qt=Qt.next,D+=c}}(o,l)},Brighten:function(f){var h,o=255*this.brightness(),l=f.data,c=l.length;for(h=0;h<c;h+=4)l[h]+=o,l[h+1]+=o,l[h+2]+=o},Contrast:function(f){var v,o=Math.pow((this.contrast()+100)/100,2),l=f.data,c=l.length,h=150,p=150,m=150;for(v=0;v<c;v+=4)h=l[v],p=l[v+1],m=l[v+2],h/=255,h-=.5,h*=o,h+=.5,p/=255,p-=.5,p*=o,p+=.5,m/=255,m-=.5,m*=o,m+=.5,p=(p*=255)<0?0:p>255?255:p,m=(m*=255)<0?0:m>255?255:m,l[v]=h=(h*=255)<0?0:h>255?255:h,l[v+1]=p,l[v+2]=m},Emboss:function(f){var o=10*this.embossStrength(),l=255*this.embossWhiteLevel(),c=this.embossDirection(),h=this.embossBlend(),p=0,m=0,v=f.data,y=f.width,C=f.height,D=4*y,T=C;switch(c){case"top-left":p=-1,m=-1;break;case"top":p=-1,m=0;break;case"top-right":p=-1,m=1;break;case"right":p=0,m=1;break;case"bottom-right":p=1,m=1;break;case"bottom":p=1,m=0;break;case"bottom-left":p=1,m=-1;break;case"left":p=0,m=-1;break;default:R.error("Unknown emboss direction: "+c)}do{var E=(T-1)*D,x=p;T+x<1&&(x=0),T+x>C&&(x=0);var S=(T-1+x)*y*4,O=y;do{var k=E+4*(O-1),N=m;O+N<1&&(N=0),O+N>y&&(N=0);var V=S+4*(O-1+N),W=v[k+1]-v[V+1],ee=v[k+2]-v[V+2],K=v[k]-v[V],re=K>0?K:-K;if((W>0?W:-W)>re&&(K=W),(ee>0?ee:-ee)>re&&(K=ee),K*=o,h){var P=v[k]+K,z=v[k+1]+K,De=v[k+2]+K;v[k]=P>255?255:P<0?0:P,v[k+1]=z>255?255:z<0?0:z,v[k+2]=De>255?255:De<0?0:De}else{var ce=l-K;ce<0?ce=0:ce>255&&(ce=255),v[k]=v[k+1]=v[k+2]=ce}}while(--O)}while(--T)},Enhance:function(f){var p,y,T,E,o=f.data,l=o.length,c=o[0],h=c,m=o[1],v=m,C=o[2],D=C,x=this.enhance();if(0!==x){for(E=0;E<l;E+=4)(p=o[E+0])<c?c=p:p>h&&(h=p),(y=o[E+1])<m?m=y:y>v&&(v=y),(T=o[E+2])<C?C=T:T>D&&(D=T);var S,O,k,N,V,U,W,ee,K;for(h===c&&(h=255,c=0),v===m&&(v=255,m=0),D===C&&(D=255,C=0),x>0?(O=h+x*(255-h),k=c-x*(c-0),V=v+x*(255-v),U=m-x*(m-0),ee=D+x*(255-D),K=C-x*(C-0)):(O=h+x*(h-(S=.5*(h+c))),k=c+x*(c-S),V=v+x*(v-(N=.5*(v+m))),U=m+x*(m-N),ee=D+x*(D-(W=.5*(D+C))),K=C+x*(C-W)),E=0;E<l;E+=4)o[E+0]=hl(o[E+0],c,h,k,O),o[E+1]=hl(o[E+1],m,v,U,V),o[E+2]=hl(o[E+2],C,D,K,ee)}},Grayscale:function(f){var c,h,o=f.data,l=o.length;for(c=0;c<l;c+=4)o[c]=h=.34*o[c]+.5*o[c+1]+.16*o[c+2],o[c+1]=h,o[c+2]=h},HSL:function(f){var v,U,W,ee,K,o=f.data,l=o.length,h=Math.pow(2,this.saturation()),p=Math.abs(this.hue()+360)%360,m=127*this.luminance(),y=1*h*Math.cos(p*Math.PI/180),C=1*h*Math.sin(p*Math.PI/180),D=.299+.701*y+.167*C,T=.587-.587*y+.33*C,E=.114-.114*y-.497*C,x=.299-.299*y-.328*C,S=.587+.413*y+.035*C,O=.114-.114*y+.293*C,k=.299-.3*y+1.25*C,N=.587-.586*y-1.05*C,V=.114+.886*y-.2*C;for(v=0;v<l;v+=4)K=o[v+3],o[v+0]=D*(U=o[v+0])+T*(W=o[v+1])+E*(ee=o[v+2])+m,o[v+1]=x*U+S*W+O*ee+m,o[v+2]=k*U+N*W+V*ee+m,o[v+3]=K},HSV:function(f){var m,V,U,W,ee,o=f.data,l=o.length,c=Math.pow(2,this.value()),h=Math.pow(2,this.saturation()),p=Math.abs(this.hue()+360)%360,v=c*h*Math.cos(p*Math.PI/180),y=c*h*Math.sin(p*Math.PI/180),C=.299*c+.701*v+.167*y,D=.587*c-.587*v+.33*y,T=.114*c-.114*v-.497*y,E=.299*c-.299*v-.328*y,x=.587*c+.413*v+.035*y,S=.114*c-.114*v+.293*y,O=.299*c-.3*v+1.25*y,k=.587*c-.586*v-1.05*y,N=.114*c+.886*v-.2*y;for(m=0;m<l;m+=4)ee=o[m+3],o[m+0]=C*(V=o[m+0])+D*(U=o[m+1])+T*(W=o[m+2]),o[m+1]=E*V+x*U+S*W,o[m+2]=O*V+k*U+N*W,o[m+3]=ee},Invert:function(f){var c,o=f.data,l=o.length;for(c=0;c<l;c+=4)o[c]=255-o[c],o[c+1]=255-o[c+1],o[c+2]=255-o[c+2]},Kaleidoscope:function(f){var c,h,p,m,y,C,D,T,E,o=f.width,l=f.height,x=Math.round(this.kaleidoscopePower()),S=Math.round(this.kaleidoscopeAngle()),O=Math.floor(o*(S%360)/360);if(!(x<1)){var k=R.createCanvasElement();k.width=o,k.height=l;var N=k.getContext("2d").getImageData(0,0,o,l);R.releaseCanvas(k),function(f,o,l){var C,D,T,k,c=f.data,h=o.data,p=f.width,m=f.height,v=l.polarCenterX||p/2,y=l.polarCenterY||m/2,E=0,x=0,S=0,O=0,N=Math.sqrt(v*v+y*y);D=p-v,T=m-y,N=(k=Math.sqrt(D*D+T*T))>N?k:N;var W,ee,re,J,V=m,U=p,K=360/U*Math.PI/180;for(ee=0;ee<U;ee+=1)for(re=Math.sin(ee*K),J=Math.cos(ee*K),W=0;W<V;W+=1)D=Math.floor(v+N*W/V*J),E=c[0+(C=4*((T=Math.floor(y+N*W/V*re))*p+D))],x=c[C+1],S=c[C+2],O=c[C+3],h[0+(C=4*(ee+W*p))]=E,h[C+1]=x,h[C+2]=S,h[C+3]=O}(f,N,{polarCenterX:o/2,polarCenterY:l/2});for(var V=o/Math.pow(2,x);V<=8;)V*=2,x-=1;var U=V=Math.ceil(V),W=0,ee=U,K=1;for(O+V>o&&(W=U,ee=0,K=-1),h=0;h<l;h+=1)for(c=W;c!==ee;c+=K)p=Math.round(c+O)%o,y=N.data[1+(T=4*(o*h+p))],C=N.data[T+2],D=N.data[T+3],N.data[0+(E=4*(o*h+c))]=N.data[T+0],N.data[E+1]=y,N.data[E+2]=C,N.data[E+3]=D;for(h=0;h<l;h+=1)for(U=Math.floor(V),m=0;m<x;m+=1){for(c=0;c<U+1;c+=1)y=N.data[1+(T=4*(o*h+c))],C=N.data[T+2],D=N.data[T+3],N.data[0+(E=4*(o*h+2*U-c-1))]=N.data[T+0],N.data[E+1]=y,N.data[E+2]=C,N.data[E+3]=D;U*=2}!function(f,o,l){var C,D,T,E,x,V,c=f.data,h=o.data,p=f.width,m=f.height,v=l.polarCenterX||p/2,y=l.polarCenterY||m/2,S=0,O=0,k=0,N=0,U=Math.sqrt(v*v+y*y);D=p-v,T=m-y,U=(V=Math.sqrt(D*D+T*T))>U?V:U;var K,re,se,W=m,ee=p,J=l.polarRotation||0;for(D=0;D<p;D+=1)for(T=0;T<m;T+=1)E=D-v,x=T-y,K=Math.sqrt(E*E+x*x)*W/U,re=(re=(180*Math.atan2(x,E)/Math.PI+360+J)%360)*ee/360,se=Math.floor(re),S=c[0+(C=4*(Math.floor(K)*p+se))],O=c[C+1],k=c[C+2],N=c[C+3],h[0+(C=4*(T*p+D))]=S,h[C+1]=O,h[C+2]=k,h[C+3]=N}(N,f,{polarRotation:0})}},Mask:function(f){var l=function Xp(f,o){var l=zr(f,0,0),c=zr(f,f.width-1,0),h=zr(f,0,f.height-1),p=zr(f,f.width-1,f.height-1),m=o||10;if(ls(l,c)<m&&ls(c,p)<m&&ls(p,h)<m&&ls(h,l)<m){for(var v=function Kp(f){for(var o=[0,0,0],l=0;l<f.length;l++)o[0]+=f[l][0],o[1]+=f[l][1],o[2]+=f[l][2];return o[0]/=f.length,o[1]/=f.length,o[2]/=f.length,o}([c,l,p,h]),y=[],C=0;C<f.width*f.height;C++){var D=ls(v,[f.data[4*C],f.data[4*C+1],f.data[4*C+2]]);y[C]=D<m?0:255}return y}}(f,this.threshold());return l&&(l=function Ec(f,o,l){for(var c=[1,1,1,1,0,1,1,1,1],h=Math.round(Math.sqrt(c.length)),p=Math.floor(h/2),m=[],v=0;v<l;v++)for(var y=0;y<o;y++){for(var C=v*o+y,D=0,T=0;T<h;T++)for(var E=0;E<h;E++){var x=v+T-p,S=y+E-p;x>=0&&x<l&&S>=0&&S<o&&(D+=f[x*o+S]*c[T*h+E])}m[C]=2040===D?255:0}return m}(l,f.width,f.height),l=function yr(f,o,l){for(var c=[1,1,1,1,1,1,1,1,1],h=Math.round(Math.sqrt(c.length)),p=Math.floor(h/2),m=[],v=0;v<l;v++)for(var y=0;y<o;y++){for(var C=v*o+y,D=0,T=0;T<h;T++)for(var E=0;E<h;E++){var x=v+T-p,S=y+E-p;x>=0&&x<l&&S>=0&&S<o&&(D+=f[x*o+S]*c[T*h+E])}m[C]=D>=1020?255:0}return m}(l,f.width,f.height),l=function pl(f,o,l){for(var c=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],h=Math.round(Math.sqrt(c.length)),p=Math.floor(h/2),m=[],v=0;v<l;v++)for(var y=0;y<o;y++){for(var C=v*o+y,D=0,T=0;T<h;T++)for(var E=0;E<h;E++){var x=v+T-p,S=y+E-p;x>=0&&x<l&&S>=0&&S<o&&(D+=f[x*o+S]*c[T*h+E])}m[C]=D}return m}(l,f.width,f.height),function vr(f,o){for(var l=0;l<f.width*f.height;l++)f.data[4*l+3]=o[l]}(f,l)),f},Noise:function(f){var p,o=255*this.noise(),l=f.data,c=l.length,h=o/2;for(p=0;p<c;p+=4)l[p+0]+=h-2*h*Math.random(),l[p+1]+=h-2*h*Math.random(),l[p+2]+=h-2*h*Math.random()},Pixelate:function(f){var h,p,m,v,y,C,D,x,S,O,k,N,V,U,o=Math.ceil(this.pixelSize()),l=f.width,c=f.height,T=Math.ceil(l/o),E=Math.ceil(c/o),W=f.data;if(o<=0)R.error("pixelSize value can not be <= 0");else for(N=0;N<T;N+=1)for(V=0;V<E;V+=1){for(v=0,y=0,C=0,D=0,S=(x=N*o)+o,k=(O=V*o)+o,U=0,h=x;h<S;h+=1)if(!(h>=l))for(p=O;p<k;p+=1)p>=c||(v+=W[0+(m=4*(l*p+h))],y+=W[m+1],C+=W[m+2],D+=W[m+3],U+=1);for(v/=U,y/=U,C/=U,D/=U,h=x;h<S;h+=1)if(!(h>=l))for(p=O;p<k;p+=1)p>=c||(W[0+(m=4*(l*p+h))]=v,W[m+1]=y,W[m+2]=C,W[m+3]=D)}},Posterize:function(f){var p,o=Math.round(254*this.levels())+1,l=f.data,c=l.length,h=255/o;for(p=0;p<c;p+=1)l[p]=Math.floor(l[p]/h)*h},RGB:function(f){var m,v,o=f.data,l=o.length,c=this.red(),h=this.green(),p=this.blue();for(m=0;m<l;m+=4)o[m]=(v=(.34*o[m]+.5*o[m+1]+.16*o[m+2])/255)*c,o[m+1]=v*h,o[m+2]=v*p,o[m+3]=o[m+3]},RGBA:function(f){var v,y,o=f.data,l=o.length,c=this.red(),h=this.green(),p=this.blue(),m=this.alpha();for(v=0;v<l;v+=4)o[v]=c*m+o[v]*(y=1-m),o[v+1]=h*m+o[v+1]*y,o[v+2]=p*m+o[v+2]*y},Sepia:function(f){var c,h,p,m,o=f.data,l=o.length;for(c=0;c<l;c+=4)h=o[c+0],p=o[c+1],m=o[c+2],o[c+0]=Math.min(255,.393*h+.769*p+.189*m),o[c+1]=Math.min(255,.349*h+.686*p+.168*m),o[c+2]=Math.min(255,.272*h+.534*p+.131*m)},Solarize:function(f){var o=f.data,l=f.width,h=4*l,p=f.height;do{var m=(p-1)*h,v=l;do{var y=m+4*(v-1),C=o[y],D=o[y+1],T=o[y+2];C>127&&(C=255-C),D>127&&(D=255-D),T>127&&(T=255-T),o[y]=C,o[y+1]=D,o[y+2]=T}while(--v)}while(--p)},Threshold:function(f){var h,o=255*this.threshold(),l=f.data,c=l.length;for(h=0;h<c;h+=1)l[h]=l[h]<o?0:255}}})}},La=>{La(La.s=792)}]);