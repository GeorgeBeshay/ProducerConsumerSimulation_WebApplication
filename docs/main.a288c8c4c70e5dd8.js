"use strict";(self.webpackChunkPCS_FrontEnd=self.webpackChunkPCS_FrontEnd||[]).push([[179],{342:(Bl,Go,Ds)=>{function Ze(n){return"function"==typeof n}function zo(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const pr=zo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ne(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Oe{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(Ze(r))try{r()}catch(s){e=s instanceof pr?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{Hl(s)}catch(a){e=e??[],a instanceof pr?e=[...e,...a.errors]:e.push(a)}}if(e)throw new pr(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Hl(e);else{if(e instanceof Oe){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ne(t,e)}remove(e){const{_finalizers:t}=this;t&&ne(t,e),e instanceof Oe&&e._removeParent(this)}}Oe.EMPTY=(()=>{const n=new Oe;return n.closed=!0,n})();const zt=Oe.EMPTY;function jl(n){return n instanceof Oe||n&&"closed"in n&&Ze(n.remove)&&Ze(n.add)&&Ze(n.unsubscribe)}function Hl(n){Ze(n)?n():n.unsubscribe()}const Pr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ss={setTimeout(n,e,...t){const{delegate:r}=Ss;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Ss;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Vl(n){Ss.setTimeout(()=>{const{onUnhandledError:e}=Pr;if(!e)throw n;e(n)})}function Ul(){}const Wo=qo("C",void 0,void 0);function qo(n,e,t){return{kind:n,value:e,error:t}}let gr=null;function Ms(n){if(Pr.useDeprecatedSynchronousErrorHandling){const e=!gr;if(e&&(gr={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=gr;if(gr=null,t)throw r}}else n()}class Yo extends Oe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,jl(e)&&e.add(this)):this.destination=Xo}static create(e,t,r){return new Wt(e,t,r)}next(e){this.isStopped?W(function Ed(n){return qo("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?W(function Cd(n){return qo("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?W(Wo,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ts=Function.prototype.bind;function Qo(n,e){return Ts.call(n,e)}class k{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Bi(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Bi(r)}else Bi(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Bi(t)}}}class Wt extends Yo{constructor(e,t,r){let i;if(super(),Ze(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Pr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Qo(e.next,s),error:e.error&&Qo(e.error,s),complete:e.complete&&Qo(e.complete,s)}):i=e}this.destination=new k(i)}}function Bi(n){Pr.useDeprecatedSynchronousErrorHandling?function Ko(n){Pr.useDeprecatedSynchronousErrorHandling&&gr&&(gr.errorThrown=!0,gr.error=n)}(n):Vl(n)}function W(n,e){const{onStoppedNotification:t}=Pr;t&&Ss.setTimeout(()=>t(n,e))}const Xo={closed:!0,next:Ul,error:function om(n){throw n},complete:Ul},ji="function"==typeof Symbol&&Symbol.observable||"@@observable";function pn(n){return n}function Dd(n){return 0===n.length?pn:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let at=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function Hi(n){return n&&n instanceof Yo||function Sd(n){return n&&Ze(n.next)&&Ze(n.error)&&Ze(n.complete)}(n)&&jl(n)}(t)?t:new Wt(t,r,i);return Ms(()=>{const{operator:a,source:l}=this;s.add(a?a.call(s,l):l?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=gn(r))((i,s)=>{const a=new Wt({next:l=>{try{t(l)}catch(c){s(c),a.unsubscribe()}},error:s,complete:i});this.subscribe(a)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[ji](){return this}pipe(...t){return Dd(t)(this)}toPromise(t){return new(t=gn(t))((r,i)=>{let s;this.subscribe(a=>s=a,a=>i(a),()=>r(s))})}}return n.create=e=>new n(e),n})();function gn(n){var e;return null!==(e=n??Pr.Promise)&&void 0!==e?e:Promise}const Vi=zo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let T=(()=>{class n extends at{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new Gl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new Vi}next(t){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ms(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?zt:(this.currentObservers=null,s.push(t),new Oe(()=>{this.currentObservers=null,ne(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new at;return t.source=this,t}}return n.create=(e,t)=>new Gl(e,t),n})();class Gl extends T{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:zt}}function Zo(n){return Ze(n?.lift)}function _t(n){return e=>{if(Zo(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function gt(n,e,t,r,i){return new Md(n,e,t,r,i)}class Md extends Yo{constructor(e,t,r,i,s,a){super(e),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=t?function(l){try{t(l)}catch(c){e.error(c)}}:super._next,this._error=i?function(l){try{i(l)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ce(n,e){return _t((t,r)=>{let i=0;t.subscribe(gt(r,s=>{r.next(n.call(e,s,i++))}))})}function Bn(n){return this instanceof Bn?(this.v=n,this):new Bn(n)}function Kn(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(n,e||[]),s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(C){r[C]&&(i[C]=function(D){return new Promise(function(x,P){s.push([C,D,x,P])>1||l(C,D)})})}function l(C,D){try{!function c(C){C.value instanceof Bn?Promise.resolve(C.value.v).then(f,y):_(s[0][2],C)}(r[C](D))}catch(x){_(s[0][3],x)}}function f(C){l("next",C)}function y(C){l("throw",C)}function _(C,D){C(D),s.shift(),s.length&&l(s[0][0],s[0][1])}}function kr(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function $i(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(a){return new Promise(function(l,c){!function i(s,a,l,c){Promise.resolve(c).then(function(f){s({value:f,done:l})},a)}(l,c,(a=n[s](a)).done,a.value)})}}}const na=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ra(n){return Ze(n?.then)}function Gi(n){return Ze(n[ji])}function ia(n){return Symbol.asyncIterator&&Ze(n?.[Symbol.asyncIterator])}function Yn(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Is=function kd(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Kl(n){return Ze(n?.[Is])}function Yl(n){return Kn(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield Bn(t.read());if(i)return yield Bn(void 0);yield yield Bn(r)}}finally{t.releaseLock()}})}function q(n){return Ze(n?.getReader)}function xe(n){if(n instanceof at)return n;if(null!=n){if(Gi(n))return function en(n){return new at(e=>{const t=n[ji]();if(Ze(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(na(n))return function zi(n){return new at(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(ra(n))return function Ql(n){return new at(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Vl)})}(n);if(ia(n))return As(n);if(Kl(n))return function sa(n){return new at(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(q(n))return function Xl(n){return As(Yl(n))}(n)}throw Yn(n)}function As(n){return new at(e=>{(function Zl(n,e){var t,r,i,s;return function Id(n,e,t,r){return new(t||(t=Promise))(function(s,a){function l(y){try{f(r.next(y))}catch(_){a(_)}}function c(y){try{f(r.throw(y))}catch(_){a(_)}}function f(y){y.done?s(y.value):function i(s){return s instanceof t?s:new t(function(a){a(s)})}(y.value).then(l,c)}f((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=kr(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(a){i={error:a}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function tn(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Mt(n,e,t=1/0){return Ze(e)?Mt((r,i)=>Ce((s,a)=>e(r,s,i,a))(xe(n(r,i))),t):("number"==typeof e&&(t=e),_t((r,i)=>function Nd(n,e,t,r,i,s,a,l){const c=[];let f=0,y=0,_=!1;const C=()=>{_&&!c.length&&!f&&e.complete()},D=P=>f<r?x(P):c.push(P),x=P=>{s&&e.next(P),f++;let F=!1;xe(t(P,y++)).subscribe(gt(e,H=>{i?.(H),s?D(H):e.next(H)},()=>{F=!0},void 0,()=>{if(F)try{for(f--;c.length&&f<r;){const H=c.shift();a?tn(e,a,()=>x(H)):x(H)}C()}catch(H){e.error(H)}}))};return n.subscribe(gt(e,D,()=>{_=!0,C()})),()=>{l?.()}}(r,i,n,t)))}function Nr(n=1/0){return Mt(pn,n)}const Qn=new at(n=>n.complete());function xs(n){return n[n.length-1]}function di(n){return function eu(n){return n&&Ze(n.schedule)}(xs(n))?n.pop():void 0}function hi(n,e=0){return _t((t,r)=>{t.subscribe(gt(r,i=>tn(r,n,()=>r.next(i),e),()=>tn(r,n,()=>r.complete(),e),i=>tn(r,n,()=>r.error(i),e)))})}function Or(n,e=0){return _t((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Ki(n,e){if(!n)throw new Error("Iterable cannot be null");return new at(t=>{tn(t,e,()=>{const r=n[Symbol.asyncIterator]();tn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function ht(n,e){return e?function aa(n,e){if(null!=n){if(Gi(n))return function qi(n,e){return xe(n).pipe(Or(e),hi(e))}(n,e);if(na(n))return function Rs(n,e){return new at(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(ra(n))return function Fd(n,e){return xe(n).pipe(Or(e),hi(e))}(n,e);if(ia(n))return Ki(n,e);if(Kl(n))return function Ps(n,e){return new at(t=>{let r;return tn(t,e,()=>{r=n[Is](),tn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(a){return void t.error(a)}s?t.complete():t.next(i)},0,!0)}),()=>Ze(r?.return)&&r.return()})}(n,e);if(q(n))return function ks(n,e){return Ki(Yl(n),e)}(n,e)}throw Yn(n)}(n,e):xe(n)}function Ns(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new Wt({next:()=>{r.unsubscribe(),n()}});return e(...t).subscribe(r)}function Ge(n){for(let e in n)if(n[e]===Ge)return e;throw Error("Could not find renamed property on target object.")}function Ke(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ke).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Yi(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Qi=Ge({__forward_ref__:Ge});function mr(n){return n.__forward_ref__=mr,n.toString=function(){return Ke(this())},n}function fe(n){return function ca(n){return"function"==typeof n&&n.hasOwnProperty(Qi)&&n.__forward_ref__===mr}(n)?n():n}class V extends Error{constructor(e,t){super(function Xi(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function je(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():function _e(n){return"string"==typeof n?n:null==n?"":String(n)}(n)}function fi(n,e){throw new V(-201,!1)}function nn(n,e){null==n&&function Ve(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function ie(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ft(n){return{providers:n.providers||[],imports:n.imports||[]}}function Fs(n){return ha(n,Ls)||ha(n,gi)}function ha(n,e){return n.hasOwnProperty(e)?n[e]:null}function fa(n){return n&&(n.hasOwnProperty(Bs)||n.hasOwnProperty(ou))?n[Bs]:null}const Ls=Ge({\u0275prov:Ge}),Bs=Ge({\u0275inj:Ge}),gi=Ge({ngInjectableDef:Ge}),ou=Ge({ngInjectorDef:Ge});var pe=(()=>((pe=pe||{})[pe.Default=0]="Default",pe[pe.Host=1]="Host",pe[pe.Self=2]="Self",pe[pe.SkipSelf=4]="SkipSelf",pe[pe.Optional=8]="Optional",pe))();let wn;function rn(n){const e=wn;return wn=n,e}function jn(n,e,t){const r=Fs(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&pe.Optional?null:void 0!==e?e:void fi(Ke(n))}function qt(n){return{toString:n}.toString()}var Pt=(()=>((Pt=Pt||{})[Pt.OnPush=0]="OnPush",Pt[Pt.Default=1]="Default",Pt))(),mn=(()=>{return(n=mn||(mn={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",mn;var n})();const Xe=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),yr={},Fe=[],mi=Ge({\u0275cmp:Ge}),ga=Ge({\u0275dir:Ge}),Zi=Ge({\u0275pipe:Ge}),vr=Ge({\u0275mod:Ge}),sn=Ge({\u0275fac:Ge}),En=Ge({__NG_ELEMENT_ID__:Ge});let lu=0;function on(n){return qt(()=>{const t=!0===n.standalone,r={},i={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Pt.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Fe,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||mn.Emulated,id:"c"+lu++,styles:n.styles||Fe,_:null,setInput:null,schemas:n.schemas||null,tView:null},s=n.dependencies,a=n.features;return i.inputs=yi(n.inputs,r),i.outputs=yi(n.outputs),a&&a.forEach(l=>l(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(Zn).filter(ma):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(Ht).filter(ma):null,i})}function Zn(n){return $e(n)||Nt(n)}function ma(n){return null!==n}function rt(n){return qt(()=>({type:n.type,bootstrap:n.bootstrap||Fe,declarations:n.declarations||Fe,imports:n.imports||Fe,exports:n.exports||Fe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function yi(n,e){if(null==n)return yr;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}const kt=on;function $e(n){return n[mi]||null}function Nt(n){return n[ga]||null}function Ht(n){return n[Zi]||null}function an(n,e){const t=n[vr]||null;if(!t&&!0===e)throw new Error(`Type ${Ke(n)} does not have '\u0275mod' property.`);return t}function Vt(n){return Array.isArray(n)&&"object"==typeof n[1]}function Sn(n){return Array.isArray(n)&&!0===n[1]}function Gs(n){return 0!=(8&n.flags)}function zs(n){return 2==(2&n.flags)}function Ws(n){return 1==(1&n.flags)}function Se(n){return null!==n.template}function Gd(n){return 0!=(256&n[2])}function $r(n,e){return n.hasOwnProperty(sn)?n[sn]:null}class Wd{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function fu(n){return n.type.prototype.ngOnChanges&&(n.setInput=Kd),qd}function qd(){const n=gu(this),e=n?.current;if(e){const t=n.previous;if(t===yr)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Kd(n,e,t,r){const i=gu(n)||function Yd(n,e){return n[pu]=e}(n,{previous:yr,current:null}),s=i.current||(i.current={}),a=i.previous,l=this.declaredInputs[t],c=a[l];s[l]=new Wd(c&&c.currentValue,e,a===yr),n[r]=e}const pu="__ngSimpleChanges__";function gu(n){return n[pu]||null}function u(n){for(;Array.isArray(n);)n=n[0];return n}function m(n,e){return u(e[n.index])}function E(n,e){const t=e[n];return Vt(t)?t:t[0]}function M(n){return 64==(64&n[2])}function S(n,e){return null==e?null:n[e]}function j(n){n[18]=0}function O(n,e){n[5]+=e;let t=n,r=n[3];for(;null!==r&&(1===e&&1===t[5]||-1===e&&0===t[5]);)r[5]+=e,t=r,r=r[3]}const L={lFrame:Gm(null),bindingsEnabled:!0};function ce(){return L.bindingsEnabled}function N(){return L.lFrame.lView}function K(){return L.lFrame.tView}function we(){let n=Ut();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ut(){return L.lFrame.currentTNode}function qe(n,e){const t=L.lFrame;t.currentTNode=n,t.isParent=e}function Bt(){return L.lFrame.isParent}function GD(n,e){const t=L.lFrame;t.bindingIndex=t.bindingRootIndex=n,Xd(e)}function Xd(n){L.lFrame.currentDirectiveIndex=n}function Jd(n){L.lFrame.currentQueryIndex=n}function WD(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Um(n,e,t){if(t&pe.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&pe.Host||(i=WD(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,n=s}const r=L.lFrame=$m();return r.currentTNode=e,r.lView=n,!0}function eh(n){const e=$m(),t=n[1];L.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function $m(){const n=L.lFrame,e=null===n?null:n.child;return null===e?Gm(n):e}function Gm(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function zm(){const n=L.lFrame;return L.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Wm=zm;function th(){const n=zm();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function wi(n){L.lFrame.selectedIndex=n}function mu(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:l,ngAfterViewInit:c,ngAfterViewChecked:f,ngOnDestroy:y}=s;a&&(n.contentHooks||(n.contentHooks=[])).push(-t,a),l&&((n.contentHooks||(n.contentHooks=[])).push(t,l),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,l)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),f&&((n.viewHooks||(n.viewHooks=[])).push(t,f),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,f)),null!=y&&(n.destroyHooks||(n.destroyHooks=[])).push(t,y)}}function yu(n,e,t){qm(n,e,3,t)}function vu(n,e,t,r){(3&n[2])===t&&qm(n,e,t,r)}function nh(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function qm(n,e,t,r){const s=r??-1,a=e.length-1;let l=0;for(let c=void 0!==r?65535&n[18]:0;c<a;c++)if("number"==typeof e[c+1]){if(l=e[c],null!=r&&l>=r)break}else e[c]<0&&(n[18]+=65536),(l<s||-1==s)&&(tS(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function tS(n,e,t,r){const i=t[r]<0,s=t[r+1],l=n[i?-t[r]:t[r]];if(i){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(l)}finally{}}}else try{s.call(l)}finally{}}class wa{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function _u(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],a=t[r++],l=t[r++];n.setAttribute(e,a,l,s)}else{const s=i,a=t[++r];Ym(s)?n.setProperty(e,s,a):n.setAttribute(e,s,a),r++}}return r}function Km(n){return 3===n||4===n||6===n}function Ym(n){return 64===n.charCodeAt(0)}function bu(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||Qm(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function Qm(n,e,t,r,i){let s=0,a=n.length;if(-1===e)a=-1;else for(;s<n.length;){const l=n[s++];if("number"==typeof l){if(l===e){a=-1;break}if(l>e){a=s-1;break}}}for(;s<n.length;){const l=n[s];if("number"==typeof l)break;if(l===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==a&&(n.splice(a,0,e),s=a+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}function Xm(n){return-1!==n}function Ys(n){return 32767&n}function Qs(n,e){let t=function oS(n){return n>>16}(n),r=e;for(;t>0;)r=r[15],t--;return r}let ih=!0;function wu(n){const e=ih;return ih=n,e}let aS=0;const br={};function Ea(n,e){const t=oh(n,e);if(-1!==t)return t;const r=e[1];r.firstCreatePass&&(n.injectorIndex=e.length,sh(r.data,n),sh(e,null),sh(r.blueprint,null));const i=Cu(n,e),s=n.injectorIndex;if(Xm(i)){const a=Ys(i),l=Qs(i,e),c=l[1].data;for(let f=0;f<8;f++)e[s+f]=l[a+f]|c[a+f]}return e[s+8]=i,s}function sh(n,e){n.push(0,0,0,0,0,0,0,0,e)}function oh(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Cu(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=oy(i),null===r)return-1;if(t++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function Eu(n,e,t){!function lS(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(En)&&(r=t[En]),null==r&&(r=t[En]=aS++);const i=255&r;e.data[n+(i>>5)]|=1<<i}(n,e,t)}function ey(n,e,t){if(t&pe.Optional||void 0!==n)return n;fi()}function ty(n,e,t,r){if(t&pe.Optional&&void 0===r&&(r=null),0==(t&(pe.Self|pe.Host))){const i=n[9],s=rn(void 0);try{return i?i.get(e,r,t&pe.Optional):jn(e,r,t&pe.Optional)}finally{rn(s)}}return ey(r,0,t)}function ny(n,e,t,r=pe.Default,i){if(null!==n){if(1024&e[2]){const a=function pS(n,e,t,r,i){let s=n,a=e;for(;null!==s&&null!==a&&1024&a[2]&&!(256&a[2]);){const l=ry(s,a,t,r|pe.Self,br);if(l!==br)return l;let c=s.parent;if(!c){const f=a[21];if(f){const y=f.get(t,br,r);if(y!==br)return y}c=oy(a),a=a[15]}s=c}return i}(n,e,t,r,br);if(a!==br)return a}const s=ry(n,e,t,r,br);if(s!==br)return s}return ty(e,t,r,i)}function ry(n,e,t,r,i){const s=function dS(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(En)?n[En]:void 0;return"number"==typeof e?e>=0?255&e:hS:e}(t);if("function"==typeof s){if(!Um(e,n,r))return r&pe.Host?ey(i,0,r):ty(e,t,r,i);try{const a=s(r);if(null!=a||r&pe.Optional)return a;fi()}finally{Wm()}}else if("number"==typeof s){let a=null,l=oh(n,e),c=-1,f=r&pe.Host?e[16][6]:null;for((-1===l||r&pe.SkipSelf)&&(c=-1===l?Cu(n,e):e[l+8],-1!==c&&sy(r,!1)?(a=e[1],l=Ys(c),e=Qs(c,e)):l=-1);-1!==l;){const y=e[1];if(iy(s,l,y.data)){const _=cS(l,e,t,a,r,f);if(_!==br)return _}c=e[l+8],-1!==c&&sy(r,e[1].data[l+8]===f)&&iy(s,l,e)?(a=y,l=Ys(c),e=Qs(c,e)):l=-1}}return i}function cS(n,e,t,r,i,s){const a=e[1],l=a.data[n+8],y=function Du(n,e,t,r,i){const s=n.providerIndexes,a=e.data,l=1048575&s,c=n.directiveStart,y=s>>20,C=i?l+y:n.directiveEnd;for(let D=r?l:l+y;D<C;D++){const x=a[D];if(D<c&&t===x||D>=c&&x.type===t)return D}if(i){const D=a[c];if(D&&Se(D)&&D.type===t)return c}return null}(l,a,t,null==r?zs(l)&&ih:r!=a&&0!=(3&l.type),i&pe.Host&&s===l);return null!==y?Da(e,a,y,l):br}function Da(n,e,t,r){let i=n[t];const s=e.data;if(function nS(n){return n instanceof wa}(i)){const a=i;a.resolving&&function nu(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new V(-200,`Circular dependency in DI detected for ${n}${t}`)}(je(s[t]));const l=wu(a.canSeeViewProviders);a.resolving=!0;const c=a.injectImpl?rn(a.injectImpl):null;Um(n,r,pe.Default);try{i=n[t]=a.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function eS(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const a=fu(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,a),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,a)}i&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,i),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==c&&rn(c),wu(l),a.resolving=!1,Wm()}}return i}function iy(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function sy(n,e){return!(n&pe.Self||n&pe.Host&&e)}class Xs{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ny(this._tNode,this._lView,e,r,t)}}function hS(){return new Xs(we(),N())}function oy(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}const Js="__parameters__";function to(n,e,t){return qt(()=>{const r=function lh(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const a=new i(...s);return l.annotation=a,l;function l(c,f,y){const _=c.hasOwnProperty(Js)?c[Js]:Object.defineProperty(c,Js,{value:[]})[Js];for(;_.length<=y;)_.push(null);return(_[y]=_[y]||[]).push(a),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}class ae{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ie({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function qr(n,e){n.forEach(t=>Array.isArray(t)?qr(t,e):e(t))}function ly(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Su(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}const Aa={},hh="__NG_DI_FLAG__",Tu="ngTempTokenPath",MS=/\n/gm,hy="__source";let xa;function ro(n){const e=xa;return xa=n,e}function IS(n,e=pe.Default){if(void 0===xa)throw new V(-203,!1);return null===xa?jn(n,void 0,e):xa.get(n,e&pe.Optional?null:void 0,e)}function Y(n,e=pe.Default){return(function pa(){return wn}()||IS)(fe(n),e)}function ot(n,e=pe.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),Y(n,e)}function fh(n){const e=[];for(let t=0;t<n.length;t++){const r=fe(n[t]);if(Array.isArray(r)){if(0===r.length)throw new V(900,!1);let i,s=pe.Default;for(let a=0;a<r.length;a++){const l=r[a],c=AS(l);"number"==typeof c?-1===c?i=l.token:s|=c:i=l}e.push(Y(i,s))}else e.push(Y(r))}return e}function Ra(n,e){return n[hh]=e,n.prototype[hh]=e,n}function AS(n){return n[hh]}const Ei=Ra(to("Optional"),8),io=Ra(to("SkipSelf"),4);var _n=(()=>((_n=_n||{})[_n.Important=1]="Important",_n[_n.DashCase=2]="DashCase",_n))();const vh=new Map;let qS=0;const bh="__ngContext__";function Yt(n,e){Vt(e)?(n[bh]=e[20],function YS(n){vh.set(n[20],n)}(e)):n[bh]=e}function Ch(n,e){return undefined(n,e)}function Oa(n){const e=n[3];return Sn(e)?e[3]:e}function Eh(n){return ky(n[13])}function Dh(n){return ky(n[4])}function ky(n){for(;null!==n&&!Sn(n);)n=n[4];return n}function oo(n,e,t,r,i){if(null!=r){let s,a=!1;Sn(r)?s=r:Vt(r)&&(a=!0,r=r[0]);const l=u(r);0===n&&null!==t?null==i?jy(e,t,l):ns(e,t,l,i||null,!0):1===n&&null!==t?ns(e,t,l,i||null,!0):2===n?function Rh(n,e,t){const r=xu(n,e);r&&function yM(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,l,a):3===n&&e.destroyNode(l),null!=s&&function bM(n,e,t,r,i){const s=t[7];s!==u(t)&&oo(e,n,r,s,i);for(let l=10;l<t.length;l++){const c=t[l];Fa(c[1],c,n,e,r,s)}}(e,n,s,t,i)}}function Mh(n,e,t){return n.createElement(e,t)}function Oy(n,e){const t=n[9],r=t.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,O(i,-1)),t.splice(r,1)}function Th(n,e){if(n.length<=10)return;const t=10+e,r=n[t];if(r){const i=r[17];null!==i&&i!==n&&Oy(i,r),e>0&&(n[t-1][4]=r[4]);const s=Su(n,10+e);!function uM(n,e){Fa(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Fy(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&Fa(n,e,t,3,null,null),function hM(n){let e=n[13];if(!e)return Ih(n[1],n);for(;e;){let t=null;if(Vt(e))t=e[13];else{const r=e[10];r&&(t=r)}if(!t){for(;e&&!e[4]&&e!==n;)Vt(e)&&Ih(e[1],e),e=e[3];null===e&&(e=n),Vt(e)&&Ih(e[1],e),t=e&&e[4]}e=t}}(e)}}function Ih(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function mM(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof wa)){const s=t[r+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){const l=i[s[a]],c=s[a+1];try{c.call(l)}finally{}}else try{s.call(i)}finally{}}}}(n,e),function gM(n,e){const t=n.cleanup,r=e[7];let i=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const a=t[s+1],l="function"==typeof a?a(e):u(e[a]),c=r[i=t[s+2]],f=t[s+3];"boolean"==typeof f?l.removeEventListener(t[s],c,f):f>=0?r[i=f]():r[i=-f].unsubscribe(),s+=2}else{const a=r[i=t[s+1]];t[s].call(a)}if(null!==r){for(let s=i+1;s<r.length;s++)(0,r[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&Sn(e[3])){t!==e[3]&&Oy(t,e);const r=e[19];null!==r&&r.detachView(n)}!function QS(n){vh.delete(n[20])}(e)}}function Ly(n,e,t){return function By(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[0];if(2&r.flags){const i=n.data[r.directiveStart].encapsulation;if(i===mn.None||i===mn.Emulated)return null}return m(r,t)}(n,e.parent,t)}function ns(n,e,t,r,i){n.insertBefore(e,t,r,i)}function jy(n,e,t){n.appendChild(e,t)}function Hy(n,e,t,r,i){null!==r?ns(n,e,t,r,i):jy(n,e,t)}function xu(n,e){return n.parentNode(e)}let Oh,$y=function Uy(n,e,t){return 40&n.type?m(n,t):null};function Ru(n,e,t,r){const i=Ly(n,r,e),s=e[11],l=function Vy(n,e,t){return $y(n,e,t)}(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(t))for(let c=0;c<t.length;c++)Hy(s,i,t[c],l,!1);else Hy(s,i,t,l,!1)}function Pu(n,e){if(null!==e){const t=e.type;if(3&t)return m(e,n);if(4&t)return xh(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return Pu(n,r);{const i=n[e.index];return Sn(i)?xh(-1,i):u(i)}}if(32&t)return Ch(e,n)()||u(n[e.index]);{const r=zy(n,e);return null!==r?Array.isArray(r)?r[0]:Pu(Oa(n[16]),r):Pu(n,e.next)}}return null}function zy(n,e){return null!==e?n[16][6].projection[e.projection]:null}function xh(n,e){const t=10+n+1;if(t<e.length){const r=e[t],i=r[1].firstChild;if(null!==i)return Pu(r,i)}return e[7]}function Ph(n,e,t,r,i,s,a){for(;null!=t;){const l=r[t.index],c=t.type;if(a&&0===e&&(l&&Yt(u(l),r),t.flags|=4),64!=(64&t.flags))if(8&c)Ph(n,e,t.child,r,i,s,!1),oo(e,n,i,l,s);else if(32&c){const f=Ch(t,r);let y;for(;y=f();)oo(e,n,i,y,s);oo(e,n,i,l,s)}else 16&c?Wy(n,e,r,t,i,s):oo(e,n,i,l,s);t=a?t.projectionNext:t.next}}function Fa(n,e,t,r,i,s){Ph(t,r,n.firstChild,e,i,s,!1)}function Wy(n,e,t,r,i,s){const a=t[16],c=a[6].projection[r.projection];if(Array.isArray(c))for(let f=0;f<c.length;f++)oo(e,n,i,c[f],s);else Ph(n,e,c,a[3],i,s,!0)}function qy(n,e,t){n.setAttribute(e,"style",t)}function kh(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}const Vh=new ae("ENVIRONMENT_INITIALIZER"),ov=new ae("INJECTOR",-1),av=new ae("INJECTOR_DEF_TYPES");class lv{get(e,t=Aa){if(t===Aa){const r=new Error(`NullInjectorError: No provider for ${Ke(e)}!`);throw r.name="NullInjectorError",r}return t}}function JM(...n){return{\u0275providers:uv(0,n)}}function uv(n,...e){const t=[],r=new Set;let i;return qr(e,s=>{const a=s;Uh(a,t,[],r)&&(i||(i=[]),i.push(a))}),void 0!==i&&cv(i,t),t}function cv(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];qr(i,s=>{e.push(s)})}}function Uh(n,e,t,r){if(!(n=fe(n)))return!1;let i=null,s=fa(n);const a=!s&&$e(n);if(s||a){if(a&&!a.standalone)return!1;i=n}else{const c=n.ngModule;if(s=fa(c),!s)return!1;i=c}const l=r.has(i);if(a){if(l)return!1;if(r.add(i),a.dependencies){const c="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const f of c)Uh(f,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!l){let f;r.add(i);try{qr(s.imports,y=>{Uh(y,e,t,r)&&(f||(f=[]),f.push(y))})}finally{}void 0!==f&&cv(f,e)}if(!l){const f=$r(i)||(()=>new i);e.push({provide:i,useFactory:f,deps:Fe},{provide:av,useValue:i,multi:!0},{provide:Vh,useValue:()=>Y(i),multi:!0})}const c=s.providers;null==c||l||qr(c,y=>{e.push(y)})}}return i!==n&&void 0!==n.providers}const eT=Ge({provide:String,useValue:Ge});function $h(n){return null!==n&&"object"==typeof n&&eT in n}function ss(n){return"function"==typeof n}const Gh=new ae("Set Injector scope."),Lu={},nT={};let zh;function Bu(){return void 0===zh&&(zh=new lv),zh}class Di{}class fv extends Di{constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,qh(e,a=>this.processProvider(a)),this.records.set(ov,ao(void 0,this)),i.has("environment")&&this.records.set(Di,ao(void 0,this));const s=this.records.get(Gh);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(av.multi,Fe,pe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=ro(this),r=rn(void 0);try{return e()}finally{ro(t),rn(r)}}get(e,t=Aa,r=pe.Default){this.assertNotDestroyed();const i=ro(this),s=rn(void 0);try{if(!(r&pe.SkipSelf)){let l=this.records.get(e);if(void 0===l){const c=function aT(n){return"function"==typeof n||"object"==typeof n&&n instanceof ae}(e)&&Fs(e);l=c&&this.injectableDefInScope(c)?ao(Wh(e),Lu):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(r&pe.Self?Bu():this.parent).get(e,t=r&pe.Optional&&t===Aa?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[Tu]=a[Tu]||[]).unshift(Ke(e)),i)throw a;return function xS(n,e,t,r){const i=n[Tu];throw e[hy]&&i.unshift(e[hy]),n.message=function RS(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Ke(e);if(Array.isArray(e))i=e.map(Ke).join(" -> ");else if("object"==typeof e){let s=[];for(let a in e)if(e.hasOwnProperty(a)){let l=e[a];s.push(a+":"+("string"==typeof l?JSON.stringify(l):Ke(l)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(MS,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[Tu]=null,n}(a,e,"R3InjectorError",this.source)}throw a}finally{rn(s),ro(i)}}resolveInjectorInitializers(){const e=ro(this),t=rn(void 0);try{const r=this.get(Vh.multi,Fe,pe.Self);for(const i of r)i()}finally{ro(e),rn(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Ke(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new V(205,!1)}processProvider(e){let t=ss(e=fe(e))?e:fe(e&&e.provide);const r=function iT(n){return $h(n)?ao(void 0,n.useValue):ao(function pv(n,e,t){let r;if(ss(n)){const i=fe(n);return $r(i)||Wh(i)}if($h(n))r=()=>fe(n.useValue);else if(function hv(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...fh(n.deps||[]));else if(function dv(n){return!(!n||!n.useExisting)}(n))r=()=>Y(fe(n.useExisting));else{const i=fe(n&&(n.useClass||n.provide));if(!function sT(n){return!!n.deps}(n))return $r(i)||Wh(i);r=()=>new i(...fh(n.deps))}return r}(n),Lu)}(e);if(ss(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=ao(void 0,Lu,!0),i.factory=()=>fh(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Lu&&(t.value=nT,t.value=t.factory()),"object"==typeof t.value&&t.value&&function oT(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=fe(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Wh(n){const e=Fs(n),t=null!==e?e.factory:$r(n);if(null!==t)return t;if(n instanceof ae)throw new V(204,!1);if(n instanceof Function)return function rT(n){const e=n.length;if(e>0)throw function Ia(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}(e,"?"),new V(204,!1);const t=function su(n){const e=n&&(n[Ls]||n[gi]);if(e){const t=function Ud(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new V(204,!1)}function ao(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function lT(n){return!!n.\u0275providers}function qh(n,e){for(const t of n)Array.isArray(t)?qh(t,e):lT(t)?qh(t.\u0275providers,e):e(t)}class gv{}class dT{resolveComponentFactory(e){throw function cT(n){const e=Error(`No component factory found for ${Ke(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let ja=(()=>{class n{}return n.NULL=new dT,n})();function hT(){return lo(we(),N())}function lo(n,e){return new Cr(m(n,e))}let Cr=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=hT,n})();class Ha{}let gT=(()=>{class n{}return n.\u0275prov=ie({token:n,providedIn:"root",factory:()=>null}),n})();class os{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const mT=new os("14.2.12"),Kh={};function Qh(n){return n.ngOriginalError}class Si{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Qh(e);for(;t&&Qh(t);)t=Qh(t);return t||null}}function Yr(n){return n instanceof Function?n():n}function vv(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}const _v="ng-template";function TT(n,e,t){let r=0;for(;r<n.length;){let i=n[r++];if(t&&"class"===i){if(i=n[r],-1!==vv(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<n.length&&"string"==typeof(i=n[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function bv(n){return 4===n.type&&n.value!==_v}function IT(n,e,t){return e===(4!==n.type||t?n.value:_v)}function AT(n,e,t){let r=4;const i=n.attrs||[],s=function PT(n){for(let e=0;e<n.length;e++)if(Km(n[e]))return e;return n.length}(i);let a=!1;for(let l=0;l<e.length;l++){const c=e[l];if("number"!=typeof c){if(!a)if(4&r){if(r=2|1&r,""!==c&&!IT(n,c,t)||""===c&&1===e.length){if(tr(r))return!1;a=!0}}else{const f=8&r?c:e[++l];if(8&r&&null!==n.attrs){if(!TT(n.attrs,f,t)){if(tr(r))return!1;a=!0}continue}const _=xT(8&r?"class":c,i,bv(n),t);if(-1===_){if(tr(r))return!1;a=!0;continue}if(""!==f){let C;C=_>s?"":i[_+1].toLowerCase();const D=8&r?C:null;if(D&&-1!==vv(D,f,0)||2&r&&f!==C){if(tr(r))return!1;a=!0}}}}else{if(!a&&!tr(r)&&!tr(c))return!1;if(a&&tr(c))continue;a=!1,r=c|1&r}}return tr(r)||a}function tr(n){return 0==(1&n)}function xT(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const a=e[i];if(a===n)return i;if(3===a||6===a)s=!0;else{if(1===a||2===a){let l=e[++i];for(;"string"==typeof l;)l=e[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=s?1:2}return-1}return function kT(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function wv(n,e,t=!1){for(let r=0;r<e.length;r++)if(AT(n,e[r],t))return!0;return!1}function Cv(n,e){return n?":not("+e.trim()+")":e}function OT(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let a=n[t];if("string"==typeof a)if(2&r){const l=n[++t];i+="["+a+(l.length>0?'="'+l+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!tr(a)&&(e+=Cv(s,i),i=""),r=a,s=s||!tr(r);t++}return""!==i&&(e+=Cv(s,i)),e}const Ee={};function Iv(n,e=null,t=null,r){const i=Av(n,e,t,r);return i.resolveInjectorInitializers(),i}function Av(n,e=null,t=null,r,i=new Set){const s=[t||Fe,JM(n)];return r=r||("object"==typeof n?void 0:Ke(n)),new fv(s,e||Bu(),r||null,i)}let An=(()=>{class n{static create(t,r){if(Array.isArray(t))return Iv({name:""},r,t,"");{const i=t.name??"";return Iv({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=Aa,n.NULL=new lv,n.\u0275prov=ie({token:n,providedIn:"any",factory:()=>Y(ov)}),n.__NG_ELEMENT_ID__=-1,n})();function le(n,e=pe.Default){const t=N();return null===t?Y(n,e):ny(we(),t,fe(n),e)}function tf(){throw new Error("invalid")}function Wv(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const i=t[r],s=t[r+1];if(-1!==s){const a=n.data[s];Jd(i),a.contentQueries(2,e[s],s)}}}function Gu(n,e,t,r,i,s,a,l,c,f,y){const _=e.blueprint.slice();return _[0]=i,_[2]=76|r,(null!==y||n&&1024&n[2])&&(_[2]|=1024),j(_),_[3]=_[15]=n,_[8]=t,_[10]=a||n&&n[10],_[11]=l||n&&n[11],_[12]=c||n&&n[12]||null,_[9]=f||n&&n[9]||null,_[6]=s,_[20]=function KS(){return qS++}(),_[21]=y,_[16]=2==e.type?n[16]:_,_}function ho(n,e,t,r,i){let s=n.data[e];if(null===s)s=function pf(n,e,t,r,i){const s=Ut(),a=Bt(),c=n.data[e]=function yI(n,e,t,r,i,s){return{type:t,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=c),null!==s&&(a?null==s.child&&null!==c.parent&&(s.child=c):null===s.next&&(s.next=c)),c}(n,e,t,r,i),function $D(){return L.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const a=function ke(){const n=L.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===a?-1:a.injectorIndex}return qe(s,!0),s}function fo(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function gf(n,e,t){eh(e);try{const r=n.viewQuery;null!==r&&Ef(1,r,t);const i=n.template;null!==i&&qv(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Wv(n,e),n.staticViewQueries&&Ef(2,n.viewQuery,t);const s=n.components;null!==s&&function pI(n,e){for(let t=0;t<e.length;t++)kI(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[2]&=-5,th()}}function zu(n,e,t,r){const i=e[2];if(128!=(128&i)){eh(e);try{j(e),function jm(n){return L.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&qv(n,e,t,2,r);const a=3==(3&i);if(a){const f=n.preOrderCheckHooks;null!==f&&yu(e,f,null)}else{const f=n.preOrderHooks;null!==f&&vu(e,f,0,null),nh(e,0)}if(function RI(n){for(let e=Eh(n);null!==e;e=Dh(e)){if(!e[2])continue;const t=e[9];for(let r=0;r<t.length;r++){const i=t[r],s=i[3];0==(512&i[2])&&O(s,1),i[2]|=512}}}(e),function xI(n){for(let e=Eh(n);null!==e;e=Dh(e))for(let t=10;t<e.length;t++){const r=e[t],i=r[1];M(r)&&zu(i,r,i.template,r[8])}}(e),null!==n.contentQueries&&Wv(n,e),a){const f=n.contentCheckHooks;null!==f&&yu(e,f)}else{const f=n.contentHooks;null!==f&&vu(e,f,1),nh(e,1)}!function hI(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)wi(~i);else{const s=i,a=t[++r],l=t[++r];GD(a,s),l(2,e[s])}}}finally{wi(-1)}}(n,e);const l=n.components;null!==l&&function fI(n,e){for(let t=0;t<e.length;t++)PI(n,e[t])}(e,l);const c=n.viewQuery;if(null!==c&&Ef(2,c,r),a){const f=n.viewCheckHooks;null!==f&&yu(e,f)}else{const f=n.viewHooks;null!==f&&vu(e,f,2),nh(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,O(e[3],-1))}finally{th()}}}function qv(n,e,t,r,i){const s=function cn(){return L.lFrame.selectedIndex}(),a=2&r;try{wi(-1),a&&e.length>22&&function Dv(n,e,t,r){if(!r)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&yu(e,s,t)}else{const s=n.preOrderHooks;null!==s&&vu(e,s,0,t)}wi(t)}(n,e,22,!1),t(r,i)}finally{wi(s)}}function Yv(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=vf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function vf(n,e,t,r,i,s,a,l,c,f){const y=22+r,_=y+i,C=function gI(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ee);return t}(y,_),D="function"==typeof f?f():f;return C[1]={type:n,blueprint:C,template:t,queries:null,viewQuery:l,declTNode:e,data:C.slice().fill(null,y),bindingStartIndex:y,expandoStartIndex:_,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:c,consts:D,incompleteFirstPass:!1}}function Xv(n,e,t){for(let r in n)if(n.hasOwnProperty(r)){const i=n[r];(t=null===t?{}:t).hasOwnProperty(r)?t[r].push(e,i):t[r]=[e,i]}return t}function Zv(n,e){const r=e.directiveEnd,i=n.data,s=e.attrs,a=[];let l=null,c=null;for(let f=e.directiveStart;f<r;f++){const y=i[f],_=y.inputs,C=null===s||bv(e)?null:AI(_,s);a.push(C),l=Xv(_,f,l),c=Xv(y.outputs,f,c)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=16),l.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=a,e.inputs=l,e.outputs=c}function e_(n,e,t,r,i,s){const a=s.hostBindings;if(a){let l=n.hostBindingOpCodes;null===l&&(l=n.hostBindingOpCodes=[]);const c=~e.index;(function wI(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(l)!=c&&l.push(c),l.push(r,i,a)}}function t_(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function n_(n,e){e.flags|=2,(n.components||(n.components=[])).push(e.index)}function MI(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Se(e)&&(t[""]=n)}}function r_(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function i_(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=$r(i.type)),a=new wa(s,Se(i),le);n.blueprint[r]=a,t[r]=a,e_(n,e,0,r,fo(n,t,i.hostVars,Ee),i)}function TI(n,e,t){const r=m(e,n),i=Yv(t),s=n[10],a=Wu(n,Gu(n,i,null,t.onPush?32:16,r,e,s,s.createRenderer(r,t),null,null,null));n[e.index]=a}function II(n,e,t,r,i,s){const a=s[e];if(null!==a){const l=r.setInput;for(let c=0;c<a.length;){const f=a[c++],y=a[c++],_=a[c++];null!==l?r.setInput(t,_,f,y):t[y]=_}}}function AI(n,e){let t=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;n.hasOwnProperty(i)&&(null===t&&(t=[]),t.push(i,n[i],e[r+1])),r+=2}else r+=2;else r+=4}return t}function PI(n,e){const t=E(e,n);if(M(t)){const r=t[1];48&t[2]?zu(r,t,r.template,t[8]):t[5]>0&&wf(t)}}function wf(n){for(let r=Eh(n);null!==r;r=Dh(r))for(let i=10;i<r.length;i++){const s=r[i];if(M(s))if(512&s[2]){const a=s[1];zu(a,s,a.template,s[8])}else s[5]>0&&wf(s)}const t=n[1].components;if(null!==t)for(let r=0;r<t.length;r++){const i=E(t[r],n);M(i)&&i[5]>0&&wf(i)}}function kI(n,e){const t=E(e,n),r=t[1];(function NI(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(r,t),gf(r,t,t[8])}function Wu(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Cf(n){for(;n;){n[2]|=32;const e=Oa(n);if(Gd(n)&&!e)return n;n=e}return null}function qu(n,e,t,r=!0){const i=e[10];i.begin&&i.begin();try{zu(n,e,n.template,t)}catch(a){throw r&&u_(e,a),a}finally{i.end&&i.end()}}function Ef(n,e,t){Jd(0),e(n,t)}function o_(n){return n[7]||(n[7]=[])}function a_(n){return n.cleanup||(n.cleanup=[])}function u_(n,e){const t=n[9],r=t?t.get(Si,null):null;r&&r.handleError(e)}function Df(n,e,t,r,i){for(let s=0;s<t.length;){const a=t[s++],l=t[s++],c=e[a],f=n.data[a];null!==f.setInput?f.setInput(c,i,r,l):c[l]=i}}function Ku(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let a=0;a<e.length;a++){const l=e[a];"number"==typeof l?s=l:1==s?i=Yi(i,l):2==s&&(r=Yi(r,l+": "+e[++a]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Yu(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(u(s)),Sn(s))for(let l=10;l<s.length;l++){const c=s[l],f=c[1].firstChild;null!==f&&Yu(c[1],c,f,r)}const a=t.type;if(8&a)Yu(n,e,t.child,r);else if(32&a){const l=Ch(t,e);let c;for(;c=l();)r.push(c)}else if(16&a){const l=zy(e,t);if(Array.isArray(l))r.push(...l);else{const c=Oa(e[16]);Yu(c[1],c,l,r,!0)}}t=i?t.projectionNext:t.next}return r}class Va{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Yu(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Sn(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(Th(e,r),Su(t,r))}this._attachedToViewContainer=!1}Fy(this._lView[1],this._lView)}onDestroy(e){!function Qv(n,e,t,r){const i=o_(e);null===t?i.push(r):(i.push(t),n.firstCreatePass&&a_(n).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){Cf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){qu(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new V(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function dM(n,e){Fa(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new V(902,!1);this._appRef=e}}class OI extends Va{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;qu(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class Sf extends ja{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=$e(e);return new Ua(t,this.ngModule)}}function c_(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class LI{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){const i=this.injector.get(e,Kh,r);return i!==Kh||t===Kh?i:this.parentInjector.get(e,t,r)}}class Ua extends gv{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function FT(n){return n.map(OT).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return c_(this.componentDef.inputs)}get outputs(){return c_(this.componentDef.outputs)}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof Di?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new LI(e,s):e,l=a.get(Ha,null);if(null===l)throw new V(407,!1);const c=a.get(gT,null),f=l.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",_=r?function mI(n,e,t){return n.selectRootElement(e,t===mn.ShadowDom)}(f,r,this.componentDef.encapsulation):Mh(f,y,function FI(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(y)),C=this.componentDef.onPush?288:272,D=vf(0,null,null,1,0,null,null,null,null,null),x=Gu(null,D,null,C,null,null,l,f,c,a,null);let P,F;eh(x);try{const H=function HI(n,e,t,r,i,s){const a=t[1];t[22]=n;const c=ho(a,22,2,"#host",null),f=c.mergedAttrs=e.hostAttrs;null!==f&&(Ku(c,f,!0),null!==n&&(_u(i,n,f),null!==c.classes&&kh(i,n,c.classes),null!==c.styles&&qy(i,n,c.styles)));const y=r.createRenderer(n,e),_=Gu(t,Yv(e),null,e.onPush?32:16,t[22],c,r,y,s||null,null,null);return a.firstCreatePass&&(Eu(Ea(c,t),a,e.type),n_(a,c),r_(c,t.length,1)),Wu(t,_),t[22]=_}(_,this.componentDef,x,l,f);if(_)if(r)_u(f,_,["ng-version",mT.full]);else{const{attrs:$,classes:B}=function LT(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!tr(i))break;i=s}r++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);$&&_u(f,_,$),B&&B.length>0&&kh(f,_,B.join(" "))}if(F=function b(n,e){return n.data[e]}(D,22),void 0!==t){const $=F.projection=[];for(let B=0;B<this.ngContentSelectors.length;B++){const ee=t[B];$.push(null!=ee?Array.from(ee):null)}}P=function VI(n,e,t,r){const i=t[1],s=function bI(n,e,t){const r=we();n.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),i_(n,r,e,fo(n,e,1,null),t),Zv(n,r));const i=Da(e,n,r.directiveStart,r);Yt(i,e);const s=m(r,e);return s&&Yt(s,e),i}(i,t,e);if(n[8]=t[8]=s,null!==r)for(const l of r)l(s,e);if(e.contentQueries){const l=we();e.contentQueries(1,s,l.directiveStart)}const a=we();return!i.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(wi(a.index),e_(t[1],a,0,a.directiveStart,a.directiveEnd,e),t_(e,s)),s}(H,this.componentDef,x,[UI]),gf(D,x,null)}finally{th()}return new jI(this.componentType,P,lo(F,x),x,F)}}class jI extends class uT{}{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new OI(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){const s=this._rootLView;Df(s[1],s,i,e,t),function Jv(n,e){const t=E(e,n);16&t[2]||(t[2]|=32)}(s,this._tNode.index)}}get injector(){return new Xs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function UI(){const n=we();mu(N()[1],n)}function Af(n,e,t,r,i){const a=i?"class":"style";Df(n,t,e.inputs[a],a,r)}function wt(n,e,t,r){const i=N(),s=K(),a=22+n,l=i[11],c=i[a]=Mh(l,e,function JD(){return L.lFrame.currentNamespace}()),f=s.firstCreatePass?function iA(n,e,t,r,i,s,a){const l=e.consts,f=ho(e,n,2,i,S(l,s));return function _f(n,e,t,r){let i=!1;if(ce()){const s=function DI(n,e,t){const r=n.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const a=r[s];wv(t,a.selectors,!1)&&(i||(i=[]),Eu(Ea(t,e),n,a.type),Se(a)?(n_(n,t),i.unshift(a)):i.push(a))}return i}(n,e,t),a=null===r?null:{"":-1};if(null!==s){i=!0,r_(t,n.data.length,s.length);for(let y=0;y<s.length;y++){const _=s[y];_.providersResolver&&_.providersResolver(_)}let l=!1,c=!1,f=fo(n,e,s.length,null);for(let y=0;y<s.length;y++){const _=s[y];t.mergedAttrs=bu(t.mergedAttrs,_.hostAttrs),i_(n,t,e,f,_),MI(f,_,a),null!==_.contentQueries&&(t.flags|=8),(null!==_.hostBindings||null!==_.hostAttrs||0!==_.hostVars)&&(t.flags|=128);const C=_.type.prototype;!l&&(C.ngOnChanges||C.ngOnInit||C.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),l=!0),!c&&(C.ngOnChanges||C.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),c=!0),f++}Zv(n,t)}a&&function SI(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new V(-301,!1);r.push(e[i],s)}}}(t,r,a)}return t.mergedAttrs=bu(t.mergedAttrs,t.attrs),i}(e,t,f,S(l,a)),null!==f.attrs&&Ku(f,f.attrs,!1),null!==f.mergedAttrs&&Ku(f,f.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,f),f}(a,s,i,0,e,t,r):s.data[a];qe(f,!0);const y=f.mergedAttrs;null!==y&&_u(l,c,y);const _=f.classes;null!==_&&kh(l,c,_);const C=f.styles;return null!==C&&qy(l,c,C),64!=(64&f.flags)&&Ru(s,i,c,f),0===function Q(){return L.lFrame.elementDepthCount}()&&Yt(c,i),function oe(){L.lFrame.elementDepthCount++}(),Ws(f)&&(function mf(n,e,t){!ce()||(function CI(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;n.firstCreatePass||Ea(t,e),Yt(r,e);const a=t.initialInputs;for(let l=i;l<s;l++){const c=n.data[l],f=Se(c);f&&TI(e,t,c);const y=Da(e,n,l,t);Yt(y,e),null!==a&&II(0,l-i,y,c,0,a),f&&(E(t.index,e)[8]=y)}}(n,e,t,m(t,e)),128==(128&t.flags)&&function EI(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,a=function zD(){return L.lFrame.currentDirectiveIndex}();try{wi(s);for(let l=r;l<i;l++){const c=n.data[l],f=e[l];Xd(l),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&t_(c,f)}}finally{wi(-1),Xd(a)}}(n,e,t))}(s,i,f),function Kv(n,e,t){if(Gs(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const a=n.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}}(s,f,i)),null!==r&&function yf(n,e,t=m){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const a=r[s+1],l=-1===a?t(e,n):n[a];n[i++]=l}}}(i,f),wt}function Ct(){let n=we();Bt()?function ln(){L.lFrame.isParent=!1}():(n=n.parent,qe(n,!1));const e=n;!function J(){L.lFrame.elementDepthCount--}();const t=K();return t.firstCreatePass&&(mu(t,n),Gs(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function iS(n){return 0!=(16&n.flags)}(e)&&Af(t,e,N(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function sS(n){return 0!=(32&n.flags)}(e)&&Af(t,e,N(),e.stylesWithoutHost,!1),Ct}function Eo(n,e,t,r){return wt(n,e,t,r),Ct(),Eo}function Zu(n){return!!n&&"function"==typeof n.then}const S_=function D_(n){return!!n&&"function"==typeof n.subscribe};function rr(n,e,t,r){const i=N(),s=K(),a=we();return function T_(n,e,t,r,i,s,a,l){const c=Ws(r),y=n.firstCreatePass&&a_(n),_=e[8],C=o_(e);let D=!0;if(3&r.type||l){const F=m(r,e),H=l?l(F):F,$=C.length,B=l?Ie=>l(u(Ie[r.index])):r.index;let ee=null;if(!l&&c&&(ee=function aA(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const a=i[s];if(a===t&&i[s+1]===r){const l=e[7],c=i[s+2];return l.length>c?l[c]:null}"string"==typeof a&&(s+=2)}return null}(n,e,i,r.index)),null!==ee)(ee.__ngLastListenerFn__||ee).__ngNextListenerFn__=s,ee.__ngLastListenerFn__=s,D=!1;else{s=A_(r,e,_,s,!1);const Ie=t.listen(H,i,s);C.push(s,Ie),y&&y.push(i,B,$,$+1)}}else s=A_(r,e,_,s,!1);const x=r.outputs;let P;if(D&&null!==x&&(P=x[i])){const F=P.length;if(F)for(let H=0;H<F;H+=2){const Be=e[P[H]][P[H+1]].subscribe(s),ct=C.length;C.push(s,Be),y&&y.push(i,r.index,ct,-(ct+1))}}}(s,i,i[11],a,n,e,0,r),rr}function I_(n,e,t,r){try{return!1!==t(r)}catch(i){return u_(n,i),!1}}function A_(n,e,t,r,i){return function s(a){if(a===Function)return r;Cf(2&n.flags?E(n.index,e):e);let c=I_(e,0,r,a),f=s.__ngNextListenerFn__;for(;f;)c=I_(e,0,f,a)&&c,f=f.__ngNextListenerFn__;return i&&!1===c&&(a.preventDefault(),a.returnValue=!1),c}}function Xt(n,e=""){const t=N(),r=K(),i=n+22,s=r.firstCreatePass?ho(r,i,1,e,null):r.data[i],a=t[i]=function Sh(n,e){return n.createText(e)}(t[11],e);Ru(r,t,a,s),qe(s,!1)}const Mo="en-US";let wb=Mo;class cs{}class qb{}class Kb extends cs{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Sf(this);const r=an(e);this._bootstrapComponents=Yr(r.bootstrap),this._r3Injector=Av(e,t,[{provide:cs,useValue:this},{provide:ja,useValue:this.componentFactoryResolver}],Ke(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Gf extends qb{constructor(e){super(),this.moduleType=e}create(e){return new Kb(this.moduleType,e)}}class Y1 extends cs{constructor(e,t,r){super(),this.componentFactoryResolver=new Sf(this),this.instance=null;const i=new fv([...e,{provide:cs,useValue:this},{provide:ja,useValue:this.componentFactoryResolver}],t||Bu(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function ic(n,e,t=null){return new Y1(n,e,t).injector}let Q1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=uv(0,t.type),i=r.length>0?ic([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=ie({token:n,providedIn:"environment",factory:()=>new n(Y(Di))}),n})();function Yb(n){n.getStandaloneInjector=e=>e.get(Q1).getOrCreateStandaloneInjector(n)}function Wf(n){return e=>{setTimeout(n,void 0,e)}}const Me=class Cx extends T{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),a=r;if(e&&"object"==typeof e){const c=e;i=c.next?.bind(c),s=c.error?.bind(c),a=c.complete?.bind(c)}this.__isAsync&&(s=Wf(s),i&&(i=Wf(i)),a&&(a=Wf(a)));const l=super.subscribe({next:i,error:s,complete:a});return e instanceof Oe&&e.add(l),l}};let or=(()=>{class n{}return n.__NG_ELEMENT_ID__=Tx,n})();function Tx(){return function c0(n,e){let t;const r=e[n.index];if(Sn(r))t=r;else{let i;if(8&n.type)i=u(r);else{const s=e[11];i=s.createComment("");const a=m(n,e);ns(s,xu(s,a),i,function vM(n,e){return n.nextSibling(e)}(s,a),!1)}e[n.index]=t=function s_(n,e,t,r){return new Array(n,!0,!1,e,null,0,r,t,null,null)}(r,e,i,n),Wu(e,t)}return new l0(t,n,e)}(we(),N())}const Ix=or,l0=class extends Ix{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return lo(this._hostTNode,this._hostLView)}get injector(){return new Xs(this._hostTNode,this._hostLView)}get parentInjector(){const e=Cu(this._hostTNode,this._hostLView);if(Xm(e)){const t=Qs(e,this._hostLView),r=Ys(e);return new Xs(t[1].data[r+8],t)}return new Xs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=u0(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedView(t||{},s);return this.insert(a,i),a}createComponent(e,t,r,i,s){const a=e&&!function Ta(n){return"function"==typeof n}(e);let l;if(a)l=t;else{const _=t||{};l=_.index,r=_.injector,i=_.projectableNodes,s=_.environmentInjector||_.ngModuleRef}const c=a?e:new Ua($e(e)),f=r||this.parentInjector;if(!s&&null==c.ngModule){const C=(a?f:this.parentInjector).get(Di,null);C&&(s=C)}const y=c.create(f,i,void 0,s);return this.insert(y.hostView,l),y}insert(e,t){const r=e._lView,i=r[1];if(function R(n){return Sn(n[3])}(r)){const y=this.indexOf(e);if(-1!==y)this.detach(y);else{const _=r[3],C=new l0(_,_[6],_[3]);C.detach(C.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;!function fM(n,e,t,r){const i=10+r,s=t.length;r>0&&(t[i-1][4]=e),r<s-10?(e[4]=t[i],ly(t,10+r,e)):(t.push(e),e[4]=null),e[3]=t;const a=e[17];null!==a&&t!==a&&function pM(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(a,e);const l=e[19];null!==l&&l.insertView(n),e[2]|=64}(i,r,a,s);const l=xh(s,a),c=r[11],f=xu(c,a[7]);return null!==f&&function cM(n,e,t,r,i,s){r[0]=i,r[6]=e,Fa(n,r,t,1,i,s)}(i,a[6],c,r,f,l),e.attachToViewContainerRef(),ly(qf(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=u0(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=Th(this._lContainer,t);r&&(Su(qf(this._lContainer),t),Fy(r[1],r))}detach(e){const t=this._adjustIndex(e,-1),r=Th(this._lContainer,t);return r&&null!=Su(qf(this._lContainer),t)?new Va(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function u0(n){return n[8]}function qf(n){return n[8]||(n[8]=[])}function ac(...n){}const lc=new ae("Application Initializer");let uc=(()=>{class n{constructor(t){this.appInits=t,this.resolve=ac,this.reject=ac,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const t=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Zu(s))t.push(s);else if(S_(s)){const a=new Promise((l,c)=>{s.subscribe({complete:l,error:c})});t.push(a)}}Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Y(lc,8))},n.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const il=new ae("AppId",{providedIn:"root",factory:function N0(){return`${rp()}${rp()}${rp()}`}});function rp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const O0=new ae("Platform Initializer"),cc=new ae("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),F0=new ae("appBootstrapListener"),L0=new ae("AnimationModuleType");let iR=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Tr=new ae("LocaleId",{providedIn:"root",factory:()=>ot(Tr,pe.Optional|pe.SkipSelf)||function sR(){return typeof $localize<"u"&&$localize.locale||Mo}()});class aR{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let ip=(()=>{class n{compileModuleSync(t){return new Gf(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=Yr(an(t).declarations).reduce((a,l)=>{const c=$e(l);return c&&a.push(new Ua(c)),a},[]);return new aR(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cR=(()=>Promise.resolve(0))();function sp(n){typeof Zone>"u"?cR.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class yt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Me(!1),this.onMicrotaskEmpty=new Me(!1),this.onStable=new Me(!1),this.onError=new Me(!1),typeof Zone>"u")throw new V(908,!1);Zone.assertZonePatched();const i=this;if(i._nesting=0,i._outer=i._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;i._inner=i._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function dR(){let n=Xe.requestAnimationFrame,e=Xe.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function pR(n){const e=()=>{!function fR(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Xe,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,ap(n),n.isCheckStableRunning=!0,op(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),ap(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,a,l)=>{try{return H0(n),t.invokeTask(i,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),V0(n)}},onInvoke:(t,r,i,s,a,l,c)=>{try{return H0(n),t.invoke(i,s,a,l,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),V0(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,ap(n),op(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!yt.isInAngularZone())throw new V(909,!1)}static assertNotInAngularZone(){if(yt.isInAngularZone())throw new V(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+i,e,hR,ac,ac);try{return s.runTask(a,t,r)}finally{s.cancelTask(a)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const hR={};function op(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ap(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function H0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function V0(n){n._nesting--,op(n)}class gR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Me,this.onMicrotaskEmpty=new Me,this.onStable=new Me,this.onError=new Me}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const U0=new ae(""),dc=new ae("");let cp,lp=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,cp||(function mR(n){cp=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yt.assertNotInAngularZone(),sp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())sp(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(Y(yt),Y(up),Y(dc))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),up=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return cp?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Ii=null;const $0=new ae("AllowMultipleToken"),dp=new ae("PlatformDestroyListeners");class G0{constructor(e,t){this.name=e,this.token=t}}function W0(n,e,t=[]){const r=`Platform: ${e}`,i=new ae(r);return(s=[])=>{let a=hp();if(!a||a.injector.get($0,!1)){const l=[...t,...s,{provide:i,useValue:!0}];n?n(l):function _R(n){if(Ii&&!Ii.get($0,!1))throw new V(400,!1);Ii=n;const e=n.get(K0);(function z0(n){const e=n.get(O0,null);e&&e.forEach(t=>t())})(n)}(function q0(n=[],e){return An.create({name:e,providers:[{provide:Gh,useValue:"platform"},{provide:dp,useValue:new Set([()=>Ii=null])},...n]})}(l,r))}return function wR(n){const e=hp();if(!e)throw new V(401,!1);return e}()}}function hp(){return Ii?.get(K0)??null}let K0=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function Q0(n,e){let t;return t="noop"===n?new gR:("zone.js"===n?void 0:n)||new yt(e),t}(r?.ngZone,function Y0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:yt,useValue:i}];return i.run(()=>{const a=An.create({providers:s,parent:this.injector,name:t.moduleType.name}),l=t.create(a),c=l.injector.get(Si,null);if(!c)throw new V(402,!1);return i.runOutsideAngular(()=>{const f=i.onError.subscribe({next:y=>{c.handleError(y)}});l.onDestroy(()=>{hc(this._modules,l),f.unsubscribe()})}),function X0(n,e,t){try{const r=t();return Zu(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(c,i,()=>{const f=l.injector.get(uc);return f.runInitializers(),f.donePromise.then(()=>(function Cb(n){nn(n,"Expected localeId to be defined"),"string"==typeof n&&(wb=n.toLowerCase().replace(/_/g,"-"))}(l.injector.get(Tr,Mo)||Mo),this._moduleDoBootstrap(l),l))})})}bootstrapModule(t,r=[]){const i=Z0({},r);return function yR(n,e,t){const r=new Gf(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(sl);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new V(403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new V(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(dp,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Y(An))},n.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function Z0(n,e){return Array.isArray(e)?e.reduce(Z0,n):{...n,...e}}let sl=(()=>{class n{constructor(t,r,i){this._zone=t,this._injector=r,this._exceptionHandler=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new at(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),a=new at(l=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{yt.assertNotInAngularZone(),sp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const f=this._zone.onUnstable.subscribe(()=>{yt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{c.unsubscribe(),f.unsubscribe()}});this.isStable=function tu(...n){const e=di(n),t=function Wi(n,e){return"number"==typeof xs(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?xe(r[0]):Nr(t)(ht(r,e)):Qn}(s,a.pipe(function la(n={}){const{connector:e=(()=>new T),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let a,l,c,f=0,y=!1,_=!1;const C=()=>{l?.unsubscribe(),l=void 0},D=()=>{C(),a=c=void 0,y=_=!1},x=()=>{const P=a;D(),P?.unsubscribe()};return _t((P,F)=>{f++,!_&&!y&&C();const H=c=c??e();F.add(()=>{f--,0===f&&!_&&!y&&(l=Ns(x,i))}),H.subscribe(F),!a&&f>0&&(a=new Wt({next:$=>H.next($),error:$=>{_=!0,C(),l=Ns(D,t,$),H.error($)},complete:()=>{y=!0,C(),l=Ns(D,r),H.complete()}}),xe(P).subscribe(a))})(s)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof gv;if(!this._injector.get(uc).done)throw!i&&function vi(n){const e=$e(n)||Nt(n)||Ht(n);return null!==e&&e.standalone}(t),new V(405,false);let a;a=i?t:this._injector.get(ja).resolveComponentFactory(t),this.componentTypes.push(a.componentType);const l=function vR(n){return n.isBoundToModule}(a)?void 0:this._injector.get(cs),f=a.create(An.NULL,[],r||a.selector,l),y=f.location.nativeElement,_=f.injector.get(U0,null);return _?.registerApplication(y),f.onDestroy(()=>{this.detachView(f.hostView),hc(this.components,f),_?.unregisterApplication(y)}),this._loadComponent(f),f}tick(){if(this._runningTick)throw new V(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;hc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(F0,[]).concat(this._bootstrapListeners).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>hc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new V(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(Y(yt),Y(Di),Y(Si))},n.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function hc(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let ew=!0,tw=!1,fp=(()=>{class n{}return n.__NG_ELEMENT_ID__=SR,n})();function SR(n){return function MR(n,e,t){if(zs(n)&&!t){const r=E(n.index,e);return new Va(r,r)}return 47&n.type?new Va(e[16],e):null}(we(),N(),16==(16&n))}const jR=W0(null,"core",[]);let HR=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Y(sl))},n.\u0275mod=rt({type:n}),n.\u0275inj=ft({}),n})(),mc=null;function Ai(){return mc}const nt=new ae("DocumentToken");let vp=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:function(){return function GR(){return Y(dw)}()},providedIn:"platform"}),n})();const zR=new ae("Location Initialized");let dw=(()=>{class n extends vp{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ai().getBaseHref(this._doc)}onPopState(t){const r=Ai().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=Ai().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){hw()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){hw()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Y(nt))},n.\u0275prov=ie({token:n,factory:function(){return function WR(){return new dw(Y(nt))}()},providedIn:"platform"}),n})();function hw(){return!!window.history.pushState}function _p(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function fw(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ei(n){return n&&"?"!==n[0]?"?"+n:n}let hs=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:function(){return ot(gw)},providedIn:"root"}),n})();const pw=new ae("appBaseHref");let gw=(()=>{class n extends hs{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??ot(nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return _p(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ei(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const a=this.prepareExternalUrl(i+ei(s));this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,s){const a=this.prepareExternalUrl(i+ei(s));this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Y(vp),Y(pw,8))},n.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qR=(()=>{class n extends hs{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=_p(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let a=this.prepareExternalUrl(i+ei(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,r,a)}replaceState(t,r,i,s){let a=this.prepareExternalUrl(i+ei(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Y(vp),Y(pw,8))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),bp=(()=>{class n{constructor(t){this._subject=new Me,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=fw(mw(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ei(r))}normalize(t){return n.stripTrailingSlash(function YR(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,mw(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ei(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ei(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ei,n.joinWithSlash=_p,n.stripTrailingSlash=fw,n.\u0275fac=function(t){return new(t||n)(Y(hs))},n.\u0275prov=ie({token:n,factory:function(){return function KR(){return new bp(Y(hs))}()},providedIn:"root"}),n})();function mw(n){return n.replace(/\/index.html$/,"")}function Sw(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}let Pw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=ft({}),n})();const kw="browser";let gk=(()=>{class n{}return n.\u0275prov=ie({token:n,providedIn:"root",factory:()=>new mk(Y(nt),window)}),n})();class mk{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function yk(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const a=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(a)return a}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Nw(this.window.history)||Nw(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Nw(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ow{}class Fp extends class Ok extends class $R{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function UR(n){mc||(mc=n)}(new Fp)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Fk(){return cl=cl||document.querySelector("base"),cl?cl.getAttribute("href"):null}();return null==t?null:function Lk(n){Tc=Tc||document.createElement("a"),Tc.setAttribute("href",n);const e=Tc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){cl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Sw(document.cookie,e)}}let Tc,cl=null;const jw=new ae("TRANSITION_ID"),jk=[{provide:lc,useFactory:function Bk(n,e,t){return()=>{t.get(uc).donePromise.then(()=>{const r=Ai(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[jw,nt,An],multi:!0}];let Vk=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const Ic=new ae("EventManagerPlugins");let Ac=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const a=i[s];if(a.supports(t))return this._eventNameToPlugin.set(t,a),a}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Y(Ic),Y(yt))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();class Hw{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=Ai().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Vw=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),dl=(()=>{class n extends Vw{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const a=this._doc.createElement("style");a.textContent=s,i.push(r.appendChild(a))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Uw),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Uw))}}return n.\u0275fac=function(t){return new(t||n)(Y(nt))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();function Uw(n){Ai().remove(n)}const Lp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bp=/%COMP%/g;function xc(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?xc(n,i,t):(i=i.replace(Bp,n),t.push(i))}return t}function zw(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Rc=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new jp(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case mn.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new qk(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case mn.ShadowDom:return new Kk(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=xc(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Y(Ac),Y(dl),Y(il))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();class jp{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Lp[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(qw(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(qw(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=Lp[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Lp[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_n.DashCase|_n.Important)?e.style.setProperty(t,r,i&_n.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_n.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,zw(r)):this.eventManager.addEventListener(e,t,zw(r))}}function qw(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class qk extends jp{constructor(e,t,r,i){super(e),this.component=r;const s=xc(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Gk(n){return"_ngcontent-%COMP%".replace(Bp,n)}(i+"-"+r.id),this.hostAttr=function zk(n){return"_nghost-%COMP%".replace(Bp,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Kk extends jp{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=xc(i.id,i.styles,[]);for(let a=0;a<s.length;a++){const l=document.createElement("style");l.textContent=s[a],this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Yk=(()=>{class n extends Hw{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(Y(nt))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const Kw=["alt","control","meta","shift"],Qk={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Xk={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Zk=(()=>{class n extends Hw{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ai().onAndCancel(t,s.domEventName,a))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),Kw.forEach(f=>{const y=r.indexOf(f);y>-1&&(r.splice(y,1),a+=f+".")}),a+=s,0!=r.length||0===s.length)return null;const c={};return c.domEventName=i,c.fullKey=a,c}static matchEventFullKeyCode(t,r){let i=Qk[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Kw.forEach(a=>{a!==i&&(0,Xk[a])(t)&&(s+=a+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Y(nt))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const nN=W0(jR,"browser",[{provide:cc,useValue:kw},{provide:O0,useValue:function Jk(){Fp.makeCurrent()},multi:!0},{provide:nt,useFactory:function tN(){return function SM(n){Oh=n}(document),document},deps:[]}]),Xw=new ae(""),Zw=[{provide:dc,useClass:class Hk{addToWindow(e){Xe.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},Xe.getAllAngularTestabilities=()=>e.getAllTestabilities(),Xe.getAllAngularRootElements=()=>e.getAllRootElements(),Xe.frameworkStabilizers||(Xe.frameworkStabilizers=[]),Xe.frameworkStabilizers.push(r=>{const i=Xe.getAllAngularTestabilities();let s=i.length,a=!1;const l=function(c){a=a||c,s--,0==s&&r(a)};i.forEach(function(c){c.whenStable(l)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?Ai().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:U0,useClass:lp,deps:[yt,up,dc]},{provide:lp,useClass:lp,deps:[yt,up,dc]}],Jw=[{provide:Gh,useValue:"root"},{provide:Si,useFactory:function eN(){return new Si},deps:[]},{provide:Ic,useClass:Yk,multi:!0,deps:[nt,yt,cc]},{provide:Ic,useClass:Zk,multi:!0,deps:[nt]},{provide:Rc,useClass:Rc,deps:[Ac,dl,il]},{provide:Ha,useExisting:Rc},{provide:Vw,useExisting:dl},{provide:dl,useClass:dl,deps:[nt]},{provide:Ac,useClass:Ac,deps:[Ic,yt]},{provide:Ow,useClass:Vk,deps:[]},[]];let eC=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:il,useValue:t.appId},{provide:jw,useExisting:il},jk]}}}return n.\u0275fac=function(t){return new(t||n)(Y(Xw,12))},n.\u0275mod=rt({type:n}),n.\u0275inj=ft({providers:[...Jw,...Zw],imports:[Pw,HR]}),n})(),tC=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(Y(nt))},n.\u0275prov=ie({token:n,factory:function(t){let r=null;return r=t?new t:function iN(){return new tC(Y(nt))}(),r},providedIn:"root"}),n})();function ue(...n){return ht(n,di(n))}typeof window<"u"&&window;class cr extends T{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const hl=zo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:hN}=Array,{getPrototypeOf:fN,prototype:pN,keys:gN}=Object;const{isArray:yN}=Array;function lC(...n){const e=di(n),t=function oa(n){return Ze(xs(n))?n.pop():void 0}(n),{args:r,keys:i}=function sC(n){if(1===n.length){const e=n[0];if(hN(e))return{args:e,keys:null};if(function mN(n){return n&&"object"==typeof n&&fN(n)===pN}(e)){const t=gN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return ht([],e);const s=new at(function _N(n,e,t=pn){return r=>{uC(e,()=>{const{length:i}=n,s=new Array(i);let a=i,l=i;for(let c=0;c<i;c++)uC(e,()=>{const f=ht(n[c],e);let y=!1;f.subscribe(gt(r,_=>{s[c]=_,y||(y=!0,l--),l||r.next(t(s.slice()))},()=>{--a||r.complete()}))},r)},r)}}(r,e,i?a=>function aC(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,a):pn));return t?s.pipe(function oC(n){return Ce(e=>function vN(n,e){return yN(e)?n(...e):n(e)}(n,e))}(t)):s}function uC(n,e,t){n?tn(t,n,e):e()}function $p(...n){return function bN(){return Nr(1)}()(ht(n,di(n)))}function cC(n){return new at(e=>{xe(n()).subscribe(e)})}function xo(n,e){const t=Ze(n)?n:()=>n,r=i=>i.error(t());return new at(e?i=>e.schedule(r,0,i):r)}function Gp(){return _t((n,e)=>{let t=null;n._refCount++;const r=gt(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class dC extends at{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Zo(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Oe;const t=this.getSubject();e.add(this.source.subscribe(gt(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Oe.EMPTY)}return e}refCount(){return Gp()(this)}}function Ir(n,e){return _t((t,r)=>{let i=null,s=0,a=!1;const l=()=>a&&!i&&r.complete();t.subscribe(gt(r,c=>{i?.unsubscribe();let f=0;const y=s++;xe(n(c,y)).subscribe(i=gt(r,_=>r.next(e?e(c,_,y,f++):_),()=>{i=null,l()}))},()=>{a=!0,l()}))})}function fl(n){return n<=0?()=>Qn:_t((e,t)=>{let r=0;e.subscribe(gt(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ni(n,e){return _t((t,r)=>{let i=0;t.subscribe(gt(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Pc(n){return _t((e,t)=>{let r=!1;e.subscribe(gt(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function hC(n=CN){return _t((e,t)=>{let r=!1;e.subscribe(gt(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function CN(){return new hl}function Ri(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ni((i,s)=>n(i,s,r)):pn,fl(1),t?Pc(e):hC(()=>new hl))}function Pi(n,e){return Ze(e)?Mt(n,e,1):Mt(n,1)}function Rt(n,e,t){const r=Ze(n)||e||t?{next:n,error:e,complete:t}:n;return r?_t((i,s)=>{var a;null===(a=r.subscribe)||void 0===a||a.call(r);let l=!0;i.subscribe(gt(s,c=>{var f;null===(f=r.next)||void 0===f||f.call(r,c),s.next(c)},()=>{var c;l=!1,null===(c=r.complete)||void 0===c||c.call(r),s.complete()},c=>{var f;l=!1,null===(f=r.error)||void 0===f||f.call(r,c),s.error(c)},()=>{var c,f;l&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(f=r.finalize)||void 0===f||f.call(r)}))}):pn}function ri(n){return _t((e,t)=>{let s,r=null,i=!1;r=e.subscribe(gt(t,void 0,void 0,a=>{s=xe(n(a,ri(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function EN(n,e,t,r,i){return(s,a)=>{let l=t,c=e,f=0;s.subscribe(gt(a,y=>{const _=f++;c=l?n(c,y,_):(l=!0,y),r&&a.next(c)},i&&(()=>{l&&a.next(c),a.complete()})))}}function fC(n,e){return _t(EN(n,e,arguments.length>=2,!0))}function zp(n){return n<=0?()=>Qn:_t((e,t)=>{let r=[];e.subscribe(gt(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function pC(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ni((i,s)=>n(i,s,r)):pn,zp(1),t?Pc(e):hC(()=>new hl))}function kc(n){return _t((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Re="primary",pl=Symbol("RouteTitle");class MN{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ro(n){return new MN(n)}function TN(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const a=r[s],l=n[s];if(a.startsWith(":"))i[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ar(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!gC(n[i],e[i]))return!1;return!0}function gC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function mC(n){return Array.prototype.concat.apply([],n)}function yC(n){return n.length>0?n[n.length-1]:null}function $t(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ki(n){return S_(n)?n:Zu(n)?ht(Promise.resolve(n)):ue(n)}const xN={exact:function bC(n,e,t){if(!ps(n.segments,e.segments)||!Nc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!bC(n.children[r],e.children[r],t))return!1;return!0},subset:wC},vC={exact:function RN(n,e){return Ar(n,e)},subset:function PN(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>gC(n[t],e[t]))},ignored:()=>!0};function _C(n,e,t){return xN[t.paths](n.root,e.root,t.matrixParams)&&vC[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function wC(n,e,t){return CC(n,e,e.segments,t)}function CC(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ps(i,t)||e.hasChildren()||!Nc(i,t,r))}if(n.segments.length===t.length){if(!ps(n.segments,t)||!Nc(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!wC(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ps(n.segments,i)&&Nc(n.segments,i,r)&&n.children[Re])&&CC(n.children[Re],e,s,r)}}function Nc(n,e,t){return e.every((r,i)=>vC[t](n[i].parameters,r.parameters))}class fs{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ro(this.queryParams)),this._queryParamMap}toString(){return ON.serialize(this)}}class Pe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,$t(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Oc(this)}}class gl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ro(this.parameters)),this._parameterMap}toString(){return MC(this)}}function ps(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let EC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:function(){return new qp},providedIn:"root"}),n})();class qp{parse(e){const t=new GN(e);return new fs(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ml(e.root,!0)}`,r=function BN(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Fc(t)}=${Fc(i)}`).join("&"):`${Fc(t)}=${Fc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function FN(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ON=new qp;function Oc(n){return n.segments.map(e=>MC(e)).join("/")}function ml(n,e){if(!n.hasChildren())return Oc(n);if(e){const t=n.children[Re]?ml(n.children[Re],!1):"",r=[];return $t(n.children,(i,s)=>{s!==Re&&r.push(`${s}:${ml(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function NN(n,e){let t=[];return $t(n.children,(r,i)=>{i===Re&&(t=t.concat(e(r,i)))}),$t(n.children,(r,i)=>{i!==Re&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Re?[ml(n.children[Re],!1)]:[`${i}:${ml(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Re]?`${Oc(n)}/${t[0]}`:`${Oc(n)}/(${t.join("//")})`}}function DC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fc(n){return DC(n).replace(/%3B/gi,";")}function Kp(n){return DC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lc(n){return decodeURIComponent(n)}function SC(n){return Lc(n.replace(/\+/g,"%20"))}function MC(n){return`${Kp(n.path)}${function LN(n){return Object.keys(n).map(e=>`;${Kp(e)}=${Kp(n[e])}`).join("")}(n.parameters)}`}const jN=/^[^\/()?;=#]+/;function Bc(n){const e=n.match(jN);return e?e[0]:""}const HN=/^[^=?&#]+/,UN=/^[^&#]+/;class GN{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Pe([],{}):new Pe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Re]=new Pe(e,t)),r}parseSegment(){const e=Bc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new V(4009,!1);return this.capture(e),new gl(Lc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Bc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Bc(this.remaining);i&&(r=i,this.capture(r))}e[Lc(t)]=Lc(r)}parseQueryParam(e){const t=function VN(n){const e=n.match(HN);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const a=function $N(n){const e=n.match(UN);return e?e[0]:""}(this.remaining);a&&(r=a,this.capture(r))}const i=SC(t),s=SC(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Bc(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new V(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Re);const a=this.parseChildren();t[s]=1===Object.keys(a).length?a[Re]:new Pe([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new V(4011,!1)}}function Yp(n){return n.segments.length>0?new Pe([],{[Re]:n}):n}function jc(n){const e={};for(const r of Object.keys(n.children)){const s=jc(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function zN(n){if(1===n.numberOfChildren&&n.children[Re]){const e=n.children[Re];return new Pe(n.segments.concat(e.segments),e.children)}return n}(new Pe(n.segments,e))}function gs(n){return n instanceof fs}function KN(n,e,t,r,i){if(0===t.length)return Po(e.root,e.root,e.root,r,i);const s=function AC(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new IC(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,a)=>{if("object"==typeof s&&null!=s){if(s.outlets){const l={};return $t(s.outlets,(c,f)=>{l[f]="string"==typeof c?c.split("/"):c}),[...i,{outlets:l}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===a?(s.split("/").forEach((l,c)=>{0==c&&"."===l||(0==c&&""===l?t=!0:".."===l?e++:""!=l&&i.push(l))}),i):[...i,s]},[]);return new IC(t,e,r)}(t);return s.toRoot()?Po(e.root,e.root,new Pe([],{}),r,i):function a(c){const f=function QN(n,e,t,r){if(n.isAbsolute)return new ko(e.root,!0,0);if(-1===r)return new ko(t,t===e.root,0);return function xC(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new V(4005,!1);i=r.segments.length}return new ko(r,!1,i-s)}(t,r+(yl(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,c),y=f.processChildren?_l(f.segmentGroup,f.index,s.commands):Xp(f.segmentGroup,f.index,s.commands);return Po(e.root,f.segmentGroup,y,r,i)}(n.snapshot?._lastPathIndex)}function yl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function vl(n){return"object"==typeof n&&null!=n&&n.outlets}function Po(n,e,t,r,i){let a,s={};r&&$t(r,(c,f)=>{s[f]=Array.isArray(c)?c.map(y=>`${y}`):`${c}`}),a=n===e?t:TC(n,e,t);const l=Yp(jc(a));return new fs(l,s,i)}function TC(n,e,t){const r={};return $t(n.children,(i,s)=>{r[s]=i===e?t:TC(i,e,t)}),new Pe(n.segments,r)}class IC{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&yl(r[0]))throw new V(4003,!1);const i=r.find(vl);if(i&&i!==yC(r))throw new V(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ko{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Xp(n,e,t){if(n||(n=new Pe([],{})),0===n.segments.length&&n.hasChildren())return _l(n,e,t);const r=function ZN(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const a=n.segments[i],l=t[r];if(vl(l))break;const c=`${l}`,f=r<t.length-1?t[r+1]:null;if(i>0&&void 0===c)break;if(c&&f&&"object"==typeof f&&void 0===f.outlets){if(!PC(c,f,a))return s;r+=2}else{if(!PC(c,{},a))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Pe(n.segments.slice(0,r.pathIndex),{});return s.children[Re]=new Pe(n.segments.slice(r.pathIndex),n.children),_l(s,0,i)}return r.match&&0===i.length?new Pe(n.segments,{}):r.match&&!n.hasChildren()?Zp(n,e,t):r.match?_l(n,0,i):Zp(n,e,t)}function _l(n,e,t){if(0===t.length)return new Pe(n.segments,{});{const r=function XN(n){return vl(n[0])?n[0].outlets:{[Re]:n}}(t),i={};return $t(r,(s,a)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[a]=Xp(n.children[a],e,s))}),$t(n.children,(s,a)=>{void 0===r[a]&&(i[a]=s)}),new Pe(n.segments,i)}}function Zp(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(vl(s)){const c=JN(s.outlets);return new Pe(r,c)}if(0===i&&yl(t[0])){r.push(new gl(n.segments[e].path,RC(t[0]))),i++;continue}const a=vl(s)?s.outlets[Re]:`${s}`,l=i<t.length-1?t[i+1]:null;a&&l&&yl(l)?(r.push(new gl(a,RC(l))),i+=2):(r.push(new gl(a,{})),i++)}return new Pe(r,{})}function JN(n){const e={};return $t(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Zp(new Pe([],{}),0,t))}),e}function RC(n){const e={};return $t(n,(t,r)=>e[r]=`${t}`),e}function PC(n,e,t){return n==t.path&&Ar(e,t.parameters)}class ii{constructor(e,t){this.id=e,this.url=t}}class Jp extends ii{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ms extends ii{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Hc extends ii{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kC extends ii{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class eO extends ii{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tO extends ii{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nO extends ii{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rO extends ii{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iO extends ii{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sO{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class oO{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class aO{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lO{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uO{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cO{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class NC{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class OC{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=eg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=eg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=tg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return tg(e,this._root).map(t=>t.value)}}function eg(n,e){if(n===e.value)return e;for(const t of e.children){const r=eg(n,t);if(r)return r}return null}function tg(n,e){if(n===e.value)return[e];for(const t of e.children){const r=tg(n,t);if(r.length)return r.unshift(e),r}return[]}class si{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function No(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class FC extends OC{constructor(e,t){super(e),this.snapshot=t,ng(this,e)}toString(){return this.snapshot.toString()}}function LC(n,e){const t=function hO(n,e){const a=new Vc([],{},{},"",{},Re,e,null,n.root,-1,{});return new jC("",new si(a,[]))}(n,e),r=new cr([new gl("",{})]),i=new cr({}),s=new cr({}),a=new cr({}),l=new cr(""),c=new ys(r,i,a,l,s,Re,e,t.root);return c.snapshot=t.root,new FC(new si(c,[]),t)}class ys{constructor(e,t,r,i,s,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=l,this.title=this.data?.pipe(Ce(f=>f[pl]))??ue(void 0),this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ce(e=>Ro(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ce(e=>Ro(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function BC(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function fO(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Vc{constructor(e,t,r,i,s,a,l,c,f,y,_,C){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=a,this.component=l,this.title=this.data?.[pl],this.routeConfig=c,this._urlSegment=f,this._lastPathIndex=y,this._correctedLastPathIndex=C??y,this._resolve=_}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ro(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ro(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class jC extends OC{constructor(e,t){super(t),this.url=e,ng(this,t)}toString(){return HC(this._root)}}function ng(n,e){e.value._routerState=n,e.children.forEach(t=>ng(n,t))}function HC(n){const e=n.children.length>0?` { ${n.children.map(HC).join(", ")} } `:"";return`${n.value}${e}`}function rg(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ar(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ar(e.params,t.params)||n.params.next(t.params),function IN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ar(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ar(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function ig(n,e){const t=Ar(n.params,e.params)&&function kN(n,e){return ps(n,e)&&n.every((t,r)=>Ar(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||ig(n.parent,e.parent))}function bl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function gO(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return bl(n,r,i);return bl(n,r)})}(n,e,t);return new si(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(l=>bl(n,l)),a}}const r=function mO(n){return new ys(new cr(n.url),new cr(n.params),new cr(n.queryParams),new cr(n.fragment),new cr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>bl(n,s));return new si(r,i)}}const sg="ngNavigationCancelingError";function VC(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=gs(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=UC(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function UC(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[sg]=!0,r.cancellationCode=e,t&&(r.url=t),r}function $C(n){return GC(n)&&gs(n.url)}function GC(n){return n&&n[sg]}class yO{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new wl,this.attachRef=null}}let wl=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new yO,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Uc=!1;let zC=(()=>{class n{constructor(t,r,i,s,a){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=a,this.activated=null,this._activatedRoute=null,this.activateEvents=new Me,this.deactivateEvents=new Me,this.attachEvents=new Me,this.detachEvents=new Me,this.name=i||Re,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new V(4012,Uc);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new V(4012,Uc);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new V(4012,Uc);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new V(4013,Uc);this._activatedRoute=t;const i=this.location,a=t._futureSnapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new vO(t,l,i.injector);if(r&&function _O(n){return!!n.resolveComponentFactory}(r)){const f=r.resolveComponentFactory(a);this.activated=i.createComponent(f,i.length,c)}else this.activated=i.createComponent(a,{index:i.length,injector:c,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(le(wl),le(or),function Sa(n){return function uS(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Km(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(we(),n)}("name"),le(fp),le(Di))},n.\u0275dir=kt({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class vO{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ys?this.route:e===wl?this.childContexts:this.parent.get(e,t)}}let og=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=on({type:n,selectors:[["ng-component"]],standalone:!0,features:[Yb],decls:1,vars:0,template:function(t,r){1&t&&Eo(0,"router-outlet")},dependencies:[zC],encapsulation:2}),n})();function WC(n,e){return n.providers&&!n._injector&&(n._injector=ic(n.providers,e,`Route: ${n.path}`)),n._injector??e}function lg(n){const e=n.children&&n.children.map(lg),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Re&&(t.component=og),t}function Gn(n){return n.outlet||Re}function qC(n,e){const t=n.filter(r=>Gn(r)===e);return t.push(...n.filter(r=>Gn(r)!==e)),t}function Cl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class DO{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rg(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=No(t);e.children.forEach(s=>{const a=s.value.outlet;this.deactivateRoutes(s,i[a],r),delete i[a]}),$t(i,(s,a)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=No(e);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],i);if(r&&r.outlet){const a=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=No(e);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=No(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new cO(s.value.snapshot))}),e.children.length&&this.forwardEvent(new lO(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(rg(i),i===s)if(i.component){const a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const l=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),rg(l.route.value),this.activateChildRoutes(e,null,a.children)}else{const l=Cl(i.snapshot),c=l?.get(ja)??null;a.attachRef=null,a.route=i,a.resolver=c,a.injector=l,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,r)}}class KC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class $c{constructor(e,t){this.component=e,this.route=t}}function SO(n,e,t){const r=n._root;return El(r,e?e._root:null,t,[r.value])}function Oo(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function Vd(n){return null!==Fs(n)}(n)?e.get(n):n:r}function El(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=No(e);return n.children.forEach(a=>{(function TO(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,a=e?e.value:null,l=t?t.getContext(n.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function IO(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ps(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ps(n.url,e.url)||!Ar(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ig(n,e)||!Ar(n.queryParams,e.queryParams);default:return!ig(n,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new KC(r)):(s.data=a.data,s._resolvedData=a._resolvedData),El(n,e,s.component?l?l.children:null:t,r,i),c&&l&&l.outlet&&l.outlet.isActivated&&i.canDeactivateChecks.push(new $c(l.outlet.component,a))}else a&&Dl(e,l,i),i.canActivateChecks.push(new KC(r)),El(n,null,s.component?l?l.children:null:t,r,i)})(a,s[a.value.outlet],t,r.concat([a.value]),i),delete s[a.value.outlet]}),$t(s,(a,l)=>Dl(a,t.getContext(l),i)),i}function Dl(n,e,t){const r=No(n),i=n.value;$t(r,(s,a)=>{Dl(s,i.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new $c(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Sl(n){return"function"==typeof n}function ug(n){return n instanceof hl||"EmptyError"===n?.name}const Gc=Symbol("INITIAL_VALUE");function Fo(){return Ir(n=>lC(n.map(e=>e.pipe(fl(1),function wN(...n){const e=di(n);return _t((t,r)=>{(e?$p(n,t,e):$p(n,t)).subscribe(r)})}(Gc)))).pipe(Ce(e=>{for(const t of e)if(!0!==t){if(t===Gc)return Gc;if(!1===t||t instanceof fs)return t}return!0}),ni(e=>e!==Gc),fl(1)))}function YC(n){return function $l(...n){return Dd(n)}(Rt(e=>{if(gs(e))throw VC(0,e)}),Ce(e=>!0===e))}const cg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function QC(n,e,t,r,i){const s=dg(n,e,t);return s.matched?function zO(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ue(i.map(a=>{const l=Oo(a,n);return ki(function NO(n){return n&&Sl(n.canMatch)}(l)?l.canMatch(e,t):n.runInContext(()=>l(e,t)))})).pipe(Fo(),YC()):ue(!0)}(r=WC(e,r),e,t).pipe(Ce(a=>!0===a?s:{...cg})):ue(s)}function dg(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...cg}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||TN)(t,n,e);if(!i)return{...cg};const s={};$t(i.posParams,(l,c)=>{s[c]=l.path});const a=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function zc(n,e,t,r,i="corrected"){if(t.length>0&&function KO(n,e,t){return t.some(r=>Wc(n,e,r)&&Gn(r)!==Re)}(n,t,r)){const a=new Pe(e,function qO(n,e,t,r){const i={};i[Re]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Gn(s)!==Re){const a=new Pe([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,i[Gn(s)]=a}return i}(n,e,r,new Pe(t,n.children)));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:[]}}if(0===t.length&&function YO(n,e,t){return t.some(r=>Wc(n,e,r))}(n,t,r)){const a=new Pe(n.segments,function WO(n,e,t,r,i,s){const a={};for(const l of r)if(Wc(n,t,l)&&!i[Gn(l)]){const c=new Pe([],{});c._sourceSegment=n,c._segmentIndexShift="legacy"===s?n.segments.length:e.length,a[Gn(l)]=c}return{...i,...a}}(n,e,t,r,n.children,i));return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}const s=new Pe(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Wc(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function XC(n,e,t,r){return!!(Gn(n)===r||r!==Re&&Wc(e,t,n))&&("**"===n.path||dg(e,n,t).matched)}function ZC(n,e,t){return 0===e.length&&!n.children[t]}const qc=!1;class Kc{constructor(e){this.segmentGroup=e||null}}class JC{constructor(e){this.urlTree=e}}function Ml(n){return xo(new Kc(n))}function eE(n){return xo(new JC(n))}class JO{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=zc(this.urlTree.root,[],[],this.config).segmentGroup,t=new Pe(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Re).pipe(Ce(s=>this.createUrlTree(jc(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ri(s=>{if(s instanceof JC)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Kc?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Re).pipe(Ce(i=>this.createUrlTree(jc(i),e.queryParams,e.fragment))).pipe(ri(i=>{throw i instanceof Kc?this.noMatchError(i):i}))}noMatchError(e){return new V(4002,qc)}createUrlTree(e,t,r){const i=Yp(e);return new fs(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe(Ce(s=>new Pe([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return ht(i).pipe(Pi(s=>{const a=r.children[s],l=qC(t,s);return this.expandSegmentGroup(e,l,a,s).pipe(Ce(c=>({segment:c,outlet:s})))}),fC((s,a)=>(s[a.outlet]=a.segment,s),{}),pC())}expandSegment(e,t,r,i,s,a){return ht(r).pipe(Pi(l=>this.expandSegmentAgainstRoute(e,t,r,l,i,s,a).pipe(ri(f=>{if(f instanceof Kc)return ue(null);throw f}))),Ri(l=>!!l),ri((l,c)=>{if(ug(l))return ZC(t,i,s)?ue(new Pe([],{})):Ml(t);throw l}))}expandSegmentAgainstRoute(e,t,r,i,s,a,l){return XC(i,t,s,a)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,a):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a):Ml(t):Ml(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?eE(s):this.lineralizeSegments(r,s).pipe(Mt(a=>{const l=new Pe(a,{});return this.expandSegment(e,l,t,a,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,a){const{matched:l,consumedSegments:c,remainingSegments:f,positionalParamSegments:y}=dg(t,i,s);if(!l)return Ml(t);const _=this.applyRedirectCommands(c,i.redirectTo,y);return i.redirectTo.startsWith("/")?eE(_):this.lineralizeSegments(i,_).pipe(Mt(C=>this.expandSegment(e,t,r,C.concat(f),a,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=WC(r,e),r.loadChildren?(r._loadedRoutes?ue({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(Ce(l=>(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,new Pe(i,{})))):ue(new Pe(i,{}))):QC(t,r,i,e).pipe(Ir(({matched:a,consumedSegments:l,remainingSegments:c})=>a?this.getChildConfig(e=r._injector??e,r,i).pipe(Mt(y=>{const _=y.injector??e,C=y.routes,{segmentGroup:D,slicedSegments:x}=zc(t,l,c,C),P=new Pe(D.segments,D.children);if(0===x.length&&P.hasChildren())return this.expandChildren(_,C,P).pipe(Ce(B=>new Pe(l,B)));if(0===C.length&&0===x.length)return ue(new Pe(l,{}));const F=Gn(r)===s;return this.expandSegment(_,P,C,x,F?Re:s,!0).pipe(Ce($=>new Pe(l.concat($.segments),$.children)))})):Ml(t)))}getChildConfig(e,t,r){return t.children?ue({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ue({routes:t._loadedRoutes,injector:t._loadedInjector}):function GO(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ue(!0):ue(i.map(a=>{const l=Oo(a,n);return ki(function xO(n){return n&&Sl(n.canLoad)}(l)?l.canLoad(e,t):n.runInContext(()=>l(e,t)))})).pipe(Fo(),YC())}(e,t,r).pipe(Mt(i=>i?this.configLoader.loadChildren(e,t).pipe(Rt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function XO(n){return xo(UC(qc,3))}())):ue({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ue(r);if(i.numberOfChildren>1||!i.children[Re])return xo(new V(4e3,qc));i=i.children[Re]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new fs(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return $t(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const l=i.substring(1);r[s]=t[l]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let a={};return $t(t.children,(l,c)=>{a[c]=this.createSegmentGroup(e,l,r,i)}),new Pe(s,a)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new V(4001,qc);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class tF{}class iF{constructor(e,t,r,i,s,a,l,c){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l,this.urlSerializer=c}recognize(){const e=zc(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Re).pipe(Ce(t=>{if(null===t)return null;const r=new Vc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Re,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new si(r,t),s=new jC(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=BC(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return ht(Object.keys(r.children)).pipe(Pi(i=>{const s=r.children[i],a=qC(t,i);return this.processSegmentGroup(e,a,s,i)}),fC((i,s)=>i&&s?(i.push(...s),i):null),function DN(n,e=!1){return _t((t,r)=>{let i=0;t.subscribe(gt(r,s=>{const a=n(s,i++);(a||e)&&r.next(s),!a&&r.complete()}))})}(i=>null!==i),Pc(null),pC(),Ce(i=>{if(null===i)return null;const s=tE(i);return function sF(n){n.sort((e,t)=>e.value.outlet===Re?-1:t.value.outlet===Re?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return ht(t).pipe(Pi(a=>this.processSegmentAgainstRoute(a._injector??e,a,r,i,s)),Ri(a=>!!a),ri(a=>{if(ug(a))return ZC(r,i,s)?ue([]):ue(null);throw a}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!XC(t,r,i,s))return ue(null);let a;if("**"===t.path){const l=i.length>0?yC(i).parameters:{},c=rE(r)+i.length;a=ue({snapshot:new Vc(i,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,sE(t),Gn(t),t.component??t._loadedComponent??null,t,nE(r),c,oE(t),c),consumedSegments:[],remainingSegments:[]})}else a=QC(r,t,i,e).pipe(Ce(({matched:l,consumedSegments:c,remainingSegments:f,parameters:y})=>{if(!l)return null;const _=rE(r)+c.length;return{snapshot:new Vc(c,y,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,sE(t),Gn(t),t.component??t._loadedComponent??null,t,nE(r),_,oE(t),_),consumedSegments:c,remainingSegments:f}}));return a.pipe(Ir(l=>{if(null===l)return ue(null);const{snapshot:c,consumedSegments:f,remainingSegments:y}=l;e=t._injector??e;const _=t._loadedInjector??e,C=function oF(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:D,slicedSegments:x}=zc(r,f,y,C.filter(F=>void 0===F.redirectTo),this.relativeLinkResolution);if(0===x.length&&D.hasChildren())return this.processChildren(_,C,D).pipe(Ce(F=>null===F?null:[new si(c,F)]));if(0===C.length&&0===x.length)return ue([new si(c,[])]);const P=Gn(t)===s;return this.processSegment(_,C,D,x,P?Re:s).pipe(Ce(F=>null===F?null:[new si(c,F)]))}))}}function aF(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function tE(n){const e=[],t=new Set;for(const r of n){if(!aF(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=tE(r.children);e.push(new si(r.value,i))}return e.filter(r=>!t.has(r))}function nE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function rE(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function sE(n){return n.data||{}}function oE(n){return n.resolve||{}}function aE(n){return"string"==typeof n.title||null===n.title}function hg(n){return Ir(e=>{const t=n(e);return t?ht(t).pipe(Ce(()=>e)):ue(e)})}let lE=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Re);return r}getResolvedTitleForRoute(t){return t.data[pl]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:function(){return ot(uE)},providedIn:"root"}),n})(),uE=(()=>{class n extends lE{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(Y(tC))},n.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class gF{}class yF extends class mF{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Qc=new ae("",{providedIn:"root",factory:()=>({})}),fg=new ae("ROUTES");let pg=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ue(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ki(t.loadComponent()).pipe(Rt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),kc(()=>{this.componentLoaders.delete(t)})),i=new dC(r,()=>new T).pipe(Gp());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ue({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(Ce(l=>{this.onLoadEndListener&&this.onLoadEndListener(r);let c,f,y=!1;Array.isArray(l)?f=l:(c=l.create(t).injector,f=mC(c.get(fg,[],pe.Self|pe.Optional)));return{routes:f.map(lg),injector:c}}),kc(()=>{this.childrenLoaders.delete(r)})),a=new dC(s,()=>new T).pipe(Gp());return this.childrenLoaders.set(r,a),a}loadModuleFactoryOrRoutes(t){return ki(t()).pipe(Mt(r=>r instanceof qb||Array.isArray(r)?ue(r):ht(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(Y(An),Y(ip))},n.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class _F{}class bF{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function wF(n){throw n}function CF(n,e,t){return e.parse("/")}const EF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},DF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function dE(){const n=ot(EC),e=ot(wl),t=ot(bp),r=ot(An),i=ot(ip),s=ot(fg,{optional:!0})??[],a=ot(Qc,{optional:!0})??{},l=ot(uE),c=ot(lE,{optional:!0}),f=ot(_F,{optional:!0}),y=ot(gF,{optional:!0}),_=new Gt(null,n,e,t,r,i,mC(s));return f&&(_.urlHandlingStrategy=f),y&&(_.routeReuseStrategy=y),_.titleStrategy=c??l,function SF(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(a,_),_}let Gt=(()=>{class n{constructor(t,r,i,s,a,l,c){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new T,this.errorHandler=wF,this.malformedUriErrorHandler=CF,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ue(void 0),this.urlHandlingStrategy=new bF,this.routeReuseStrategy=new yF,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=a.get(pg),this.configLoader.onLoadEndListener=C=>this.triggerEvent(new oO(C)),this.configLoader.onLoadStartListener=C=>this.triggerEvent(new sO(C)),this.ngModule=a.get(cs),this.console=a.get(iR);const _=a.get(yt);this.isNgZoneEnabled=_ instanceof yt&&yt.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=function AN(){return new fs(new Pe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=LC(this.currentUrlTree,this.rootComponentType),this.transitions=new cr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ni(i=>0!==i.id),Ce(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Ir(i=>{let s=!1,a=!1;return ue(i).pipe(Rt(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ir(l=>{const c=this.browserUrlTree.toString(),f=!this.navigated||l.extractedUrl.toString()!==c||c!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||f)&&this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return hE(l.source)&&(this.browserUrlTree=l.extractedUrl),ue(l).pipe(Ir(_=>{const C=this.transitions.getValue();return r.next(new Jp(_.id,this.serializeUrl(_.extractedUrl),_.source,_.restoredState)),C!==this.transitions.getValue()?Qn:Promise.resolve(_)}),function eF(n,e,t,r){return Ir(i=>function ZO(n,e,t,r,i){return new JO(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe(Ce(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Rt(_=>{this.currentNavigation={...this.currentNavigation,finalUrl:_.urlAfterRedirects},i.urlAfterRedirects=_.urlAfterRedirects}),function uF(n,e,t,r,i,s){return Mt(a=>function rF(n,e,t,r,i,s,a="emptyOnly",l="legacy"){return new iF(n,e,t,r,i,a,l,s).recognize().pipe(Ir(c=>null===c?function nF(n){return new at(e=>e.error(n))}(new tF):ue(c)))}(n,e,t,a.urlAfterRedirects,r.serialize(a.urlAfterRedirects),r,i,s).pipe(Ce(l=>({...a,targetSnapshot:l}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Rt(_=>{if(i.targetSnapshot=_.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!_.extras.skipLocationChange){const D=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl);this.setBrowserUrl(D,_)}this.browserUrlTree=_.urlAfterRedirects}const C=new eO(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);r.next(C)}));if(f&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:C,extractedUrl:D,source:x,restoredState:P,extras:F}=l,H=new Jp(C,this.serializeUrl(D),x,P);r.next(H);const $=LC(D,this.rootComponentType).snapshot;return ue(i={...l,targetSnapshot:$,urlAfterRedirects:D,extras:{...F,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=l.rawUrl,l.resolve(null),Qn}),Rt(l=>{const c=new tO(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Ce(l=>i={...l,guards:SO(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function FO(n,e){return Mt(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return 0===a.length&&0===s.length?ue({...t,guardsResult:!0}):function LO(n,e,t,r){return ht(n).pipe(Mt(i=>function $O(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ue(s.map(l=>{const c=Cl(e)??i,f=Oo(l,c);return ki(function kO(n){return n&&Sl(n.canDeactivate)}(f)?f.canDeactivate(n,e,t,r):c.runInContext(()=>f(n,e,t,r))).pipe(Ri())})).pipe(Fo()):ue(!0)}(i.component,i.route,t,e,r)),Ri(i=>!0!==i,!0))}(a,r,i,n).pipe(Mt(l=>l&&function AO(n){return"boolean"==typeof n}(l)?function BO(n,e,t,r){return ht(e).pipe(Pi(i=>$p(function HO(n,e){return null!==n&&e&&e(new aO(n)),ue(!0)}(i.route.parent,r),function jO(n,e){return null!==n&&e&&e(new uO(n)),ue(!0)}(i.route,r),function UO(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>function MO(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(a)).filter(a=>null!==a).map(a=>cC(()=>ue(a.guards.map(c=>{const f=Cl(a.node)??t,y=Oo(c,f);return ki(function PO(n){return n&&Sl(n.canActivateChild)}(y)?y.canActivateChild(r,n):f.runInContext(()=>y(r,n))).pipe(Ri())})).pipe(Fo())));return ue(s).pipe(Fo())}(n,i.path,t),function VO(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ue(!0);const i=r.map(s=>cC(()=>{const a=Cl(e)??t,l=Oo(s,a);return ki(function RO(n){return n&&Sl(n.canActivate)}(l)?l.canActivate(e,n):a.runInContext(()=>l(e,n))).pipe(Ri())}));return ue(i).pipe(Fo())}(n,i.route,t))),Ri(i=>!0!==i,!0))}(r,s,n,e):ue(l)),Ce(l=>({...t,guardsResult:l})))})}(this.ngModule.injector,l=>this.triggerEvent(l)),Rt(l=>{if(i.guardsResult=l.guardsResult,gs(l.guardsResult))throw VC(0,l.guardsResult);const c=new nO(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.triggerEvent(c)}),ni(l=>!!l.guardsResult||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),hg(l=>{if(l.guards.canActivateChecks.length)return ue(l).pipe(Rt(c=>{const f=new rO(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(f)}),Ir(c=>{let f=!1;return ue(c).pipe(function cF(n,e){return Mt(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ue(t);let s=0;return ht(i).pipe(Pi(a=>function dF(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!aE(i)&&(s[pl]=i.title),function hF(n,e,t,r){const i=function fF(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ue({});const s={};return ht(i).pipe(Mt(a=>function pF(n,e,t,r){const i=Cl(e)??r,s=Oo(n,i);return ki(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[a],e,t,r).pipe(Ri(),Rt(l=>{s[a]=l}))),zp(1),function SN(n){return Ce(()=>n)}(s),ri(a=>ug(a)?Qn:xo(a)))}(s,n,e,r).pipe(Ce(a=>(n._resolvedData=a,n.data=BC(n,t).resolve,i&&aE(i)&&(n.data[pl]=i.title),null)))}(a.route,r,n,e)),Rt(()=>s++),zp(1),Mt(a=>s===i.length?ue(t):Qn))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Rt({next:()=>f=!0,complete:()=>{f||(this.restoreHistory(c),this.cancelNavigationTransition(c,"",2))}}))}),Rt(c=>{const f=new iO(c.id,this.serializeUrl(c.extractedUrl),this.serializeUrl(c.urlAfterRedirects),c.targetSnapshot);this.triggerEvent(f)}))}),hg(l=>{const c=f=>{const y=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(f.routeConfig).pipe(Rt(_=>{f.component=_}),Ce(()=>{})));for(const _ of f.children)y.push(...c(_));return y};return lC(c(l.targetSnapshot.root)).pipe(Pc(),fl(1))}),hg(()=>this.afterPreactivation()),Ce(l=>{const c=function pO(n,e,t){const r=bl(n,e._root,t?t._root:void 0);return new FC(r,e)}(this.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return i={...l,targetRouterState:c}}),Rt(l=>{this.currentUrlTree=l.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),this.routerState=l.targetRouterState,"deferred"===this.urlUpdateStrategy&&(l.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,l),this.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>Ce(r=>(new DO(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,l=>this.triggerEvent(l)),Rt({next(){s=!0},complete(){s=!0}}),kc(()=>{s||a||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),ri(l=>{if(a=!0,GC(l)){$C(l)||(this.navigated=!0,this.restoreHistory(i,!0));const c=new Hc(i.id,this.serializeUrl(i.extractedUrl),l.message,l.cancellationCode);if(r.next(c),$C(l)){const f=this.urlHandlingStrategy.merge(l.url,this.rawUrlTree),y={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||hE(i.source)};this.scheduleNavigation(f,"imperative",null,y,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const c=new kC(i.id,this.serializeUrl(i.extractedUrl),l,i.targetSnapshot??void 0);r.next(c);try{i.resolve(this.errorHandler(l))}catch(f){i.reject(f)}}return Qn}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const l={...s};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(i.state=l)}const a=this.parseUrl(t.url);this.scheduleNavigation(a,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(lg),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:c}=r,f=i||this.routerState.root,y=c?this.currentUrlTree.fragment:a;let _=null;switch(l){case"merge":_={...this.currentUrlTree.queryParams,...s};break;case"preserve":_=this.currentUrlTree.queryParams;break;default:_=s||null}return null!==_&&(_=this.removeEmptyProps(_)),KN(f,this.currentUrlTree,t,_,y??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=gs(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function MF(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new V(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...EF}:!1===r?{...DF}:r,gs(t))return _C(this.currentUrlTree,t,i);const s=this.parseUrl(t);return _C(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ms(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,a){if(this.disposed)return Promise.resolve(!1);let l,c,f;a?(l=a.resolve,c=a.reject,f=a.promise):f=new Promise((C,D)=>{l=C,c=D});const y=++this.navigationId;let _;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),_=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):_=0,this.setTransition({id:y,targetPageId:_,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:l,reject:c,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(C=>Promise.reject(C))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new Hc(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){tf()},n.\u0275prov=ie({token:n,factory:function(){return dE()},providedIn:"root"}),n})();function hE(n){return"imperative"!==n}class fE{}let AF=(()=>{class n{constructor(t,r,i,s,a){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(ni(t=>t instanceof ms),Pi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=ic(s.providers,t,`Route: ${s.path}`));const a=s._injector??t,l=s._loadedInjector??a;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(a,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(l,s.children??s._loadedRoutes))}return ht(i).pipe(Nr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ue(null);const s=i.pipe(Mt(a=>null===a?ue(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));return r.loadComponent&&!r._loadedComponent?ht([s,this.loader.loadComponent(r)]).pipe(Nr()):s})}}return n.\u0275fac=function(t){return new(t||n)(Y(Gt),Y(ip),Y(Di),Y(fE),Y(pg))},n.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const yg=new ae("");let pE=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Jp?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ms&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof NC&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new NC(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){tf()},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();function Lo(n,e){return{\u0275kind:n,\u0275providers:e}}function vg(n){return[{provide:fg,multi:!0,useValue:n}]}function mE(){const n=ot(An);return e=>{const t=n.get(sl);if(e!==t.components[0])return;const r=n.get(Gt),i=n.get(yE);1===n.get(_g)&&r.initialNavigation(),n.get(vE,null,pe.Optional)?.setUpPreloading(),n.get(yg,null,pe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const yE=new ae("",{factory:()=>new T}),_g=new ae("",{providedIn:"root",factory:()=>1});const vE=new ae("");function kF(n){return Lo(0,[{provide:vE,useExisting:AF},{provide:fE,useExisting:n}])}const _E=new ae("ROUTER_FORROOT_GUARD"),NF=[bp,{provide:EC,useClass:qp},{provide:Gt,useFactory:dE},wl,{provide:ys,useFactory:function gE(n){return n.routerState.root},deps:[Gt]},pg];function OF(){return new G0("Router",Gt)}let bE=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[NF,[],vg(t),{provide:_E,useFactory:jF,deps:[[Gt,new Ei,new io]]},{provide:Qc,useValue:r||{}},r?.useHash?{provide:hs,useClass:qR}:{provide:hs,useClass:gw},{provide:yg,useFactory:()=>{const n=ot(Gt),e=ot(gk),t=ot(Qc);return t.scrollOffset&&e.setOffset(t.scrollOffset),new pE(n,e,t)}},r?.preloadingStrategy?kF(r.preloadingStrategy).\u0275providers:[],{provide:G0,multi:!0,useFactory:OF},r?.initialNavigation?HF(r):[],[{provide:wE,useFactory:mE},{provide:F0,multi:!0,useExisting:wE}]]}}static forChild(t){return{ngModule:n,providers:[vg(t)]}}}return n.\u0275fac=function(t){return new(t||n)(Y(_E,8))},n.\u0275mod=rt({type:n}),n.\u0275inj=ft({imports:[og]}),n})();function jF(n){return"guarded"}function HF(n){return["disabled"===n.initialNavigation?Lo(3,[{provide:lc,multi:!0,useFactory:()=>{const e=ot(Gt);return()=>{e.setUpLocationChangeListener()}}},{provide:_g,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Lo(2,[{provide:_g,useValue:0},{provide:lc,multi:!0,deps:[An],useFactory:e=>{const t=e.get(zR,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(s=>{const a=e.get(Gt),l=e.get(yE);(function i(s){e.get(Gt).events.pipe(ni(l=>l instanceof ms||l instanceof Hc||l instanceof kC),Ce(l=>l instanceof ms||l instanceof Hc&&(0===l.code||1===l.code)&&null),ni(l=>null!==l),fl(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),a.afterPreactivation=()=>(s(!0),r||l.closed?ue(void 0):l),a.initialNavigation()}))}}]).\u0275providers:[]]}const wE=new ae(""),UF=[];let $F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=ft({imports:[bE.forRoot(UF),bE]}),n})();function CE(n,e,t,r,i,s,a){try{var l=n[s](a),c=l.value}catch(f){return void t(f)}l.done?e(c):Promise.resolve(c).then(r,i)}function dr(n){return function(){var e=this,t=arguments;return new Promise(function(r,i){var s=n.apply(e,t);function a(c){CE(s,r,i,a,l,"next",c)}function l(c){CE(s,r,i,a,l,"throw",c)}a(void 0)})}}var Rn=Ds(207);function Tl(n,e){const t="object"==typeof e;return new Promise((r,i)=>{const s=new Wt({next:a=>{r(a),s.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new hl)}});n.subscribe(s)})}class EE{}class DE{}class oi{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),a=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof oi?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new oi;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof oi?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let a=this.headers.get(t);if(!a)return;a=a.filter(l=>-1===s.indexOf(l)),0===a.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class GF{encodeKey(e){return SE(e)}encodeValue(e){return SE(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const WF=/%(\d[a-f0-9])/gi,qF={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function SE(n){return encodeURIComponent(n).replace(WF,(e,t)=>qF[t]??e)}function ed(n){return`${n}`}class Ni{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new GF,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function zF(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[a,l]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(a)||[];c.push(l),t.set(a,c)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(ed):[ed(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Ni({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(ed(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(ed(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class KF{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function ME(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function TE(n){return typeof Blob<"u"&&n instanceof Blob}function IE(n){return typeof FormData<"u"&&n instanceof FormData}class Il{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function YF(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new oi),this.context||(this.context=new KF),this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=t;else{const l=t.indexOf("?");this.urlWithParams=t+(-1===l?"?":l<t.length-1?"&":"")+a}}else this.params=new Ni,this.urlWithParams=t}serializeBody(){return null===this.body?null:ME(this.body)||TE(this.body)||IE(this.body)||function QF(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Ni?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||IE(this.body)?null:TE(this.body)?this.body.type||null:ME(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ni?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let c=e.headers||this.headers,f=e.params||this.params;const y=e.context??this.context;return void 0!==e.setHeaders&&(c=Object.keys(e.setHeaders).reduce((_,C)=>_.set(C,e.setHeaders[C]),c)),e.setParams&&(f=Object.keys(e.setParams).reduce((_,C)=>_.set(C,e.setParams[C]),f)),new Il(t,r,s,{params:f,headers:c,context:y,reportProgress:l,responseType:i,withCredentials:a})}}var St=(()=>((St=St||{})[St.Sent=0]="Sent",St[St.UploadProgress=1]="UploadProgress",St[St.ResponseHeader=2]="ResponseHeader",St[St.DownloadProgress=3]="DownloadProgress",St[St.Response=4]="Response",St[St.User=5]="User",St))();class bg{constructor(e,t=200,r="OK"){this.headers=e.headers||new oi,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class wg extends bg{constructor(e={}){super(e),this.type=St.ResponseHeader}clone(e={}){return new wg({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class td extends bg{constructor(e={}){super(e),this.type=St.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new td({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class AE extends bg{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function Cg(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Al=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Il)s=t;else{let c,f;c=i.headers instanceof oi?i.headers:new oi(i.headers),i.params&&(f=i.params instanceof Ni?i.params:new Ni({fromObject:i.params})),s=new Il(t,r,void 0!==i.body?i.body:null,{headers:c,context:i.context,params:f,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const a=ue(s).pipe(Pi(c=>this.handler.handle(c)));if(t instanceof Il||"events"===i.observe)return a;const l=a.pipe(ni(c=>c instanceof td));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(Ce(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return l.pipe(Ce(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return l.pipe(Ce(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new Error("Response is not a string.");return c.body}));default:return l.pipe(Ce(c=>c.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Ni).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Cg(i,r))}post(t,r,i={}){return this.request("POST",t,Cg(i,r))}put(t,r,i={}){return this.request("PUT",t,Cg(i,r))}}return n.\u0275fac=function(t){return new(t||n)(Y(EE))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();class xE{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const RE=new ae("HTTP_INTERCEPTORS");let XF=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const ZF=/^\)\]\}',?\n/;let PE=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new at(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((D,x)=>i.setRequestHeader(D,x.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const D=t.detectContentTypeHeader();null!==D&&i.setRequestHeader("Content-Type",D)}if(t.responseType){const D=t.responseType.toLowerCase();i.responseType="json"!==D?D:"text"}const s=t.serializeBody();let a=null;const l=()=>{if(null!==a)return a;const D=i.statusText||"OK",x=new oi(i.getAllResponseHeaders()),P=function JF(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return a=new wg({headers:x,status:i.status,statusText:D,url:P}),a},c=()=>{let{headers:D,status:x,statusText:P,url:F}=l(),H=null;204!==x&&(H=typeof i.response>"u"?i.responseText:i.response),0===x&&(x=H?200:0);let $=x>=200&&x<300;if("json"===t.responseType&&"string"==typeof H){const B=H;H=H.replace(ZF,"");try{H=""!==H?JSON.parse(H):null}catch(ee){H=B,$&&($=!1,H={error:ee,text:H})}}$?(r.next(new td({body:H,headers:D,status:x,statusText:P,url:F||void 0})),r.complete()):r.error(new AE({error:H,headers:D,status:x,statusText:P,url:F||void 0}))},f=D=>{const{url:x}=l(),P=new AE({error:D,status:i.status||0,statusText:i.statusText||"Unknown Error",url:x||void 0});r.error(P)};let y=!1;const _=D=>{y||(r.next(l()),y=!0);let x={type:St.DownloadProgress,loaded:D.loaded};D.lengthComputable&&(x.total=D.total),"text"===t.responseType&&!!i.responseText&&(x.partialText=i.responseText),r.next(x)},C=D=>{let x={type:St.UploadProgress,loaded:D.loaded};D.lengthComputable&&(x.total=D.total),r.next(x)};return i.addEventListener("load",c),i.addEventListener("error",f),i.addEventListener("timeout",f),i.addEventListener("abort",f),t.reportProgress&&(i.addEventListener("progress",_),null!==s&&i.upload&&i.upload.addEventListener("progress",C)),i.send(s),r.next({type:St.Sent}),()=>{i.removeEventListener("error",f),i.removeEventListener("abort",f),i.removeEventListener("load",c),i.removeEventListener("timeout",f),t.reportProgress&&(i.removeEventListener("progress",_),null!==s&&i.upload&&i.upload.removeEventListener("progress",C)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(Y(Ow))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();const Eg=new ae("XSRF_COOKIE_NAME"),Dg=new ae("XSRF_HEADER_NAME");class kE{}let e2=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Sw(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(Y(nt),Y(cc),Y(Eg))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),Sg=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Y(kE),Y(Dg))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),t2=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(RE,[]);this.chain=r.reduceRight((i,s)=>new xE(i,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(Y(DE),Y(An))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),n2=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Sg,useClass:XF}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Eg,useValue:t.cookieName}:[],t.headerName?{provide:Dg,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=ft({providers:[Sg,{provide:RE,useExisting:Sg,multi:!0},{provide:kE,useClass:e2},{provide:Eg,useValue:"XSRF-TOKEN"},{provide:Dg,useValue:"X-XSRF-TOKEN"}]}),n})(),r2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=ft({providers:[Al,{provide:EE,useClass:t2},PE,{provide:DE,useExisting:PE}],imports:[n2.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),n})(),s2=(()=>{class n{constructor(t){this.http=t,this.port=8081,this.url=`http://localhost:${this.port}/server/`}intialize(t,r){var i=this;return dr(function*(){return yield Tl(i.http.post(i.url+"initialize/"+t,r))})()}update(){var t=this;return dr(function*(){return yield Tl(t.http.post(t.url+"update",null))})()}queuesCount(){var t=this;return dr(function*(){return yield Tl(t.http.post(t.url+"queues",null))})()}finished(){var t=this;return dr(function*(){return yield Tl(t.http.post(t.url+"finished",null))})()}stop(){var t=this;return dr(function*(){return yield Tl(t.http.post(t.url+"stop",null))})()}}return n.\u0275fac=function(t){return new(t||n)(Y(Al))},n.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),o2=(()=>{class n{constructor(){this.simulationStages=[]}saveStage(t){var r=this;return dr(function*(){r.simulationStages.push({stage:t.toJSON(),time:Date.now()})})()}getReplayStages(){return this.simulationStages}replaySimulation(t,r){var i=this;return dr(function*(){for(let s=0;s<i.simulationStages.length;s++){let a=i.simulationStages[s];Rn.default.Node.create(a.stage,"konva-holder");let l=a.time;if(s<i.simulationStages.length-1){let f=i.simulationStages[s+1].time-l;yield new Promise(y=>setTimeout(y,f))}if(!r.getReplayFlag())break}})()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),a2=(()=>{class n{constructor(t){this.http=t,this.machineCount=0,this.queueCount=0,this.systemMachines={frontMachines:[]},this.konvaMachines=[],this.stop=!1,this.queues=[],this.replayFlag=!1,this.serverCaller=new s2(this.http)}ngOnInit(){var t=document.querySelector("#holder");null!=t&&(this.myStage=new Rn.default.Stage({width:t?.clientWidth-10,height:t?.clientHeight,container:"konva-holder"})),this.board=new Rn.default.Layer,this.myStage.add(this.board)}rectangle(t){var r=new Rn.default.Group({x:25,y:25,width:40,height:70,draggable:!0});r.add(new Rn.default.Rect({fill:"yellow",height:40,width:70,stroke:"black",strokeWidth:2})),r.add(new Rn.default.Text({text:t,fontSize:18,fontFamily:"Calibri",fill:"#000",width:70,padding:10,align:"center"})),console.log(r.getChildren()),this.board.add(r),this.queues.push(r)}circle(t){var r=new Rn.default.Group({x:30,y:30,width:60,height:60,draggable:!0}),i=new Rn.default.Circle({fill:"gray",radius:30,stroke:"black",strokeWidth:2});r.add(i),r.add(new Rn.default.Text({text:t,fontSize:18,x:-12,y:-15,fontFamily:"Calibri",fill:"#000",align:"center"})),this.board.add(r),this.konvaMachines.push(i),console.log(this.konvaMachines)}arrow(t,r,i,s){const a=new Rn.default.Arrow({points:[t,r,i,s],fill:"black",stroke:"black",strokeWidth:2});return this.board.add(a),a}createMachine(){this.machineCount++,this.circle("M"+this.machineCount)}createQueue(){this.rectangle("Q"+this.queueCount),this.queueCount++}createArrow(){let l,t=0,r=0,i=0,s=0,a=0,c=this;this.myStage.on("click",function(){var f=dr(function*(y){if(0==a){let _=y.target;l=_.getParent().getAttr("Children")[1].getAttr("text"),console.log(l),_.getParent().setAttr("draggable",!1),t=c.myStage.getPointerPosition().x,r=c.myStage.getPointerPosition().y,a++}else if(1==a){let _=y.target,C=_.getParent().getAttr("Children")[1].getAttr("text");console.log(C),_.getParent().setAttr("draggable",!1),i=c.myStage.getPointerPosition().x,s=c.myStage.getPointerPosition().y,a++,c.arrow(t,r,i,s),c.generateSystem(l,C),console.log(l[1],C[1])}});return function(y){return f.apply(this,arguments)}}())}generateSystem(t,r){let i=t[1],s=r[1];if(t.includes("Q")){let a={previousQueueID:Number(i),machineID:Number(s),nextQueueID:0};this.systemMachines.frontMachines.push(a),console.log(this.systemMachines.frontMachines)}else{for(let a of this.systemMachines.frontMachines)a.machineID==Number(i)&&(a.nextQueueID=Number(s),console.log(a));console.log(this.systemMachines.frontMachines)}}clear(){this.queueCount=0,this.machineCount=0;var t=document.querySelector("#holder");null!=t&&(this.myStage=new Rn.default.Stage({width:t?.clientWidth-10,height:t?.clientHeight,container:"konva-holder"})),this.board=new Rn.default.Layer,this.myStage.add(this.board),this.konvaMachines=[],this.systemMachines.frontMachines=[],this.stop=!1,this.queues=[],this.replayFlag=!1}smiulate(){var t=this;return dr(function*(){t.careTaker=new o2;let r=Number(document.getElementById("numberOfProducts").value);yield t.serverCaller.intialize(r,t.systemMachines),yield t.careTaker.saveStage(t.myStage);let i=!1;for(;!t.stop&&!i;){let s=yield t.serverCaller.update(),a=yield t.serverCaller.queuesCount();i=yield t.serverCaller.finished(),t.stop||(t.setQueuesCount(a),t.color(s),yield t.careTaker.saveStage(t.myStage))}})()}Stop(){var t=this;return dr(function*(){t.stop=!0,t.replayFlag?t.replayFlag=!1:yield t.serverCaller.stop()})()}setQueuesCount(t){let r=0;for(let i of this.queues)i.getChildren().pop(),i.add(new Rn.default.Text({text:`Q${r}: ${t[r]}`,fontSize:18,fontFamily:"Calibri",fill:"#000",width:70,padding:10,align:"center"})),r++}color(t){let r=0;for(let i of this.konvaMachines)i.setAttr("fill",t[r]),r++}getReplayFlag(){return this.replayFlag}replay(){var t=this;return dr(function*(){t.replayFlag=!0,t.careTaker.replaySimulation(t.myStage,t)})()}}return n.\u0275fac=function(t){return new(t||n)(le(Al))},n.\u0275cmp=on({type:n,selectors:[["app-main-page"]],decls:43,vars:0,consts:[[1,"container"],[1,"header"],[1,"options"],[3,"click"],[1,"prodsCount"],["id","numberOfProducts","type","number"],["id","holder",1,"board"],["id","konva-holder"],[1,"footer"]],template:function(t,r){1&t&&(wt(0,"div",0)(1,"div",1)(2,"h1"),Xt(3,"Producer Consumer Simulator - Web Application"),Ct()(),wt(4,"div",2)(5,"div")(6,"div")(7,"button",3),rr("click",function(){return r.createMachine()}),Xt(8,"Machine"),Ct()(),wt(9,"div")(10,"button",3),rr("click",function(){return r.createQueue()}),Xt(11,"Queue"),Ct()(),wt(12,"div")(13,"button",3),rr("click",function(){return r.smiulate()}),Xt(14,"Simulate"),Ct()(),wt(15,"div")(16,"button",3),rr("click",function(){return r.clear()}),Xt(17,"Clear"),Ct()(),wt(18,"div")(19,"button",3),rr("click",function(){return r.replay()}),Xt(20,"Replay"),Ct()(),wt(21,"div")(22,"button",3),rr("click",function(){return r.createArrow()}),Xt(23,"Join"),Ct()(),wt(24,"div")(25,"button",3),rr("click",function(){return r.Stop()}),Xt(26,"Stop"),Ct()(),wt(27,"div",4)(28,"p"),Xt(29,"# Products:"),Ct(),Eo(30,"input",5),Ct()()(),wt(31,"div",6),Eo(32,"div",7),Ct(),wt(33,"div",8),Xt(34," Designed & Implemented By: "),wt(35,"p"),Xt(36,"Maria Bassem,"),Ct(),wt(37,"p"),Xt(38,"Mariam Aziz,"),Ct(),wt(39,"p"),Xt(40,"Eman Samir,"),Ct(),wt(41,"p"),Xt(42,"George Beshay."),Ct()()())},styles:[".container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(12,1fr);grid-template-rows:repeat(11,1fr) .5fr;width:100%;height:100vh;font-family:Aboreto}.header[_ngcontent-%COMP%]{grid-area:1 / 1 / 2 / 13;text-align:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-top:10px}.options[_ngcontent-%COMP%]{grid-area:2 / 1 / 3 / 13;background-color:#adb5bd;display:flex;justify-content:center;align-items:center;gap:20px;color:#000;font-weight:700;padding-inline:5px}.options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.status){text-align:center;display:flex;justify-content:center;align-items:center;gap:10px}.prodsCount[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.prodsCount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:#495057;border:1px solid black;height:100%;padding:10px;transition-duration:.1s;margin-left:5px;color:#fff;font-family:Aboreto;font-weight:600}.prodsCount[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.options[_ngcontent-%COMP%] > .status[_ngcontent-%COMP%]{margin-left:250px;text-align:center}.board[_ngcontent-%COMP%]{grid-area:3 / 1 / 12 / 13;background-color:#343a40;margin:5px;border-radius:7px}.footer[_ngcontent-%COMP%]{grid-area:12 / 1 / 13 / 13;background-color:#495057;display:flex;align-items:center;font-size:14px;padding-inline:5px}.footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-inline:3px;font-size:17px;font-weight:900}button[_ngcontent-%COMP%]{font-weight:700;font-size:15px;padding:5px 10px}#konva-holder[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;overflow:hidden}"]}),n})(),l2=(()=>{class n{constructor(){this.title="PCS_FrontEnd"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=on({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&Eo(0,"app-main-page")},dependencies:[a2]}),n})();typeof window<"u"&&!window.Konva&&Ds(207);let f2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=ft({imports:[Pw]}),n})();class LE{}const ai="*";function BE(n,e=null){return{type:2,steps:n,options:e}}function jE(n){return{type:6,styles:n,offset:null}}function HE(n){Promise.resolve().then(n)}class xl{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){HE(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class VE{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?HE(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++t==s&&this._onFinish()}),a.onDestroy(()=>{++r==s&&this._onDestroy()}),a.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((a,l)=>Math.max(a,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function UE(n){return new V(3e3,!1)}function Y2(){return typeof window<"u"&&typeof window.document<"u"}function Ig(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Oi(n){switch(n.length){case 0:return new xl;case 1:return n[0];default:return new VE(n)}}function $E(n,e,t,r,i=new Map,s=new Map){const a=[],l=[];let c=-1,f=null;if(r.forEach(y=>{const _=y.get("offset"),C=_==c,D=C&&f||new Map;y.forEach((x,P)=>{let F=P,H=x;if("offset"!==P)switch(F=e.normalizePropertyName(F,a),H){case"!":H=i.get(P);break;case ai:H=s.get(P);break;default:H=e.normalizeStyleValue(P,F,H,a)}D.set(F,H)}),C||l.push(D),f=D,c=_}),a.length)throw function L2(n){return new V(3502,!1)}();return l}function Ag(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&xg(t,"start",n)));break;case"done":n.onDone(()=>r(t&&xg(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&xg(t,"destroy",n)))}}function xg(n,e,t){const s=Rg(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),a=n._data;return null!=a&&(s._data=a),s}function Rg(n,e,t,r,i="",s=0,a){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!a}}function Pn(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function GE(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let Pg=(n,e)=>!1,zE=(n,e,t)=>[],WE=null;function kg(n){const e=n.parentNode||n.host;return e===WE?null:e}(Ig()||typeof Element<"u")&&(Y2()?(WE=(()=>document.documentElement)(),Pg=(n,e)=>{for(;e;){if(e===n)return!0;e=kg(e)}return!1}):Pg=(n,e)=>n.contains(e),zE=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let vs=null,qE=!1;const KE=Pg,YE=zE;let QE=(()=>{class n{validateStyleProperty(t){return function X2(n){vs||(vs=function Z2(){return typeof document<"u"?document.body:null}()||{},qE=!!vs.style&&"WebkitAppearance"in vs.style);let e=!0;return vs.style&&!function Q2(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in vs.style,!e&&qE&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in vs.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return KE(t,r)}getParentElement(t){return kg(t)}query(t,r,i){return YE(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,a,l=[],c){return new xl(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})(),Ng=(()=>{class n{}return n.NOOP=new QE,n})();const Og="ng-enter",nd="ng-leave",rd="ng-trigger",id=".ng-trigger",ZE="ng-animating",Fg=".ng-animating";function li(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Lg(parseFloat(e[1]),e[2])}function Lg(n,e){return"s"===e?1e3*n:n}function sd(n,e,t){return n.hasOwnProperty("duration")?n:function tL(n,e,t){let i,s=0,a="";if("string"==typeof n){const l=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===l)return e.push(UE()),{duration:0,delay:0,easing:""};i=Lg(parseFloat(l[1]),l[2]);const c=l[3];null!=c&&(s=Lg(parseFloat(c),l[4]));const f=l[5];f&&(a=f)}else i=n;if(!t){let l=!1,c=e.length;i<0&&(e.push(function g2(){return new V(3100,!1)}()),l=!0),s<0&&(e.push(function m2(){return new V(3101,!1)}()),l=!0),l&&e.splice(c,0,UE())}return{duration:i,delay:s,easing:a}}(n,e,t)}function Rl(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function JE(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function Fi(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function tD(n,e,t){return t?e+":"+t+";":""}function nD(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=tD(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=tD(0,sL(t),n.style[t]));n.setAttribute("style",e)}function xr(n,e,t){n.style&&(e.forEach((r,i)=>{const s=jg(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),Ig()&&nD(n))}function _s(n,e){n.style&&(e.forEach((t,r)=>{const i=jg(r);n.style[i]=""}),Ig()&&nD(n))}function Pl(n){return Array.isArray(n)?1==n.length?n[0]:BE(n):n}const Bg=new RegExp("{{\\s*(.+?)\\s*}}","g");function rD(n){let e=[];if("string"==typeof n){let t;for(;t=Bg.exec(n);)e.push(t[1]);Bg.lastIndex=0}return e}function kl(n,e,t){const r=n.toString(),i=r.replace(Bg,(s,a)=>{let l=e[a];return null==l&&(t.push(function v2(n){return new V(3003,!1)}()),l=""),l.toString()});return i==r?n:i}function od(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const iL=/-+([a-z0-9])/g;function jg(n){return n.replace(iL,(...e)=>e[1].toUpperCase())}function sL(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function kn(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function _2(n){return new V(3004,!1)}()}}function iD(n,e){return window.getComputedStyle(n)[e]}function dL(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function hL(n,e,t){if(":"==n[0]){const c=function fL(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function k2(n){return new V(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof c)return void e.push(c);n=c}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function P2(n){return new V(3015,!1)}()),e;const i=r[1],s=r[2],a=r[3];e.push(sD(i,a));"<"==s[0]&&!("*"==i&&"*"==a)&&e.push(sD(a,i))}(r,t,e)):t.push(n),t}const cd=new Set(["true","1"]),dd=new Set(["false","0"]);function sD(n,e){const t=cd.has(n)||dd.has(n),r=cd.has(e)||dd.has(e);return(i,s)=>{let a="*"==n||n==i,l="*"==e||e==s;return!a&&t&&"boolean"==typeof i&&(a=i?cd.has(n):dd.has(n)),!l&&r&&"boolean"==typeof s&&(l=s?cd.has(e):dd.has(e)),a&&l}}const pL=new RegExp("s*:selfs*,?","g");function Hg(n,e,t,r){return new gL(n).build(e,t,r)}class gL{constructor(e){this._driver=e}build(e,t,r){const i=new vL(t);return this._resetContextStyleTimingState(i),kn(this,Pl(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],a=[];return"@"==e.name.charAt(0)&&t.errors.push(function w2(){return new V(3006,!1)}()),e.definitions.forEach(l=>{if(this._resetContextStyleTimingState(t),0==l.type){const c=l,f=c.name;f.toString().split(/\s*,\s*/).forEach(y=>{c.name=y,s.push(this.visitState(c,t))}),c.name=f}else if(1==l.type){const c=this.visitTransition(l,t);r+=c.queryCount,i+=c.depCount,a.push(c)}else t.errors.push(function C2(){return new V(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:a,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,a=i||{};r.styles.forEach(l=>{l instanceof Map&&l.forEach(c=>{rD(c).forEach(f=>{a.hasOwnProperty(f)||s.add(f)})})}),s.size&&(od(s.values()),t.errors.push(function E2(n,e){return new V(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=kn(this,Pl(e.animation),t);return{type:1,matchers:dL(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:bs(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>kn(this,r,t)),options:bs(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(a=>{t.currentTime=r;const l=kn(this,a,t);return i=Math.max(i,t.currentTime),l});return t.currentTime=i,{type:3,steps:s,options:bs(e.options)}}visitAnimate(e,t){const r=function bL(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Vg(sd(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Vg(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=sd(t,e);return Vg(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:jE({});if(5==s.type)i=this.visitKeyframes(s,t);else{let a=e.styles,l=!1;if(!a){l=!0;const f={};r.easing&&(f.easing=r.easing),a=jE(f)}t.currentTime+=r.duration+r.delay;const c=this.visitStyle(a,t);c.isEmptyStep=l,i=c}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let l of i)"string"==typeof l?l===ai?r.push(l):t.errors.push(new V(3002,!1)):r.push(JE(l));let s=!1,a=null;return r.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(a=l.get("easing"),l.delete("easing")),!s))for(let c of l.values())if(c.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(a=>{"string"!=typeof a&&a.forEach((l,c)=>{const f=t.collectedStyles.get(t.currentQuerySelector),y=f.get(c);let _=!0;y&&(s!=i&&s>=y.startTime&&i<=y.endTime&&(t.errors.push(function S2(n,e,t,r,i){return new V(3010,!1)}()),_=!1),s=y.startTime),_&&f.set(c,{startTime:s,endTime:i}),t.options&&function rL(n,e,t){const r=e.params||{},i=rD(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function y2(n){return new V(3001,!1)}())})}(l,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function M2(){return new V(3011,!1)}()),r;let s=0;const a=[];let l=!1,c=!1,f=0;const y=e.steps.map(H=>{const $=this._makeStyleAst(H,t);let B=null!=$.offset?$.offset:function _L(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}($.styles),ee=0;return null!=B&&(s++,ee=$.offset=B),c=c||ee<0||ee>1,l=l||ee<f,f=ee,a.push(ee),$});c&&t.errors.push(function T2(){return new V(3012,!1)}()),l&&t.errors.push(function I2(){return new V(3200,!1)}());const _=e.steps.length;let C=0;s>0&&s<_?t.errors.push(function A2(){return new V(3202,!1)}()):0==s&&(C=1/(_-1));const D=_-1,x=t.currentTime,P=t.currentAnimateTimings,F=P.duration;return y.forEach((H,$)=>{const B=C>0?$==D?1:C*$:a[$],ee=B*F;t.currentTime=x+P.delay+ee,P.duration=ee,this._validateStyleAst(H,t),H.offset=B,r.styles.push(H)}),r}visitReference(e,t){return{type:8,animation:kn(this,Pl(e.animation),t),options:bs(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:bs(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:bs(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,a]=function mL(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(pL,"")),n=n.replace(/@\*/g,id).replace(/@\w+/g,t=>id+"-"+t.slice(1)).replace(/:animating/g,Fg),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Pn(t.collectedStyles,t.currentQuerySelector,new Map);const l=kn(this,Pl(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:a,animation:l,originalSelector:e.selector,options:bs(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function x2(){return new V(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:sd(e.timings,t.errors,!0);return{type:12,animation:kn(this,Pl(e.animation),t),timings:r,options:null}}}class vL{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function bs(n){return n?(n=Rl(n)).params&&(n.params=function yL(n){return n?Rl(n):null}(n.params)):n={},n}function Vg(n,e,t){return{duration:n,delay:e,easing:t}}function Ug(n,e,t,r,i,s,a=null,l=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:a,subTimeline:l}}class hd{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const EL=new RegExp(":enter","g"),SL=new RegExp(":leave","g");function $g(n,e,t,r,i,s=new Map,a=new Map,l,c,f=[]){return(new ML).buildKeyframes(n,e,t,r,i,s,a,l,c,f)}class ML{buildKeyframes(e,t,r,i,s,a,l,c,f,y=[]){f=f||new hd;const _=new Gg(e,t,f,i,s,y,[]);_.options=c;const C=c.delay?li(c.delay):0;_.currentTimeline.delayNextStep(C),_.currentTimeline.setStyles([a],null,_.errors,c),kn(this,r,_);const D=_.timelines.filter(x=>x.containsAnimation());if(D.length&&l.size){let x;for(let P=D.length-1;P>=0;P--){const F=D[P];if(F.element===t){x=F;break}}x&&!x.allowOnlyTimelineStyles()&&x.setStyles([l],null,_.errors,c)}return D.length?D.map(x=>x.buildKeyframes()):[Ug(t,[],[],[],0,C,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,a=this._visitSubInstructions(r,i,i.options);s!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const a="number"==typeof s?s:li(kl(s,i?.params??{},t.errors));r.delayNextStep(a)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const a=null!=r.duration?li(r.duration):null,l=null!=r.delay?li(r.delay):null;return 0!==a&&e.forEach(c=>{const f=t.appendInstructionToTimeline(c,a,l);s=Math.max(s,f.duration+f.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),kn(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=fd);const a=li(s.delay);i.delayNextStep(a)}e.steps.length&&(e.steps.forEach(a=>kn(this,a,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?li(e.options.delay):0;e.steps.forEach(a=>{const l=t.createSubContext(e.options);s&&l.delayNextStep(s),kn(this,a,l),i=Math.max(i,l.currentTimeline.currentTime),r.push(l.currentTimeline)}),r.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return sd(t.params?kl(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,l=t.createSubContext().currentTimeline;l.easing=r.easing,e.styles.forEach(c=>{l.forwardTime((c.offset||0)*s),l.setStyles(c.styles,c.easing,t.errors,t.options),l.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(l),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?li(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=fd);let a=r;const l=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=l.length;let c=null;l.forEach((f,y)=>{t.currentQueryIndex=y;const _=t.createSubContext(e.options,f);s&&_.delayNextStep(s),f===t.element&&(c=_.currentTimeline),kn(this,e.animation,_),_.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,_.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),c&&(t.currentTimeline.mergeTimelineCollectedStyles(c),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,a=Math.abs(s.duration),l=a*(t.currentQueryTotal-1);let c=a*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":c=l-c;break;case"full":c=r.currentStaggerTime}const y=t.currentTimeline;c&&y.delayNextStep(c);const _=y.currentTime;kn(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-_+(i.startTime-r.currentTimeline.startTime)}}const fd={};class Gg{constructor(e,t,r,i,s,a,l,c){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=a,this.timelines=l,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=fd,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=c||new pd(this._driver,t,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=li(r.duration)),null!=r.delay&&(i.delay=li(r.delay));const s=r.params;if(s){let a=i.params;a||(a=this.options.params={}),Object.keys(s).forEach(l=>{(!t||!a.hasOwnProperty(l))&&(a[l]=kl(s[l],a,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new Gg(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=fd,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new TL(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,a){let l=[];if(i&&l.push(this.element),e.length>0){e=(e=e.replace(EL,"."+this._enterClassName)).replace(SL,"."+this._leaveClassName);let f=this._driver.query(this.element,e,1!=r);0!==r&&(f=r<0?f.slice(f.length+r,f.length):f.slice(0,r)),l.push(...f)}return!s&&0==l.length&&a.push(function R2(n){return new V(3014,!1)}()),l}}class pd{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new pd(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||ai),this._currentKeyframe.set(t,ai);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},a=function IL(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,ai)}else Fi(i,t)}),t}(e,this._globalTimelineStyles);for(let[l,c]of a){const f=kl(c,s,r);this._pendingStyles.set(l,f),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??ai),this._updateStyle(l,f)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((l,c)=>{const f=Fi(l,new Map,this._backFill);f.forEach((y,_)=>{"!"===y?e.add(_):y===ai&&t.add(_)}),r||f.set("offset",c/this.duration),i.push(f)});const s=e.size?od(e.values()):[],a=t.size?od(t.values()):[];if(r){const l=i[0],c=new Map(l);l.set("offset",0),c.set("offset",1),i=[l,c]}return Ug(this.element,i,s,a,this.duration,this.startTime,this.easing,!1)}}class TL extends pd{constructor(e,t,r,i,s,a,l=!1){super(e,t,a.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=l,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],a=r+t,l=t/a,c=Fi(e[0]);c.set("offset",0),s.push(c);const f=Fi(e[0]);f.set("offset",lD(l)),s.push(f);const y=e.length-1;for(let _=1;_<=y;_++){let C=Fi(e[_]);const D=C.get("offset");C.set("offset",lD((t+D*r)/a)),s.push(C)}r=a,t=0,i="",e=s}return Ug(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function lD(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class zg{}const AL=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class xL extends zg{normalizePropertyName(e,t){return jg(e)}normalizeStyleValue(e,t,r,i){let s="";const a=r.toString().trim();if(AL.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const l=r.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&0==l[1].length&&i.push(function b2(n,e){return new V(3005,!1)}())}return a+s}}function uD(n,e,t,r,i,s,a,l,c,f,y,_,C){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:a,timelines:l,queriedElements:c,preStyleProps:f,postStyleProps:y,totalTime:_,errors:C}}const Wg={};class cD{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function RL(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,a,l,c,f,y){const _=[],C=this.ast.options&&this.ast.options.params||Wg,x=this.buildStyles(r,l&&l.params||Wg,_),P=c&&c.params||Wg,F=this.buildStyles(i,P,_),H=new Set,$=new Map,B=new Map,ee="void"===i,Ie={params:PL(P,C),delay:this.ast.options?.delay},Be=y?[]:$g(e,t,this.ast.animation,s,a,x,F,Ie,f,_);let ct=0;if(Be.forEach(On=>{ct=Math.max(On.duration+On.delay,ct)}),_.length)return uD(t,this._triggerName,r,i,ee,x,F,[],[],$,B,ct,_);Be.forEach(On=>{const Fn=On.element,Vo=Pn($,Fn,new Set);On.preStyleProps.forEach(fr=>Vo.add(fr));const ui=Pn(B,Fn,new Set);On.postStyleProps.forEach(fr=>ui.add(fr)),Fn!==t&&H.add(Fn)});const Nn=od(H.values());return uD(t,this._triggerName,r,i,ee,x,F,Be,Nn,$,B,ct)}}function PL(n,e){const t=Rl(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class kL{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Rl(this.defaultParams);return Object.keys(e).forEach(s=>{const a=e[s];null!==a&&(i[s]=a)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{a&&(a=kl(a,i,t));const c=this.normalizer.normalizePropertyName(l,t);a=this.normalizer.normalizeStyleValue(l,c,a,t),r.set(c,a)})}),r}}class OL{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new kL(i.style,i.options&&i.options.params||{},r))}),dD(this.states,"true","1"),dD(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new cD(e,i,this.states))}),this.fallbackTransition=function FL(n,e,t){return new cD(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(a,l)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(a=>a.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function dD(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const LL=new hd;class BL{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=Hg(this._driver,t,r,[]);if(r.length)throw function B2(n){return new V(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=$E(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let a;const l=new Map;if(s?(a=$g(this._driver,t,s,Og,nd,new Map,new Map,r,LL,i),a.forEach(y=>{const _=Pn(l,y.element,new Map);y.postStyleProps.forEach(C=>_.set(C,null))})):(i.push(function j2(){return new V(3300,!1)}()),a=[]),i.length)throw function H2(n){return new V(3504,!1)}();l.forEach((y,_)=>{y.forEach((C,D)=>{y.set(D,this._driver.computeStyle(_,D,ai))})});const f=Oi(a.map(y=>{const _=l.get(y.element);return this._buildPlayer(y,new Map,_)}));return this._playersById.set(e,f),f.onDestroy(()=>this.destroy(e)),this.players.push(f),f}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function V2(n){return new V(3301,!1)}();return t}listen(e,t,r,i){const s=Rg(t,"","","");return Ag(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const hD="ng-animate-queued",qg="ng-animate-disabled",$L=[],fD={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},GL={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},zn="__ng_removed";class Kg{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function KL(n){return n??null}(r?e.value:e),r){const s=Rl(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Nl="void",Yg=new Kg(Nl);class zL{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Wn(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function U2(n,e){return new V(3302,!1)}();if(null==r||0==r.length)throw function $2(n){return new V(3303,!1)}();if(!function YL(n){return"start"==n||"done"==n}(r))throw function G2(n,e){return new V(3400,!1)}();const s=Pn(this._elementListeners,e,[]),a={name:t,phase:r,callback:i};s.push(a);const l=Pn(this._engine.statesByElement,e,new Map);return l.has(t)||(Wn(e,rd),Wn(e,rd+"-"+t),l.set(t,Yg)),()=>{this._engine.afterFlush(()=>{const c=s.indexOf(a);c>=0&&s.splice(c,1),this._triggers.has(t)||l.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function z2(n){return new V(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),a=new Qg(this.id,t,e);let l=this._engine.statesByElement.get(e);l||(Wn(e,rd),Wn(e,rd+"-"+t),this._engine.statesByElement.set(e,l=new Map));let c=l.get(t);const f=new Kg(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&c&&f.absorbOptions(c.options),l.set(t,f),c||(c=Yg),f.value!==Nl&&c.value===f.value){if(!function ZL(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(c.params,f.params)){const P=[],F=s.matchStyles(c.value,c.params,P),H=s.matchStyles(f.value,f.params,P);P.length?this._engine.reportError(P):this._engine.afterFlush(()=>{_s(e,F),xr(e,H)})}return}const C=Pn(this._engine.playersByElement,e,[]);C.forEach(P=>{P.namespaceId==this.id&&P.triggerName==t&&P.queued&&P.destroy()});let D=s.matchTransition(c.value,f.value,e,f.params),x=!1;if(!D){if(!i)return;D=s.fallbackTransition,x=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:D,fromState:c,toState:f,player:a,isFallbackTransition:x}),x||(Wn(e,hD),a.onStart(()=>{Bo(e,hD)})),a.onDone(()=>{let P=this.players.indexOf(a);P>=0&&this.players.splice(P,1);const F=this._engine.playersByElement.get(e);if(F){let H=F.indexOf(a);H>=0&&F.splice(H,1)}}),this.players.push(a),C.push(a),a}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,id,!0);r.forEach(i=>{if(i[zn])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(a=>a.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),a=new Map;if(s){const l=[];if(s.forEach((c,f)=>{if(a.set(f,c.value),this._triggers.has(f)){const y=this.trigger(e,f,Nl,i);y&&l.push(y)}}),l.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,a),r&&Oi(l).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const a=s.name;if(i.has(a))return;i.add(a);const c=this._triggers.get(a).fallbackTransition,f=r.get(a)||Yg,y=new Kg(Nl),_=new Qg(this.id,a,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:a,transition:c,fromState:f,toState:y,player:_,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let a=e;for(;a=a.parentNode;)if(r.statesByElement.get(a)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[zn];(!s||s===fD)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Wn(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,a=this._elementListeners.get(s);a&&a.forEach(l=>{if(l.name==r.triggerName){const c=Rg(s,r.triggerName,r.fromState.value,r.toState.value);c._data=e,Ag(r.player,l.phase,c,l.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,a=i.transition.ast.depCount;return 0==s||0==a?s-a:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class WL{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new zL(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let a=!1,l=this.driver.getParentElement(t);for(;l;){const c=i.get(l);if(c){const f=r.indexOf(c);r.splice(f+1,0,e),a=!0;break}l=this.driver.getParentElement(l)}a||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(gd(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!gd(t))return;const s=t[zn];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){const a=this._fetchNamespace(e);a&&a.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Wn(e,qg)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Bo(e,qg))}removeNode(e,t,r,i){if(gd(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const a=this.namespacesByHostElement.get(t);a&&a.id!==e&&a.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[zn]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return gd(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,id,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Fg,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Oi(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[zn];if(t&&t.setForRemoval){if(e[zn]=fD,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(qg)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Wn(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Oi(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function W2(n){return new V(3402,!1)}()}_flushAnimations(e,t){const r=new hd,i=[],s=new Map,a=[],l=new Map,c=new Map,f=new Map,y=new Set;this.disabledNodes.forEach(re=>{y.add(re);const he=this.driver.query(re,".ng-animate-queued",!0);for(let ve=0;ve<he.length;ve++)y.add(he[ve])});const _=this.bodyNode,C=Array.from(this.statesByElement.keys()),D=mD(C,this.collectedEnterElements),x=new Map;let P=0;D.forEach((re,he)=>{const ve=Og+P++;x.set(he,ve),re.forEach(Ue=>Wn(Ue,ve))});const F=[],H=new Set,$=new Set;for(let re=0;re<this.collectedLeaveElements.length;re++){const he=this.collectedLeaveElements[re],ve=he[zn];ve&&ve.setForRemoval&&(F.push(he),H.add(he),ve.hasAnimation?this.driver.query(he,".ng-star-inserted",!0).forEach(Ue=>H.add(Ue)):$.add(he))}const B=new Map,ee=mD(C,Array.from(H));ee.forEach((re,he)=>{const ve=nd+P++;B.set(he,ve),re.forEach(Ue=>Wn(Ue,ve))}),e.push(()=>{D.forEach((re,he)=>{const ve=x.get(he);re.forEach(Ue=>Bo(Ue,ve))}),ee.forEach((re,he)=>{const ve=B.get(he);re.forEach(Ue=>Bo(Ue,ve))}),F.forEach(re=>{this.processLeaveNode(re)})});const Ie=[],Be=[];for(let re=this._namespaceList.length-1;re>=0;re--)this._namespaceList[re].drainQueuedTransitions(t).forEach(ve=>{const Ue=ve.player,jt=ve.element;if(Ie.push(Ue),this.collectedEnterElements.length){const Jt=jt[zn];if(Jt&&Jt.setForMove){if(Jt.previousTriggersValues&&Jt.previousTriggersValues.has(ve.triggerName)){const Es=Jt.previousTriggersValues.get(ve.triggerName),qn=this.statesByElement.get(ve.element);if(qn&&qn.has(ve.triggerName)){const wd=qn.get(ve.triggerName);wd.value=Es,qn.set(ve.triggerName,wd)}}return void Ue.destroy()}}const Rr=!_||!this.driver.containsElement(_,jt),Ln=B.get(jt),Li=x.get(jt),dt=this._buildInstruction(ve,r,Li,Ln,Rr);if(dt.errors&&dt.errors.length)return void Be.push(dt);if(Rr)return Ue.onStart(()=>_s(jt,dt.fromStyles)),Ue.onDestroy(()=>xr(jt,dt.toStyles)),void i.push(Ue);if(ve.isFallbackTransition)return Ue.onStart(()=>_s(jt,dt.fromStyles)),Ue.onDestroy(()=>xr(jt,dt.toStyles)),void i.push(Ue);const VD=[];dt.timelines.forEach(Jt=>{Jt.stretchStartingKeyframe=!0,this.disabledNodes.has(Jt.element)||VD.push(Jt)}),dt.timelines=VD,r.append(jt,dt.timelines),a.push({instruction:dt,player:Ue,element:jt}),dt.queriedElements.forEach(Jt=>Pn(l,Jt,[]).push(Ue)),dt.preStyleProps.forEach((Jt,Es)=>{if(Jt.size){let qn=c.get(Es);qn||c.set(Es,qn=new Set),Jt.forEach((wd,sm)=>qn.add(sm))}}),dt.postStyleProps.forEach((Jt,Es)=>{let qn=f.get(Es);qn||f.set(Es,qn=new Set),Jt.forEach((wd,sm)=>qn.add(sm))})});if(Be.length){const re=[];Be.forEach(he=>{re.push(function q2(n,e){return new V(3505,!1)}())}),Ie.forEach(he=>he.destroy()),this.reportError(re)}const ct=new Map,Nn=new Map;a.forEach(re=>{const he=re.element;r.has(he)&&(Nn.set(he,he),this._beforeAnimationBuild(re.player.namespaceId,re.instruction,ct))}),i.forEach(re=>{const he=re.element;this._getPreviousPlayers(he,!1,re.namespaceId,re.triggerName,null).forEach(Ue=>{Pn(ct,he,[]).push(Ue),Ue.destroy()})});const On=F.filter(re=>vD(re,c,f)),Fn=new Map;gD(Fn,this.driver,$,f,ai).forEach(re=>{vD(re,c,f)&&On.push(re)});const ui=new Map;D.forEach((re,he)=>{gD(ui,this.driver,new Set(re),c,"!")}),On.forEach(re=>{const he=Fn.get(re),ve=ui.get(re);Fn.set(re,new Map([...Array.from(he?.entries()??[]),...Array.from(ve?.entries()??[])]))});const fr=[],Uo=[],$o={};a.forEach(re=>{const{element:he,player:ve,instruction:Ue}=re;if(r.has(he)){if(y.has(he))return ve.onDestroy(()=>xr(he,Ue.toStyles)),ve.disabled=!0,ve.overrideTotalTime(Ue.totalTime),void i.push(ve);let jt=$o;if(Nn.size>1){let Ln=he;const Li=[];for(;Ln=Ln.parentNode;){const dt=Nn.get(Ln);if(dt){jt=dt;break}Li.push(Ln)}Li.forEach(dt=>Nn.set(dt,jt))}const Rr=this._buildAnimation(ve.namespaceId,Ue,ct,s,ui,Fn);if(ve.setRealPlayer(Rr),jt===$o)fr.push(ve);else{const Ln=this.playersByElement.get(jt);Ln&&Ln.length&&(ve.parentPlayer=Oi(Ln)),i.push(ve)}}else _s(he,Ue.fromStyles),ve.onDestroy(()=>xr(he,Ue.toStyles)),Uo.push(ve),y.has(he)&&i.push(ve)}),Uo.forEach(re=>{const he=s.get(re.element);if(he&&he.length){const ve=Oi(he);re.setRealPlayer(ve)}}),i.forEach(re=>{re.parentPlayer?re.syncPlayerEvents(re.parentPlayer):re.destroy()});for(let re=0;re<F.length;re++){const he=F[re],ve=he[zn];if(Bo(he,nd),ve&&ve.hasAnimation)continue;let Ue=[];if(l.size){let Rr=l.get(he);Rr&&Rr.length&&Ue.push(...Rr);let Ln=this.driver.query(he,Fg,!0);for(let Li=0;Li<Ln.length;Li++){let dt=l.get(Ln[Li]);dt&&dt.length&&Ue.push(...dt)}}const jt=Ue.filter(Rr=>!Rr.destroyed);jt.length?QL(this,he,jt):this.processLeaveNode(he)}return F.length=0,fr.forEach(re=>{this.players.push(re),re.onDone(()=>{re.destroy();const he=this.players.indexOf(re);this.players.splice(he,1)}),re.play()}),fr}elementContainsData(e,t){let r=!1;const i=t[zn];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let a=[];if(t){const l=this.playersByQueriedElement.get(e);l&&(a=l)}else{const l=this.playersByElement.get(e);if(l){const c=!s||s==Nl;l.forEach(f=>{f.queued||!c&&f.triggerName!=i||a.push(f)})}}return(r||i)&&(a=a.filter(l=>!(r&&r!=l.namespaceId||i&&i!=l.triggerName))),a}_beforeAnimationBuild(e,t,r){const s=t.element,a=t.isRemovalTransition?void 0:e,l=t.isRemovalTransition?void 0:t.triggerName;for(const c of t.timelines){const f=c.element,y=f!==s,_=Pn(r,f,[]);this._getPreviousPlayers(f,y,a,l,t.toState).forEach(D=>{const x=D.getRealPlayer();x.beforeDestroy&&x.beforeDestroy(),D.destroy(),_.push(D)})}_s(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,a){const l=t.triggerName,c=t.element,f=[],y=new Set,_=new Set,C=t.timelines.map(x=>{const P=x.element;y.add(P);const F=P[zn];if(F&&F.removedBeforeQueried)return new xl(x.duration,x.delay);const H=P!==c,$=function XL(n){const e=[];return yD(n,e),e}((r.get(P)||$L).map(ct=>ct.getRealPlayer())).filter(ct=>!!ct.element&&ct.element===P),B=s.get(P),ee=a.get(P),Ie=$E(0,this._normalizer,0,x.keyframes,B,ee),Be=this._buildPlayer(x,Ie,$);if(x.subTimeline&&i&&_.add(P),H){const ct=new Qg(e,l,P);ct.setRealPlayer(Be),f.push(ct)}return Be});f.forEach(x=>{Pn(this.playersByQueriedElement,x.element,[]).push(x),x.onDone(()=>function qL(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,x.element,x))}),y.forEach(x=>Wn(x,ZE));const D=Oi(C);return D.onDestroy(()=>{y.forEach(x=>Bo(x,ZE)),xr(c,t.toStyles)}),_.forEach(x=>{Pn(i,x,[]).push(D)}),D}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new xl(e.duration,e.delay)}}class Qg{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new xl,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>Ag(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Pn(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function gd(n){return n&&1===n.nodeType}function pD(n,e){const t=n.style.display;return n.style.display=e??"none",t}function gD(n,e,t,r,i){const s=[];t.forEach(c=>s.push(pD(c)));const a=[];r.forEach((c,f)=>{const y=new Map;c.forEach(_=>{const C=e.computeStyle(f,_,i);y.set(_,C),(!C||0==C.length)&&(f[zn]=GL,a.push(f))}),n.set(f,y)});let l=0;return t.forEach(c=>pD(c,s[l++])),a}function mD(n,e){const t=new Map;if(n.forEach(l=>t.set(l,[])),0==e.length)return t;const i=new Set(e),s=new Map;function a(l){if(!l)return 1;let c=s.get(l);if(c)return c;const f=l.parentNode;return c=t.has(f)?f:i.has(f)?1:a(f),s.set(l,c),c}return e.forEach(l=>{const c=a(l);1!==c&&t.get(c).push(l)}),t}function Wn(n,e){n.classList?.add(e)}function Bo(n,e){n.classList?.remove(e)}function QL(n,e,t){Oi(t).onDone(()=>n.processLeaveNode(e))}function yD(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof VE?yD(r.players,e):e.push(r)}}function vD(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class md{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new WL(e,t,r),this._timelineEngine=new BL(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const a=e+"-"+i;let l=this._triggerCache[a];if(!l){const c=[],y=Hg(this._driver,s,c,[]);if(c.length)throw function F2(n,e){return new V(3404,!1)}();l=function NL(n,e,t){return new OL(n,e,t)}(i,y,this._normalizer),this._triggerCache[a]=l}this._transitionEngine.registerTrigger(t,i,l)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,a]=GE(r);this._timelineEngine.command(s,t,a,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[a,l]=GE(r);return this._timelineEngine.listen(a,t,l,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let eB=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&xr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(xr(this._element,this._initialStyles),this._endStyles&&(xr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(_s(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(_s(this._element,this._endStyles),this._endStyles=null),xr(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Xg(n){let e=null;return n.forEach((t,r)=>{(function tB(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class _D{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:iD(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class nB{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return KE(e,t)}getParentElement(e){return kg(e)}query(e,t,r){return YE(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,a=[]){const c={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(c.easing=s);const f=new Map,y=a.filter(D=>D instanceof _D);(function oL(n,e){return 0===n||0===e})(r,i)&&y.forEach(D=>{D.currentSnapshot.forEach((x,P)=>f.set(P,x))});let _=function nL(n){return n.length?n[0]instanceof Map?n:n.map(e=>JE(e)):[]}(t).map(D=>Fi(D));_=function aL(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,a)=>{r.has(a)||i.push(a),r.set(a,s)}),i.length)for(let s=1;s<e.length;s++){let a=e[s];i.forEach(l=>a.set(l,iD(n,l)))}}return e}(e,_,f);const C=function JL(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=Xg(e[0]),e.length>1&&(r=Xg(e[e.length-1]))):e instanceof Map&&(t=Xg(e)),t||r?new eB(n,t,r):null}(e,_);return new _D(e,_,c,C)}}let rB=(()=>{class n extends LE{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:mn.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?BE(t):t;return bD(this._renderer,null,r,"register",[i]),new iB(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(Y(Ha),Y(nt))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();class iB extends class p2{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new sB(this._id,e,t||{},this._renderer)}}class sB{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return bD(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function bD(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const wD="@.disabled";let oB=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,a)=>{const l=a?.parentNode(s);l&&a.removeChild(l,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let y=this._rendererCache.get(s);return y||(y=new CD("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,y)),y}const a=r.id,l=r.id+"-"+this._currentId;this._currentId++,this.engine.register(l,t);const c=y=>{Array.isArray(y)?y.forEach(c):this.engine.registerTrigger(a,l,t,y.name,y)};return r.data.animation.forEach(c),new aB(this,l,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[a,l]=s;a(l)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(Y(Ha),Y(md),Y(yt))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})();class CD{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==wD?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class aB extends CD{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==wD?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function lB(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),a="";return"@"!=s.charAt(0)&&([s,a]=function uB(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,a,l=>{this.factory.scheduleListenerCallback(l._data||-1,r,l)})}return this.delegate.listen(e,t,r)}}const ED=[{provide:LE,useClass:rB},{provide:zg,useFactory:function dB(){return new xL}},{provide:md,useClass:(()=>{class n extends md{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(Y(nt),Y(Ng),Y(zg),Y(sl))},n.\u0275prov=ie({token:n,factory:n.\u0275fac}),n})()},{provide:Ha,useFactory:function hB(n,e,t){return new oB(n,e,t)},deps:[Rc,md,yt]}],Zg=[{provide:Ng,useFactory:()=>new nB},{provide:L0,useValue:"BrowserAnimations"},...ED],DD=[{provide:Ng,useClass:QE},{provide:L0,useValue:"NoopAnimations"},...ED];let Jg,fB=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?DD:Zg}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=ft({providers:Zg,imports:[eC]}),n})();try{Jg=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Jg=!1}let hr,_B=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function pk(n){return n===kw}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Jg)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(Y(cc))},n.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=ft({}),n})();hr=typeof global<"u"?global:typeof window<"u"?window:{};const AD="cdk-high-contrast-black-on-white",xD="cdk-high-contrast-white-on-black",nm="cdk-high-contrast-active";let PB=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(nm),t.remove(AD),t.remove(xD),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(nm),t.add(AD)):2===r&&(t.add(nm),t.add(xD))}}}return n.\u0275fac=function(t){return new(t||n)(Y(_B),Y(nt))},n.\u0275prov=ie({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=ft({}),n})();const PD=new os("13.0.0"),kD=new os("13.0.0"),OB=new ae("mat-sanity-checks",{providedIn:"root",factory:function NB(){return!0}});let Ho=(()=>{class n{constructor(t,r,i){this._hasDoneGlobalChecks=!1,this._document=i,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=r,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!(!function ER(){return tw=!0,ew}()||function EB(){return typeof hr.__karma__<"u"&&!!hr.__karma__||typeof hr.jasmine<"u"&&!!hr.jasmine||typeof hr.jest<"u"&&!!hr.jest||typeof hr.Mocha<"u"&&!!hr.Mocha}())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const r=getComputedStyle(t);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),t.remove()}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&kD.full!==PD.full&&console.warn("The Angular Material version ("+kD.full+") does not match the Angular CDK version ("+PD.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(t){return new(t||n)(Y(PB),Y(OB,8),Y(nt))},n.\u0275mod=rt({type:n}),n.\u0275inj=ft({imports:[[RD],RD]}),n})(),VB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=ft({imports:[[Ho,bB],Ho]}),n})(),KB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=ft({imports:[[Ho],Ho]}),n})(),YB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=rt({type:n}),n.\u0275inj=ft({imports:[[VB,Ho],Ho]}),n})(),QB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=rt({type:n,bootstrap:[l2]}),n.\u0275inj=ft({imports:[eC,$F,f2,r2,fB,KB,YB]}),n})();(function DR(){if(tw)throw new Error("Cannot enable prod mode after platform setup.");ew=!1})(),nN().bootstrapModule(QB).catch(n=>console.error(n))},207:(Bl,Go,Ds)=>{Ds.r(Go),Ds.d(Go,{default:()=>ba});var Ze=Math.PI/180;const pr=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},ne={_global:pr,version:"8.4.2",isBrowser:function zo(){return typeof window<"u"&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window))}(),isUnminified:/param/.test(function(p){}.toString()),dblClickWindow:400,getAngle:p=>ne.angleDeg?p*Ze:p,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>ne.DD.isDragging,isDragReady:()=>!!ne.DD.node,releaseCanvasOnDestroy:!0,document:pr.document,_injectGlobal(p){pr.Konva=p}},Oe=p=>{ne[p.prototype.getClassName()]=p};ne._injectGlobal(ne);class zt{constructor(o=[1,0,0,1,0,0]){this.dirty=!1,this.m=o&&o.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new zt(this.m)}copyInto(o){o.m[0]=this.m[0],o.m[1]=this.m[1],o.m[2]=this.m[2],o.m[3]=this.m[3],o.m[4]=this.m[4],o.m[5]=this.m[5]}point(o){var u=this.m;return{x:u[0]*o.x+u[2]*o.y+u[4],y:u[1]*o.x+u[3]*o.y+u[5]}}translate(o,u){return this.m[4]+=this.m[0]*o+this.m[2]*u,this.m[5]+=this.m[1]*o+this.m[3]*u,this}scale(o,u){return this.m[0]*=o,this.m[1]*=o,this.m[2]*=u,this.m[3]*=u,this}rotate(o){var u=Math.cos(o),d=Math.sin(o),g=this.m[1]*u+this.m[3]*d,m=this.m[0]*-d+this.m[2]*u,v=this.m[1]*-d+this.m[3]*u;return this.m[0]=this.m[0]*u+this.m[2]*d,this.m[1]=g,this.m[2]=m,this.m[3]=v,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(o,u){var h=this.m[1]+this.m[3]*u,g=this.m[2]+this.m[0]*o,m=this.m[3]+this.m[1]*o;return this.m[0]=this.m[0]+this.m[2]*u,this.m[1]=h,this.m[2]=g,this.m[3]=m,this}multiply(o){var d=this.m[1]*o.m[0]+this.m[3]*o.m[1],h=this.m[0]*o.m[2]+this.m[2]*o.m[3],g=this.m[1]*o.m[2]+this.m[3]*o.m[3],m=this.m[0]*o.m[4]+this.m[2]*o.m[5]+this.m[4],v=this.m[1]*o.m[4]+this.m[3]*o.m[5]+this.m[5];return this.m[0]=this.m[0]*o.m[0]+this.m[2]*o.m[1],this.m[1]=d,this.m[2]=h,this.m[3]=g,this.m[4]=m,this.m[5]=v,this}invert(){var o=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),d=-this.m[1]*o,h=-this.m[2]*o,g=this.m[0]*o,m=o*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),v=o*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=this.m[3]*o,this.m[1]=d,this.m[2]=h,this.m[3]=g,this.m[4]=m,this.m[5]=v,this}getMatrix(){return this.m}decompose(){var o=this.m[0],u=this.m[1],d=this.m[2],h=this.m[3],v=o*h-u*d;let b={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=o||0!=u){var w=Math.sqrt(o*o+u*u);b.rotation=u>0?Math.acos(o/w):-Math.acos(o/w),b.scaleX=w,b.scaleY=v/w,b.skewX=(o*d+u*h)/v,b.skewY=0}else if(0!=d||0!=h){var E=Math.sqrt(d*d+h*h);b.rotation=Math.PI/2-(h>0?Math.acos(-d/E):-Math.acos(d/E)),b.scaleX=v/E,b.scaleY=E,b.skewX=0,b.skewY=(o*d+u*h)/v}return b.rotation=k._getRotation(b.rotation),b}}var Vl=Math.PI/180,Ul=180/Math.PI,gr="Konva error: ",Ko={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},Yo=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Ts=[];const Qo=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(p){setTimeout(p,60)},k={_isElement:p=>!(!p||1!=p.nodeType),_isFunction:p=>!!(p&&p.constructor&&p.call&&p.apply),_isPlainObject:p=>!!p&&p.constructor===Object,_isArray:p=>"[object Array]"===Object.prototype.toString.call(p),_isNumber:p=>"[object Number]"===Object.prototype.toString.call(p)&&!isNaN(p)&&isFinite(p),_isString:p=>"[object String]"===Object.prototype.toString.call(p),_isBoolean:p=>"[object Boolean]"===Object.prototype.toString.call(p),isObject:p=>p instanceof Object,isValidSelector(p){if("string"!=typeof p)return!1;var o=p[0];return"#"===o||"."===o||o===o.toUpperCase()},_sign:p=>0===p||p>0?1:-1,requestAnimFrame(p){Ts.push(p),1===Ts.length&&Qo(function(){const o=Ts;Ts=[],o.forEach(function(u){u()})})},createCanvasElement(){var p=document.createElement("canvas");try{p.style=p.style||{}}catch{}return p},createImageElement:()=>document.createElement("img"),_isInDocument(p){for(;p=p.parentNode;)if(p==document)return!0;return!1},_urlToImage(p,o){var u=k.createImageElement();u.onload=function(){o(u)},u.src=p},_rgbToHex:(p,o,u)=>((1<<24)+(p<<16)+(o<<8)+u).toString(16).slice(1),_hexToRgb(p){p=p.replace("#","");var o=parseInt(p,16);return{r:o>>16&255,g:o>>8&255,b:255&o}},getRandomColor(){for(var p=(16777215*Math.random()<<0).toString(16);p.length<6;)p="0"+p;return"#"+p},getRGB(p){var o;return p in Ko?{r:(o=Ko[p])[0],g:o[1],b:o[2]}:"#"===p[0]?this._hexToRgb(p.substring(1)):"rgb("===p.substr(0,4)?(o=Yo.exec(p.replace(/ /g,"")),{r:parseInt(o[1],10),g:parseInt(o[2],10),b:parseInt(o[3],10)}):{r:0,g:0,b:0}},colorToRGBA:p=>k._namedColorToRBA(p=p||"black")||k._hex3ColorToRGBA(p)||k._hex4ColorToRGBA(p)||k._hex6ColorToRGBA(p)||k._hex8ColorToRGBA(p)||k._rgbColorToRGBA(p)||k._rgbaColorToRGBA(p)||k._hslColorToRGBA(p),_namedColorToRBA(p){var o=Ko[p.toLowerCase()];return o?{r:o[0],g:o[1],b:o[2],a:1}:null},_rgbColorToRGBA(p){if(0===p.indexOf("rgb(")){var o=(p=p.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:o[0],g:o[1],b:o[2],a:1}}},_rgbaColorToRGBA(p){if(0===p.indexOf("rgba(")){var o=(p=p.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((u,d)=>"%"===u.slice(-1)?3===d?parseInt(u)/100:parseInt(u)/100*255:Number(u));return{r:o[0],g:o[1],b:o[2],a:o[3]}}},_hex8ColorToRGBA(p){if("#"===p[0]&&9===p.length)return{r:parseInt(p.slice(1,3),16),g:parseInt(p.slice(3,5),16),b:parseInt(p.slice(5,7),16),a:parseInt(p.slice(7,9),16)/255}},_hex6ColorToRGBA(p){if("#"===p[0]&&7===p.length)return{r:parseInt(p.slice(1,3),16),g:parseInt(p.slice(3,5),16),b:parseInt(p.slice(5,7),16),a:1}},_hex4ColorToRGBA(p){if("#"===p[0]&&5===p.length)return{r:parseInt(p[1]+p[1],16),g:parseInt(p[2]+p[2],16),b:parseInt(p[3]+p[3],16),a:parseInt(p[4]+p[4],16)/255}},_hex3ColorToRGBA(p){if("#"===p[0]&&4===p.length)return{r:parseInt(p[1]+p[1],16),g:parseInt(p[2]+p[2],16),b:parseInt(p[3]+p[3],16),a:1}},_hslColorToRGBA(p){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(p)){const[o,...u]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(p),d=Number(u[0])/360,h=Number(u[1])/100,g=Number(u[2])/100;let m,v,b;if(0===h)return b=255*g,{r:Math.round(b),g:Math.round(b),b:Math.round(b),a:1};m=g<.5?g*(1+h):g+h-g*h;const w=2*g-m,E=[0,0,0];for(let I=0;I<3;I++)v=d+1/3*-(I-1),v<0&&v++,v>1&&v--,b=6*v<1?w+6*(m-w)*v:2*v<1?m:3*v<2?w+(m-w)*(2/3-v)*6:w,E[I]=255*b;return{r:Math.round(E[0]),g:Math.round(E[1]),b:Math.round(E[2]),a:1}}},haveIntersection:(p,o)=>!(o.x>p.x+p.width||o.x+o.width<p.x||o.y>p.y+p.height||o.y+o.height<p.y),cloneObject(p){var o={};for(var u in p)o[u]=this._isPlainObject(p[u])?this.cloneObject(p[u]):this._isArray(p[u])?this.cloneArray(p[u]):p[u];return o},cloneArray:p=>p.slice(0),degToRad:p=>p*Vl,radToDeg:p=>p*Ul,_degToRad:p=>(k.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),k.degToRad(p)),_radToDeg:p=>(k.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),k.radToDeg(p)),_getRotation:p=>ne.angleDeg?k.radToDeg(p):p,_capitalize:p=>p.charAt(0).toUpperCase()+p.slice(1),throw(p){throw new Error(gr+p)},error(p){console.error(gr+p)},warn(p){!ne.showWarnings||console.warn("Konva warning: "+p)},each(p,o){for(var u in p)o(u,p[u])},_inRange:(p,o,u)=>o<=p&&p<u,_getProjectionToSegment(p,o,u,d,h,g){var m,v,b,w=(p-u)*(p-u)+(o-d)*(o-d);if(0==w)m=p,v=o,b=(h-u)*(h-u)+(g-d)*(g-d);else{var E=((h-p)*(u-p)+(g-o)*(d-o))/w;E<0?(m=p,v=o,b=(p-h)*(p-h)+(o-g)*(o-g)):E>1?(m=u,v=d,b=(u-h)*(u-h)+(d-g)*(d-g)):b=((m=p+E*(u-p))-h)*(m-h)+((v=o+E*(d-o))-g)*(v-g)}return[m,v,b]},_getProjectionToLine(p,o,u){var d=k.cloneObject(p),h=Number.MAX_VALUE;return o.forEach(function(g,m){if(u||m!==o.length-1){var v=o[(m+1)%o.length],b=k._getProjectionToSegment(g.x,g.y,v.x,v.y,p.x,p.y),E=b[1],I=b[2];I<h&&(d.x=b[0],d.y=E,h=I)}}),d},_prepareArrayForTween(p,o,u){var d,h=[],g=[];if(p.length>o.length){var m=o;o=p,p=m}for(d=0;d<p.length;d+=2)h.push({x:p[d],y:p[d+1]});for(d=0;d<o.length;d+=2)g.push({x:o[d],y:o[d+1]});var v=[];return g.forEach(function(b){var w=k._getProjectionToLine(b,h,u);v.push(w.x),v.push(w.y)}),v},_prepareToStringify(p){var o;for(var u in p.visitedByCircularReferenceRemoval=!0,p)if(p.hasOwnProperty(u)&&p[u]&&"object"==typeof p[u])if(o=Object.getOwnPropertyDescriptor(p,u),p[u].visitedByCircularReferenceRemoval||k._isElement(p[u])){if(!o.configurable)return null;delete p[u]}else if(null===k._prepareToStringify(p[u])){if(!o.configurable)return null;delete p[u]}return delete p.visitedByCircularReferenceRemoval,p},_assign(p,o){for(var u in o)p[u]=o[u];return p},_getFirstPointerId:p=>p.touches?p.changedTouches[0].identifier:p.pointerId||999,releaseCanvas(...p){!ne.releaseCanvasOnDestroy||p.forEach(o=>{o.width=0,o.height=0})},drawRoundedRectPath(p,o,u,d){let h=0,g=0,m=0,v=0;"number"==typeof d?h=g=m=v=Math.min(d,o/2,u/2):(h=Math.min(d[0]||0,o/2,u/2),g=Math.min(d[1]||0,o/2,u/2),v=Math.min(d[2]||0,o/2,u/2),m=Math.min(d[3]||0,o/2,u/2)),p.moveTo(h,0),p.lineTo(o-g,0),p.arc(o-g,g,g,3*Math.PI/2,0,!1),p.lineTo(o,u-v),p.arc(o-v,u-v,v,0,Math.PI/2,!1),p.lineTo(m,u),p.arc(m,u-m,m,Math.PI/2,Math.PI,!1),p.lineTo(0,h),p.arc(h,h,h,Math.PI,3*Math.PI/2,!1)}};function Wt(p){return k._isString(p)?'"'+p+'"':"[object Number]"===Object.prototype.toString.call(p)||k._isBoolean(p)?p:Object.prototype.toString.call(p)}function Bi(p){return p>255?255:p<0?0:Math.round(p)}function W(){if(ne.isUnminified)return function(p,o){return k._isNumber(p)||k.warn(Wt(p)+' is a not valid value for "'+o+'" attribute. The value should be a number.'),p}}function Xo(p){if(ne.isUnminified)return function(o,u){let d=k._isNumber(o),h=k._isArray(o)&&o.length==p;return!d&&!h&&k.warn(Wt(o)+' is a not valid value for "'+u+'" attribute. The value should be a number or Array<number>('+p+")"),o}}function ji(){if(ne.isUnminified)return function(p,o){return k._isNumber(p)||"auto"===p||k.warn(Wt(p)+' is a not valid value for "'+o+'" attribute. The value should be a number or "auto".'),p}}function pn(){if(ne.isUnminified)return function(p,o){return k._isString(p)||k.warn(Wt(p)+' is a not valid value for "'+o+'" attribute. The value should be a string.'),p}}function $l(){if(ne.isUnminified)return function(p,o){const u=k._isString(p),d="[object CanvasGradient]"===Object.prototype.toString.call(p)||p&&p.addColorStop;return u||d||k.warn(Wt(p)+' is a not valid value for "'+o+'" attribute. The value should be a string or a native gradient.'),p}}function gn(){if(ne.isUnminified)return function(p,o){return!0===p||!1===p||k.warn(Wt(p)+' is a not valid value for "'+o+'" attribute. The value should be a boolean.'),p}}var Hi="get",Vi="set";const T={addGetterSetter(p,o,u,d,h){T.addGetter(p,o,u),T.addSetter(p,o,d,h),T.addOverloadedGetterSetter(p,o)},addGetter(p,o,u){var d=Hi+k._capitalize(o);p.prototype[d]=p.prototype[d]||function(){var h=this.attrs[o];return void 0===h?u:h}},addSetter(p,o,u,d){var h=Vi+k._capitalize(o);p.prototype[h]||T.overWriteSetter(p,o,u,d)},overWriteSetter(p,o,u,d){var h=Vi+k._capitalize(o);p.prototype[h]=function(g){return u&&null!=g&&(g=u.call(this,g,o)),this._setAttr(o,g),d&&d.call(this),this}},addComponentsGetterSetter(p,o,u,d,h){var w,E,g=u.length,m=k._capitalize,v=Hi+m(o),b=Vi+m(o);p.prototype[v]=function(){var M={};for(w=0;w<g;w++)M[E=u[w]]=this.getAttr(o+m(E));return M};var I=function Sd(p){if(ne.isUnminified)return function(o,u){return null==o||k.isObject(o)||k.warn(Wt(o)+' is a not valid value for "'+u+'" attribute. The value should be an object with properties '+p),o}}(u);p.prototype[b]=function(M){var S,R=this.attrs[o];for(S in d&&(M=d.call(this,M)),I&&I.call(this,M,o),M)!M.hasOwnProperty(S)||this._setAttr(o+m(S),M[S]);return M||u.forEach(j=>{this._setAttr(o+m(j),void 0)}),this._fireChangeEvent(o,R,M),h&&h.call(this),this},T.addOverloadedGetterSetter(p,o)},addOverloadedGetterSetter(p,o){var u=k._capitalize(o),d=Vi+u,h=Hi+u;p.prototype[o]=function(){return arguments.length?(this[d](arguments[0]),this):this[h]()}},addDeprecatedGetterSetter(p,o,u,d){k.error("Adding deprecated "+o);var h=Hi+k._capitalize(o),g=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";p.prototype[h]=function(){k.error(g);var m=this.attrs[o];return void 0===m?u:m},T.addSetter(p,o,d,function(){k.error(g)}),T.addOverloadedGetterSetter(p,o)},backCompat(p,o){k.each(o,function(u,d){var h=p.prototype[d],g=Hi+k._capitalize(u),m=Vi+k._capitalize(u);function v(){h.apply(this,arguments),k.error('"'+u+'" method is deprecated and will be removed soon. Use ""'+d+'" instead.')}p.prototype[u]=v,p.prototype[g]=v,p.prototype[m]=v})},afterSetFilter(){this._filterUpToDate=!1}};function Gl(p){var h,g,o=[],u=p.length,d=k;for(h=0;h<u;h++)d._isNumber(g=p[h])?g=Math.round(1e3*g)/1e3:d._isString(g)||(g+=""),o.push(g);return o}var Ui,Td=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];class ea{constructor(o){this.canvas=o,ne.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(o){o.fillEnabled()&&this._fill(o)}_fill(o){}strokeShape(o){o.hasStroke()&&this._stroke(o)}_stroke(o){}fillStrokeShape(o){o.attrs.fillAfterStrokeEnabled?(this.strokeShape(o),this.fillShape(o)):(this.fillShape(o),this.strokeShape(o))}getTrace(o,u){var m,v,b,w,d=this.traceArr,h=d.length,g="";for(m=0;m<h;m++)(b=(v=d[m]).method)?(w=v.args,g+=b,o?g+="()":k._isArray(w[0])?g+="(["+w.join(",")+"])":(u&&(w=w.map(E=>"number"==typeof E?Math.floor(E):E)),g+="("+w.join(",")+")")):(g+=v.property,o||(g+="="+v.val)),g+=";";return g}clearTrace(){this.traceArr=[]}_trace(o){var u=this.traceArr;u.push(o),u.length>=100&&u.shift()}reset(){var o=this.getCanvas().getPixelRatio();this.setTransform(1*o,0,0,1*o,0,0)}getCanvas(){return this.canvas}clear(o){var u=this.getCanvas();o?this.clearRect(o.x||0,o.y||0,o.width||0,o.height||0):this.clearRect(0,0,u.getWidth()/u.pixelRatio,u.getHeight()/u.pixelRatio)}_applyLineCap(o){var u=o.getLineCap();u&&this.setAttr("lineCap",u)}_applyOpacity(o){var u=o.getAbsoluteOpacity();1!==u&&this.setAttr("globalAlpha",u)}_applyLineJoin(o){var u=o.attrs.lineJoin;u&&this.setAttr("lineJoin",u)}setAttr(o,u){this._context[o]=u}arc(o,u,d,h,g,m){this._context.arc(o,u,d,h,g,m)}arcTo(o,u,d,h,g){this._context.arcTo(o,u,d,h,g)}beginPath(){this._context.beginPath()}bezierCurveTo(o,u,d,h,g,m){this._context.bezierCurveTo(o,u,d,h,g,m)}clearRect(o,u,d,h){this._context.clearRect(o,u,d,h)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(o,u){var d=arguments;return 2===d.length?this._context.createImageData(o,u):1===d.length?this._context.createImageData(o):void 0}createLinearGradient(o,u,d,h){return this._context.createLinearGradient(o,u,d,h)}createPattern(o,u){return this._context.createPattern(o,u)}createRadialGradient(o,u,d,h,g,m){return this._context.createRadialGradient(o,u,d,h,g,m)}drawImage(o,u,d,h,g,m,v,b,w){var E=arguments,I=this._context;3===E.length?I.drawImage(o,u,d):5===E.length?I.drawImage(o,u,d,h,g):9===E.length&&I.drawImage(o,u,d,h,g,m,v,b,w)}ellipse(o,u,d,h,g,m,v,b){this._context.ellipse(o,u,d,h,g,m,v,b)}isPointInPath(o,u,d,h){return d?this._context.isPointInPath(d,o,u,h):this._context.isPointInPath(o,u,h)}fill(o){o?this._context.fill(o):this._context.fill()}fillRect(o,u,d,h){this._context.fillRect(o,u,d,h)}strokeRect(o,u,d,h){this._context.strokeRect(o,u,d,h)}fillText(o,u,d,h){h?this._context.fillText(o,u,d,h):this._context.fillText(o,u,d)}measureText(o){return this._context.measureText(o)}getImageData(o,u,d,h){return this._context.getImageData(o,u,d,h)}lineTo(o,u){this._context.lineTo(o,u)}moveTo(o,u){this._context.moveTo(o,u)}rect(o,u,d,h){this._context.rect(o,u,d,h)}putImageData(o,u,d){this._context.putImageData(o,u,d)}quadraticCurveTo(o,u,d,h){this._context.quadraticCurveTo(o,u,d,h)}restore(){this._context.restore()}rotate(o){this._context.rotate(o)}save(){this._context.save()}scale(o,u){this._context.scale(o,u)}setLineDash(o){this._context.setLineDash?this._context.setLineDash(o):"mozDash"in this._context?this._context.mozDash=o:"webkitLineDash"in this._context&&(this._context.webkitLineDash=o)}getLineDash(){return this._context.getLineDash()}setTransform(o,u,d,h,g,m){this._context.setTransform(o,u,d,h,g,m)}stroke(o){o?this._context.stroke(o):this._context.stroke()}strokeText(o,u,d,h){this._context.strokeText(o,u,d,h)}transform(o,u,d,h,g,m){this._context.transform(o,u,d,h,g,m)}translate(o,u){this._context.translate(o,u)}_enableTrace(){var h,g,o=this,u=Td.length,d=this.setAttr,m=function(v){var w,b=o[v];o[v]=function(){return g=Gl(Array.prototype.slice.call(arguments,0)),w=b.apply(o,arguments),o._trace({method:v,args:g}),w}};for(h=0;h<u;h++)m(Td[h]);o.setAttr=function(){d.apply(o,arguments);var v=arguments[0],b=arguments[1];("shadowOffsetX"===v||"shadowOffsetY"===v||"shadowBlur"===v)&&(b/=this.canvas.getPixelRatio()),o._trace({property:v,val:b})}}_applyGlobalCompositeOperation(o){const u=o.attrs.globalCompositeOperation;!u||"source-over"===u||this.setAttr("globalCompositeOperation",u)}}["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(p){Object.defineProperty(ea.prototype,p,{get(){return this._context[p]},set(o){this._context[p]=o}})});class Id extends ea{constructor(o){super(o),this._context=o._canvas.getContext("2d")}_fillColor(o){var u=o.fill();this.setAttr("fillStyle",u),o._fillFunc(this)}_fillPattern(o){this.setAttr("fillStyle",o._getFillPattern()),o._fillFunc(this)}_fillLinearGradient(o){var u=o._getLinearGradient();u&&(this.setAttr("fillStyle",u),o._fillFunc(this))}_fillRadialGradient(o){var u=o._getRadialGradient();u&&(this.setAttr("fillStyle",u),o._fillFunc(this))}_fill(o){var u=o.fill(),d=o.getFillPriority();if(u&&"color"===d)this._fillColor(o);else{var h=o.getFillPatternImage();if(h&&"pattern"===d)this._fillPattern(o);else{var g=o.getFillLinearGradientColorStops();if(g&&"linear-gradient"===d)this._fillLinearGradient(o);else{var m=o.getFillRadialGradientColorStops();m&&"radial-gradient"===d?this._fillRadialGradient(o):u?this._fillColor(o):h?this._fillPattern(o):g?this._fillLinearGradient(o):m&&this._fillRadialGradient(o)}}}}_strokeLinearGradient(o){var u=o.getStrokeLinearGradientStartPoint(),d=o.getStrokeLinearGradientEndPoint(),h=o.getStrokeLinearGradientColorStops(),g=this.createLinearGradient(u.x,u.y,d.x,d.y);if(h){for(var m=0;m<h.length;m+=2)g.addColorStop(h[m],h[m+1]);this.setAttr("strokeStyle",g)}}_stroke(o){var u=o.dash(),d=o.getStrokeScaleEnabled();if(o.hasStroke()){if(!d){this.save();var h=this.getCanvas().getPixelRatio();this.setTransform(h,0,0,h,0,0)}this._applyLineCap(o),u&&o.dashEnabled()&&(this.setLineDash(u),this.setAttr("lineDashOffset",o.dashOffset())),this.setAttr("lineWidth",o.strokeWidth()),o.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),o.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(o):this.setAttr("strokeStyle",o.stroke()),o._strokeFunc(this),d||this.restore()}}_applyShadow(o){var u,d,h,g=null!==(u=o.getShadowRGBA())&&void 0!==u?u:"black",m=null!==(d=o.getShadowBlur())&&void 0!==d?d:5,v=null!==(h=o.getShadowOffset())&&void 0!==h?h:{x:0,y:0},b=o.getAbsoluteScale(),w=this.canvas.getPixelRatio(),E=b.x*w,I=b.y*w;this.setAttr("shadowColor",g),this.setAttr("shadowBlur",m*Math.min(Math.abs(E),Math.abs(I))),this.setAttr("shadowOffsetX",v.x*E),this.setAttr("shadowOffsetY",v.y*I)}}class cm extends ea{constructor(o){super(o),this._context=o._canvas.getContext("2d",{willReadFrequently:!0})}_fill(o){this.save(),this.setAttr("fillStyle",o.colorKey),o._fillFuncHit(this),this.restore()}strokeShape(o){o.hasHitStroke()&&this._stroke(o)}_stroke(o){if(o.hasHitStroke()){var u=o.getStrokeScaleEnabled();if(!u){this.save();var d=this.getCanvas().getPixelRatio();this.setTransform(d,0,0,d,0,0)}this._applyLineCap(o);var h=o.hitStrokeWidth(),g="auto"===h?o.strokeWidth():h;this.setAttr("lineWidth",g),this.setAttr("strokeStyle",o.colorKey),o._strokeFuncHit(this),u||this.restore()}}}class $i{constructor(o){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var d=(o||{}).pixelRatio||ne.pixelRatio||function dm(){if(Ui)return Ui;var p=k.createCanvasElement(),o=p.getContext("2d");return Ui=(ne._global.devicePixelRatio||1)/(o.webkitBackingStorePixelRatio||o.mozBackingStorePixelRatio||o.msBackingStorePixelRatio||o.oBackingStorePixelRatio||o.backingStorePixelRatio||1),k.releaseCanvas(p),Ui}();this.pixelRatio=d,this._canvas=k.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(o){var u=this.pixelRatio;this.pixelRatio=o,this.setSize(this.getWidth()/u,this.getHeight()/u)}setWidth(o){this.width=this._canvas.width=o*this.pixelRatio,this._canvas.style.width=o+"px";var u=this.pixelRatio;this.getContext()._context.scale(u,u)}setHeight(o){this.height=this._canvas.height=o*this.pixelRatio,this._canvas.style.height=o+"px";var u=this.pixelRatio;this.getContext()._context.scale(u,u)}getWidth(){return this.width}getHeight(){return this.height}setSize(o,u){this.setWidth(o||0),this.setHeight(u||0)}toDataURL(o,u){try{return this._canvas.toDataURL(o,u)}catch{try{return this._canvas.toDataURL()}catch(h){return k.error("Unable to get data URL. "+h.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}T.addGetterSetter($i,"pixelRatio",void 0,W());class ci extends $i{constructor(o={width:0,height:0}){super(o),this.context=new Id(this),this.setSize(o.width,o.height)}}class Wl extends $i{constructor(o={width:0,height:0}){super(o),this.hitCanvas=!0,this.context=new cm(this),this.setSize(o.width,o.height)}}const He={get isDragging(){var p=!1;return He._dragElements.forEach(o=>{"dragging"===o.dragStatus&&(p=!0)}),p},justDragged:!1,get node(){var p;return He._dragElements.forEach(o=>{p=o.node}),p},_dragElements:new Map,_drag(p){const o=[];He._dragElements.forEach((u,d)=>{const{node:h}=u,g=h.getStage();g.setPointersPositions(p),void 0===u.pointerId&&(u.pointerId=k._getFirstPointerId(p));const m=g._changedPointerPositions.find(w=>w.id===u.pointerId);if(m){if("dragging"!==u.dragStatus){var v=h.dragDistance();if(Math.max(Math.abs(m.x-u.startPointerPos.x),Math.abs(m.y-u.startPointerPos.y))<v||(h.startDrag({evt:p}),!h.isDragging()))return}h._setDragPosition(p,u),o.push(h)}}),o.forEach(u=>{u.fire("dragmove",{type:"dragmove",target:u,evt:p},!0)})},_endDragBefore(p){const o=[];He._dragElements.forEach(u=>{const{node:d}=u,h=d.getStage();if(p&&h.setPointersPositions(p),!h._changedPointerPositions.find(v=>v.id===u.pointerId))return;("dragging"===u.dragStatus||"stopped"===u.dragStatus)&&(He.justDragged=!0,ne._mouseListenClick=!1,ne._touchListenClick=!1,ne._pointerListenClick=!1,u.dragStatus="stopped");const m=u.node.getLayer()||u.node instanceof ne.Stage&&u.node;m&&-1===o.indexOf(m)&&o.push(m)}),o.forEach(u=>{u.draw()})},_endDragAfter(p){He._dragElements.forEach((o,u)=>{"stopped"===o.dragStatus&&o.node.fire("dragend",{type:"dragend",target:o.node,evt:p},!0),"dragging"!==o.dragStatus&&He._dragElements.delete(u)})}};ne.isBrowser&&(window.addEventListener("mouseup",He._endDragBefore,!0),window.addEventListener("touchend",He._endDragBefore,!0),window.addEventListener("mousemove",He._drag),window.addEventListener("touchmove",He._drag),window.addEventListener("mouseup",He._endDragAfter,!1),window.addEventListener("touchend",He._endDragAfter,!1));var ta="absoluteOpacity",Bn="allEventListeners",Kn="absoluteTransform",Ad="absoluteScale",kr="canvas",ql="listening",Rd="mouseenter",Pd="mouseleave",Yn="transform",Is="visible",Kl=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(" ");let Yl=1;class q{constructor(o){this._id=Yl++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(o),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(o){o!==Yn&&o!==Kn||!this._cache.get(o)?o?this._cache.delete(o):this._cache.clear():this._cache.get(o).dirty=!0}_getCache(o,u){var d=this._cache.get(o);return(void 0===d||(o===Yn||o===Kn)&&!0===d.dirty)&&(d=u.call(this),this._cache.set(o,d)),d}_calculate(o,u,d){if(!this._attachedDepsListeners.get(o)){const h=u.map(g=>g+"Change.konva").join(" ");this.on(h,()=>{this._clearCache(o)}),this._attachedDepsListeners.set(o,!0)}return this._getCache(o,d)}_getCanvasCache(){return this._cache.get(kr)}_clearSelfAndDescendantCache(o){this._clearCache(o),o===Kn&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(kr)){const{scene:o,filter:u,hit:d}=this._cache.get(kr);k.releaseCanvas(o,u,d),this._cache.delete(kr)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(o){var u=o||{},d={};(void 0===u.x||void 0===u.y||void 0===u.width||void 0===u.height)&&(d=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var h=Math.ceil(u.width||d.width),g=Math.ceil(u.height||d.height),m=u.pixelRatio,v=void 0===u.x?Math.floor(d.x):u.x,b=void 0===u.y?Math.floor(d.y):u.y,w=u.offset||0,E=u.drawBorder||!1,I=u.hitCanvasPixelRatio||1;if(h&&g){v-=w,b-=w;var M=new ci({pixelRatio:m,width:h+=2*w+1,height:g+=2*w+1}),R=new ci({pixelRatio:m,width:0,height:0}),S=new Wl({pixelRatio:I,width:h,height:g}),j=M.getContext(),O=S.getContext();return S.isCache=!0,M.isCache=!0,this._cache.delete(kr),this._filterUpToDate=!1,!1===u.imageSmoothingEnabled&&(M.getContext()._context.imageSmoothingEnabled=!1,R.getContext()._context.imageSmoothingEnabled=!1),j.save(),O.save(),j.translate(-v,-b),O.translate(-v,-b),this._isUnderCache=!0,this._clearSelfAndDescendantCache(ta),this._clearSelfAndDescendantCache(Ad),this.drawScene(M,this),this.drawHit(S,this),this._isUnderCache=!1,j.restore(),O.restore(),E&&(j.save(),j.beginPath(),j.rect(0,0,h,g),j.closePath(),j.setAttr("strokeStyle","red"),j.setAttr("lineWidth",5),j.stroke(),j.restore()),this._cache.set(kr,{scene:M,filter:R,hit:S,x:v,y:b}),this._requestDraw(),this}k.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")}isCached(){return this._cache.has(kr)}getClientRect(o){throw new Error('abstract "getClientRect" method call')}_transformedRect(o,u){var h,g,m,v,d=[{x:o.x,y:o.y},{x:o.x+o.width,y:o.y},{x:o.x+o.width,y:o.y+o.height},{x:o.x,y:o.y+o.height}],b=this.getAbsoluteTransform(u);return d.forEach(function(w){var E=b.point(w);void 0===h&&(h=m=E.x,g=v=E.y),h=Math.min(h,E.x),g=Math.min(g,E.y),m=Math.max(m,E.x),v=Math.max(v,E.y)}),{x:h,y:g,width:m-h,height:v-g}}_drawCachedSceneCanvas(o){o.save(),o._applyOpacity(this),o._applyGlobalCompositeOperation(this);const u=this._getCanvasCache();o.translate(u.x,u.y);var d=this._getCachedSceneCanvas(),h=d.pixelRatio;o.drawImage(d._canvas,0,0,d.width/h,d.height/h),o.restore()}_drawCachedHitCanvas(o){var u=this._getCanvasCache(),d=u.hit;o.save(),o.translate(u.x,u.y),o.drawImage(d._canvas,0,0,d.width/d.pixelRatio,d.height/d.pixelRatio),o.restore()}_getCachedSceneCanvas(){var m,v,b,w,o=this.filters(),u=this._getCanvasCache(),d=u.scene,h=u.filter,g=h.getContext();if(o){if(!this._filterUpToDate){var E=d.pixelRatio;h.setSize(d.width/d.pixelRatio,d.height/d.pixelRatio);try{for(m=o.length,g.clear(),g.drawImage(d._canvas,0,0,d.getWidth()/E,d.getHeight()/E),v=g.getImageData(0,0,h.getWidth(),h.getHeight()),b=0;b<m;b++)"function"==typeof(w=o[b])?(w.call(this,v),g.putImageData(v,0,0)):k.error("Filter should be type of function, but got "+typeof w+" instead. Please check correct filters")}catch(I){k.error("Unable to apply filter. "+I.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return h}return d}on(o,u){if(this._cache&&this._cache.delete(Bn),3===arguments.length)return this._delegate.apply(this,arguments);var g,v,b,w,d=o.split(" "),h=d.length;for(g=0;g<h;g++)w=(v=d[g].split("."))[1]||"",this.eventListeners[b=v[0]]||(this.eventListeners[b]=[]),this.eventListeners[b].push({name:w,handler:u});return this}off(o,u){var g,m,b,w,E,d=(o||"").split(" "),h=d.length;if(this._cache&&this._cache.delete(Bn),!o)for(m in this.eventListeners)this._off(m);for(g=0;g<h;g++)if(E=(b=d[g].split("."))[1],w=b[0])this.eventListeners[w]&&this._off(w,E,u);else for(m in this.eventListeners)this._off(m,E,u);return this}dispatchEvent(o){return this.fire(o.type,{target:this,type:o.type,evt:o}),this}addEventListener(o,u){return this.on(o,function(d){u.call(this,d.evt)}),this}removeEventListener(o){return this.off(o),this}_delegate(o,u,d){var h=this;this.on(o,function(g){for(var m=g.target.findAncestors(u,!0,h),v=0;v<m.length;v++)(g=k.cloneObject(g)).currentTarget=m[v],d.call(m[v],g)})}remove(){return this.isDragging()&&this.stopDrag(),He._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Kn),this._clearSelfAndDescendantCache(ta),this._clearSelfAndDescendantCache(Ad),this._clearSelfAndDescendantCache("stage"),this._clearSelfAndDescendantCache(Is),this._clearSelfAndDescendantCache(ql)}_remove(){this._clearCaches();var o=this.getParent();o&&o.children&&(o.children.splice(this.index,1),o._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(o){var u="get"+k._capitalize(o);return k._isFunction(this[u])?this[u]():this.attrs[o]}getAncestors(){for(var o=this.getParent(),u=[];o;)u.push(o),o=o.getParent();return u}getAttrs(){return this.attrs||{}}setAttrs(o){return this._batchTransformChanges(()=>{var u,d;if(!o)return this;for(u in o)"children"!==u&&(d="set"+k._capitalize(u),k._isFunction(this[d])?this[d](o[u]):this._setAttr(u,o[u]))}),this}isListening(){return this._getCache(ql,this._isListening)}_isListening(o){if(!this.listening())return!1;const d=this.getParent();return!d||d===o||this===o||d._isListening(o)}isVisible(){return this._getCache(Is,this._isVisible)}_isVisible(o){if(!this.visible())return!1;const d=this.getParent();return!d||d===o||this===o||d._isVisible(o)}shouldDrawHit(o,u=!1){if(o)return this._isVisible(o)&&this._isListening(o);var d=this.getLayer(),h=!1;He._dragElements.forEach(m=>{"dragging"===m.dragStatus&&("Stage"===m.node.nodeType||m.node.getLayer()===d)&&(h=!0)});var g=!u&&!ne.hitOnDragEnabled&&h;return this.isListening()&&this.isVisible()&&!g}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var h,g,m,v,o=this.getDepth(),u=this,d=0;return"Stage"!==u.nodeType&&function b(w){for(h=[],g=w.length,m=0;m<g;m++)d++,"Shape"!==(v=w[m]).nodeType&&(h=h.concat(v.getChildren().slice())),v._id===u._id&&(m=g);h.length>0&&h[0].getDepth()<=o&&b(h)}(u.getStage().getChildren()),d}getDepth(){for(var o=0,u=this.parent;u;)o++,u=u.parent;return o}_batchTransformChanges(o){this._batchingTransformChange=!0,o(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Yn),this._clearSelfAndDescendantCache(Kn)),this._needClearTransformCache=!1}setPosition(o){return this._batchTransformChanges(()=>{this.x(o.x),this.y(o.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var o=this.getStage().getPointerPosition();if(!o)return null;var u=this.getAbsoluteTransform().copy();return u.invert(),u.point(o)}getAbsolutePosition(o){let u=!1,d=this.parent;for(;d;){if(d.isCached()){u=!0;break}d=d.parent}u&&!o&&(o=!0);var h=this.getAbsoluteTransform(o).getMatrix(),g=new zt,m=this.offset();return g.m=h.slice(),g.translate(m.x,m.y),g.getTranslation()}setAbsolutePosition(o){var u=this._clearTransform();this.attrs.x=u.x,this.attrs.y=u.y,delete u.x,delete u.y,this._clearCache(Yn);var d=this._getAbsoluteTransform().copy();return d.invert(),d.translate(o.x,o.y),o={x:this.attrs.x+d.getTranslation().x,y:this.attrs.y+d.getTranslation().y},this._setTransform(u),this.setPosition({x:o.x,y:o.y}),this._clearCache(Yn),this._clearSelfAndDescendantCache(Kn),this}_setTransform(o){var u;for(u in o)this.attrs[u]=o[u]}_clearTransform(){var o={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,o}move(o){var u=o.x,d=o.y,h=this.x(),g=this.y();return void 0!==u&&(h+=u),void 0!==d&&(g+=d),this.setPosition({x:h,y:g}),this}_eachAncestorReverse(o,u){var g,m,d=[],h=this.getParent();if(!u||u._id!==this._id){for(d.unshift(this);h&&(!u||h._id!==u._id);)d.unshift(h),h=h.parent;for(g=d.length,m=0;m<g;m++)o(d[m])}}rotate(o){return this.rotation(this.rotation()+o),this}moveToTop(){if(!this.parent)return k.warn("Node has no parent. moveToTop function is ignored."),!1;var o=this.index;return o<this.parent.getChildren().length-1&&(this.parent.children.splice(o,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return k.warn("Node has no parent. moveUp function is ignored."),!1;var o=this.index;return o<this.parent.getChildren().length-1&&(this.parent.children.splice(o,1),this.parent.children.splice(o+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return k.warn("Node has no parent. moveDown function is ignored."),!1;var o=this.index;return o>0&&(this.parent.children.splice(o,1),this.parent.children.splice(o-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return k.warn("Node has no parent. moveToBottom function is ignored."),!1;var o=this.index;return o>0&&(this.parent.children.splice(o,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(o){return this.parent?((o<0||o>=this.parent.children.length)&&k.warn("Unexpected value "+o+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+"."),this.parent.children.splice(this.index,1),this.parent.children.splice(o,0,this),this.parent._setChildrenIndices(),this):(k.warn("Node has no parent. zIndex parameter is ignored."),this)}getAbsoluteOpacity(){return this._getCache(ta,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var o=this.opacity(),u=this.getParent();return u&&!u._isUnderCache&&(o*=u.getAbsoluteOpacity()),o}moveTo(o){return this.getParent()!==o&&(this._remove(),o.add(this)),this}toObject(){var d,h,g,m,o={},u=this.getAttrs();for(d in o.attrs={},u)(!k.isObject(h=u[d])||k._isPlainObject(h)||k._isArray(h))&&(g="function"==typeof this[d]&&this[d],delete u[d],m=g?g.call(this):null,u[d]=h,m!==h&&(o.attrs[d]=h));return o.className=this.getClassName(),k._prepareToStringify(o)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(o,u,d){var h=[];u&&this._isMatch(o)&&h.push(this);for(var g=this.parent;g;){if(g===d)return h;g._isMatch(o)&&h.push(g),g=g.parent}return h}isAncestorOf(o){return!1}findAncestor(o,u,d){return this.findAncestors(o,u,d)[0]}_isMatch(o){if(!o)return!1;if("function"==typeof o)return o(this);var h,g,u=o.replace(/ /g,"").split(","),d=u.length;for(h=0;h<d;h++)if(k.isValidSelector(g=u[h])||(k.warn('Selector "'+g+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),k.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),k.warn("Konva is awesome, right?")),"#"===g.charAt(0)){if(this.id()===g.slice(1))return!0}else if("."===g.charAt(0)){if(this.hasName(g.slice(1)))return!0}else if(this.className===g||this.nodeType===g)return!0;return!1}getLayer(){var o=this.getParent();return o?o.getLayer():null}getStage(){return this._getCache("stage",this._getStage)}_getStage(){var o=this.getParent();if(o)return o.getStage()}fire(o,u={},d){return u.target=u.target||this,d?this._fireAndBubble(o,u):this._fire(o,u),this}getAbsoluteTransform(o){return o?this._getAbsoluteTransform(o):this._getCache(Kn,this._getAbsoluteTransform)}_getAbsoluteTransform(o){var u;if(o)return u=new zt,this._eachAncestorReverse(function(h){var g=h.transformsEnabled();"all"===g?u.multiply(h.getTransform()):"position"===g&&u.translate(h.x()-h.offsetX(),h.y()-h.offsetY())},o),u;u=this._cache.get(Kn)||new zt,this.parent?this.parent.getAbsoluteTransform().copyInto(u):u.reset();var d=this.transformsEnabled();return"all"===d?u.multiply(this.getTransform()):"position"===d&&u.translate((this.attrs.x||0)-(this.attrs.offsetX||0),(this.attrs.y||0)-(this.attrs.offsetY||0)),u.dirty=!1,u}getAbsoluteScale(o){for(var u=this;u;)u._isUnderCache&&(o=u),u=u.getParent();const h=this.getAbsoluteTransform(o).decompose();return{x:h.scaleX,y:h.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Yn,this._getTransform)}_getTransform(){var o,u,d=this._cache.get(Yn)||new zt;d.reset();var h=this.x(),g=this.y(),m=ne.getAngle(this.rotation()),v=null!==(o=this.attrs.scaleX)&&void 0!==o?o:1,b=null!==(u=this.attrs.scaleY)&&void 0!==u?u:1,w=this.attrs.skewX||0,E=this.attrs.skewY||0,I=this.attrs.offsetX||0,M=this.attrs.offsetY||0;return(0!==h||0!==g)&&d.translate(h,g),0!==m&&d.rotate(m),(0!==w||0!==E)&&d.skew(w,E),(1!==v||1!==b)&&d.scale(v,b),(0!==I||0!==M)&&d.translate(-1*I,-1*M),d.dirty=!1,d}clone(o){var d,h,g,m,v,u=k.cloneObject(this.attrs);for(d in o)u[d]=o[d];var b=new this.constructor(u);for(d in this.eventListeners)for(g=(h=this.eventListeners[d]).length,m=0;m<g;m++)(v=h[m]).name.indexOf("konva")<0&&(b.eventListeners[d]||(b.eventListeners[d]=[]),b.eventListeners[d].push(v));return b}_toKonvaCanvas(o){o=o||{};var u=this.getClientRect(),d=this.getStage(),h=void 0!==o.x?o.x:Math.floor(u.x),g=void 0!==o.y?o.y:Math.floor(u.y),m=o.pixelRatio||1,v=new ci({width:o.width||Math.ceil(u.width)||(d?d.width():0),height:o.height||Math.ceil(u.height)||(d?d.height():0),pixelRatio:m}),b=v.getContext();return!1===o.imageSmoothingEnabled&&(b._context.imageSmoothingEnabled=!1),b.save(),(h||g)&&b.translate(-1*h,-1*g),this.drawScene(v),b.restore(),v}toCanvas(o){return this._toKonvaCanvas(o)._canvas}toDataURL(o){var u=(o=o||{}).mimeType||null,d=o.quality||null,h=this._toKonvaCanvas(o).toDataURL(u,d);return o.callback&&o.callback(h),h}toImage(o){return new Promise((u,d)=>{try{const h=o?.callback;h&&delete o.callback,k._urlToImage(this.toDataURL(o),function(g){u(g),h?.(g)})}catch(h){d(h)}})}toBlob(o){return new Promise((u,d)=>{try{const h=o?.callback;h&&delete o.callback,this.toCanvas(o).toBlob(g=>{u(g),h?.(g)})}catch(h){d(h)}})}setSize(o){return this.width(o.width),this.height(o.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():ne.dragDistance}_off(o,u,d){var g,m,h=this.eventListeners[o];for(g=0;g<h.length;g++)if(!("konva"===(m=h[g].name)&&"konva"!==u||u&&m!==u||d&&d!==h[g].handler)){if(h.splice(g,1),0===h.length){delete this.eventListeners[o];break}g--}}_fireChangeEvent(o,u,d){this._fire(o+"Change",{oldVal:u,newVal:d})}addName(o){if(!this.hasName(o)){var u=this.name();this.name(u?u+" "+o:o)}return this}hasName(o){if(!o)return!1;const u=this.name();return!!u&&-1!==(u||"").split(/\s/g).indexOf(o)}removeName(o){var u=(this.name()||"").split(/\s/g),d=u.indexOf(o);return-1!==d&&(u.splice(d,1),this.name(u.join(" "))),this}setAttr(o,u){var d=this["set"+k._capitalize(o)];return k._isFunction(d)?d.call(this,u):this._setAttr(o,u),this}_requestDraw(){ne.autoDrawEnabled&&(this.getLayer()||this.getStage())?.batchDraw()}_setAttr(o,u){var d=this.attrs[o];d===u&&!k.isObject(u)||(null==u?delete this.attrs[o]:this.attrs[o]=u,this._shouldFireChangeEvents&&this._fireChangeEvent(o,d,u),this._requestDraw())}_setComponentAttr(o,u,d){var h;void 0!==d&&((h=this.attrs[o])||(this.attrs[o]=this.getAttr(o)),this.attrs[o][u]=d,this._fireChangeEvent(o,h,d))}_fireAndBubble(o,u,d){if(u&&"Shape"===this.nodeType&&(u.target=this),o!==Rd&&o!==Pd||!(d&&(this===d||this.isAncestorOf&&this.isAncestorOf(d))||"Stage"===this.nodeType&&!d)){this._fire(o,u);var g=(o===Rd||o===Pd)&&d&&d.isAncestorOf&&d.isAncestorOf(this)&&!d.isAncestorOf(this.parent);(u&&!u.cancelBubble||!u)&&this.parent&&this.parent.isListening()&&!g&&(d&&d.parent?this._fireAndBubble.call(this.parent,o,u,d):this._fireAndBubble.call(this.parent,o,u))}}_getProtoListeners(o){let u=this._cache.get(Bn);if(!u){u={};let h=Object.getPrototypeOf(this);for(;h;)if(h.eventListeners){for(var d in h.eventListeners)u[d]=h.eventListeners[d].concat(u[d]||[]);h=Object.getPrototypeOf(h)}else h=Object.getPrototypeOf(h);this._cache.set(Bn,u)}return u[o]}_fire(o,u){(u=u||{}).currentTarget=this,u.type=o;const d=this._getProtoListeners(o);if(d)for(var h=0;h<d.length;h++)d[h].handler.call(this,u);const g=this.eventListeners[o];if(g)for(h=0;h<g.length;h++)g[h].handler.call(this,u)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(o){var u=o?o.pointerId:void 0,d=this.getStage(),h=this.getAbsolutePosition(),g=d._getPointerById(u)||d._changedPointerPositions[0]||h;He._dragElements.set(this._id,{node:this,startPointerPos:g,offset:{x:g.x-h.x,y:g.y-h.y},dragStatus:"ready",pointerId:u})}startDrag(o,u=!0){He._dragElements.has(this._id)||this._createDragElement(o),He._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:o&&o.evt},u)}_setDragPosition(o,u){const d=this.getStage()._getPointerById(u.pointerId);if(d){var h={x:d.x-u.offset.x,y:d.y-u.offset.y},g=this.dragBoundFunc();if(void 0!==g){const m=g.call(this,h,o);m?h=m:k.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==h.x||this._lastPos.y!==h.y)&&(this.setAbsolutePosition(h),this._requestDraw()),this._lastPos=h}}stopDrag(o){const u=He._dragElements.get(this._id);u&&(u.dragStatus="stopped"),He._endDragBefore(o),He._endDragAfter(o)}setDraggable(o){this._setAttr("draggable",o),this._dragChange()}isDragging(){const o=He._dragElements.get(this._id);return!!o&&"dragging"===o.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(o){if((void 0===o.evt.button||ne.dragButtons.indexOf(o.evt.button)>=0)&&!this.isDragging()){var h=!1;He._dragElements.forEach(g=>{this.isAncestorOf(g.node)&&(h=!0)}),h||this._createDragElement(o)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const u=He._dragElements.get(this._id),h=u&&"ready"===u.dragStatus;u&&"dragging"===u.dragStatus?this.stopDrag():h&&He._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(o={x:0,y:0}){const u=this.getStage();if(!u)return!1;const d={x:-o.x,y:-o.y,width:u.width()+2*o.x,height:u.height()+2*o.y};return k.haveIntersection(d,this.getClientRect())}static create(o,u){return k._isString(o)&&(o=JSON.parse(o)),this._createNode(o,u)}static _createNode(o,u){var g,m,v,d=q.prototype.getClassName.call(o),h=o.children;if(u&&(o.attrs.container=u),ne[d]||(k.warn('Can not find a node with class name "'+d+'". Fallback to "Shape".'),d="Shape"),g=new(0,ne[d])(o.attrs),h)for(m=h.length,v=0;v<m;v++)g.add(q._createNode(h[v]));return g}}q.prototype.nodeType="Node",q.prototype._attrsAffectingSize=[],q.prototype.eventListeners={},q.prototype.on.call(q.prototype,Kl,function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(Yn),this._clearSelfAndDescendantCache(Kn))}),q.prototype.on.call(q.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Is)}),q.prototype.on.call(q.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(ql)}),q.prototype.on.call(q.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(ta)});const xe=T.addGetterSetter;xe(q,"zIndex"),xe(q,"absolutePosition"),xe(q,"position"),xe(q,"x",0,W()),xe(q,"y",0,W()),xe(q,"globalCompositeOperation","source-over",pn()),xe(q,"opacity",1,W()),xe(q,"name","",pn()),xe(q,"id","",pn()),xe(q,"rotation",0,W()),T.addComponentsGetterSetter(q,"scale",["x","y"]),xe(q,"scaleX",1,W()),xe(q,"scaleY",1,W()),T.addComponentsGetterSetter(q,"skew",["x","y"]),xe(q,"skewX",0,W()),xe(q,"skewY",0,W()),T.addComponentsGetterSetter(q,"offset",["x","y"]),xe(q,"offsetX",0,W()),xe(q,"offsetY",0,W()),xe(q,"dragDistance",null,W()),xe(q,"width",0,W()),xe(q,"height",0,W()),xe(q,"listening",!0,gn()),xe(q,"preventDefault",!0,gn()),xe(q,"filters",null,function(p){return this._filterUpToDate=!1,p}),xe(q,"visible",!0,gn()),xe(q,"transformsEnabled","all",pn()),xe(q,"size"),xe(q,"dragBoundFunc"),xe(q,"draggable",!1,gn()),T.backCompat(q,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class en extends q{constructor(){super(...arguments),this.children=[]}getChildren(o){if(!o)return this.children||[];var d=[];return(this.children||[]).forEach(function(h){o(h)&&d.push(h)}),d}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(o=>{o.parent=null,o.index=0,o.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(o=>{o.parent=null,o.index=0,o.destroy()}),this.children=[],this._requestDraw(),this}add(...o){if(0===o.length)return this;if(o.length>1){for(var u=0;u<o.length;u++)this.add(o[u]);return this}const d=o[0];return d.getParent()?(d.moveTo(this),this):(this._validateAdd(d),d.index=this.getChildren().length,d.parent=this,d._clearCaches(),this.getChildren().push(d),this._fire("add",{child:d}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(o){return this._generalFind(o,!1)}findOne(o){var u=this._generalFind(o,!0);return u.length>0?u[0]:void 0}_generalFind(o,u){var d=[];return this._descendants(h=>{const g=h._isMatch(o);return g&&d.push(h),!(!g||!u)}),d}_descendants(o){let u=!1;const d=this.getChildren();for(const h of d){if(u=o(h),u)return!0;if(h.hasChildren()&&(u=h._descendants(o),u))return!0}return!1}toObject(){var o=q.prototype.toObject.call(this);return o.children=[],this.getChildren().forEach(u=>{o.children.push(u.toObject())}),o}isAncestorOf(o){for(var u=o.getParent();u;){if(u._id===this._id)return!0;u=u.getParent()}return!1}clone(o){var u=q.prototype.clone.call(this,o);return this.getChildren().forEach(function(d){u.add(d.clone())}),u}getAllIntersections(o){var u=[];return this.find("Shape").forEach(function(d){d.isVisible()&&d.intersects(o)&&u.push(d)}),u}_clearSelfAndDescendantCache(o){var u;super._clearSelfAndDescendantCache(o),!this.isCached()&&(null===(u=this.children)||void 0===u||u.forEach(function(d){d._clearSelfAndDescendantCache(o)}))}_setChildrenIndices(){var o;null===(o=this.children)||void 0===o||o.forEach(function(u,d){u.index=d}),this._requestDraw()}drawScene(o,u){var d=this.getLayer(),h=o||d&&d.getCanvas(),g=h&&h.getContext(),m=this._getCanvasCache(),v=m&&m.scene,b=h&&h.isCache;if(!this.isVisible()&&!b)return this;if(v){g.save();var w=this.getAbsoluteTransform(u).getMatrix();g.transform(w[0],w[1],w[2],w[3],w[4],w[5]),this._drawCachedSceneCanvas(g),g.restore()}else this._drawChildren("drawScene",h,u);return this}drawHit(o,u){if(!this.shouldDrawHit(u))return this;var d=this.getLayer(),h=o||d&&d.hitCanvas,g=h&&h.getContext(),m=this._getCanvasCache();if(m&&m.hit){g.save();var b=this.getAbsoluteTransform(u).getMatrix();g.transform(b[0],b[1],b[2],b[3],b[4],b[5]),this._drawCachedHitCanvas(g),g.restore()}else this._drawChildren("drawHit",h,u);return this}_drawChildren(o,u,d){var h,g=u&&u.getContext(),m=this.clipWidth(),v=this.clipHeight(),b=this.clipFunc(),w=m&&v||b;const E=d===this;if(w){g.save();var I=this.getAbsoluteTransform(d),M=I.getMatrix();if(g.transform(M[0],M[1],M[2],M[3],M[4],M[5]),g.beginPath(),b)b.call(this,g,this);else{var R=this.clipX(),S=this.clipY();g.rect(R,S,m,v)}g.clip(),M=I.copy().invert().getMatrix(),g.transform(M[0],M[1],M[2],M[3],M[4],M[5])}var j=!E&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===o;j&&(g.save(),g._applyGlobalCompositeOperation(this)),null===(h=this.children)||void 0===h||h.forEach(function(O){O[o](u,d)}),j&&g.restore(),w&&g.restore()}getClientRect(o){var u,g,m,v,b,w,d=(o=o||{}).skipTransform,h=o.relativeTo,E=this;null===(u=this.children)||void 0===u||u.forEach(function(j){if(j.visible()){var O=j.getClientRect({relativeTo:E,skipShadow:o.skipShadow,skipStroke:o.skipStroke});0===O.width&&0===O.height||(void 0===g?(g=O.x,m=O.y,v=O.x+O.width,b=O.y+O.height):(g=Math.min(g,O.x),m=Math.min(m,O.y),v=Math.max(v,O.x+O.width),b=Math.max(b,O.y+O.height)))}});for(var I=this.find("Shape"),M=!1,R=0;R<I.length;R++)if(I[R]._isVisible(this)){M=!0;break}return w=M&&void 0!==g?{x:g,y:m,width:v-g,height:b-m}:{x:0,y:0,width:0,height:0},d?w:this._transformedRect(w,h)}}T.addComponentsGetterSetter(en,"clip",["x","y","width","height"]),T.addGetterSetter(en,"clipX",void 0,W()),T.addGetterSetter(en,"clipY",void 0,W()),T.addGetterSetter(en,"clipWidth",void 0,W()),T.addGetterSetter(en,"clipHeight",void 0,W()),T.addGetterSetter(en,"clipFunc");const zi=new Map,Ql=void 0!==ne._global.PointerEvent;function sa(p){return zi.get(p)}function As(p){return{evt:p,pointerId:p.pointerId}}function Xl(p,o){return zi.get(p)===o}function Zl(p,o){tn(p),o.getStage()&&(zi.set(p,o),Ql&&o._fire("gotpointercapture",As(new PointerEvent("gotpointercapture"))))}function tn(p,o){const u=zi.get(p);u&&(u.getStage(),zi.delete(p),Ql&&u._fire("lostpointercapture",As(new PointerEvent("lostpointercapture"))))}var Od="mouseleave",Jl="mouseover",eu="mouseenter",xs="mousemove",oa="mousedown",di="mouseup",Wi="pointermove",hi="pointerdown",Or="pointerup",qi="pointercancel",Rs="pointerout",Ps="pointerleave",Ki="pointerover",ks="pointerenter",aa="contextmenu",ht="touchstart",tu="touchend",la="touchmove",Ns="touchcancel",Ge="wheel",Ke=[[eu,"_pointerenter"],[oa,"_pointerdown"],[xs,"_pointermove"],[di,"_pointerup"],[Od,"_pointerleave"],[ht,"_pointerdown"],[la,"_pointermove"],[tu,"_pointerup"],[Ns,"_pointercancel"],[Jl,"_pointerover"],[Ge,"_wheel"],[aa,"_contextmenu"],[hi,"_pointerdown"],[Wi,"_pointermove"],[Or,"_pointerup"],[qi,"_pointercancel"],["lostpointercapture","_lostpointercapture"]];const Yi={mouse:{[Rs]:"mouseout",[Ps]:Od,[Ki]:Jl,[ks]:eu,[Wi]:xs,[hi]:oa,[Or]:di,[qi]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Rs]:"touchout",[Ps]:"touchleave",[Ki]:"touchover",[ks]:"touchenter",[Wi]:la,[hi]:ht,[Or]:tu,[qi]:Ns,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Rs]:Rs,[Ps]:Ps,[Ki]:Ki,[ks]:ks,[Wi]:Wi,[hi]:hi,[Or]:Or,[qi]:qi,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Qi=p=>p.indexOf("pointer")>=0?"pointer":p.indexOf("touch")>=0?"touch":"mouse",mr=p=>{const o=Qi(p);return"pointer"===o?ne.pointerEventsEnabled&&Yi.pointer:"touch"===o?Yi.touch:"mouse"===o?Yi.mouse:void 0};function fe(p={}){return(p.clipFunc||p.clipWidth||p.clipHeight)&&k.warn("Stage does not support clipping. Please use clip for Layers or Groups."),p}const da=[];class V extends en{constructor(o){super(fe(o)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),da.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{fe(this.attrs)}),this._checkVisibility()}_validateAdd(o){const u="Layer"===o.getType(),d="FastLayer"===o.getType();u||d||k.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const o=this.visible()?"":"none";this.content.style.display=o}setContainer(o){if("string"==typeof o){if("."===o.charAt(0)){var u=o.slice(1);o=document.getElementsByClassName(u)[0]}else{var d;d="#"!==o.charAt(0)?o:o.slice(1),o=document.getElementById(d)}if(!o)throw"Can not find container in document with id "+d}return this._setAttr("container",o),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),o.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var d,o=this.children,u=o.length;for(d=0;d<u;d++)o[d].clear();return this}clone(o){return o||(o={}),o.container=typeof document<"u"&&document.createElement("div"),en.prototype.clone.call(this,o)}destroy(){super.destroy();var o=this.content;o&&k._isInDocument(o)&&this.container().removeChild(o);var u=da.indexOf(this);return u>-1&&da.splice(u,1),k.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const o=this._pointerPositions[0]||this._changedPointerPositions[0];return o?{x:o.x,y:o.y}:(k.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(o){return this._pointerPositions.find(u=>u.id===o)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(o){(o=o||{}).x=o.x||0,o.y=o.y||0,o.width=o.width||this.width(),o.height=o.height||this.height();var u=new ci({width:o.width,height:o.height,pixelRatio:o.pixelRatio||1}),d=u.getContext()._context,h=this.children;return(o.x||o.y)&&d.translate(-1*o.x,-1*o.y),h.forEach(function(g){if(g.isVisible()){var m=g._toKonvaCanvas(o);d.drawImage(m._canvas,o.x,o.y,m.getWidth()/m.getPixelRatio(),m.getHeight()/m.getPixelRatio())}}),u}getIntersection(o){if(!o)return null;var g,u=this.children;for(g=u.length-1;g>=0;g--){const m=u[g].getIntersection(o);if(m)return m}return null}_resizeDOM(){var o=this.width(),u=this.height();this.content&&(this.content.style.width=o+"px",this.content.style.height=u+"px"),this.bufferCanvas.setSize(o,u),this.bufferHitCanvas.setSize(o,u),this.children.forEach(d=>{d.setSize({width:o,height:u}),d.draw()})}add(o,...u){if(arguments.length>1){for(var d=0;d<arguments.length;d++)this.add(arguments[d]);return this}super.add(o);var h=this.children.length;return h>5&&k.warn("The stage has "+h+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),o.setSize({width:this.width(),height:this.height()}),o.draw(),ne.isBrowser&&this.content.appendChild(o.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(o){return Xl(o,this)}setPointerCapture(o){Zl(o,this)}releaseCapture(o){tn(o)}getLayers(){return this.children}_bindContentEvents(){!ne.isBrowser||Ke.forEach(([o,u])=>{this.content.addEventListener(o,d=>{this[u](d)},{passive:!1})})}_pointerenter(o){this.setPointersPositions(o);const u=mr(o.type);this._fire(u.pointerenter,{evt:o,target:this,currentTarget:this})}_pointerover(o){this.setPointersPositions(o);const u=mr(o.type);this._fire(u.pointerover,{evt:o,target:this,currentTarget:this})}_getTargetShape(o){let u=this[o+"targetShape"];return u&&!u.getStage()&&(u=null),u}_pointerleave(o){const u=mr(o.type),d=Qi(o.type);if(u){this.setPointersPositions(o);var h=this._getTargetShape(d),g=!He.isDragging||ne.hitOnDragEnabled;h&&g?(h._fireAndBubble(u.pointerout,{evt:o}),h._fireAndBubble(u.pointerleave,{evt:o}),this._fire(u.pointerleave,{evt:o,target:this,currentTarget:this}),this[d+"targetShape"]=null):g&&(this._fire(u.pointerleave,{evt:o,target:this,currentTarget:this}),this._fire(u.pointerout,{evt:o,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(o){const u=mr(o.type),d=Qi(o.type);if(u){this.setPointersPositions(o);var h=!1;this._changedPointerPositions.forEach(g=>{var m=this.getIntersection(g);if(He.justDragged=!1,ne["_"+d+"ListenClick"]=!0,!m||!m.isListening())return;ne.capturePointerEventsEnabled&&m.setPointerCapture(g.id),this[d+"ClickStartShape"]=m,m._fireAndBubble(u.pointerdown,{evt:o,pointerId:g.id}),h=!0;const b=o.type.indexOf("touch")>=0;m.preventDefault()&&o.cancelable&&b&&o.preventDefault()}),h||this._fire(u.pointerdown,{evt:o,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(o){const u=mr(o.type),d=Qi(o.type);if(!u)return;if(He.isDragging&&He.node.preventDefault()&&o.cancelable&&o.preventDefault(),this.setPointersPositions(o),He.isDragging&&!ne.hitOnDragEnabled)return;var g={};let m=!1;var v=this._getTargetShape(d);this._changedPointerPositions.forEach(b=>{const w=sa(b.id)||this.getIntersection(b),E=b.id,I={evt:o,pointerId:E};var M=v!==w;if(M&&v&&(v._fireAndBubble(u.pointerout,Object.assign({},I),w),v._fireAndBubble(u.pointerleave,Object.assign({},I),w)),w){if(g[w._id])return;g[w._id]=!0}w&&w.isListening()?(m=!0,M&&(w._fireAndBubble(u.pointerover,Object.assign({},I),v),w._fireAndBubble(u.pointerenter,Object.assign({},I),v),this[d+"targetShape"]=w),w._fireAndBubble(u.pointermove,Object.assign({},I))):v&&(this._fire(u.pointerover,{evt:o,target:this,currentTarget:this,pointerId:E}),this[d+"targetShape"]=null)}),m||this._fire(u.pointermove,{evt:o,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(o){const u=mr(o.type),d=Qi(o.type);if(!u)return;this.setPointersPositions(o);const h=this[d+"ClickStartShape"],g=this[d+"ClickEndShape"];var m={};let v=!1;this._changedPointerPositions.forEach(b=>{const w=sa(b.id)||this.getIntersection(b);if(w){if(w.releaseCapture(b.id),m[w._id])return;m[w._id]=!0}const E=b.id,I={evt:o,pointerId:E};let M=!1;ne["_"+d+"InDblClickWindow"]?(M=!0,clearTimeout(this[d+"DblTimeout"])):He.justDragged||(ne["_"+d+"InDblClickWindow"]=!0,clearTimeout(this[d+"DblTimeout"])),this[d+"DblTimeout"]=setTimeout(function(){ne["_"+d+"InDblClickWindow"]=!1},ne.dblClickWindow),w&&w.isListening()?(v=!0,this[d+"ClickEndShape"]=w,w._fireAndBubble(u.pointerup,Object.assign({},I)),ne["_"+d+"ListenClick"]&&h&&h===w&&(w._fireAndBubble(u.pointerclick,Object.assign({},I)),M&&g&&g===w&&w._fireAndBubble(u.pointerdblclick,Object.assign({},I)))):(this[d+"ClickEndShape"]=null,ne["_"+d+"ListenClick"]&&this._fire(u.pointerclick,{evt:o,target:this,currentTarget:this,pointerId:E}),M&&this._fire(u.pointerdblclick,{evt:o,target:this,currentTarget:this,pointerId:E}))}),v||this._fire(u.pointerup,{evt:o,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),ne["_"+d+"ListenClick"]=!1,o.cancelable&&"touch"!==d&&o.preventDefault()}_contextmenu(o){this.setPointersPositions(o);var u=this.getIntersection(this.getPointerPosition());u&&u.isListening()?u._fireAndBubble(aa,{evt:o}):this._fire(aa,{evt:o,target:this,currentTarget:this})}_wheel(o){this.setPointersPositions(o);var u=this.getIntersection(this.getPointerPosition());u&&u.isListening()?u._fireAndBubble(Ge,{evt:o}):this._fire(Ge,{evt:o,target:this,currentTarget:this})}_pointercancel(o){this.setPointersPositions(o);const u=sa(o.pointerId)||this.getIntersection(this.getPointerPosition());u&&u._fireAndBubble(Or,As(o)),tn(o.pointerId)}_lostpointercapture(o){tn(o.pointerId)}setPointersPositions(o){var u=this._getContentPosition(),d=null,h=null;void 0!==(o=o||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(o.touches,g=>{this._pointerPositions.push({id:g.identifier,x:(g.clientX-u.left)/u.scaleX,y:(g.clientY-u.top)/u.scaleY})}),Array.prototype.forEach.call(o.changedTouches||o.touches,g=>{this._changedPointerPositions.push({id:g.identifier,x:(g.clientX-u.left)/u.scaleX,y:(g.clientY-u.top)/u.scaleY})})):(this.pointerPos={x:d=(o.clientX-u.left)/u.scaleX,y:h=(o.clientY-u.top)/u.scaleY},this._pointerPositions=[{x:d,y:h,id:k._getFirstPointerId(o)}],this._changedPointerPositions=[{x:d,y:h,id:k._getFirstPointerId(o)}])}_setPointerPosition(o){k.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(o)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var o=this.content.getBoundingClientRect();return{top:o.top,left:o.left,scaleX:o.width/this.content.clientWidth||1,scaleY:o.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new ci({width:this.width(),height:this.height()}),this.bufferHitCanvas=new Wl({pixelRatio:1,width:this.width(),height:this.height()}),ne.isBrowser){var o=this.container();if(!o)throw"Stage has no container. A container is required.";o.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),o.appendChild(this.content),this._resizeDOM()}}cache(){return k.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(o){o.batchDraw()}),this}}V.prototype.nodeType="Stage",Oe(V),T.addGetterSetter(V,"container");var Xi="hasShadow",_e="shadowRGBA",je="patternImage",nu="linearGradient",Ld="radialGradient";let Os;function fi(){return Os||(Os=k.createCanvasElement().getContext("2d"),Os)}const Tt={};class U extends q{constructor(o){let u;for(super(o);u=k.getRandomColor(),!u||u in Tt;);this.colorKey=u,Tt[u]=this}getContext(){return k.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return k.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(Xi,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(je,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const u=fi().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(u&&u.setTransform){const d=new zt;d.translate(this.fillPatternX(),this.fillPatternY()),d.rotate(ne.getAngle(this.fillPatternRotation())),d.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),d.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const h=d.getMatrix(),g=typeof DOMMatrix>"u"?{a:h[0],b:h[1],c:h[2],d:h[3],e:h[4],f:h[5]}:new DOMMatrix(h);u.setTransform(g)}return u}}_getLinearGradient(){return this._getCache(nu,this.__getLinearGradient)}__getLinearGradient(){var o=this.fillLinearGradientColorStops();if(o){for(var u=fi(),d=this.fillLinearGradientStartPoint(),h=this.fillLinearGradientEndPoint(),g=u.createLinearGradient(d.x,d.y,h.x,h.y),m=0;m<o.length;m+=2)g.addColorStop(o[m],o[m+1]);return g}}_getRadialGradient(){return this._getCache(Ld,this.__getRadialGradient)}__getRadialGradient(){var o=this.fillRadialGradientColorStops();if(o){for(var u=fi(),d=this.fillRadialGradientStartPoint(),h=this.fillRadialGradientEndPoint(),g=u.createRadialGradient(d.x,d.y,this.fillRadialGradientStartRadius(),h.x,h.y,this.fillRadialGradientEndRadius()),m=0;m<o.length;m+=2)g.addColorStop(o[m],o[m+1]);return g}}getShadowRGBA(){return this._getCache(_e,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var o=k.colorToRGBA(this.shadowColor());if(o)return"rgba("+o.r+","+o.g+","+o.b+","+o.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops()))}hasHitStroke(){const o=this.hitStrokeWidth();return"auto"===o?this.hasStroke():this.strokeEnabled()&&!!o}intersects(o){var d=this.getStage().bufferHitCanvas;return d.getContext().clear(),this.drawHit(d,null,!0),d.context.getImageData(Math.round(o.x),Math.round(o.y),1,1).data[3]>0}destroy(){return q.prototype.destroy.call(this),delete Tt[this.colorKey],delete this.colorKey,this}_useBufferCanvas(o){var u;if(!this.getStage()||null!==(u=this.attrs.perfectDrawEnabled)&&void 0!==u&&!u)return!1;const h=o||this.hasFill(),g=this.hasStroke(),m=1!==this.getAbsoluteOpacity();if(h&&g&&m)return!0;const v=this.hasShadow(),b=this.shadowForStrokeEnabled();return!!(h&&g&&v&&b)}setStrokeHitEnabled(o){k.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),this.hitStrokeWidth(o?"auto":0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){var o=this.size();return{x:this._centroid?-o.width/2:0,y:this._centroid?-o.height/2:0,width:o.width,height:o.height}}getClientRect(o={}){const u=o.skipTransform,d=o.relativeTo,h=this.getSelfRect(),m=!o.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,v=h.width+m,b=h.height+m,w=!o.skipShadow&&this.hasShadow(),E=w?this.shadowOffsetX():0,I=w?this.shadowOffsetY():0,M=v+Math.abs(E),R=b+Math.abs(I),S=w&&this.shadowBlur()||0,L={width:M+2*S,height:R+2*S,x:-(m/2+S)+Math.min(E,0)+h.x,y:-(m/2+S)+Math.min(I,0)+h.y};return u?L:this._transformedRect(L,d)}drawScene(o,u){var E,I,d=this.getLayer(),h=o||d.getCanvas(),g=h.getContext(),m=this._getCanvasCache(),v=this.getSceneFunc(),b=this.hasShadow(),M=h.isCache,R=u===this;if(!this.isVisible()&&!R)return this;if(m){g.save();var S=this.getAbsoluteTransform(u).getMatrix();return g.transform(S[0],S[1],S[2],S[3],S[4],S[5]),this._drawCachedSceneCanvas(g),g.restore(),this}if(!v)return this;if(g.save(),this._useBufferCanvas()&&!M){(I=(E=this.getStage().bufferCanvas).getContext()).clear(),I.save(),I._applyLineJoin(this);var j=this.getAbsoluteTransform(u).getMatrix();I.transform(j[0],j[1],j[2],j[3],j[4],j[5]),v.call(this,I,this),I.restore();var O=E.pixelRatio;b&&g._applyShadow(this),g._applyOpacity(this),g._applyGlobalCompositeOperation(this),g.drawImage(E._canvas,0,0,E.width/O,E.height/O)}else g._applyLineJoin(this),R||(j=this.getAbsoluteTransform(u).getMatrix(),g.transform(j[0],j[1],j[2],j[3],j[4],j[5]),g._applyOpacity(this),g._applyGlobalCompositeOperation(this)),b&&g._applyShadow(this),v.call(this,g,this);return g.restore(),this}drawHit(o,u,d=!1){if(!this.shouldDrawHit(u,d))return this;var h=this.getLayer(),g=o||h.hitCanvas,m=g&&g.getContext(),v=this.hitFunc()||this.sceneFunc(),b=this._getCanvasCache(),w=b&&b.hit;if(this.colorKey||k.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),w){m.save();var E=this.getAbsoluteTransform(u).getMatrix();return m.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._drawCachedHitCanvas(m),m.restore(),this}if(!v)return this;if(m.save(),m._applyLineJoin(this),this!==u){var M=this.getAbsoluteTransform(u).getMatrix();m.transform(M[0],M[1],M[2],M[3],M[4],M[5])}return v.call(this,m,this),m.restore(),this}drawHitFromCache(o=0){var b,w,E,I,M,u=this._getCanvasCache(),d=this._getCachedSceneCanvas(),h=u.hit,g=h.getContext(),m=h.getWidth(),v=h.getHeight();g.clear(),g.drawImage(d._canvas,0,0,m,v);try{for(E=(w=(b=g.getImageData(0,0,m,v)).data).length,I=k._hexToRgb(this.colorKey),M=0;M<E;M+=4)w[M+3]>o?(w[M]=I.r,w[M+1]=I.g,w[M+2]=I.b,w[M+3]=255):w[M+3]=0;g.putImageData(b,0,0)}catch(S){k.error("Unable to draw hit graph from cached scene canvas. "+S.message)}return this}hasPointerCapture(o){return Xl(o,this)}setPointerCapture(o){Zl(o,this)}releaseCapture(o){tn(o)}}U.prototype._fillFunc=function pm(p){p.fill()},U.prototype._strokeFunc=function Bd(p){p.stroke()},U.prototype._fillFuncHit=function gm(p){p.fill()},U.prototype._strokeFuncHit=function Xn(p){p.stroke()},U.prototype._centroid=!1,U.prototype.nodeType="Shape",Oe(U),U.prototype.eventListeners={},U.prototype.on.call(U.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function mm(){this._clearCache(Xi)}),U.prototype.on.call(U.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function ym(){this._clearCache(_e)}),U.prototype.on.call(U.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function vm(){this._clearCache(je)}),U.prototype.on.call(U.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function _m(){this._clearCache(nu)}),U.prototype.on.call(U.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function jd(){this._clearCache(Ld)}),T.addGetterSetter(U,"stroke",void 0,$l()),T.addGetterSetter(U,"strokeWidth",2,W()),T.addGetterSetter(U,"fillAfterStrokeEnabled",!1),T.addGetterSetter(U,"hitStrokeWidth","auto",ji()),T.addGetterSetter(U,"strokeHitEnabled",!0,gn()),T.addGetterSetter(U,"perfectDrawEnabled",!0,gn()),T.addGetterSetter(U,"shadowForStrokeEnabled",!0,gn()),T.addGetterSetter(U,"lineJoin"),T.addGetterSetter(U,"lineCap"),T.addGetterSetter(U,"sceneFunc"),T.addGetterSetter(U,"hitFunc"),T.addGetterSetter(U,"dash"),T.addGetterSetter(U,"dashOffset",0,W()),T.addGetterSetter(U,"shadowColor",void 0,pn()),T.addGetterSetter(U,"shadowBlur",0,W()),T.addGetterSetter(U,"shadowOpacity",1,W()),T.addComponentsGetterSetter(U,"shadowOffset",["x","y"]),T.addGetterSetter(U,"shadowOffsetX",0,W()),T.addGetterSetter(U,"shadowOffsetY",0,W()),T.addGetterSetter(U,"fillPatternImage"),T.addGetterSetter(U,"fill",void 0,$l()),T.addGetterSetter(U,"fillPatternX",0,W()),T.addGetterSetter(U,"fillPatternY",0,W()),T.addGetterSetter(U,"fillLinearGradientColorStops"),T.addGetterSetter(U,"strokeLinearGradientColorStops"),T.addGetterSetter(U,"fillRadialGradientStartRadius",0),T.addGetterSetter(U,"fillRadialGradientEndRadius",0),T.addGetterSetter(U,"fillRadialGradientColorStops"),T.addGetterSetter(U,"fillPatternRepeat","repeat"),T.addGetterSetter(U,"fillEnabled",!0),T.addGetterSetter(U,"strokeEnabled",!0),T.addGetterSetter(U,"shadowEnabled",!0),T.addGetterSetter(U,"dashEnabled",!0),T.addGetterSetter(U,"strokeScaleEnabled",!0),T.addGetterSetter(U,"fillPriority","color"),T.addComponentsGetterSetter(U,"fillPatternOffset",["x","y"]),T.addGetterSetter(U,"fillPatternOffsetX",0,W()),T.addGetterSetter(U,"fillPatternOffsetY",0,W()),T.addComponentsGetterSetter(U,"fillPatternScale",["x","y"]),T.addGetterSetter(U,"fillPatternScaleX",1,W()),T.addGetterSetter(U,"fillPatternScaleY",1,W()),T.addComponentsGetterSetter(U,"fillLinearGradientStartPoint",["x","y"]),T.addComponentsGetterSetter(U,"strokeLinearGradientStartPoint",["x","y"]),T.addGetterSetter(U,"fillLinearGradientStartPointX",0),T.addGetterSetter(U,"strokeLinearGradientStartPointX",0),T.addGetterSetter(U,"fillLinearGradientStartPointY",0),T.addGetterSetter(U,"strokeLinearGradientStartPointY",0),T.addComponentsGetterSetter(U,"fillLinearGradientEndPoint",["x","y"]),T.addComponentsGetterSetter(U,"strokeLinearGradientEndPoint",["x","y"]),T.addGetterSetter(U,"fillLinearGradientEndPointX",0),T.addGetterSetter(U,"strokeLinearGradientEndPointX",0),T.addGetterSetter(U,"fillLinearGradientEndPointY",0),T.addGetterSetter(U,"strokeLinearGradientEndPointY",0),T.addComponentsGetterSetter(U,"fillRadialGradientStartPoint",["x","y"]),T.addGetterSetter(U,"fillRadialGradientStartPointX",0),T.addGetterSetter(U,"fillRadialGradientStartPointY",0),T.addComponentsGetterSetter(U,"fillRadialGradientEndPoint",["x","y"]),T.addGetterSetter(U,"fillRadialGradientEndPointX",0),T.addGetterSetter(U,"fillRadialGradientEndPointY",0),T.addGetterSetter(U,"fillPatternRotation",0),T.backCompat(U,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var Ve=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],wm=Ve.length;class pi extends en{constructor(o){super(o),this.canvas=new ci,this.hitCanvas=new Wl({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(o){return this.getContext().clear(o),this.getHitCanvas().getContext().clear(o),this}setZIndex(o){super.setZIndex(o);var u=this.getStage();return u&&u.content&&(u.content.removeChild(this.getNativeCanvasElement()),o<u.children.length-1?u.content.insertBefore(this.getNativeCanvasElement(),u.children[o+1].getCanvas()._canvas):u.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){q.prototype.moveToTop.call(this);var o=this.getStage();return o&&o.content&&(o.content.removeChild(this.getNativeCanvasElement()),o.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!q.prototype.moveUp.call(this))return!1;var u=this.getStage();return!(!u||!u.content||(u.content.removeChild(this.getNativeCanvasElement()),this.index<u.children.length-1?u.content.insertBefore(this.getNativeCanvasElement(),u.children[this.index+1].getCanvas()._canvas):u.content.appendChild(this.getNativeCanvasElement()),0))}moveDown(){if(q.prototype.moveDown.call(this)){var o=this.getStage();if(o){var u=o.children;o.content&&(o.content.removeChild(this.getNativeCanvasElement()),o.content.insertBefore(this.getNativeCanvasElement(),u[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(q.prototype.moveToBottom.call(this)){var o=this.getStage();if(o){var u=o.children;o.content&&(o.content.removeChild(this.getNativeCanvasElement()),o.content.insertBefore(this.getNativeCanvasElement(),u[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var o=this.getNativeCanvasElement();return q.prototype.remove.call(this),o&&o.parentNode&&k._isInDocument(o)&&o.parentNode.removeChild(o),this}getStage(){return this.parent}setSize({width:o,height:u}){return this.canvas.setSize(o,u),this.hitCanvas.setSize(o,u),this._setSmoothEnabled(),this}_validateAdd(o){var u=o.getType();"Group"!==u&&"Shape"!==u&&k.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(o){return(o=o||{}).width=o.width||this.getWidth(),o.height=o.height||this.getHeight(),o.x=void 0!==o.x?o.x:this.x(),o.y=void 0!==o.y?o.y:this.y(),q.prototype._toKonvaCanvas.call(this,o)}_checkVisibility(){this.canvas._canvas.style.display=this.visible()?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){k.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){k.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,k.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(o){if(!this.isListening()||!this.isVisible())return null;for(var u=1,d=!1;;){for(let h=0;h<wm;h++){const g=Ve[h],m=this._getIntersection({x:o.x+g.x*u,y:o.y+g.y*u}),v=m.shape;if(v)return v;if(d=!!m.antialiased,!m.antialiased)break}if(!d)return null;u+=1}}_getIntersection(o){const u=this.hitCanvas.pixelRatio,d=this.hitCanvas.context.getImageData(Math.round(o.x*u),Math.round(o.y*u),1,1).data,h=d[3];if(255===h){const g=k._rgbToHex(d[0],d[1],d[2]),m=Tt["#"+g];return m?{shape:m}:{antialiased:!0}}return h>0?{antialiased:!0}:{}}drawScene(o,u){var d=this.getLayer(),h=o||d&&d.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&h.getContext().clear(),en.prototype.drawScene.call(this,h,u),this._fire("draw",{node:this}),this}drawHit(o,u){var d=this.getLayer(),h=o||d&&d.hitCanvas;return d&&d.clearBeforeDraw()&&d.getHitCanvas().getContext().clear(),en.prototype.drawHit.call(this,h,u),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(o){k.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(o)}getHitGraphEnabled(o){return k.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(this.parent&&this.parent.content){var o=this.parent;this.hitCanvas._canvas.parentNode?o.content.removeChild(this.hitCanvas._canvas):o.content.appendChild(this.hitCanvas._canvas)}}destroy(){return k.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}pi.prototype.nodeType="Layer",Oe(pi),T.addGetterSetter(pi,"imageSmoothingEnabled",!0),T.addGetterSetter(pi,"clearBeforeDraw",!0),T.addGetterSetter(pi,"hitGraphEnabled",!0,gn());class ru extends pi{constructor(o){super(o),this.listening(!1),k.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}ru.prototype.nodeType="FastLayer",Oe(ru);class ie extends en{_validateAdd(o){var u=o.getType();"Group"!==u&&"Shape"!==u&&k.throw("You may only add groups and shapes to groups.")}}ie.prototype.nodeType="Group",Oe(ie);var iu=pr.performance&&pr.performance.now?function(){return pr.performance.now()}:function(){return(new Date).getTime()};let ft=(()=>{class p{constructor(u,d){this.id=p.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:iu(),frameRate:0},this.func=u,this.setLayers(d)}setLayers(u){return this.layers=u?u.length>0?u:[u]:[],this}getLayers(){return this.layers}addLayer(u){var g,d=this.layers,h=d.length;for(g=0;g<h;g++)if(d[g]._id===u._id)return!1;return this.layers.push(u),!0}isRunning(){var g,d=p.animations,h=d.length;for(g=0;g<h;g++)if(d[g].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=iu(),p._addAnimation(this),this}stop(){return p._removeAnimation(this),this}_updateFrameObject(u){this.frame.timeDiff=u-this.frame.lastTime,this.frame.lastTime=u,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(u){this.animations.push(u),this._handleAnimation()}static _removeAnimation(u){var m,d=u.id,h=this.animations,g=h.length;for(m=0;m<g;m++)if(h[m].id===d){this.animations.splice(m,1);break}}static _runFrames(){var h,g,m,v,b,w,E,I,u={},d=this.animations;for(v=0;v<d.length;v++)if(g=(h=d[v]).layers,m=h.func,h._updateFrameObject(iu()),w=g.length,!m||!1!==m.call(h,h.frame))for(b=0;b<w;b++)void 0!==(E=g[b])._id&&(u[E._id]=E);for(I in u)!u.hasOwnProperty(I)||u[I].batchDraw()}static _animationLoop(){var u=p;u.animations.length?(u._runFrames(),k.requestAnimFrame(u._animationLoop)):u.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,k.requestAnimFrame(this._animationLoop))}}return p.animations=[],p.animIdCounter=0,p.animRunning=!1,p})();var Fs={node:1,duration:1,easing:1,onFinish:1,yoyo:1},Ud=0,fa=["fill","stroke","shadowColor"];class Ls{constructor(o,u,d,h,g,m,v){this.prop=o,this.propFunc=u,this.begin=h,this._pos=h,this.duration=m,this._change=0,this.prevPos=0,this.yoyo=v,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=d,this._change=g-this.begin,this.pause()}fire(o){var u=this[o];u&&u()}setTime(o){o>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():o<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=o,this.update())}getTime(){return this._time}setPosition(o){this.prevPos=this._pos,this.propFunc(o),this._pos=o}getPosition(o){return void 0===o&&(o=this._time),this.func(o,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(o){this.pause(),this._time=o,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var o=this.getTimer()-this._startTime;2===this.state?this.setTime(o):3===this.state&&this.setTime(this.duration-o)}pause(){this.state=1,this.fire("onPause")}getTimer(){return(new Date).getTime()}}let Bs=(()=>{class p{constructor(u){var m,w,d=this,h=u.node,g=h._id,v=u.easing||gi.Linear,b=!!u.yoyo;m=typeof u.duration>"u"?.3:0===u.duration?.001:u.duration,this.node=h,this._id=Ud++;var E=h.getLayer()||(h instanceof ne.Stage?h.getLayers():null);for(w in E||k.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new ft(function(){d.tween.onEnterFrame()},E),this.tween=new Ls(w,function(I){d._tweenFunc(I)},v,0,1,1e3*m,b),this._addListeners(),p.attrs[g]||(p.attrs[g]={}),p.attrs[g][this._id]||(p.attrs[g][this._id]={}),p.tweens[g]||(p.tweens[g]={}),u)void 0===Fs[w]&&this._addAttr(w,u[w]);this.reset(),this.onFinish=u.onFinish,this.onReset=u.onReset,this.onUpdate=u.onUpdate}_addAttr(u,d){var m,v,b,w,E,I,M,R,h=this.node,g=h._id;if((b=p.tweens[g][u])&&delete p.attrs[g][b][u],m=h.getAttr(u),k._isArray(d))if(v=[],E=Math.max(d.length,m.length),"points"===u&&d.length!==m.length&&(d.length>m.length?(M=m,m=k._prepareArrayForTween(m,d,h.closed())):(I=d,d=k._prepareArrayForTween(d,m,h.closed()))),0===u.indexOf("fill"))for(w=0;w<E;w++)if(w%2==0)v.push(d[w]-m[w]);else{var S=k.colorToRGBA(m[w]);R=k.colorToRGBA(d[w]),m[w]=S,v.push({r:R.r-S.r,g:R.g-S.g,b:R.b-S.b,a:R.a-S.a})}else for(w=0;w<E;w++)v.push(d[w]-m[w]);else-1!==fa.indexOf(u)?(m=k.colorToRGBA(m),v={r:(R=k.colorToRGBA(d)).r-m.r,g:R.g-m.g,b:R.b-m.b,a:R.a-m.a}):v=d-m;p.attrs[g][this._id][u]={start:m,diff:v,end:d,trueEnd:I,trueStart:M},p.tweens[g][u]=this._id}_tweenFunc(u){var g,m,v,b,w,E,I,M,d=this.node,h=p.attrs[d._id][this._id];for(g in h){if(b=(m=h[g]).diff,M=m.end,k._isArray(v=m.start))if(w=[],I=Math.max(v.length,M.length),0===g.indexOf("fill"))for(E=0;E<I;E++)w.push(E%2==0?(v[E]||0)+b[E]*u:"rgba("+Math.round(v[E].r+b[E].r*u)+","+Math.round(v[E].g+b[E].g*u)+","+Math.round(v[E].b+b[E].b*u)+","+(v[E].a+b[E].a*u)+")");else for(E=0;E<I;E++)w.push((v[E]||0)+b[E]*u);else w=-1!==fa.indexOf(g)?"rgba("+Math.round(v.r+b.r*u)+","+Math.round(v.g+b.g*u)+","+Math.round(v.b+b.b*u)+","+(v.a+b.a*u)+")":v+b*u;d.setAttr(g,w)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var u=this.node,d=p.attrs[u._id][this._id];d.points&&d.points.trueEnd&&u.setAttr("points",d.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var u=this.node,d=p.attrs[u._id][this._id];d.points&&d.points.trueStart&&u.points(d.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(u){return this.tween.seek(1e3*u),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var g,u=this.node._id,d=this._id,h=p.tweens[u];for(g in this.pause(),h)delete p.tweens[u][g];delete p.attrs[u][d]}}return p.attrs={},p.tweens={},p})();q.prototype.to=function(p){var o=p.onFinish;p.node=this,p.onFinish=function(){this.destroy(),o&&o()},new Bs(p).play()};const gi={BackEaseIn(p,o,u,d){var h=1.70158;return u*(p/=d)*p*((h+1)*p-h)+o},BackEaseOut(p,o,u,d){var h=1.70158;return u*((p=p/d-1)*p*((h+1)*p+h)+1)+o},BackEaseInOut(p,o,u,d){var h=1.70158;return(p/=d/2)<1?u/2*(p*p*((1+(h*=1.525))*p-h))+o:u/2*((p-=2)*p*((1+(h*=1.525))*p+h)+2)+o},ElasticEaseIn(p,o,u,d,h,g){var m=0;return 0===p?o:1==(p/=d)?o+u:(g||(g=.3*d),!h||h<Math.abs(u)?(h=u,m=g/4):m=g/(2*Math.PI)*Math.asin(u/h),-h*Math.pow(2,10*(p-=1))*Math.sin((p*d-m)*(2*Math.PI)/g)+o)},ElasticEaseOut(p,o,u,d,h,g){var m=0;return 0===p?o:1==(p/=d)?o+u:(g||(g=.3*d),!h||h<Math.abs(u)?(h=u,m=g/4):m=g/(2*Math.PI)*Math.asin(u/h),h*Math.pow(2,-10*p)*Math.sin((p*d-m)*(2*Math.PI)/g)+u+o)},ElasticEaseInOut(p,o,u,d,h,g){var m=0;return 0===p?o:2==(p/=d/2)?o+u:(g||(g=d*(.3*1.5)),!h||h<Math.abs(u)?(h=u,m=g/4):m=g/(2*Math.PI)*Math.asin(u/h),p<1?h*Math.pow(2,10*(p-=1))*Math.sin((p*d-m)*(2*Math.PI)/g)*-.5+o:h*Math.pow(2,-10*(p-=1))*Math.sin((p*d-m)*(2*Math.PI)/g)*.5+u+o)},BounceEaseOut:(p,o,u,d)=>(p/=d)<1/2.75?u*(7.5625*p*p)+o:p<2/2.75?u*(7.5625*(p-=1.5/2.75)*p+.75)+o:p<2.5/2.75?u*(7.5625*(p-=2.25/2.75)*p+.9375)+o:u*(7.5625*(p-=2.625/2.75)*p+.984375)+o,BounceEaseIn:(p,o,u,d)=>u-gi.BounceEaseOut(d-p,0,u,d)+o,BounceEaseInOut:(p,o,u,d)=>p<d/2?.5*gi.BounceEaseIn(2*p,0,u,d)+o:.5*gi.BounceEaseOut(2*p-d,0,u,d)+.5*u+o,EaseIn:(p,o,u,d)=>u*(p/=d)*p+o,EaseOut:(p,o,u,d)=>-u*(p/=d)*(p-2)+o,EaseInOut:(p,o,u,d)=>(p/=d/2)<1?u/2*p*p+o:-u/2*(--p*(p-2)-1)+o,StrongEaseIn:(p,o,u,d)=>u*(p/=d)*p*p*p*p+o,StrongEaseOut:(p,o,u,d)=>u*((p=p/d-1)*p*p*p*p+1)+o,StrongEaseInOut:(p,o,u,d)=>(p/=d/2)<1?u/2*p*p*p*p*p+o:u/2*((p-=2)*p*p*p*p+2)+o,Linear:(p,o,u,d)=>u*p/d+o},ou=k._assign(ne,{Util:k,Transform:zt,Node:q,Container:en,Stage:V,stages:da,Layer:pi,FastLayer:ru,Group:ie,DD:He,Shape:U,shapes:Tt,Animation:ft,Tween:Bs,Easings:gi,Context:ea,Canvas:$i});class wn extends U{_sceneFunc(o){var u=ne.getAngle(this.angle()),d=this.clockwise();o.beginPath(),o.arc(0,0,this.outerRadius(),0,u,d),o.arc(0,0,this.innerRadius(),u,0,!d),o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}getSelfRect(){const o=this.innerRadius(),u=this.outerRadius(),d=this.clockwise(),h=ne.getAngle(d?360-this.angle():this.angle()),g=Math.cos(Math.min(h,Math.PI)),v=Math.sin(Math.min(Math.max(Math.PI,h),3*Math.PI/2)),b=Math.sin(Math.min(h,Math.PI/2)),w=g*(g>0?o:u),I=v*(v>0?o:u),M=b*(b>0?u:o);return{x:w,y:d?-1*M:I,width:1*u-w,height:M-I}}}function pa(p,o,u,d,h,g,m){var v=Math.sqrt(Math.pow(u-p,2)+Math.pow(d-o,2)),b=Math.sqrt(Math.pow(h-u,2)+Math.pow(g-d,2)),w=m*v/(v+b),E=m*b/(v+b);return[u-w*(h-p),d-w*(g-o),u+E*(h-p),d+E*(g-o)]}function rn(p,o){var h,g,u=p.length,d=[];for(h=2;h<u-2;h+=2)g=pa(p[h-2],p[h-1],p[h],p[h+1],p[h+2],p[h+3],o),!isNaN(g[0])&&(d.push(g[0]),d.push(g[1]),d.push(p[h]),d.push(p[h+1]),d.push(g[2]),d.push(g[3]));return d}wn.prototype._centroid=!0,wn.prototype.className="Arc",wn.prototype._attrsAffectingSize=["innerRadius","outerRadius"],Oe(wn),T.addGetterSetter(wn,"innerRadius",0,W()),T.addGetterSetter(wn,"outerRadius",0,W()),T.addGetterSetter(wn,"angle",0,W()),T.addGetterSetter(wn,"clockwise",!1,gn());class jn extends U{constructor(o){super(o),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(o){var v,b,w,u=this.points(),d=u.length,h=this.tension(),g=this.closed(),m=this.bezier();if(d){if(o.beginPath(),o.moveTo(u[0],u[1]),0!==h&&d>4){for(b=(v=this.getTensionPoints()).length,w=g?0:4,g||o.quadraticCurveTo(v[0],v[1],v[2],v[3]);w<b-2;)o.bezierCurveTo(v[w++],v[w++],v[w++],v[w++],v[w++],v[w++]);g||o.quadraticCurveTo(v[b-2],v[b-1],u[d-2],u[d-1])}else if(m)for(w=2;w<d;)o.bezierCurveTo(u[w++],u[w++],u[w++],u[w++],u[w++],u[w++]);else for(w=2;w<d;w+=2)o.lineTo(u[w],u[w+1]);g?(o.closePath(),o.fillStrokeShape(this)):o.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():rn(this.points(),this.tension())}_getTensionPointsClosed(){var o=this.points(),u=o.length,d=this.tension(),h=pa(o[u-2],o[u-1],o[0],o[1],o[2],o[3],d),g=pa(o[u-4],o[u-3],o[u-2],o[u-1],o[0],o[1],d),m=rn(o,d);return[h[2],h[3]].concat(m).concat([g[0],g[1],o[u-2],o[u-1],g[2],g[3],h[0],h[1],o[0],o[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var o=this.points();if(o.length<4)return{x:o[0]||0,y:o[1]||0,width:0,height:0};for(var m,v,u=(o=0!==this.tension()?[o[0],o[1],...this._getTensionPoints(),o[o.length-2],o[o.length-1]]:this.points())[0],d=o[0],h=o[1],g=o[1],b=0;b<o.length/2;b++)m=o[2*b],v=o[2*b+1],u=Math.min(u,m),d=Math.max(d,m),h=Math.min(h,v),g=Math.max(g,v);return{x:u,y:h,width:d-u,height:g-h}}}jn.prototype.className="Line",jn.prototype._attrsAffectingSize=["points","bezier","tension"],Oe(jn),T.addGetterSetter(jn,"closed",!1),T.addGetterSetter(jn,"bezier",!1),T.addGetterSetter(jn,"tension",0,W()),T.addGetterSetter(jn,"points",[],function at(){if(ne.isUnminified)return function(p,o){const u=Int8Array?Object.getPrototypeOf(Int8Array):null;return u&&p instanceof u||(k._isArray(p)?p.forEach(function(d){k._isNumber(d)||k.warn('"'+o+'" attribute has non numeric element '+d+". Make sure that all elements are numbers.")}):k.warn(Wt(p)+' is a not valid value for "'+o+'" attribute. The value should be a array of numbers.')),p}}());class Ye extends U{constructor(o){super(o),this.dataArray=[],this.pathLength=0,this.dataArray=Ye.parsePathData(this.data()),this.pathLength=0;for(var u=0;u<this.dataArray.length;++u)this.pathLength+=this.dataArray[u].pathLength;this.on("dataChange.konva",function(){this.dataArray=Ye.parsePathData(this.data()),this.pathLength=0;for(var d=0;d<this.dataArray.length;++d)this.pathLength+=this.dataArray[d].pathLength})}_sceneFunc(o){var u=this.dataArray;o.beginPath();for(var d=!1,h=0;h<u.length;h++){var m=u[h].points;switch(u[h].command){case"L":o.lineTo(m[0],m[1]);break;case"M":o.moveTo(m[0],m[1]);break;case"C":o.bezierCurveTo(m[0],m[1],m[2],m[3],m[4],m[5]);break;case"Q":o.quadraticCurveTo(m[0],m[1],m[2],m[3]);break;case"A":var v=m[0],b=m[1],w=m[2],E=m[3],I=m[4],M=m[5],R=m[6],S=m[7],j=w>E?w:E,O=w>E?1:w/E,L=w>E?E/w:1;o.translate(v,b),o.rotate(R),o.scale(O,L),o.arc(0,0,j,I,I+M,1-S),o.scale(1/O,1/L),o.rotate(-R),o.translate(-v,-b);break;case"z":d=!0,o.closePath()}}d||this.hasFill()?o.fillStrokeShape(this):o.strokeShape(this)}getSelfRect(){var o=[];this.dataArray.forEach(function(w){if("A"===w.command){var E=w.points[4],I=w.points[5],M=w.points[4]+I,R=Math.PI/180;if(Math.abs(E-M)<R&&(R=Math.abs(E-M)),I<0)for(let S=E-R;S>M;S-=R){const j=Ye.getPointOnEllipticalArc(w.points[0],w.points[1],w.points[2],w.points[3],S,0);o.push(j.x,j.y)}else for(let S=E+R;S<M;S+=R){const j=Ye.getPointOnEllipticalArc(w.points[0],w.points[1],w.points[2],w.points[3],S,0);o.push(j.x,j.y)}}else if("C"===w.command)for(let S=0;S<=1;S+=.01){const j=Ye.getPointOnCubicBezier(S,w.start.x,w.start.y,w.points[0],w.points[1],w.points[2],w.points[3],w.points[4],w.points[5]);o.push(j.x,j.y)}else o=o.concat(w.points)});for(var m,v,u=o[0],d=o[0],h=o[1],g=o[1],b=0;b<o.length/2;b++)m=o[2*b],v=o[2*b+1],isNaN(m)||(u=Math.min(u,m),d=Math.max(d,m)),isNaN(v)||(h=Math.min(h,v),g=Math.max(g,v));return{x:u,y:h,width:d-u,height:g-h}}getLength(){return this.pathLength}getPointAtLength(o){var u,d=0,h=this.dataArray.length;if(!h)return null;for(;d<h&&o>this.dataArray[d].pathLength;)o-=this.dataArray[d].pathLength,++d;if(d===h)return{x:(u=this.dataArray[d-1].points.slice(-2))[0],y:u[1]};if(o<.01)return{x:(u=this.dataArray[d].points.slice(0,2))[0],y:u[1]};var g=this.dataArray[d],m=g.points;switch(g.command){case"L":return Ye.getPointOnLine(o,g.start.x,g.start.y,m[0],m[1]);case"C":return Ye.getPointOnCubicBezier(o/g.pathLength,g.start.x,g.start.y,m[0],m[1],m[2],m[3],m[4],m[5]);case"Q":return Ye.getPointOnQuadraticBezier(o/g.pathLength,g.start.x,g.start.y,m[0],m[1],m[2],m[3]);case"A":var I=m[4];return Ye.getPointOnEllipticalArc(m[0],m[1],m[2],m[3],I+=m[5]*o/g.pathLength,m[6])}return null}static getLineLength(o,u,d,h){return Math.sqrt((d-o)*(d-o)+(h-u)*(h-u))}static getPointOnLine(o,u,d,h,g,m,v){void 0===m&&(m=u),void 0===v&&(v=d);var b=(g-d)/(h-u+1e-8),w=Math.sqrt(o*o/(1+b*b));h<u&&(w*=-1);var I,E=b*w;if(h===u)I={x:m,y:v+E};else if((v-d)/(m-u+1e-8)===b)I={x:m+w,y:v+E};else{var M,R,S=this.getLineLength(u,d,h,g),j=(m-u)*(h-u)+(v-d)*(g-d),O=this.getLineLength(m,v,M=u+(j/=S*S)*(h-u),R=d+j*(g-d)),L=Math.sqrt(o*o-O*O);w=Math.sqrt(L*L/(1+b*b)),h<u&&(w*=-1),I={x:M+w,y:R+(E=b*w)}}return I}static getPointOnCubicBezier(o,u,d,h,g,m,v,b,w){function E(O){return O*O*O}function I(O){return 3*O*O*(1-O)}function M(O){return 3*O*(1-O)*(1-O)}function R(O){return(1-O)*(1-O)*(1-O)}return{x:b*E(o)+m*I(o)+h*M(o)+u*R(o),y:w*E(o)+v*I(o)+g*M(o)+d*R(o)}}static getPointOnQuadraticBezier(o,u,d,h,g,m,v){function b(R){return R*R}function w(R){return 2*R*(1-R)}function E(R){return(1-R)*(1-R)}return{x:m*b(o)+h*w(o)+u*E(o),y:v*b(o)+g*w(o)+d*E(o)}}static getPointOnEllipticalArc(o,u,d,h,g,m){var v=Math.cos(m),b=Math.sin(m),w_x=d*Math.cos(g),w_y=h*Math.sin(g);return{x:o+(w_x*v-w_y*b),y:u+(w_x*b+w_y*v)}}static parsePathData(o){if(!o)return[];var u=o,d=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];u=u.replace(new RegExp(" ","g"),",");for(var h=0;h<d.length;h++)u=u.replace(new RegExp(d[h],"g"),"|"+d[h]);var I,g=u.split("|"),m=[],v=[],b=0,w=0,E=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(h=1;h<g.length;h++){var M=g[h],R=M.charAt(0);for(M=M.slice(1),v.length=0;I=E.exec(M);)v.push(I[0]);for(var S=[],j=0,O=v.length;j<O;j++)if("00"!==v[j]){var L=parseFloat(v[j]);isNaN(L)?S.push(0):S.push(L)}else S.push(0,0);for(;S.length>0&&!isNaN(S[0]);){var J,ce,se,de,N,K,Ae,ge,we,Ut,G=null,z=[],Q=b,oe=w;switch(R){case"l":b+=S.shift(),w+=S.shift(),G="L",z.push(b,w);break;case"L":b=S.shift(),w=S.shift(),z.push(b,w);break;case"m":var ke=S.shift(),qe=S.shift();if(b+=ke,w+=qe,G="M",m.length>2&&"z"===m[m.length-1].command)for(var Bt=m.length-2;Bt>=0;Bt--)if("M"===m[Bt].command){b=m[Bt].points[0]+ke,w=m[Bt].points[1]+qe;break}z.push(b,w),R="l";break;case"M":b=S.shift(),w=S.shift(),G="M",z.push(b,w),R="L";break;case"h":b+=S.shift(),G="L",z.push(b,w);break;case"H":b=S.shift(),G="L",z.push(b,w);break;case"v":w+=S.shift(),G="L",z.push(b,w);break;case"V":w=S.shift(),G="L",z.push(b,w);break;case"C":z.push(S.shift(),S.shift(),S.shift(),S.shift()),b=S.shift(),w=S.shift(),z.push(b,w);break;case"c":z.push(b+S.shift(),w+S.shift(),b+S.shift(),w+S.shift()),b+=S.shift(),w+=S.shift(),G="C",z.push(b,w);break;case"S":ce=b,se=w,"C"===(J=m[m.length-1]).command&&(ce=b+(b-J.points[2]),se=w+(w-J.points[3])),z.push(ce,se,S.shift(),S.shift()),b=S.shift(),w=S.shift(),G="C",z.push(b,w);break;case"s":ce=b,se=w,"C"===(J=m[m.length-1]).command&&(ce=b+(b-J.points[2]),se=w+(w-J.points[3])),z.push(ce,se,b+S.shift(),w+S.shift()),b+=S.shift(),w+=S.shift(),G="C",z.push(b,w);break;case"Q":z.push(S.shift(),S.shift()),b=S.shift(),w=S.shift(),z.push(b,w);break;case"q":z.push(b+S.shift(),w+S.shift()),b+=S.shift(),w+=S.shift(),G="Q",z.push(b,w);break;case"T":ce=b,se=w,"Q"===(J=m[m.length-1]).command&&(ce=b+(b-J.points[0]),se=w+(w-J.points[1])),b=S.shift(),w=S.shift(),G="Q",z.push(ce,se,b,w);break;case"t":ce=b,se=w,"Q"===(J=m[m.length-1]).command&&(ce=b+(b-J.points[0]),se=w+(w-J.points[1])),b+=S.shift(),w+=S.shift(),G="Q",z.push(ce,se,b,w);break;case"A":de=S.shift(),N=S.shift(),K=S.shift(),Ae=S.shift(),ge=S.shift(),we=b,Ut=w,b=S.shift(),w=S.shift(),G="A",z=this.convertEndpointToCenterParameterization(we,Ut,b,w,Ae,ge,de,N,K);break;case"a":de=S.shift(),N=S.shift(),K=S.shift(),Ae=S.shift(),ge=S.shift(),we=b,Ut=w,b+=S.shift(),w+=S.shift(),G="A",z=this.convertEndpointToCenterParameterization(we,Ut,b,w,Ae,ge,de,N,K)}m.push({command:G||R,points:z,start:{x:Q,y:oe},pathLength:this.calcLength(Q,oe,G||R,z)})}("z"===R||"Z"===R)&&m.push({command:"z",points:[],start:void 0,pathLength:0})}return m}static calcLength(o,u,d,h){var g,m,v,b,w=Ye;switch(d){case"L":return w.getLineLength(o,u,h[0],h[1]);case"C":for(g=0,m=w.getPointOnCubicBezier(0,o,u,h[0],h[1],h[2],h[3],h[4],h[5]),b=.01;b<=1;b+=.01)v=w.getPointOnCubicBezier(b,o,u,h[0],h[1],h[2],h[3],h[4],h[5]),g+=w.getLineLength(m.x,m.y,v.x,v.y),m=v;return g;case"Q":for(g=0,m=w.getPointOnQuadraticBezier(0,o,u,h[0],h[1],h[2],h[3]),b=.01;b<=1;b+=.01)v=w.getPointOnQuadraticBezier(b,o,u,h[0],h[1],h[2],h[3]),g+=w.getLineLength(m.x,m.y,v.x,v.y),m=v;return g;case"A":g=0;var E=h[4],I=h[5],M=h[4]+I,R=Math.PI/180;if(Math.abs(E-M)<R&&(R=Math.abs(E-M)),m=w.getPointOnEllipticalArc(h[0],h[1],h[2],h[3],E,0),I<0)for(b=E-R;b>M;b-=R)v=w.getPointOnEllipticalArc(h[0],h[1],h[2],h[3],b,0),g+=w.getLineLength(m.x,m.y,v.x,v.y),m=v;else for(b=E+R;b<M;b+=R)v=w.getPointOnEllipticalArc(h[0],h[1],h[2],h[3],b,0),g+=w.getLineLength(m.x,m.y,v.x,v.y),m=v;return v=w.getPointOnEllipticalArc(h[0],h[1],h[2],h[3],M,0),g+w.getLineLength(m.x,m.y,v.x,v.y)}return 0}static convertEndpointToCenterParameterization(o,u,d,h,g,m,v,b,w){var E=w*(Math.PI/180),I=Math.cos(E)*(o-d)/2+Math.sin(E)*(u-h)/2,M=-1*Math.sin(E)*(o-d)/2+Math.cos(E)*(u-h)/2,R=I*I/(v*v)+M*M/(b*b);R>1&&(v*=Math.sqrt(R),b*=Math.sqrt(R));var S=Math.sqrt((v*v*(b*b)-v*v*(M*M)-b*b*(I*I))/(v*v*(M*M)+b*b*(I*I)));g===m&&(S*=-1),isNaN(S)&&(S=0);var j=S*v*M/b,O=S*-b*I/v,L=(o+d)/2+Math.cos(E)*j-Math.sin(E)*O,G=(u+h)/2+Math.sin(E)*j+Math.cos(E)*O,z=function(N){return Math.sqrt(N[0]*N[0]+N[1]*N[1])},Q=function(N,K){return(N[0]*K[0]+N[1]*K[1])/(z(N)*z(K))},oe=function(N,K){return(N[0]*K[1]<N[1]*K[0]?-1:1)*Math.acos(Q(N,K))},J=oe([1,0],[(I-j)/v,(M-O)/b]),ce=[(I-j)/v,(M-O)/b],se=[(-1*I-j)/v,(-1*M-O)/b],de=oe(ce,se);return Q(ce,se)<=-1&&(de=Math.PI),Q(ce,se)>=1&&(de=0),0===m&&de>0&&(de-=2*Math.PI),1===m&&de<0&&(de+=2*Math.PI),[L,G,v,b,J,de,E,m]}}Ye.prototype.className="Path",Ye.prototype._attrsAffectingSize=["data"],Oe(Ye),T.addGetterSetter(Ye,"data");class qt extends jn{_sceneFunc(o){super._sceneFunc(o);var u=2*Math.PI,d=this.points(),h=d,g=0!==this.tension()&&d.length>4;g&&(h=this.getTensionPoints());var b,w,m=this.pointerLength(),v=d.length;if(g){const M=[h[h.length-4],h[h.length-3],h[h.length-2],h[h.length-1],d[v-2],d[v-1]],R=Ye.calcLength(h[h.length-4],h[h.length-3],"C",M),S=Ye.getPointOnQuadraticBezier(Math.min(1,1-m/R),M[0],M[1],M[2],M[3],M[4],M[5]);b=d[v-2]-S.x,w=d[v-1]-S.y}else b=d[v-2]-d[v-4],w=d[v-1]-d[v-3];var E=(Math.atan2(w,b)+u)%u,I=this.pointerWidth();this.pointerAtEnding()&&(o.save(),o.beginPath(),o.translate(d[v-2],d[v-1]),o.rotate(E),o.moveTo(0,0),o.lineTo(-m,I/2),o.lineTo(-m,-I/2),o.closePath(),o.restore(),this.__fillStroke(o)),this.pointerAtBeginning()&&(o.save(),o.beginPath(),o.translate(d[0],d[1]),g?(b=(h[0]+h[2])/2-d[0],w=(h[1]+h[3])/2-d[1]):(b=d[2]-d[0],w=d[3]-d[1]),o.rotate((Math.atan2(-w,-b)+u)%u),o.moveTo(0,0),o.lineTo(-m,I/2),o.lineTo(-m,-I/2),o.closePath(),o.restore(),this.__fillStroke(o))}__fillStroke(o){var u=this.dashEnabled();u&&(this.attrs.dashEnabled=!1,o.setLineDash([])),o.fillStrokeShape(this),u&&(this.attrs.dashEnabled=!0)}getSelfRect(){const o=super.getSelfRect(),u=this.pointerWidth()/2;return{x:o.x-u,y:o.y-u,width:o.width+2*u,height:o.height+2*u}}}qt.prototype.className="Arrow",Oe(qt),T.addGetterSetter(qt,"pointerLength",10,W()),T.addGetterSetter(qt,"pointerWidth",10,W()),T.addGetterSetter(qt,"pointerAtBeginning",!1),T.addGetterSetter(qt,"pointerAtEnding",!0);class Pt extends U{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(o){this.radius()!==o/2&&this.radius(o/2)}setHeight(o){this.radius()!==o/2&&this.radius(o/2)}}Pt.prototype._centroid=!0,Pt.prototype.className="Circle",Pt.prototype._attrsAffectingSize=["radius"],Oe(Pt),T.addGetterSetter(Pt,"radius",0,W());class Fr extends U{_sceneFunc(o){var u=this.radiusX(),d=this.radiusY();o.beginPath(),o.save(),u!==d&&o.scale(1,d/u),o.arc(0,0,u,0,2*Math.PI,!1),o.restore(),o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(o){this.radiusX(o/2)}setHeight(o){this.radiusY(o/2)}}Fr.prototype.className="Ellipse",Fr.prototype._centroid=!0,Fr.prototype._attrsAffectingSize=["radiusX","radiusY"],Oe(Fr),T.addComponentsGetterSetter(Fr,"radius",["x","y"]),T.addGetterSetter(Fr,"radiusX",0,W()),T.addGetterSetter(Fr,"radiusY",0,W());class Cn extends U{constructor(o){super(o),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const o=this.image();o&&o.complete||o&&4===o.readyState||o&&o.addEventListener&&o.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(o){const u=this.getWidth(),d=this.getHeight(),h=this.cornerRadius(),g=this.attrs.image;let m;if(g){const v=this.attrs.cropWidth,b=this.attrs.cropHeight;m=v&&b?[g,this.cropX(),this.cropY(),v,b,0,0,u,d]:[g,0,0,u,d]}(this.hasFill()||this.hasStroke()||h)&&(o.beginPath(),h?k.drawRoundedRectPath(o,u,d,h):o.rect(0,0,u,d),o.closePath(),o.fillStrokeShape(this)),g&&(h&&o.clip(),o.drawImage.apply(o,m))}_hitFunc(o){var u=this.width(),d=this.height(),h=this.cornerRadius();o.beginPath(),h?k.drawRoundedRectPath(o,u,d,h):o.rect(0,0,u,d),o.closePath(),o.fillStrokeShape(this)}getWidth(){var o,u;return null!==(o=this.attrs.width)&&void 0!==o?o:null===(u=this.image())||void 0===u?void 0:u.width}getHeight(){var o,u;return null!==(o=this.attrs.height)&&void 0!==o?o:null===(u=this.image())||void 0===u?void 0:u.height}static fromURL(o,u,d=null){var h=k.createImageElement();h.onload=function(){var g=new Cn({image:h});u(g)},h.onerror=d,h.crossOrigin="Anonymous",h.src=o}}Cn.prototype.className="Image",Oe(Cn),T.addGetterSetter(Cn,"cornerRadius",0,Xo(4)),T.addGetterSetter(Cn,"image"),T.addComponentsGetterSetter(Cn,"crop",["x","y","width","height"]),T.addGetterSetter(Cn,"cropX",0,W()),T.addGetterSetter(Cn,"cropY",0,W()),T.addGetterSetter(Cn,"cropWidth",0,W()),T.addGetterSetter(Cn,"cropHeight",0,W());var mn=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],yr="right",Fe="down",mi="left",ga=mn.length;class Zi extends ie{constructor(o){super(o),this.on("add.konva",function(u){this._addListeners(u.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(o){var d,u=this,h=function(){u._sync()};for(d=0;d<ga;d++)o.on(mn[d]+"Change.konva",h)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var d,h,g,m,v,b,w,o=this.getText(),u=this.getTag();if(o&&u){switch(d=o.width(),h=o.height(),g=u.pointerDirection(),m=u.pointerWidth(),w=u.pointerHeight(),v=0,b=0,g){case"up":v=d/2,b=-1*w;break;case yr:v=d+m,b=h/2;break;case Fe:v=d/2,b=h+w;break;case mi:v=-1*m,b=h/2}u.setAttrs({x:-1*v,y:-1*b,width:d,height:h}),o.setAttrs({x:-1*v,y:-1*b})}}}Zi.prototype.className="Label",Oe(Zi);class vr extends U{_sceneFunc(o){var u=this.width(),d=this.height(),h=this.pointerDirection(),g=this.pointerWidth(),m=this.pointerHeight(),v=this.cornerRadius();let b=0,w=0,E=0,I=0;"number"==typeof v?b=w=E=I=Math.min(v,u/2,d/2):(b=Math.min(v[0]||0,u/2,d/2),w=Math.min(v[1]||0,u/2,d/2),I=Math.min(v[2]||0,u/2,d/2),E=Math.min(v[3]||0,u/2,d/2)),o.beginPath(),o.moveTo(b,0),"up"===h&&(o.lineTo((u-g)/2,0),o.lineTo(u/2,-1*m),o.lineTo((u+g)/2,0)),o.lineTo(u-w,0),o.arc(u-w,w,w,3*Math.PI/2,0,!1),h===yr&&(o.lineTo(u,(d-m)/2),o.lineTo(u+g,d/2),o.lineTo(u,(d+m)/2)),o.lineTo(u,d-I),o.arc(u-I,d-I,I,0,Math.PI/2,!1),h===Fe&&(o.lineTo((u+g)/2,d),o.lineTo(u/2,d+m),o.lineTo((u-g)/2,d)),o.lineTo(E,d),o.arc(E,d-E,E,Math.PI/2,Math.PI,!1),h===mi&&(o.lineTo(0,(d+m)/2),o.lineTo(-1*g,d/2),o.lineTo(0,(d-m)/2)),o.lineTo(0,b),o.arc(b,b,b,Math.PI,3*Math.PI/2,!1),o.closePath(),o.fillStrokeShape(this)}getSelfRect(){var o=0,u=0,d=this.pointerWidth(),h=this.pointerHeight(),g=this.pointerDirection(),m=this.width(),v=this.height();return"up"===g?(u-=h,v+=h):g===Fe?v+=h:g===mi?(o-=1.5*d,m+=d):g===yr&&(m+=1.5*d),{x:o,y:u,width:m,height:v}}}vr.prototype.className="Tag",Oe(vr),T.addGetterSetter(vr,"pointerDirection","none"),T.addGetterSetter(vr,"pointerWidth",0,W()),T.addGetterSetter(vr,"pointerHeight",0,W()),T.addGetterSetter(vr,"cornerRadius",0,Xo(4));class sn extends U{_sceneFunc(o){var u=this.cornerRadius(),d=this.width(),h=this.height();o.beginPath(),u?k.drawRoundedRectPath(o,d,h,u):o.rect(0,0,d,h),o.closePath(),o.fillStrokeShape(this)}}sn.prototype.className="Rect",Oe(sn),T.addGetterSetter(sn,"cornerRadius",0,Xo(4));class En extends U{_sceneFunc(o){const u=this._getPoints();o.beginPath(),o.moveTo(u[0].x,u[0].y);for(var d=1;d<u.length;d++)o.lineTo(u[d].x,u[d].y);o.closePath(),o.fillStrokeShape(this)}_getPoints(){const o=this.attrs.sides,u=this.attrs.radius||0,d=[];for(var h=0;h<o;h++)d.push({x:u*Math.sin(2*h*Math.PI/o),y:-1*u*Math.cos(2*h*Math.PI/o)});return d}getSelfRect(){const o=this._getPoints();var u=o[0].x,d=o[0].y,h=o[0].x,g=o[0].y;return o.forEach(m=>{u=Math.min(u,m.x),d=Math.max(d,m.x),h=Math.min(h,m.y),g=Math.max(g,m.y)}),{x:u,y:h,width:d-u,height:g-h}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}}En.prototype.className="RegularPolygon",En.prototype._centroid=!0,En.prototype._attrsAffectingSize=["radius"],Oe(En),T.addGetterSetter(En,"radius",0,W()),T.addGetterSetter(En,"sides",0,W());var lu=2*Math.PI;class on extends U{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.innerRadius(),0,lu,!1),o.moveTo(this.outerRadius(),0),o.arc(0,0,this.outerRadius(),lu,0,!0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}}on.prototype.className="Ring",on.prototype._centroid=!0,on.prototype._attrsAffectingSize=["innerRadius","outerRadius"],Oe(on),T.addGetterSetter(on,"innerRadius",0,W()),T.addGetterSetter(on,"outerRadius",0,W());class Hn extends U{constructor(o){super(o),this._updated=!0,this.anim=new ft(()=>{var u=this._updated;return this._updated=!1,u}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){!this.anim.isRunning()||(clearInterval(this.interval),this._setInterval())})}_sceneFunc(o){var u=this.animation(),d=this.frameIndex(),h=4*d,g=this.animations()[u],m=this.frameOffsets(),v=g[h+0],b=g[h+1],w=g[h+2],E=g[h+3],I=this.image();if((this.hasFill()||this.hasStroke())&&(o.beginPath(),o.rect(0,0,w,E),o.closePath(),o.fillStrokeShape(this)),I)if(m){var M=m[u],R=2*d;o.drawImage(I,v,b,w,E,M[R+0],M[R+1],w,E)}else o.drawImage(I,v,b,w,E,0,0,w,E)}_hitFunc(o){var u=this.animation(),d=this.frameIndex(),h=4*d,g=this.animations()[u],m=this.frameOffsets(),v=g[h+2],b=g[h+3];if(o.beginPath(),m){var w=m[u],E=2*d;o.rect(w[E+0],w[E+1],v,b)}else o.rect(0,0,v,b);o.closePath(),o.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var o=this;this.interval=setInterval(function(){o._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var o=this.getLayer();this.anim.setLayers(o),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var o=this.frameIndex(),u=this.animation(),d=this.animations();this.frameIndex(o<d[u].length/4-1?o+1:0)}}Hn.prototype.className="Sprite",Oe(Hn),T.addGetterSetter(Hn,"animation"),T.addGetterSetter(Hn,"animations"),T.addGetterSetter(Hn,"frameOffsets"),T.addGetterSetter(Hn,"image"),T.addGetterSetter(Hn,"frameIndex",0,W()),T.addGetterSetter(Hn,"frameRate",17,W()),T.backCompat(Hn,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Zn extends U{_sceneFunc(o){var u=this.innerRadius(),d=this.outerRadius(),h=this.numPoints();o.beginPath(),o.moveTo(0,0-d);for(var g=1;g<2*h;g++){var m=g%2==0?d:u,v=m*Math.sin(g*Math.PI/h),b=-1*m*Math.cos(g*Math.PI/h);o.lineTo(v,b)}o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(o){this.outerRadius(o/2)}setHeight(o){this.outerRadius(o/2)}}function ma(p){return Array.from(p)}Zn.prototype.className="Star",Zn.prototype._centroid=!0,Zn.prototype._attrsAffectingSize=["innerRadius","outerRadius"],Oe(Zn),T.addGetterSetter(Zn,"numPoints",5,W()),T.addGetterSetter(Zn,"innerRadius",0,W()),T.addGetterSetter(Zn,"outerRadius",0,W());var Jn,rt="auto",yi="justify",X="middle",_i=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],De=_i.length;function Ji(){return Jn||(Jn=k.createCanvasElement().getContext("2d"))}class We extends U{constructor(o){super(function es(p){return!(p=p||{}).fillLinearGradientColorStops&&!p.fillRadialGradientColorStops&&!p.fillPatternImage&&(p.fill=p.fill||"black"),p}(o)),this._partialTextX=0,this._partialTextY=0;for(var u=0;u<De;u++)this.on(_i[u]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(o){var u=this.textArr,d=u.length;if(this.text()){var O,h=this.padding(),g=this.fontSize(),m=this.lineHeight()*g,v=this.verticalAlign(),b=0,w=this.align(),E=this.getWidth(),I=this.letterSpacing(),M=this.fill(),R=this.textDecoration(),S=-1!==R.indexOf("underline"),j=-1!==R.indexOf("line-through"),L=0,G=(L=m/2,0),z=0;for(o.setAttr("font",this._getContextFont()),o.setAttr("textBaseline",X),o.setAttr("textAlign","left"),v===X?b=(this.getHeight()-d*m-2*h)/2:"bottom"===v&&(b=this.getHeight()-d*m-2*h),o.translate(h,b+h),O=0;O<d;O++){G=0,z=0;var se,de,N,Q=u[O],oe=Q.text,J=Q.width,ce=Q.lastInParagraph;if(o.save(),"right"===w?G+=E-J-2*h:"center"===w&&(G+=(E-J-2*h)/2),S){o.save(),o.beginPath(),o.moveTo(G,L+z+Math.round(g/2)),de=0==(se=oe.split(" ").length-1),N=w!==yi||ce?J:E-2*h,o.lineTo(G+Math.round(N),L+z+Math.round(g/2)),o.lineWidth=g/15;const ke=this._getLinearGradient();o.strokeStyle=ke||M,o.stroke(),o.restore()}if(j){o.save(),o.beginPath(),o.moveTo(G,L+z),de=0==(se=oe.split(" ").length-1),N=w===yi&&ce&&!de?E-2*h:J,o.lineTo(G+Math.round(N),L+z),o.lineWidth=g/15;const ke=this._getLinearGradient();o.strokeStyle=ke||M,o.stroke(),o.restore()}if(0!==I||w===yi){se=oe.split(" ").length-1;for(var K=ma(oe),Ae=0;Ae<K.length;Ae++){var ge=K[Ae];" "===ge&&!ce&&w===yi&&(G+=(E-2*h-J)/se),this._partialTextX=G,this._partialTextY=L+z,this._partialText=ge,o.fillStrokeShape(this),G+=this.measureSize(ge).width+I}}else this._partialTextX=G,this._partialTextY=L+z,this._partialText=oe,o.fillStrokeShape(this);o.restore(),d>1&&(L+=m)}}}_hitFunc(o){var u=this.getWidth(),d=this.getHeight();o.beginPath(),o.rect(0,0,u,d),o.closePath(),o.fillStrokeShape(this)}setText(o){var u=k._isString(o)?o:null==o?"":o+"";return this._setAttr("text",u),this}getWidth(){return this.attrs.width===rt||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===rt||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return k.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(o){var h,u=Ji(),d=this.fontSize();return u.save(),u.font=this._getContextFont(),h=u.measureText(o),u.restore(),{width:h.width,height:d}}_getContextFont(){return this.fontStyle()+" "+this.fontVariant()+" "+this.fontSize()+"px "+function js(p){return p.split(",").map(o=>{const u=(o=o.trim()).indexOf(" ")>=0,d=o.indexOf('"')>=0||o.indexOf("'")>=0;return u&&!d&&(o=`"${o}"`),o}).join(", ")}(this.fontFamily())}_addTextLine(o){this.align()===yi&&(o=o.trim());var d=this._getTextWidth(o);return this.textArr.push({text:o,width:d,lastInParagraph:!1})}_getTextWidth(o){var u=this.letterSpacing(),d=o.length;return Ji().measureText(o).width+(d?u*(d-1):0)}_setTextData(){var o=this.text().split("\n"),u=+this.fontSize(),d=0,h=this.lineHeight()*u,g=this.attrs.width,m=this.attrs.height,v=g!==rt&&void 0!==g,b=m!==rt&&void 0!==m,w=this.padding(),E=g-2*w,I=m-2*w,M=0,R=this.wrap(),j="char"!==R&&"none"!==R,O=this.ellipsis();this.textArr=[],Ji().font=this._getContextFont();for(var L=O?this._getTextWidth("\u2026"):0,G=0,z=o.length;G<z;++G){var Q=o[G],oe=this._getTextWidth(Q);if(v&&oe>E)for(;Q.length>0;){for(var J=0,ce=Q.length,se="",de=0;J<ce;){var N=J+ce>>>1,K=Q.slice(0,N+1),Ae=this._getTextWidth(K)+L;Ae<=E?(J=N+1,se=K,de=Ae):ce=N}if(!se)break;if(j){var ge,we=Q[se.length];(ge=(" "===we||"-"===we)&&de<=E?se.length:Math.max(se.lastIndexOf(" "),se.lastIndexOf("-"))+1)>0&&(se=se.slice(0,J=ge),de=this._getTextWidth(se))}if(se=se.trimRight(),this._addTextLine(se),d=Math.max(d,de),this._shouldHandleEllipsis(M+=h)){this._tryToAddEllipsisToLastLine();break}if((Q=(Q=Q.slice(J)).trimLeft()).length>0&&(oe=this._getTextWidth(Q))<=E){this._addTextLine(Q),M+=h,d=Math.max(d,oe);break}}else this._addTextLine(Q),M+=h,d=Math.max(d,oe),this._shouldHandleEllipsis(M)&&G<z-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),b&&M+h>I)break}this.textHeight=u,this.textWidth=d}_shouldHandleEllipsis(o){var u=+this.fontSize(),d=this.lineHeight()*u,h=this.attrs.height,g=h!==rt&&void 0!==h,v=h-2*this.padding();return!("none"!==this.wrap())||g&&o+d>v}_tryToAddEllipsisToLastLine(){var o=this.attrs.width,u=o!==rt&&void 0!==o,h=o-2*this.padding(),g=this.ellipsis(),m=this.textArr[this.textArr.length-1];m&&g&&(u&&(this._getTextWidth(m.text+"\u2026")<h||(m.text=m.text.slice(0,m.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(m.text+"\u2026"))}getStrokeScaleEnabled(){return!0}}function ya(p){p.fillText(this.partialText,0,0)}function Qe(p){p.strokeText(this.partialText,0,0)}We.prototype._fillFunc=function Hr(p){p.fillText(this._partialText,this._partialTextX,this._partialTextY)},We.prototype._strokeFunc=function Ft(p){p.strokeText(this._partialText,this._partialTextX,this._partialTextY)},We.prototype.className="Text",We.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],Oe(We),T.overWriteSetter(We,"width",ji()),T.overWriteSetter(We,"height",ji()),T.addGetterSetter(We,"fontFamily","Arial"),T.addGetterSetter(We,"fontSize",12,W()),T.addGetterSetter(We,"fontStyle","normal"),T.addGetterSetter(We,"fontVariant","normal"),T.addGetterSetter(We,"padding",0,W()),T.addGetterSetter(We,"align","left"),T.addGetterSetter(We,"verticalAlign","top"),T.addGetterSetter(We,"lineHeight",1,W()),T.addGetterSetter(We,"wrap","word"),T.addGetterSetter(We,"ellipsis",!1,gn()),T.addGetterSetter(We,"letterSpacing",0,W()),T.addGetterSetter(We,"text","",pn()),T.addGetterSetter(We,"textDecoration","");class mt extends U{constructor(o){super(o),this.dummyCanvas=k.createCanvasElement(),this.dataArray=[],this.dataArray=Ye.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=Ye.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(o){o.setAttr("font",this._getContextFont()),o.setAttr("textBaseline",this.textBaseline()),o.setAttr("textAlign","left"),o.save();var u=this.textDecoration(),d=this.fill(),h=this.fontSize(),g=this.glyphInfo;"underline"===u&&o.beginPath();for(var m=0;m<g.length;m++){o.save();var v=g[m].p0;o.translate(v.x,v.y),o.rotate(g[m].rotation),this.partialText=g[m].text,o.fillStrokeShape(this),"underline"===u&&(0===m&&o.moveTo(0,h/2+1),o.lineTo(h,h/2+1)),o.restore()}"underline"===u&&(o.strokeStyle=d,o.lineWidth=h/20,o.stroke()),o.restore()}_hitFunc(o){o.beginPath();var u=this.glyphInfo;if(u.length>=1){var d=u[0].p0;o.moveTo(d.x,d.y)}for(var h=0;h<u.length;h++){var g=u[h].p1;o.lineTo(g.x,g.y)}o.setAttr("lineWidth",this.fontSize()),o.setAttr("strokeStyle",this.colorKey),o.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return k.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(o){return We.prototype.setText.call(this,o)}_getContextFont(){return We.prototype._getContextFont.call(this)}_getTextSize(o){var d=this.dummyCanvas.getContext("2d");d.save(),d.font=this._getContextFont();var h=d.measureText(o);return d.restore(),{width:h.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var o=this,u=this._getTextSize(this.attrs.text),d=this.letterSpacing(),h=this.align(),g=this.kerningFunc();this.textWidth=u.width,this.textHeight=u.height;var m=Math.max(this.textWidth+((this.attrs.text||"").length-1)*d,0);this.glyphInfo=[];for(var v=0,b=0;b<o.dataArray.length;b++)o.dataArray[b].pathLength>0&&(v+=o.dataArray[b].pathLength);var w=0;"center"===h&&(w=Math.max(0,v/2-m/2)),"right"===h&&(w=Math.max(0,v-m));for(var M,R,S,E=ma(this.text()),I=this.text().split(" ").length-1,j=-1,O=0,L=function(){O=0;for(var Ae=o.dataArray,ge=j+1;ge<Ae.length;ge++){if(Ae[ge].pathLength>0)return j=ge,Ae[ge];"M"===Ae[ge].command&&(M={x:Ae[ge].points[0],y:Ae[ge].points[1]})}return{}},G=function(Ae){var ge=o._getTextSize(Ae).width+d;" "===Ae&&"justify"===h&&(ge+=(v-m)/I);var we=0,Ut=0;for(R=void 0;Math.abs(ge-we)/ge>.01&&Ut<20;){Ut++;for(var ke=we;void 0===S;)(S=L())&&ke+S.pathLength<ge&&(ke+=S.pathLength,S=void 0);if(0===Object.keys(S).length||void 0===M)return;var qe=!1;switch(S.command){case"L":Ye.getLineLength(M.x,M.y,S.points[0],S.points[1])>ge?R=Ye.getPointOnLine(ge,M.x,M.y,S.points[0],S.points[1],M.x,M.y):S=void 0;break;case"A":var ln=S.points[5],Le=S.points[4]+ln;0===O?O=S.points[4]+1e-8:ge>we?O+=Math.PI/180*ln/Math.abs(ln):O-=Math.PI/360*ln/Math.abs(ln),(ln<0&&O<Le||ln>=0&&O>Le)&&(O=Le,qe=!0),R=Ye.getPointOnEllipticalArc(S.points[0],S.points[1],S.points[2],S.points[3],O,S.points[6]);break;case"C":0===O?O=ge>S.pathLength?1e-8:ge/S.pathLength:ge>we?O+=(ge-we)/S.pathLength/2:O=Math.max(O-(we-ge)/S.pathLength/2,0),O>1&&(O=1,qe=!0),R=Ye.getPointOnCubicBezier(O,S.start.x,S.start.y,S.points[0],S.points[1],S.points[2],S.points[3],S.points[4],S.points[5]);break;case"Q":0===O?O=ge/S.pathLength:ge>we?O+=(ge-we)/S.pathLength:O-=(we-ge)/S.pathLength,O>1&&(O=1,qe=!0),R=Ye.getPointOnQuadraticBezier(O,S.start.x,S.start.y,S.points[0],S.points[1],S.points[2],S.points[3])}void 0!==R&&(we=Ye.getLineLength(M.x,M.y,R.x,R.y)),qe&&(qe=!1,S=void 0)}},oe=w/(o._getTextSize("C").width+d)-1,J=0;J<oe&&(G("C"),void 0!==M&&void 0!==R);J++)M=R;for(var ce=0;ce<E.length&&(G(E[ce]),void 0!==M&&void 0!==R);ce++){var se=Ye.getLineLength(M.x,M.y,R.x,R.y),de=0;if(g)try{de=g(E[ce-1],E[ce])*this.fontSize()}catch{de=0}M.x+=de,R.x+=de,this.textWidth+=de;var N=Ye.getPointOnLine(de+se/2,M.x,M.y,R.x,R.y),K=Math.atan2(R.y-M.y,R.x-M.x);this.glyphInfo.push({transposeX:N.x,transposeY:N.y,text:E[ce],rotation:K,p0:M,p1:R}),M=R}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var o=[];this.glyphInfo.forEach(function(E){o.push(E.p0.x),o.push(E.p0.y),o.push(E.p1.x),o.push(E.p1.y)});for(var m,v,u=o[0]||0,d=o[0]||0,h=o[1]||0,g=o[1]||0,b=0;b<o.length/2;b++)m=o[2*b],v=o[2*b+1],u=Math.min(u,m),d=Math.max(d,m),h=Math.min(h,v),g=Math.max(g,v);var w=this.fontSize();return{x:u-w/2,y:h-w/2,width:d-u+w,height:g-h+w}}destroy(){return k.releaseCanvas(this.dummyCanvas),super.destroy()}}mt.prototype._fillFunc=ya,mt.prototype._strokeFunc=Qe,mt.prototype._fillFuncHit=ya,mt.prototype._strokeFuncHit=Qe,mt.prototype.className="TextPath",mt.prototype._attrsAffectingSize=["text","fontSize","data"],Oe(mt),T.addGetterSetter(mt,"data"),T.addGetterSetter(mt,"fontFamily","Arial"),T.addGetterSetter(mt,"fontSize",12,W()),T.addGetterSetter(mt,"fontStyle","normal"),T.addGetterSetter(mt,"align","left"),T.addGetterSetter(mt,"letterSpacing",0,W()),T.addGetterSetter(mt,"textBaseline","middle"),T.addGetterSetter(mt,"fontVariant","normal"),T.addGetterSetter(mt,"text",""),T.addGetterSetter(mt,"textDecoration",null),T.addGetterSetter(mt,"kerningFunc",null);var uu="tr-konva",Hs=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(p=>p+`.${uu}`).join(" "),Vs="nodesRect",ts=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],Us={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const Ur="ontouchstart"in ne._global;var $s=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],Vt=1e8;function Gs(p,o,u){const d=u.x+(p.x-u.x)*Math.cos(o)-(p.y-u.y)*Math.sin(o),h=u.y+(p.x-u.x)*Math.sin(o)+(p.y-u.y)*Math.cos(o);return Object.assign(Object.assign({},p),{rotation:p.rotation+o,x:d,y:h})}class Se extends ie{constructor(o){super(o),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Hs,this.update),this.getNode()&&this.update()}attachTo(o){return this.setNode(o),this}setNode(o){return k.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([o])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return uu+this._id}setNodes(o=[]){return this._nodes&&this._nodes.length&&this.detach(),this._nodes=o,1===o.length&&this.useSingleNodeRotation()?this.rotation(o[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(d=>{const h=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},g=d._attrsAffectingSize.map(m=>m+"Change."+this._getEventNamespace()).join(" ");d.on(g,h),d.on(ts.map(m=>m+`.${this._getEventNamespace()}`).join(" "),h),d.on(`absoluteTransformChange.${this._getEventNamespace()}`,h),this._proxyDrag(d)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(o){let u;o.on(`dragstart.${this._getEventNamespace()}`,d=>{u=o.getAbsolutePosition(),!this.isDragging()&&o!==this.findOne(".back")&&this.startDrag(d,!1)}),o.on(`dragmove.${this._getEventNamespace()}`,d=>{if(!u)return;const h=o.getAbsolutePosition(),g=h.x-u.x,m=h.y-u.y;this.nodes().forEach(v=>{if(v===o||v.isDragging())return;const b=v.getAbsolutePosition();v.setAbsolutePosition({x:b.x+g,y:b.y+m}),v.startDrag(d)}),u=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(o=>{o.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Vs),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Vs,this.__getNodeRect)}__getNodeShape(o,u=this.rotation(),d){var h=o.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),g=o.getAbsoluteScale(d),m=o.getAbsolutePosition(d),v=h.x*g.x-o.offsetX()*g.x,b=h.y*g.y-o.offsetY()*g.y;const w=(ne.getAngle(o.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return Gs({x:m.x+v*Math.cos(w)+b*Math.sin(-w),y:m.y+b*Math.cos(w)+v*Math.sin(w),width:h.width*g.x,height:h.height*g.y,rotation:w},-ne.getAngle(u),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-Vt,y:-Vt,width:0,height:0,rotation:0};const u=[];this.nodes().map(w=>{const E=w.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var I=[{x:E.x,y:E.y},{x:E.x+E.width,y:E.y},{x:E.x+E.width,y:E.y+E.height},{x:E.x,y:E.y+E.height}],M=w.getAbsoluteTransform();I.forEach(function(R){var S=M.point(R);u.push(S)})});const d=new zt;var h,g,m,v;d.rotate(-ne.getAngle(this.rotation())),u.forEach(function(w){var E=d.point(w);void 0===h&&(h=m=E.x,g=v=E.y),h=Math.min(h,E.x),g=Math.min(g,E.y),m=Math.max(m,E.x),v=Math.max(v,E.y)}),d.invert();const b=d.point({x:h,y:g});return{x:b.x,y:b.y,width:m-h,height:v-g,rotation:ne.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),$s.forEach(function(o){this._createAnchor(o)}.bind(this)),this._createAnchor("rotater")}_createAnchor(o){var u=new sn({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:o+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Ur?10:"auto"}),d=this;u.on("mousedown touchstart",function(h){d._handleMouseDown(h)}),u.on("dragstart",h=>{u.stopDrag(),h.cancelBubble=!0}),u.on("dragend",h=>{h.cancelBubble=!0}),u.on("mouseenter",()=>{var h=ne.getAngle(this.rotation()),g=function Lt(p,o){if("rotater"===p)return"crosshair";o+=k.degToRad(Us[p]||0);var u=(k.radToDeg(o)%360+360)%360;return k._inRange(u,337.5,360)||k._inRange(u,0,22.5)?"ns-resize":k._inRange(u,22.5,67.5)?"nesw-resize":k._inRange(u,67.5,112.5)?"ew-resize":k._inRange(u,112.5,157.5)?"nwse-resize":k._inRange(u,157.5,202.5)?"ns-resize":k._inRange(u,202.5,247.5)?"nesw-resize":k._inRange(u,247.5,292.5)?"ew-resize":k._inRange(u,292.5,337.5)?"nwse-resize":(k.error("Transformer has unknown angle for cursor detection: "+u),"pointer")}(o,h);u.getStage().content&&(u.getStage().content.style.cursor=g),this._cursorChange=!0}),u.on("mouseout",()=>{u.getStage().content&&(u.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(u)}_createBack(){var o=new U({name:"back",width:0,height:0,draggable:!0,sceneFunc(u){var d=this.getParent(),h=d.padding();u.beginPath(),u.rect(-h,-h,this.width()+2*h,this.height()+2*h),u.moveTo(this.width()/2,-h),d.rotateEnabled()&&u.lineTo(this.width()/2,-d.rotateAnchorOffset()*k._sign(this.height())-h),u.fillStrokeShape(this)},hitFunc:(u,d)=>{if(this.shouldOverdrawWholeArea()){var h=this.padding();u.beginPath(),u.rect(-h,-h,d.width()+2*h,d.height()+2*h),u.fillStrokeShape(d)}}});this.add(o),this._proxyDrag(o),o.on("dragstart",u=>{u.cancelBubble=!0}),o.on("dragmove",u=>{u.cancelBubble=!0}),o.on("dragend",u=>{u.cancelBubble=!0}),this.on("dragmove",u=>{this.update()})}_handleMouseDown(o){this._movingAnchorName=o.target.name().split(" ")[0];var u=this._getNodeRect(),d=u.width,h=u.height,g=Math.sqrt(Math.pow(d,2)+Math.pow(h,2));this.sin=Math.abs(h/g),this.cos=Math.abs(d/g),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var m=o.target.getAbsolutePosition(),v=o.target.getStage().getPointerPosition();this._anchorDragOffset={x:v.x-m.x,y:v.y-m.y},this._fire("transformstart",{evt:o.evt,target:this.getNode()}),this._nodes.forEach(b=>{b._fire("transformstart",{evt:o.evt,target:b})})}_handleMouseMove(o){var u,d,h,g=this.findOne("."+this._movingAnchorName),m=g.getStage();m.setPointersPositions(o);const v=m.getPointerPosition();let b={x:v.x-this._anchorDragOffset.x,y:v.y-this._anchorDragOffset.y};const w=g.getAbsolutePosition();this.anchorDragBoundFunc()&&(b=this.anchorDragBoundFunc()(w,b,o)),g.setAbsolutePosition(b);const E=g.getAbsolutePosition();if(w.x!==E.x||w.y!==E.y){if("rotater"===this._movingAnchorName){var I=this._getNodeRect();u=g.x()-I.width/2,d=-g.y()+I.height/2;let Ae=Math.atan2(-d,u)+Math.PI/2;I.height<0&&(Ae-=Math.PI);const ge=ne.getAngle(this.rotation())+Ae,we=ne.getAngle(this.rotationSnapTolerance()),ke=function Ws(p,o,u){let d=o;for(let h=0;h<p.length;h++){const g=ne.getAngle(p[h]),m=Math.abs(g-o)%(2*Math.PI);Math.min(m,2*Math.PI-m)<u&&(d=g)}return d}(this.rotationSnaps(),ge,we)-I.rotation,qe=function zs(p,o){const u=function Sn(p){return{x:p.x+p.width/2*Math.cos(p.rotation)+p.height/2*Math.sin(-p.rotation),y:p.y+p.height/2*Math.cos(p.rotation)+p.width/2*Math.sin(p.rotation)}}(p);return Gs(p,o,u)}(I,ke);return void this._fitNodesInto(qe,o)}var R=this.keepRatio()||o.shiftKey,G=this.centeredScaling()||o.altKey;if("top-left"===this._movingAnchorName){if(R){var S=G?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};h=Math.sqrt(Math.pow(S.x-g.x(),2)+Math.pow(S.y-g.y(),2));var j=this.findOne(".top-left").x()>S.x?-1:1,O=this.findOne(".top-left").y()>S.y?-1:1;u=h*this.cos*j,d=h*this.sin*O,this.findOne(".top-left").x(S.x-u),this.findOne(".top-left").y(S.y-d)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(g.y());else if("top-right"===this._movingAnchorName){R&&(S=G?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()},h=Math.sqrt(Math.pow(g.x()-S.x,2)+Math.pow(S.y-g.y(),2)),j=this.findOne(".top-right").x()<S.x?-1:1,O=this.findOne(".top-right").y()>S.y?-1:1,u=h*this.cos*j,d=h*this.sin*O,this.findOne(".top-right").x(S.x+u),this.findOne(".top-right").y(S.y-d));var L=g.position();this.findOne(".top-left").y(L.y),this.findOne(".bottom-right").x(L.x)}else"middle-left"===this._movingAnchorName?this.findOne(".top-left").x(g.x()):"middle-right"===this._movingAnchorName?this.findOne(".bottom-right").x(g.x()):"bottom-left"===this._movingAnchorName?(R&&(S=G?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()},h=Math.sqrt(Math.pow(S.x-g.x(),2)+Math.pow(g.y()-S.y,2)),j=S.x<g.x()?-1:1,O=g.y()<S.y?-1:1,d=h*this.sin*O,g.x(S.x-(u=h*this.cos*j)),g.y(S.y+d)),L=g.position(),this.findOne(".top-left").x(L.x),this.findOne(".bottom-right").y(L.y)):"bottom-center"===this._movingAnchorName?this.findOne(".bottom-right").y(g.y()):"bottom-right"===this._movingAnchorName?R&&(S=G?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()},h=Math.sqrt(Math.pow(g.x()-S.x,2)+Math.pow(g.y()-S.y,2)),j=this.findOne(".bottom-right").x()<S.x?-1:1,O=this.findOne(".bottom-right").y()<S.y?-1:1,u=h*this.cos*j,d=h*this.sin*O,this.findOne(".bottom-right").x(S.x+u),this.findOne(".bottom-right").y(S.y+d)):console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(G=this.centeredScaling()||o.altKey){var z=this.findOne(".top-left"),Q=this.findOne(".bottom-right"),oe=z.x(),J=z.y(),ce=this.getWidth()-Q.x(),se=this.getHeight()-Q.y();Q.move({x:-oe,y:-J}),z.move({x:ce,y:se})}var de=this.findOne(".top-left").getAbsolutePosition();u=de.x,d=de.y;var N=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),K=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:u,y:d,width:N,height:K,rotation:ne.getAngle(this.rotation())},o)}}_handleMouseUp(o){this._removeEvents(o)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(o){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var u=this.getNode();this._fire("transformend",{evt:o,target:u}),u&&this._nodes.forEach(d=>{d._fire("transformend",{evt:o,target:d})}),this._movingAnchorName=null}}_fitNodesInto(o,u){var d=this._getNodeRect();if(k._inRange(o.width,2*-this.padding()-1,1))return void this.update();if(k._inRange(o.height,2*-this.padding()-1,1))return void this.update();const g=this.flipEnabled();var m=new zt;if(m.rotate(ne.getAngle(this.rotation())),this._movingAnchorName&&o.width<0&&this._movingAnchorName.indexOf("left")>=0){const I=m.point({x:2*-this.padding(),y:0});if(o.x+=I.x,o.y+=I.y,o.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=I.x,this._anchorDragOffset.y-=I.y,!g)return void this.update()}else if(this._movingAnchorName&&o.width<0&&this._movingAnchorName.indexOf("right")>=0){const I=m.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=I.x,this._anchorDragOffset.y-=I.y,o.width+=2*this.padding(),!g)return void this.update()}if(this._movingAnchorName&&o.height<0&&this._movingAnchorName.indexOf("top")>=0){const I=m.point({x:0,y:2*-this.padding()});if(o.x+=I.x,o.y+=I.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=I.x,this._anchorDragOffset.y-=I.y,o.height+=2*this.padding(),!g)return void this.update()}else if(this._movingAnchorName&&o.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const I=m.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=I.x,this._anchorDragOffset.y-=I.y,o.height+=2*this.padding(),!g)return void this.update()}if(this.boundBoxFunc()){const I=this.boundBoxFunc()(d,o);I?o=I:k.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const v=1e7,b=new zt;b.translate(d.x,d.y),b.rotate(d.rotation),b.scale(d.width/v,d.height/v);const w=new zt;w.translate(o.x,o.y),w.rotate(o.rotation),w.scale(o.width/v,o.height/v);const E=w.multiply(b.invert());this._nodes.forEach(I=>{var M;const R=I.getParent().getAbsoluteTransform(),S=I.getTransform().copy();S.translate(I.offsetX(),I.offsetY());const j=new zt;j.multiply(R.copy().invert()).multiply(E).multiply(R).multiply(S);const O=j.decompose();I.setAttrs(O),this._fire("transform",{evt:u,target:I}),I._fire("transform",{evt:u,target:I}),null===(M=I.getLayer())||void 0===M||M.batchDraw()}),this.rotation(k._getRotation(o.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(o,u){this.findOne(o).setAttrs(u)}update(){var o,u=this._getNodeRect();this.rotation(k._getRotation(u.rotation));var d=u.width,h=u.height,g=this.enabledAnchors(),m=this.resizeEnabled(),v=this.padding(),b=this.anchorSize();this.find("._anchor").forEach(w=>{w.setAttrs({width:b,height:b,offsetX:b/2,offsetY:b/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:b/2+v,offsetY:b/2+v,visible:m&&g.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:d/2,y:0,offsetY:b/2+v,visible:m&&g.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:d,y:0,offsetX:b/2-v,offsetY:b/2+v,visible:m&&g.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:h/2,offsetX:b/2+v,visible:m&&g.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:d,y:h/2,offsetX:b/2-v,visible:m&&g.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:h,offsetX:b/2+v,offsetY:b/2-v,visible:m&&g.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:d/2,y:h,offsetY:b/2-v,visible:m&&g.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:d,y:h,offsetX:b/2-v,offsetY:b/2-v,visible:m&&g.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:d/2,y:-this.rotateAnchorOffset()*k._sign(h)-v,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:d,height:h,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),null===(o=this.getLayer())||void 0===o||o.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var o=this.findOne("."+this._movingAnchorName);o&&o.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),ie.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return q.prototype.toObject.call(this)}clone(o){return q.prototype.clone.call(this,o)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}}Se.prototype.className="Transformer",Oe(Se),T.addGetterSetter(Se,"enabledAnchors",$s,function Gd(p){return p instanceof Array||k.warn("enabledAnchors value should be an array"),p instanceof Array&&p.forEach(function(o){-1===$s.indexOf(o)&&k.warn("Unknown anchor name: "+o+". Available names are: "+$s.join(", "))}),p||[]}),T.addGetterSetter(Se,"flipEnabled",!0,gn()),T.addGetterSetter(Se,"resizeEnabled",!0),T.addGetterSetter(Se,"anchorSize",10,W()),T.addGetterSetter(Se,"rotateEnabled",!0),T.addGetterSetter(Se,"rotationSnaps",[]),T.addGetterSetter(Se,"rotateAnchorOffset",50,W()),T.addGetterSetter(Se,"rotationSnapTolerance",5,W()),T.addGetterSetter(Se,"borderEnabled",!0),T.addGetterSetter(Se,"anchorStroke","rgb(0, 161, 255)"),T.addGetterSetter(Se,"anchorStrokeWidth",1,W()),T.addGetterSetter(Se,"anchorFill","white"),T.addGetterSetter(Se,"anchorCornerRadius",0,W()),T.addGetterSetter(Se,"borderStroke","rgb(0, 161, 255)"),T.addGetterSetter(Se,"borderStrokeWidth",1,W()),T.addGetterSetter(Se,"borderDash"),T.addGetterSetter(Se,"keepRatio",!0),T.addGetterSetter(Se,"centeredScaling",!1),T.addGetterSetter(Se,"ignoreStroke",!1),T.addGetterSetter(Se,"padding",0,W()),T.addGetterSetter(Se,"node"),T.addGetterSetter(Se,"nodes"),T.addGetterSetter(Se,"boundBoxFunc"),T.addGetterSetter(Se,"anchorDragBoundFunc"),T.addGetterSetter(Se,"shouldOverdrawWholeArea",!1),T.addGetterSetter(Se,"useSingleNodeRotation",!0),T.backCompat(Se,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class _r extends U{_sceneFunc(o){o.beginPath(),o.arc(0,0,this.radius(),0,ne.getAngle(this.angle()),this.clockwise()),o.lineTo(0,0),o.closePath(),o.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(o){this.radius(o/2)}setHeight(o){this.radius(o/2)}}function cu(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}_r.prototype.className="Wedge",_r.prototype._centroid=!0,_r.prototype._attrsAffectingSize=["radius"],Oe(_r),T.addGetterSetter(_r,"radius",0,W()),T.addGetterSetter(_r,"angle",0,W()),T.addGetterSetter(_r,"clockwise",!1),T.backCompat(_r,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var zd=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Em=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function du(p,o,u,d,h){var g=u-o,m=h-d;return 0===g?d+m/2:0===m?d:m*((p-o)/g)+d}function bi(p,o,u){var d=4*(u*p.width+o),h=[];return h.push(p.data[d++],p.data[d++],p.data[d++],p.data[d++]),h}function qs(p,o){return Math.sqrt(Math.pow(p[0]-o[0],2)+Math.pow(p[1]-o[1],2)+Math.pow(p[2]-o[2],2))}T.addGetterSetter(q,"blurRadius",0,W(),T.afterSetFilter),T.addGetterSetter(q,"brightness",0,W(),T.afterSetFilter),T.addGetterSetter(q,"contrast",0,W(),T.afterSetFilter),T.addGetterSetter(q,"embossStrength",.5,W(),T.afterSetFilter),T.addGetterSetter(q,"embossWhiteLevel",.5,W(),T.afterSetFilter),T.addGetterSetter(q,"embossDirection","top-left",null,T.afterSetFilter),T.addGetterSetter(q,"embossBlend",!1,null,T.afterSetFilter),T.addGetterSetter(q,"enhance",0,W(),T.afterSetFilter),T.addGetterSetter(q,"hue",0,W(),T.afterSetFilter),T.addGetterSetter(q,"saturation",0,W(),T.afterSetFilter),T.addGetterSetter(q,"luminance",0,W(),T.afterSetFilter),T.addGetterSetter(q,"hue",0,W(),T.afterSetFilter),T.addGetterSetter(q,"saturation",0,W(),T.afterSetFilter),T.addGetterSetter(q,"value",0,W(),T.afterSetFilter),T.addGetterSetter(q,"kaleidoscopePower",2,W(),T.afterSetFilter),T.addGetterSetter(q,"kaleidoscopeAngle",0,W(),T.afterSetFilter),T.addGetterSetter(q,"threshold",0,W(),T.afterSetFilter),T.addGetterSetter(q,"noise",.2,W(),T.afterSetFilter),T.addGetterSetter(q,"pixelSize",8,W(),T.afterSetFilter),T.addGetterSetter(q,"levels",.5,W(),T.afterSetFilter),T.addGetterSetter(q,"red",0,function(p){return this._filterUpToDate=!1,p>255?255:p<0?0:Math.round(p)}),T.addGetterSetter(q,"green",0,function(p){return this._filterUpToDate=!1,p>255?255:p<0?0:Math.round(p)}),T.addGetterSetter(q,"blue",0,Bi,T.afterSetFilter),T.addGetterSetter(q,"red",0,function(p){return this._filterUpToDate=!1,p>255?255:p<0?0:Math.round(p)}),T.addGetterSetter(q,"green",0,function(p){return this._filterUpToDate=!1,p>255?255:p<0?0:Math.round(p)}),T.addGetterSetter(q,"blue",0,Bi,T.afterSetFilter),T.addGetterSetter(q,"alpha",1,function(p){return this._filterUpToDate=!1,p>1?1:p<0?0:p}),T.addGetterSetter(q,"threshold",.5,W(),T.afterSetFilter);const ba=ou.Util._assign(ou,{Arc:wn,Arrow:qt,Circle:Pt,Ellipse:Fr,Image:Cn,Label:Zi,Tag:vr,Line:jn,Path:Ye,Rect:sn,RegularPolygon:En,Ring:on,Sprite:Hn,Star:Zn,Text:We,TextPath:mt,Transformer:Se,Wedge:_r,Filters:{Blur:function(o){var u=Math.round(this.blurRadius());u>0&&function Dm(p,o){var g,m,v,b,w,E,I,M,R,S,j,O,L,G,z,Q,oe,J,ce,se,de,N,K,Ae,u=p.data,d=p.width,h=p.height,ge=o+o+1,we=d-1,Ut=h-1,ke=o+1,qe=ke*(ke+1)/2,Bt=new cu,ln=null,Le=Bt,it=null,un=null,er=zd[o],st=Em[o];for(v=1;v<ge;v++)Le=Le.next=new cu,v===ke&&(ln=Le);for(Le.next=Bt,I=E=0,m=0;m<h;m++){for(Q=oe=J=ce=M=R=S=j=0,O=ke*(se=u[E]),L=ke*(de=u[E+1]),G=ke*(N=u[E+2]),z=ke*(K=u[E+3]),M+=qe*se,R+=qe*de,S+=qe*N,j+=qe*K,Le=Bt,v=0;v<ke;v++)Le.r=se,Le.g=de,Le.b=N,Le.a=K,Le=Le.next;for(v=1;v<ke;v++)M+=(Le.r=se=u[b=E+((we<v?we:v)<<2)])*(Ae=ke-v),R+=(Le.g=de=u[b+1])*Ae,S+=(Le.b=N=u[b+2])*Ae,j+=(Le.a=K=u[b+3])*Ae,Q+=se,oe+=de,J+=N,ce+=K,Le=Le.next;for(it=Bt,un=ln,g=0;g<d;g++)u[E+3]=K=j*er>>st,0!==K?(u[E]=(M*er>>st)*(K=255/K),u[E+1]=(R*er>>st)*K,u[E+2]=(S*er>>st)*K):u[E]=u[E+1]=u[E+2]=0,M-=O,R-=L,S-=G,j-=z,O-=it.r,L-=it.g,G-=it.b,z-=it.a,b=I+((b=g+o+1)<we?b:we)<<2,M+=Q+=it.r=u[b],R+=oe+=it.g=u[b+1],S+=J+=it.b=u[b+2],j+=ce+=it.a=u[b+3],it=it.next,O+=se=un.r,L+=de=un.g,G+=N=un.b,z+=K=un.a,Q-=se,oe-=de,J-=N,ce-=K,un=un.next,E+=4;I+=d}for(g=0;g<d;g++){for(oe=J=ce=Q=R=S=j=M=0,O=ke*(se=u[E=g<<2]),L=ke*(de=u[E+1]),G=ke*(N=u[E+2]),z=ke*(K=u[E+3]),M+=qe*se,R+=qe*de,S+=qe*N,j+=qe*K,Le=Bt,v=0;v<ke;v++)Le.r=se,Le.g=de,Le.b=N,Le.a=K,Le=Le.next;for(w=d,v=1;v<=o;v++)M+=(Le.r=se=u[E=w+g<<2])*(Ae=ke-v),R+=(Le.g=de=u[E+1])*Ae,S+=(Le.b=N=u[E+2])*Ae,j+=(Le.a=K=u[E+3])*Ae,Q+=se,oe+=de,J+=N,ce+=K,Le=Le.next,v<Ut&&(w+=d);for(E=g,it=Bt,un=ln,m=0;m<h;m++)u[3+(b=E<<2)]=K=j*er>>st,K>0?(u[b]=(M*er>>st)*(K=255/K),u[b+1]=(R*er>>st)*K,u[b+2]=(S*er>>st)*K):u[b]=u[b+1]=u[b+2]=0,M-=O,R-=L,S-=G,j-=z,O-=it.r,L-=it.g,G-=it.b,z-=it.a,b=g+((b=m+ke)<Ut?b:Ut)*d<<2,M+=Q+=it.r=u[b],R+=oe+=it.g=u[b+1],S+=J+=it.b=u[b+2],j+=ce+=it.a=u[b+3],it=it.next,O+=se=un.r,L+=de=un.g,G+=N=un.b,z+=K=un.a,Q-=se,oe-=de,J-=N,ce-=K,un=un.next,E+=d}}(o,u)},Brighten:function(p){var h,o=255*this.brightness(),u=p.data,d=u.length;for(h=0;h<d;h+=4)u[h]+=o,u[h+1]+=o,u[h+2]+=o},Contrast:function(p){var v,o=Math.pow((this.contrast()+100)/100,2),u=p.data,d=u.length,h=150,g=150,m=150;for(v=0;v<d;v+=4)h=u[v],g=u[v+1],m=u[v+2],h/=255,h-=.5,h*=o,h+=.5,g/=255,g-=.5,g*=o,g+=.5,m/=255,m-=.5,m*=o,m+=.5,g=(g*=255)<0?0:g>255?255:g,m=(m*=255)<0?0:m>255?255:m,u[v]=h=(h*=255)<0?0:h>255?255:h,u[v+1]=g,u[v+2]=m},Emboss:function(p){var o=10*this.embossStrength(),u=255*this.embossWhiteLevel(),d=this.embossDirection(),h=this.embossBlend(),g=0,m=0,v=p.data,b=p.width,w=p.height,E=4*b,I=w;switch(d){case"top-left":g=-1,m=-1;break;case"top":g=-1,m=0;break;case"top-right":g=-1,m=1;break;case"right":g=0,m=1;break;case"bottom-right":g=1,m=1;break;case"bottom":g=1,m=0;break;case"bottom-left":g=1,m=-1;break;case"left":g=0,m=-1;break;default:k.error("Unknown emboss direction: "+d)}do{var M=(I-1)*E,R=g;I+R<1&&(R=0),I+R>w&&(R=0);var S=(I-1+R)*b*4,j=b;do{var O=M+4*(j-1),L=m;j+L<1&&(L=0),j+L>b&&(L=0);var G=S+4*(j-1+L),Q=v[O+1]-v[G+1],oe=v[O+2]-v[G+2],J=v[O]-v[G],ce=J>0?J:-J;if((Q>0?Q:-Q)>ce&&(J=Q),(oe>0?oe:-oe)>ce&&(J=oe),J*=o,h){var N=v[O]+J,K=v[O+1]+J,Ae=v[O+2]+J;v[O]=N>255?255:N<0?0:N,v[O+1]=K>255?255:K<0?0:K,v[O+2]=Ae>255?255:Ae<0?0:Ae}else{var ge=u-J;ge<0?ge=0:ge>255&&(ge=255),v[O]=v[O+1]=v[O+2]=ge}}while(--j)}while(--I)},Enhance:function(p){var g,b,I,M,o=p.data,u=o.length,d=o[0],h=d,m=o[1],v=m,w=o[2],E=w,R=this.enhance();if(0!==R){for(M=0;M<u;M+=4)(g=o[M+0])<d?d=g:g>h&&(h=g),(b=o[M+1])<m?m=b:b>v&&(v=b),(I=o[M+2])<w?w=I:I>E&&(E=I);var S,j,O,L,G,z,Q,oe,J;for(h===d&&(h=255,d=0),v===m&&(v=255,m=0),E===w&&(E=255,w=0),R>0?(j=h+R*(255-h),O=d-R*(d-0),G=v+R*(255-v),z=m-R*(m-0),oe=E+R*(255-E),J=w-R*(w-0)):(j=h+R*(h-(S=.5*(h+d))),O=d+R*(d-S),G=v+R*(v-(L=.5*(v+m))),z=m+R*(m-L),oe=E+R*(E-(Q=.5*(E+w))),J=w+R*(w-Q)),M=0;M<u;M+=4)o[M+0]=du(o[M+0],d,h,O,j),o[M+1]=du(o[M+1],m,v,z,G),o[M+2]=du(o[M+2],w,E,J,oe)}},Grayscale:function(p){var d,h,o=p.data,u=o.length;for(d=0;d<u;d+=4)o[d]=h=.34*o[d]+.5*o[d+1]+.16*o[d+2],o[d+1]=h,o[d+2]=h},HSL:function(p){var v,z,Q,oe,J,o=p.data,u=o.length,h=Math.pow(2,this.saturation()),g=Math.abs(this.hue()+360)%360,m=127*this.luminance(),b=1*h*Math.cos(g*Math.PI/180),w=1*h*Math.sin(g*Math.PI/180),E=.299+.701*b+.167*w,I=.587-.587*b+.33*w,M=.114-.114*b-.497*w,R=.299-.299*b-.328*w,S=.587+.413*b+.035*w,j=.114-.114*b+.293*w,O=.299-.3*b+1.25*w,L=.587-.586*b-1.05*w,G=.114+.886*b-.2*w;for(v=0;v<u;v+=4)J=o[v+3],o[v+0]=E*(z=o[v+0])+I*(Q=o[v+1])+M*(oe=o[v+2])+m,o[v+1]=R*z+S*Q+j*oe+m,o[v+2]=O*z+L*Q+G*oe+m,o[v+3]=J},HSV:function(p){var m,G,z,Q,oe,o=p.data,u=o.length,d=Math.pow(2,this.value()),h=Math.pow(2,this.saturation()),g=Math.abs(this.hue()+360)%360,v=d*h*Math.cos(g*Math.PI/180),b=d*h*Math.sin(g*Math.PI/180),w=.299*d+.701*v+.167*b,E=.587*d-.587*v+.33*b,I=.114*d-.114*v-.497*b,M=.299*d-.299*v-.328*b,R=.587*d+.413*v+.035*b,S=.114*d-.114*v+.293*b,j=.299*d-.3*v+1.25*b,O=.587*d-.586*v-1.05*b,L=.114*d+.886*v-.2*b;for(m=0;m<u;m+=4)oe=o[m+3],o[m+0]=w*(G=o[m+0])+E*(z=o[m+1])+I*(Q=o[m+2]),o[m+1]=M*G+R*z+S*Q,o[m+2]=j*G+O*z+L*Q,o[m+3]=oe},Invert:function(p){var d,o=p.data,u=o.length;for(d=0;d<u;d+=4)o[d]=255-o[d],o[d+1]=255-o[d+1],o[d+2]=255-o[d+2]},Kaleidoscope:function(p){var d,h,g,m,b,w,E,I,M,o=p.width,u=p.height,R=Math.round(this.kaleidoscopePower()),S=Math.round(this.kaleidoscopeAngle()),j=Math.floor(o*(S%360)/360);if(!(R<1)){var O=k.createCanvasElement();O.width=o,O.height=u;var L=O.getContext("2d").getImageData(0,0,o,u);k.releaseCanvas(O),function(p,o,u){var w,E,I,O,d=p.data,h=o.data,g=p.width,m=p.height,v=u.polarCenterX||g/2,b=u.polarCenterY||m/2,M=0,R=0,S=0,j=0,L=Math.sqrt(v*v+b*b);E=g-v,I=m-b,L=(O=Math.sqrt(E*E+I*I))>L?O:L;var Q,oe,ce,se,G=m,z=g,J=360/z*Math.PI/180;for(oe=0;oe<z;oe+=1)for(ce=Math.sin(oe*J),se=Math.cos(oe*J),Q=0;Q<G;Q+=1)E=Math.floor(v+L*Q/G*se),M=d[0+(w=4*((I=Math.floor(b+L*Q/G*ce))*g+E))],R=d[w+1],S=d[w+2],j=d[w+3],h[0+(w=4*(oe+Q*g))]=M,h[w+1]=R,h[w+2]=S,h[w+3]=j}(p,L,{polarCenterX:o/2,polarCenterY:u/2});for(var G=o/Math.pow(2,R);G<=8;)G*=2,R-=1;var z=G=Math.ceil(G),Q=0,oe=z,J=1;for(j+G>o&&(Q=z,oe=0,J=-1),h=0;h<u;h+=1)for(d=Q;d!==oe;d+=J)g=Math.round(d+j)%o,b=L.data[1+(I=4*(o*h+g))],w=L.data[I+2],E=L.data[I+3],L.data[0+(M=4*(o*h+d))]=L.data[I+0],L.data[M+1]=b,L.data[M+2]=w,L.data[M+3]=E;for(h=0;h<u;h+=1)for(z=Math.floor(G),m=0;m<R;m+=1){for(d=0;d<z+1;d+=1)b=L.data[1+(I=4*(o*h+d))],w=L.data[I+2],E=L.data[I+3],L.data[0+(M=4*(o*h+2*z-d-1))]=L.data[I+0],L.data[M+1]=b,L.data[M+2]=w,L.data[M+3]=E;z*=2}!function(p,o,u){var w,E,I,M,R,G,d=p.data,h=o.data,g=p.width,m=p.height,v=u.polarCenterX||g/2,b=u.polarCenterY||m/2,S=0,j=0,O=0,L=0,z=Math.sqrt(v*v+b*b);E=g-v,I=m-b,z=(G=Math.sqrt(E*E+I*I))>z?G:z;var J,ce,de,Q=m,oe=g,se=u.polarRotation||0;for(E=0;E<g;E+=1)for(I=0;I<m;I+=1)M=E-v,R=I-b,J=Math.sqrt(M*M+R*R)*Q/z,ce=(ce=(180*Math.atan2(R,M)/Math.PI+360+se)%360)*oe/360,de=Math.floor(ce),S=d[0+(w=4*(Math.floor(J)*g+de))],j=d[w+1],O=d[w+2],L=d[w+3],h[0+(w=4*(I*g+E))]=S,h[w+1]=j,h[w+2]=O,h[w+3]=L}(L,p,{polarRotation:0})}},Mask:function(p){var u=function Lm(p,o){var u=bi(p,0,0),d=bi(p,p.width-1,0),h=bi(p,0,p.height-1),g=bi(p,p.width-1,p.height-1),m=o||10;if(qs(u,d)<m&&qs(d,g)<m&&qs(g,h)<m&&qs(h,u)<m){for(var v=function Fm(p){for(var o=[0,0,0],u=0;u<p.length;u++)o[0]+=p[u][0],o[1]+=p[u][1],o[2]+=p[u][2];return o[0]/=p.length,o[1]/=p.length,o[2]/=p.length,o}([d,u,g,h]),b=[],w=0;w<p.width*p.height;w++){var E=qs(v,[p.data[4*w],p.data[4*w+1],p.data[4*w+2]]);b[w]=E<m?0:255}return b}}(p,this.threshold());return u&&(u=function Wd(p,o,u){for(var d=[1,1,1,1,0,1,1,1,1],h=Math.round(Math.sqrt(d.length)),g=Math.floor(h/2),m=[],v=0;v<u;v++)for(var b=0;b<o;b++){for(var w=v*o+b,E=0,I=0;I<h;I++)for(var M=0;M<h;M++){var R=v+I-g,S=b+M-g;R>=0&&R<u&&S>=0&&S<o&&(E+=p[R*o+S]*d[I*h+M])}m[w]=2040===E?255:0}return m}(u,p.width,p.height),u=function Gr(p,o,u){for(var d=[1,1,1,1,1,1,1,1,1],h=Math.round(Math.sqrt(d.length)),g=Math.floor(h/2),m=[],v=0;v<u;v++)for(var b=0;b<o;b++){for(var w=v*o+b,E=0,I=0;I<h;I++)for(var M=0;M<h;M++){var R=v+I-g,S=b+M-g;R>=0&&R<u&&S>=0&&S<o&&(E+=p[R*o+S]*d[I*h+M])}m[w]=E>=1020?255:0}return m}(u,p.width,p.height),u=function fu(p,o,u){for(var d=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],h=Math.round(Math.sqrt(d.length)),g=Math.floor(h/2),m=[],v=0;v<u;v++)for(var b=0;b<o;b++){for(var w=v*o+b,E=0,I=0;I<h;I++)for(var M=0;M<h;M++){var R=v+I-g,S=b+M-g;R>=0&&R<u&&S>=0&&S<o&&(E+=p[R*o+S]*d[I*h+M])}m[w]=E}return m}(u,p.width,p.height),function $r(p,o){for(var u=0;u<p.width*p.height;u++)p.data[4*u+3]=o[u]}(p,u)),p},Noise:function(p){var g,o=255*this.noise(),u=p.data,d=u.length,h=o/2;for(g=0;g<d;g+=4)u[g+0]+=h-2*h*Math.random(),u[g+1]+=h-2*h*Math.random(),u[g+2]+=h-2*h*Math.random()},Pixelate:function(p){var h,g,m,v,b,w,E,R,S,j,O,L,G,z,o=Math.ceil(this.pixelSize()),u=p.width,d=p.height,I=Math.ceil(u/o),M=Math.ceil(d/o),Q=p.data;if(o<=0)k.error("pixelSize value can not be <= 0");else for(L=0;L<I;L+=1)for(G=0;G<M;G+=1){for(v=0,b=0,w=0,E=0,S=(R=L*o)+o,O=(j=G*o)+o,z=0,h=R;h<S;h+=1)if(!(h>=u))for(g=j;g<O;g+=1)g>=d||(v+=Q[0+(m=4*(u*g+h))],b+=Q[m+1],w+=Q[m+2],E+=Q[m+3],z+=1);for(v/=z,b/=z,w/=z,E/=z,h=R;h<S;h+=1)if(!(h>=u))for(g=j;g<O;g+=1)g>=d||(Q[0+(m=4*(u*g+h))]=v,Q[m+1]=b,Q[m+2]=w,Q[m+3]=E)}},Posterize:function(p){var g,o=Math.round(254*this.levels())+1,u=p.data,d=u.length,h=255/o;for(g=0;g<d;g+=1)u[g]=Math.floor(u[g]/h)*h},RGB:function(p){var m,v,o=p.data,u=o.length,d=this.red(),h=this.green(),g=this.blue();for(m=0;m<u;m+=4)o[m]=(v=(.34*o[m]+.5*o[m+1]+.16*o[m+2])/255)*d,o[m+1]=v*h,o[m+2]=v*g,o[m+3]=o[m+3]},RGBA:function(p){var v,b,o=p.data,u=o.length,d=this.red(),h=this.green(),g=this.blue(),m=this.alpha();for(v=0;v<u;v+=4)o[v]=d*m+o[v]*(b=1-m),o[v+1]=h*m+o[v+1]*b,o[v+2]=g*m+o[v+2]*b},Sepia:function(p){var d,h,g,m,o=p.data,u=o.length;for(d=0;d<u;d+=4)h=o[d+0],g=o[d+1],m=o[d+2],o[d+0]=Math.min(255,.393*h+.769*g+.189*m),o[d+1]=Math.min(255,.349*h+.686*g+.168*m),o[d+2]=Math.min(255,.272*h+.534*g+.131*m)},Solarize:function(p){var o=p.data,u=p.width,h=4*u,g=p.height;do{var m=(g-1)*h,v=u;do{var b=m+4*(v-1),w=o[b],E=o[b+1],I=o[b+2];w>127&&(w=255-w),E>127&&(E=255-E),I>127&&(I=255-I),o[b]=w,o[b+1]=E,o[b+2]=I}while(--v)}while(--g)},Threshold:function(p){var h,o=255*this.threshold(),u=p.data,d=u.length;for(h=0;h<d;h+=1)u[h]=u[h]<o?0:255}}})}},Bl=>{Bl(Bl.s=342)}]);